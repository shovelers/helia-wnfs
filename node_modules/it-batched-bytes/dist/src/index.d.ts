/**
 * @packageDocumentation
 *
 * The final batch may be smaller than the max.
 *
 * @example
 *
 * ```javascript
 * import batch from 'it-batched-bytes'
 * import all from 'it-all'
 *
 * // This can also be an iterator, generator, etc
 * const values = [
 *   Uint8Array.from([0]),
 *   Uint8Array.from([1]),
 *   Uint8Array.from([2]),
 *   Uint8Array.from([3]),
 *   Uint8Array.from([4])
 * ]
 * const batchSize = 2
 *
 * const result = all(batch(values, { size: batchSize }))
 *
 * console.info(result) // [0, 1], [2, 3], [4]
 * ```
 *
 * Async sources must be awaited:
 *
 * ```javascript
 * import batch from 'it-batched-bytes'
 * import all from 'it-all'
 *
 * const values = async function * () {
 *   yield Uint8Array.from([0])
 *   yield Uint8Array.from([1])
 *   yield Uint8Array.from([2])
 *   yield Uint8Array.from([3])
 *   yield Uint8Array.from([4])
 * }
 * const batchSize = 2
 *
 * const result = await all(batch(values, { size: batchSize }))
 *
 * console.info(result) // [0, 1], [2, 3], [4]
 * ```
 */
import { Uint8ArrayList } from 'uint8arraylist';
export interface BatchedBytesOptions {
    /**
     * The minimum number of bytes that should be in a batch (default: 1MB)
     */
    size?: number;
}
export interface AsyncBatchedBytesOptions extends BatchedBytesOptions {
    /**
     * If this amount of time passes, yield all the bytes in the batch even
     * if they are below `size` (default: 0 - e.g. on every tick)
     */
    yieldAfter?: number;
}
export interface BatchedObjectsOptions<T> extends BatchedBytesOptions {
    /**
     * This function should serialize the object and append the
     * result to the passed list
     */
    serialize(object: T, list: Uint8ArrayList): void;
}
export interface AsyncBatchedObjectsOptions<T> extends AsyncBatchedBytesOptions, BatchedObjectsOptions<T> {
}
/**
 * Takes a stream of Uint8Arrays and/or Uint8ArrayLists and store them in
 * an internal buffer. Either once the buffer reaches the requested size
 * or the next event loop tick occurs, yield any bytes from the buffer.
 */
declare function batchedBytes(source: Iterable<Uint8Array | Uint8ArrayList>, options?: BatchedBytesOptions): Iterable<Uint8Array>;
declare function batchedBytes(source: Iterable<Uint8Array | Uint8ArrayList> | AsyncIterable<Uint8Array | Uint8ArrayList>, options?: AsyncBatchedBytesOptions): AsyncIterable<Uint8Array>;
declare function batchedBytes<T>(source: Iterable<T>, options?: BatchedObjectsOptions<T>): Iterable<Uint8Array>;
declare function batchedBytes<T>(source: Iterable<T> | AsyncIterable<T>, options?: AsyncBatchedObjectsOptions<T>): AsyncIterable<Uint8Array>;
export default batchedBytes;
//# sourceMappingURL=index.d.ts.map