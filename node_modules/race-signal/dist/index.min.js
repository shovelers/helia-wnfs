(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.RaceSignal = factory()}(typeof self !== 'undefined' ? self : this, function () {
"use strict";var RaceSignal=(()=>{var s=Object.defineProperty;var c=Object.getOwnPropertyDescriptor;var d=Object.getOwnPropertyNames;var l=Object.prototype.hasOwnProperty;var u=(r,e)=>{for(var t in e)s(r,t,{get:e[t],enumerable:!0})},b=(r,e,t,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of d(e))!l.call(r,n)&&n!==t&&s(r,n,{get:()=>e[n],enumerable:!(o=c(e,n))||o.enumerable});return r};var f=r=>b(s({},"__esModule",{value:!0}),r);var y={};u(y,{AbortError:()=>a,raceSignal:()=>w});var a=class extends Error{type;code;constructor(e,t){super(e??"The operation was aborted"),this.type="aborted",this.name="AbortError",this.code=t??"ABORT_ERR"}};async function w(r,e,t){if(e==null)return r;if(e.aborted)return Promise.reject(new a(t?.errorMessage,t?.errorCode));let o,n=new a(t?.errorMessage,t?.errorCode);try{return await Promise.race([r,new Promise((h,i)=>{o=()=>{i(n)},e.addEventListener("abort",o)})])}finally{o!=null&&e.removeEventListener("abort",o)}}return f(y);})();
return RaceSignal}));
