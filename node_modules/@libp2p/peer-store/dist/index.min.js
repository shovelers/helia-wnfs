(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.Libp2PPeerStore = factory()}(typeof self !== 'undefined' ? self : this, function () {
"use strict";var Libp2PPeerStore=(()=>{var zf=Object.create;var $n=Object.defineProperty;var Gf=Object.getOwnPropertyDescriptor;var Wf=Object.getOwnPropertyNames;var $f=Object.getPrototypeOf,Qf=Object.prototype.hasOwnProperty;var lt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Nt=(e,t)=>{for(var r in t)$n(e,r,{get:t[r],enumerable:!0})},Va=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Wf(t))!Qf.call(e,i)&&i!==r&&$n(e,i,{get:()=>t[i],enumerable:!(n=Gf(t,i))||n.enumerable});return e};var Jt=(e,t,r)=>(r=e!=null?zf($f(e)):{},Va(t||!e||!e.__esModule?$n(r,"default",{value:e,enumerable:!0}):r,e)),Yf=e=>Va($n({},"__esModule",{value:!0}),e);var ct=lt((ig,Fa)=>{Fa.exports={options:{usePureJavaScript:!1}}});var za=lt((sg,Ha)=>{var os={};Ha.exports=os;var qa={};os.encode=function(e,t,r){if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(e instanceof Uint8Array))n=Zf(e,t);else{var i=0,s=t.length,o=t.charAt(0),a=[0];for(i=0;i<e.length;++i){for(var c=0,u=e[i];c<a.length;++c)u+=a[c]<<8,a[c]=u%s,u=u/s|0;for(;u>0;)a.push(u%s),u=u/s|0}for(i=0;e[i]===0&&i<e.length-1;++i)n+=o;for(i=a.length-1;i>=0;--i)n+=t[a[i]]}if(r){var f=new RegExp(".{1,"+r+"}","g");n=n.match(f).join(`\r
`)}return n};os.decode=function(e,t){if(typeof e!="string")throw new TypeError('"input" must be a string.');if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');var r=qa[t];if(!r){r=qa[t]=[];for(var n=0;n<t.length;++n)r[t.charCodeAt(n)]=n}e=e.replace(/\s/g,"");for(var i=t.length,s=t.charAt(0),o=[0],n=0;n<e.length;n++){var a=r[e.charCodeAt(n)];if(a===void 0)return;for(var c=0,u=a;c<o.length;++c)u+=o[c]*i,o[c]=u&255,u>>=8;for(;u>0;)o.push(u&255),u>>=8}for(var f=0;e[f]===s&&f<e.length-1;++f)o.push(0);return typeof Buffer<"u"?Buffer.from(o.reverse()):new Uint8Array(o.reverse())};function Zf(e,t){var r=0,n=t.length,i=t.charAt(0),s=[0];for(r=0;r<e.length();++r){for(var o=0,a=e.at(r);o<s.length;++o)a+=s[o]<<8,s[o]=a%n,a=a/n|0;for(;a>0;)s.push(a%n),a=a/n|0}var c="";for(r=0;e.at(r)===0&&r<e.length()-1;++r)c+=i;for(r=s.length-1;r>=0;--r)c+=t[s[r]];return c}});var Tt=lt((og,Qa)=>{var Ga=ct(),Wa=za(),m=Qa.exports=Ga.util=Ga.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){m.nextTick=process.nextTick,typeof setImmediate=="function"?m.setImmediate=setImmediate:m.setImmediate=m.nextTick;return}if(typeof setImmediate=="function"){m.setImmediate=function(){return setImmediate.apply(void 0,arguments)},m.nextTick=function(a){return setImmediate(a)};return}if(m.setImmediate=function(a){setTimeout(a,0)},typeof window<"u"&&typeof window.postMessage=="function"){let a=function(c){if(c.source===window&&c.data===e){c.stopPropagation();var u=t.slice();t.length=0,u.forEach(function(f){f()})}};var o=a,e="forge.setImmediate",t=[];m.setImmediate=function(c){t.push(c),t.length===1&&window.postMessage(e,"*")},window.addEventListener("message",a,!0)}if(typeof MutationObserver<"u"){var r=Date.now(),n=!0,i=document.createElement("div"),t=[];new MutationObserver(function(){var c=t.slice();t.length=0,c.forEach(function(u){u()})}).observe(i,{attributes:!0});var s=m.setImmediate;m.setImmediate=function(c){Date.now()-r>15?(r=Date.now(),s(c)):(t.push(c),t.length===1&&i.setAttribute("a",n=!n))}}m.nextTick=m.setImmediate})();m.isNodejs=typeof process<"u"&&process.versions&&process.versions.node;m.globalScope=function(){return m.isNodejs?globalThis:typeof self>"u"?window:self}();m.isArray=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};m.isArrayBuffer=function(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer};m.isArrayBufferView=function(e){return e&&m.isArrayBuffer(e.buffer)&&e.byteLength!==void 0};function dn(e){if(!(e===8||e===16||e===24||e===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}m.ByteBuffer=as;function as(e){if(this.data="",this.read=0,typeof e=="string")this.data=e;else if(m.isArrayBuffer(e)||m.isArrayBufferView(e))if(typeof Buffer<"u"&&e instanceof Buffer)this.data=e.toString("binary");else{var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t)}catch{for(var r=0;r<t.length;++r)this.putByte(t[r])}}else(e instanceof as||typeof e=="object"&&typeof e.data=="string"&&typeof e.read=="number")&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}m.ByteStringBuffer=as;var Xf=4096;m.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>Xf&&(this.data.substr(0,1),this._constructedStringLength=0)};m.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};m.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};m.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))};m.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var r=this.data;t>0;)t&1&&(r+=e),t>>>=1,t>0&&(e+=e);return this.data=r,this._optimizeConstructedString(t),this};m.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this};m.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(m.encodeUtf8(e))};m.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};m.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};m.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};m.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255))};m.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))};m.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))};m.ByteStringBuffer.prototype.putInt=function(e,t){dn(t);var r="";do t-=8,r+=String.fromCharCode(e>>t&255);while(t>0);return this.putBytes(r)};m.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)};m.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())};m.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};m.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e};m.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e};m.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e};m.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e};m.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e};m.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e};m.ByteStringBuffer.prototype.getInt=function(e){dn(e);var t=0;do t=(t<<8)+this.data.charCodeAt(this.read++),e-=8;while(e>0);return t};m.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t};m.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};m.ByteStringBuffer.prototype.bytes=function(e){return typeof e>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};m.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)};m.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this};m.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};m.ByteStringBuffer.prototype.copy=function(){var e=m.createBuffer(this.data);return e.read=this.read,e};m.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};m.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};m.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this};m.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16)}return e};m.ByteStringBuffer.prototype.toString=function(){return m.decodeUtf8(this.bytes())};function Jf(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var r=m.isArrayBuffer(e),n=m.isArrayBufferView(e);if(r||n){r?this.data=new DataView(e):this.data=new DataView(e.buffer,e.byteOffset,e.byteLength),this.write="writeOffset"in t?t.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,e!=null&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset)}m.DataBuffer=Jf;m.DataBuffer.prototype.length=function(){return this.write-this.read};m.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};m.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+t);return n.set(r),this.data=new DataView(n.buffer),this};m.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this};m.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var r=0;r<t;++r)this.data.setUint8(e);return this};m.DataBuffer.prototype.putBytes=function(e,t){if(m.isArrayBufferView(e)){var r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(m.isArrayBuffer(e)){var r=new Uint8Array(e);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(e instanceof m.DataBuffer||typeof e=="object"&&typeof e.read=="number"&&typeof e.write=="number"&&m.isArrayBufferView(e.data)){var r=new Uint8Array(e.data.byteLength,e.read,e.length());this.accommodate(r.byteLength);var i=new Uint8Array(e.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(e instanceof m.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary",typeof e=="string"){var s;if(t==="hex")return this.accommodate(Math.ceil(e.length/2)),s=new Uint8Array(this.data.buffer,this.write),this.write+=m.binary.hex.decode(e,s,this.write),this;if(t==="base64")return this.accommodate(Math.ceil(e.length/4)*3),s=new Uint8Array(this.data.buffer,this.write),this.write+=m.binary.base64.decode(e,s,this.write),this;if(t==="utf8"&&(e=m.encodeUtf8(e),t="binary"),t==="binary"||t==="raw")return this.accommodate(e.length),s=new Uint8Array(this.data.buffer,this.write),this.write+=m.binary.raw.decode(s),this;if(t==="utf16")return this.accommodate(e.length*2),s=new Uint16Array(this.data.buffer,this.write),this.write+=m.text.utf16.encode(s),this;throw new Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)};m.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this};m.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")};m.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this};m.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this};m.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this};m.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this};m.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this};m.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this};m.DataBuffer.prototype.putInt=function(e,t){dn(t),this.accommodate(t/8);do t-=8,this.data.setInt8(this.write++,e>>t&255);while(t>0);return this};m.DataBuffer.prototype.putSignedInt=function(e,t){return dn(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)};m.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};m.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e};m.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e};m.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e};m.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e};m.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e};m.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e};m.DataBuffer.prototype.getInt=function(e){dn(e);var t=0;do t=(t<<8)+this.data.getInt8(this.read++),e-=8;while(e>0);return t};m.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t};m.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};m.DataBuffer.prototype.bytes=function(e){return typeof e>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};m.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)};m.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this};m.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};m.DataBuffer.prototype.copy=function(){return new m.DataBuffer(this)};m.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this};m.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};m.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this};m.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var r=this.data.getUint8(t);r<16&&(e+="0"),e+=r.toString(16)}return e};m.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if(e=e||"utf8",e==="binary"||e==="raw")return m.binary.raw.encode(t);if(e==="hex")return m.binary.hex.encode(t);if(e==="base64")return m.binary.base64.encode(t);if(e==="utf8")return m.text.utf8.decode(t);if(e==="utf16")return m.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)};m.createBuffer=function(e,t){return t=t||"raw",e!==void 0&&t==="utf8"&&(e=m.encodeUtf8(e)),new m.ByteBuffer(e)};m.fillString=function(e,t){for(var r="";t>0;)t&1&&(r+=e),t>>>=1,t>0&&(e+=e);return r};m.xorBytes=function(e,t,r){for(var n="",i="",s="",o=0,a=0;r>0;--r,++o)i=e.charCodeAt(o)^t.charCodeAt(o),a>=10&&(n+=s,s="",a=0),s+=String.fromCharCode(i),++a;return n+=s,n};m.hexToBytes=function(e){var t="",r=0;for(e.length&!0&&(r=1,t+=String.fromCharCode(parseInt(e[0],16)));r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t};m.bytesToHex=function(e){return m.createBuffer(e).toHex()};m.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255)};var Ye="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Ze=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],$a="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";m.encode64=function(e,t){for(var r="",n="",i,s,o,a=0;a<e.length;)i=e.charCodeAt(a++),s=e.charCodeAt(a++),o=e.charCodeAt(a++),r+=Ye.charAt(i>>2),r+=Ye.charAt((i&3)<<4|s>>4),isNaN(s)?r+="==":(r+=Ye.charAt((s&15)<<2|o>>6),r+=isNaN(o)?"=":Ye.charAt(o&63)),t&&r.length>t&&(n+=r.substr(0,t)+`\r
`,r=r.substr(t));return n+=r,n};m.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t="",r,n,i,s,o=0;o<e.length;)r=Ze[e.charCodeAt(o++)-43],n=Ze[e.charCodeAt(o++)-43],i=Ze[e.charCodeAt(o++)-43],s=Ze[e.charCodeAt(o++)-43],t+=String.fromCharCode(r<<2|n>>4),i!==64&&(t+=String.fromCharCode((n&15)<<4|i>>2),s!==64&&(t+=String.fromCharCode((i&3)<<6|s)));return t};m.encodeUtf8=function(e){return unescape(encodeURIComponent(e))};m.decodeUtf8=function(e){return decodeURIComponent(escape(e))};m.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:Wa.encode,decode:Wa.decode}};m.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)};m.binary.raw.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length)),r=r||0;for(var i=r,s=0;s<e.length;++s)n[i++]=e.charCodeAt(s);return t?i-r:n};m.binary.hex.encode=m.bytesToHex;m.binary.hex.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/2))),r=r||0;var i=0,s=r;for(e.length&1&&(i=1,n[s++]=parseInt(e[0],16));i<e.length;i+=2)n[s++]=parseInt(e.substr(i,2),16);return t?s-r:n};m.binary.base64.encode=function(e,t){for(var r="",n="",i,s,o,a=0;a<e.byteLength;)i=e[a++],s=e[a++],o=e[a++],r+=Ye.charAt(i>>2),r+=Ye.charAt((i&3)<<4|s>>4),isNaN(s)?r+="==":(r+=Ye.charAt((s&15)<<2|o>>6),r+=isNaN(o)?"=":Ye.charAt(o&63)),t&&r.length>t&&(n+=r.substr(0,t)+`\r
`,r=r.substr(t));return n+=r,n};m.binary.base64.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/4)*3)),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,s,o,a,c=0,u=r;c<e.length;)i=Ze[e.charCodeAt(c++)-43],s=Ze[e.charCodeAt(c++)-43],o=Ze[e.charCodeAt(c++)-43],a=Ze[e.charCodeAt(c++)-43],n[u++]=i<<2|s>>4,o!==64&&(n[u++]=(s&15)<<4|o>>2,a!==64&&(n[u++]=(o&3)<<6|a));return t?u-r:n.subarray(0,u)};m.binary.base58.encode=function(e,t){return m.binary.baseN.encode(e,$a,t)};m.binary.base58.decode=function(e,t){return m.binary.baseN.decode(e,$a,t)};m.text={utf8:{},utf16:{}};m.text.utf8.encode=function(e,t,r){e=m.encodeUtf8(e);var n=t;n||(n=new Uint8Array(e.length)),r=r||0;for(var i=r,s=0;s<e.length;++s)n[i++]=e.charCodeAt(s);return t?i-r:n};m.text.utf8.decode=function(e){return m.decodeUtf8(String.fromCharCode.apply(null,e))};m.text.utf16.encode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var s=r,o=r,a=0;a<e.length;++a)i[o++]=e.charCodeAt(a),s+=2;return t?s-r:n};m.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))};m.deflate=function(e,t,r){if(t=m.decode64(e.deflate(m.encode64(t)).rval),r){var n=2,i=t.charCodeAt(1);i&32&&(n=6),t=t.substring(n,t.length-4)}return t};m.inflate=function(e,t,r){var n=e.inflate(m.encode64(t)).rval;return n===null?null:m.decode64(n)};var cs=function(e,t,r){if(!e)throw new Error("WebStorage not available.");var n;if(r===null?n=e.removeItem(t):(r=m.encode64(JSON.stringify(r)),n=e.setItem(t,r)),typeof n<"u"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},us=function(e,t){if(!e)throw new Error("WebStorage not available.");var r=e.getItem(t);if(e.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(m.decode64(r))),r},jf=function(e,t,r,n){var i=us(e,t);i===null&&(i={}),i[r]=n,cs(e,t,i)},tl=function(e,t,r){var n=us(e,t);return n!==null&&(n=r in n?n[r]:null),n},el=function(e,t,r){var n=us(e,t);if(n!==null&&r in n){delete n[r];var i=!0;for(var s in n){i=!1;break}i&&(n=null),cs(e,t,n)}},rl=function(e,t){cs(e,t,null)},Qn=function(e,t,r){var n=null;typeof r>"u"&&(r=["web","flash"]);var i,s=!1,o=null;for(var a in r){i=r[a];try{if(i==="flash"||i==="both"){if(t[0]===null)throw new Error("Flash local storage not available.");n=e.apply(this,t),s=i==="flash"}(i==="web"||i==="both")&&(t[0]=localStorage,n=e.apply(this,t),s=!0)}catch(c){o=c}if(s)break}if(!s)throw o;return n};m.setItem=function(e,t,r,n,i){Qn(jf,arguments,i)};m.getItem=function(e,t,r,n){return Qn(tl,arguments,n)};m.removeItem=function(e,t,r,n){Qn(el,arguments,n)};m.clearItems=function(e,t,r){Qn(rl,arguments,r)};m.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0};m.format=function(e){for(var t=/%./g,r,n,i=0,s=[],o=0;r=t.exec(e);){n=e.substring(o,t.lastIndex-2),n.length>0&&s.push(n),o=t.lastIndex;var a=r[0][1];switch(a){case"s":case"o":i<arguments.length?s.push(arguments[i+++1]):s.push("<?>");break;case"%":s.push("%");break;default:s.push("<%"+a+"?>")}}return s.push(e.substring(o)),s.join("")};m.formatNumber=function(e,t,r,n){var i=e,s=isNaN(t=Math.abs(t))?2:t,o=r===void 0?",":r,a=n===void 0?".":n,c=i<0?"-":"",u=parseInt(i=Math.abs(+i||0).toFixed(s),10)+"",f=u.length>3?u.length%3:0;return c+(f?u.substr(0,f)+a:"")+u.substr(f).replace(/(\d{3})(?=\d)/g,"$1"+a)+(s?o+Math.abs(i-u).toFixed(s).slice(2):"")};m.formatSize=function(e){return e>=1073741824?e=m.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?e=m.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?e=m.formatNumber(e/1024,0)+" KiB":e=m.formatNumber(e,0)+" bytes",e};m.bytesFromIP=function(e){return e.indexOf(".")!==-1?m.bytesFromIPv4(e):e.indexOf(":")!==-1?m.bytesFromIPv6(e):null};m.bytesFromIPv4=function(e){if(e=e.split("."),e.length!==4)return null;for(var t=m.createBuffer(),r=0;r<e.length;++r){var n=parseInt(e[r],10);if(isNaN(n))return null;t.putByte(n)}return t.getBytes()};m.bytesFromIPv6=function(e){var t=0;e=e.split(":").filter(function(o){return o.length===0&&++t,!0});for(var r=(8-e.length+t)*2,n=m.createBuffer(),i=0;i<8;++i){if(!e[i]||e[i].length===0){n.fillWithByte(0,r),r=0;continue}var s=m.hexToBytes(e[i]);s.length<2&&n.putByte(0),n.putBytes(s)}return n.getBytes()};m.bytesToIP=function(e){return e.length===4?m.bytesToIPv4(e):e.length===16?m.bytesToIPv6(e):null};m.bytesToIPv4=function(e){if(e.length!==4)return null;for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t.join(".")};m.bytesToIPv6=function(e){if(e.length!==16)return null;for(var t=[],r=[],n=0,i=0;i<e.length;i+=2){for(var s=m.bytesToHex(e[i]+e[i+1]);s[0]==="0"&&s!=="0";)s=s.substr(1);if(s==="0"){var o=r[r.length-1],a=t.length;!o||a!==o.end+1?r.push({start:a,end:a}):(o.end=a,o.end-o.start>r[n].end-r[n].start&&(n=r.length-1))}t.push(s)}if(r.length>0){var c=r[n];c.end-c.start>0&&(t.splice(c.start,c.end-c.start+1,""),c.start===0&&t.unshift(""),c.end===7&&t.push(""))}return t.join(":")};m.estimateCores=function(e,t){if(typeof e=="function"&&(t=e,e={}),e=e||{},"cores"in m&&!e.update)return t(null,m.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return m.cores=navigator.hardwareConcurrency,t(null,m.cores);if(typeof Worker>"u")return m.cores=1,t(null,m.cores);if(typeof Blob>"u")return m.cores=2,t(null,m.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(o){for(var a=Date.now(),c=a+4;Date.now()<c;);self.postMessage({st:a,et:c})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(o,a,c){if(a===0){var u=Math.floor(o.reduce(function(f,l){return f+l},0)/o.length);return m.cores=Math.max(1,u),URL.revokeObjectURL(r),t(null,m.cores)}i(c,function(f,l){o.push(s(c,l)),n(o,a-1,c)})}function i(o,a){for(var c=[],u=[],f=0;f<o;++f){var l=new Worker(r);l.addEventListener("message",function(h){if(u.push(h.data),u.length===o){for(var y=0;y<o;++y)c[y].terminate();a(null,u)}}),c.push(l)}for(var f=0;f<o;++f)c[f].postMessage(f)}function s(o,a){for(var c=[],u=0;u<o;++u)for(var f=a[u],l=c[u]=[],h=0;h<o;++h)if(u!==h){var y=a[h];(f.st>y.st&&f.st<y.et||y.st>f.st&&y.st<f.et)&&l.push(h)}return c.reduce(function(d,p){return Math.max(d,p.length)},0)}}});var Yn=lt((ag,Ya)=>{var pn=ct();pn.pki=pn.pki||{};var fs=Ya.exports=pn.pki.oids=pn.oids=pn.oids||{};function C(e,t){fs[e]=t,fs[t]=e}function nt(e,t){fs[e]=t}C("1.2.840.113549.1.1.1","rsaEncryption");C("1.2.840.113549.1.1.4","md5WithRSAEncryption");C("1.2.840.113549.1.1.5","sha1WithRSAEncryption");C("1.2.840.113549.1.1.7","RSAES-OAEP");C("1.2.840.113549.1.1.8","mgf1");C("1.2.840.113549.1.1.9","pSpecified");C("1.2.840.113549.1.1.10","RSASSA-PSS");C("1.2.840.113549.1.1.11","sha256WithRSAEncryption");C("1.2.840.113549.1.1.12","sha384WithRSAEncryption");C("1.2.840.113549.1.1.13","sha512WithRSAEncryption");C("1.3.101.112","EdDSA25519");C("1.2.840.10040.4.3","dsa-with-sha1");C("1.3.14.3.2.7","desCBC");C("1.3.14.3.2.26","sha1");C("1.3.14.3.2.29","sha1WithRSASignature");C("2.16.840.1.101.3.4.2.1","sha256");C("2.16.840.1.101.3.4.2.2","sha384");C("2.16.840.1.101.3.4.2.3","sha512");C("2.16.840.1.101.3.4.2.4","sha224");C("2.16.840.1.101.3.4.2.5","sha512-224");C("2.16.840.1.101.3.4.2.6","sha512-256");C("1.2.840.113549.2.2","md2");C("1.2.840.113549.2.5","md5");C("1.2.840.113549.1.7.1","data");C("1.2.840.113549.1.7.2","signedData");C("1.2.840.113549.1.7.3","envelopedData");C("1.2.840.113549.1.7.4","signedAndEnvelopedData");C("1.2.840.113549.1.7.5","digestedData");C("1.2.840.113549.1.7.6","encryptedData");C("1.2.840.113549.1.9.1","emailAddress");C("1.2.840.113549.1.9.2","unstructuredName");C("1.2.840.113549.1.9.3","contentType");C("1.2.840.113549.1.9.4","messageDigest");C("1.2.840.113549.1.9.5","signingTime");C("1.2.840.113549.1.9.6","counterSignature");C("1.2.840.113549.1.9.7","challengePassword");C("1.2.840.113549.1.9.8","unstructuredAddress");C("1.2.840.113549.1.9.14","extensionRequest");C("1.2.840.113549.1.9.20","friendlyName");C("1.2.840.113549.1.9.21","localKeyId");C("1.2.840.113549.1.9.22.1","x509Certificate");C("1.2.840.113549.1.12.10.1.1","keyBag");C("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");C("1.2.840.113549.1.12.10.1.3","certBag");C("1.2.840.113549.1.12.10.1.4","crlBag");C("1.2.840.113549.1.12.10.1.5","secretBag");C("1.2.840.113549.1.12.10.1.6","safeContentsBag");C("1.2.840.113549.1.5.13","pkcs5PBES2");C("1.2.840.113549.1.5.12","pkcs5PBKDF2");C("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");C("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");C("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");C("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");C("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");C("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");C("1.2.840.113549.2.7","hmacWithSHA1");C("1.2.840.113549.2.8","hmacWithSHA224");C("1.2.840.113549.2.9","hmacWithSHA256");C("1.2.840.113549.2.10","hmacWithSHA384");C("1.2.840.113549.2.11","hmacWithSHA512");C("1.2.840.113549.3.7","des-EDE3-CBC");C("2.16.840.1.101.3.4.1.2","aes128-CBC");C("2.16.840.1.101.3.4.1.22","aes192-CBC");C("2.16.840.1.101.3.4.1.42","aes256-CBC");C("2.5.4.3","commonName");C("2.5.4.4","surname");C("2.5.4.5","serialNumber");C("2.5.4.6","countryName");C("2.5.4.7","localityName");C("2.5.4.8","stateOrProvinceName");C("2.5.4.9","streetAddress");C("2.5.4.10","organizationName");C("2.5.4.11","organizationalUnitName");C("2.5.4.12","title");C("2.5.4.13","description");C("2.5.4.15","businessCategory");C("2.5.4.17","postalCode");C("2.5.4.42","givenName");C("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");C("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");C("2.16.840.1.113730.1.1","nsCertType");C("2.16.840.1.113730.1.13","nsComment");nt("2.5.29.1","authorityKeyIdentifier");nt("2.5.29.2","keyAttributes");nt("2.5.29.3","certificatePolicies");nt("2.5.29.4","keyUsageRestriction");nt("2.5.29.5","policyMapping");nt("2.5.29.6","subtreesConstraint");nt("2.5.29.7","subjectAltName");nt("2.5.29.8","issuerAltName");nt("2.5.29.9","subjectDirectoryAttributes");nt("2.5.29.10","basicConstraints");nt("2.5.29.11","nameConstraints");nt("2.5.29.12","policyConstraints");nt("2.5.29.13","basicConstraints");C("2.5.29.14","subjectKeyIdentifier");C("2.5.29.15","keyUsage");nt("2.5.29.16","privateKeyUsagePeriod");C("2.5.29.17","subjectAltName");C("2.5.29.18","issuerAltName");C("2.5.29.19","basicConstraints");nt("2.5.29.20","cRLNumber");nt("2.5.29.21","cRLReason");nt("2.5.29.22","expirationDate");nt("2.5.29.23","instructionCode");nt("2.5.29.24","invalidityDate");nt("2.5.29.25","cRLDistributionPoints");nt("2.5.29.26","issuingDistributionPoint");nt("2.5.29.27","deltaCRLIndicator");nt("2.5.29.28","issuingDistributionPoint");nt("2.5.29.29","certificateIssuer");nt("2.5.29.30","nameConstraints");C("2.5.29.31","cRLDistributionPoints");C("2.5.29.32","certificatePolicies");nt("2.5.29.33","policyMappings");nt("2.5.29.34","policyConstraints");C("2.5.29.35","authorityKeyIdentifier");nt("2.5.29.36","policyConstraints");C("2.5.29.37","extKeyUsage");nt("2.5.29.46","freshestCRL");nt("2.5.29.54","inhibitAnyPolicy");C("1.3.6.1.4.1.11129.2.4.2","timestampList");C("1.3.6.1.5.5.7.1.1","authorityInfoAccess");C("1.3.6.1.5.5.7.3.1","serverAuth");C("1.3.6.1.5.5.7.3.2","clientAuth");C("1.3.6.1.5.5.7.3.3","codeSigning");C("1.3.6.1.5.5.7.3.4","emailProtection");C("1.3.6.1.5.5.7.3.8","timeStamping")});var gn=lt((cg,Xa)=>{var dt=ct();Tt();Yn();var D=Xa.exports=dt.asn1=dt.asn1||{};D.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};D.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};D.create=function(e,t,r,n,i){if(dt.util.isArray(n)){for(var s=[],o=0;o<n.length;++o)n[o]!==void 0&&s.push(n[o]);n=s}var a={tagClass:e,type:t,constructed:r,composed:r||dt.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(a.bitStringContents=i.bitStringContents,a.original=D.copy(a)),a};D.copy=function(e,t){var r;if(dt.util.isArray(e)){r=[];for(var n=0;n<e.length;++n)r.push(D.copy(e[n],t));return r}return typeof e=="string"?e:(r={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:D.copy(e.value,t)},t&&!t.excludeBitStringContents&&(r.bitStringContents=e.bitStringContents),r)};D.equals=function(e,t,r){if(dt.util.isArray(e)){if(!dt.util.isArray(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!D.equals(e[n],t[n]))return!1;return!0}if(typeof e!=typeof t)return!1;if(typeof e=="string")return e===t;var i=e.tagClass===t.tagClass&&e.type===t.type&&e.constructed===t.constructed&&e.composed===t.composed&&D.equals(e.value,t.value);return r&&r.includeBitStringContents&&(i=i&&e.bitStringContents===t.bitStringContents),i};D.getBerValueLength=function(e){var t=e.getByte();if(t!==128){var r,n=t&128;return n?r=e.getInt((t&127)<<3):r=t,r}};function yn(e,t,r){if(r>t){var n=new Error("Too few bytes to parse DER.");throw n.available=e.length(),n.remaining=t,n.requested=r,n}}var nl=function(e,t){var r=e.getByte();if(t--,r!==128){var n,i=r&128;if(!i)n=r;else{var s=r&127;yn(e,t,s),n=e.getInt(s<<3)}if(n<0)throw new Error("Negative length: "+n);return n}};D.fromDer=function(e,t){t===void 0&&(t={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof t=="boolean"&&(t={strict:t,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in t||(t.strict=!0),"parseAllBytes"in t||(t.parseAllBytes=!0),"decodeBitStrings"in t||(t.decodeBitStrings=!0),typeof e=="string"&&(e=dt.util.createBuffer(e));var r=e.length(),n=Zn(e,e.length(),0,t);if(t.parseAllBytes&&e.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=e.length(),i}return n};function Zn(e,t,r,n){var i;yn(e,t,2);var s=e.getByte();t--;var o=s&192,a=s&31;i=e.length();var c=nl(e,t);if(t-=i-e.length(),c!==void 0&&c>t){if(n.strict){var u=new Error("Too few bytes to read ASN.1 value.");throw u.available=e.length(),u.remaining=t,u.requested=c,u}c=t}var f,l,h=(s&32)===32;if(h)if(f=[],c===void 0)for(;;){if(yn(e,t,2),e.bytes(2)==="\0\0"){e.getBytes(2),t-=2;break}i=e.length(),f.push(Zn(e,t,r+1,n)),t-=i-e.length()}else for(;c>0;)i=e.length(),f.push(Zn(e,c,r+1,n)),t-=i-e.length(),c-=i-e.length();if(f===void 0&&o===D.Class.UNIVERSAL&&a===D.Type.BITSTRING&&(l=e.bytes(c)),f===void 0&&n.decodeBitStrings&&o===D.Class.UNIVERSAL&&a===D.Type.BITSTRING&&c>1){var y=e.read,d=t,p=0;if(a===D.Type.BITSTRING&&(yn(e,t,1),p=e.getByte(),t--),p===0)try{i=e.length();var g={strict:!0,decodeBitStrings:!0},x=Zn(e,t,r+1,g),w=i-e.length();t-=w,a==D.Type.BITSTRING&&w++;var b=x.tagClass;w===c&&(b===D.Class.UNIVERSAL||b===D.Class.CONTEXT_SPECIFIC)&&(f=[x])}catch{}f===void 0&&(e.read=y,t=d)}if(f===void 0){if(c===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");c=t}if(a===D.Type.BMPSTRING)for(f="";c>0;c-=2)yn(e,t,2),f+=String.fromCharCode(e.getInt16()),t-=2;else f=e.getBytes(c),t-=c}var R=l===void 0?null:{bitStringContents:l};return D.create(o,a,h,f,R)}D.toDer=function(e){var t=dt.util.createBuffer(),r=e.tagClass|e.type,n=dt.util.createBuffer(),i=!1;if("bitStringContents"in e&&(i=!0,e.original&&(i=D.equals(e,e.original))),i)n.putBytes(e.bitStringContents);else if(e.composed){e.constructed?r|=32:n.putByte(0);for(var s=0;s<e.value.length;++s)e.value[s]!==void 0&&n.putBuffer(D.toDer(e.value[s]))}else if(e.type===D.Type.BMPSTRING)for(var s=0;s<e.value.length;++s)n.putInt16(e.value.charCodeAt(s));else e.type===D.Type.INTEGER&&e.value.length>1&&(e.value.charCodeAt(0)===0&&!(e.value.charCodeAt(1)&128)||e.value.charCodeAt(0)===255&&(e.value.charCodeAt(1)&128)===128)?n.putBytes(e.value.substr(1)):n.putBytes(e.value);if(t.putByte(r),n.length()<=127)t.putByte(n.length()&127);else{var o=n.length(),a="";do a+=String.fromCharCode(o&255),o=o>>>8;while(o>0);t.putByte(a.length|128);for(var s=a.length-1;s>=0;--s)t.putByte(a.charCodeAt(s))}return t.putBuffer(n),t};D.oidToDer=function(e){var t=e.split("."),r=dt.util.createBuffer();r.putByte(40*parseInt(t[0],10)+parseInt(t[1],10));for(var n,i,s,o,a=2;a<t.length;++a){n=!0,i=[],s=parseInt(t[a],10);do o=s&127,s=s>>>7,n||(o|=128),i.push(o),n=!1;while(s>0);for(var c=i.length-1;c>=0;--c)r.putByte(i[c])}return r};D.derToOid=function(e){var t;typeof e=="string"&&(e=dt.util.createBuffer(e));var r=e.getByte();t=Math.floor(r/40)+"."+r%40;for(var n=0;e.length()>0;)r=e.getByte(),n=n<<7,r&128?n+=r&127:(t+="."+(n+r),n=0);return t};D.utcTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(e.substr(2,2),10)-1,i=parseInt(e.substr(4,2),10),s=parseInt(e.substr(6,2),10),o=parseInt(e.substr(8,2),10),a=0;if(e.length>11){var c=e.charAt(10),u=10;c!=="+"&&c!=="-"&&(a=parseInt(e.substr(10,2),10),u+=2)}if(t.setUTCFullYear(r,n,i),t.setUTCHours(s,o,a,0),u&&(c=e.charAt(u),c==="+"||c==="-")){var f=parseInt(e.substr(u+1,2),10),l=parseInt(e.substr(u+4,2),10),h=f*60+l;h*=6e4,c==="+"?t.setTime(+t-h):t.setTime(+t+h)}return t};D.generalizedTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,4),10),n=parseInt(e.substr(4,2),10)-1,i=parseInt(e.substr(6,2),10),s=parseInt(e.substr(8,2),10),o=parseInt(e.substr(10,2),10),a=parseInt(e.substr(12,2),10),c=0,u=0,f=!1;e.charAt(e.length-1)==="Z"&&(f=!0);var l=e.length-5,h=e.charAt(l);if(h==="+"||h==="-"){var y=parseInt(e.substr(l+1,2),10),d=parseInt(e.substr(l+4,2),10);u=y*60+d,u*=6e4,h==="+"&&(u*=-1),f=!0}return e.charAt(14)==="."&&(c=parseFloat(e.substr(14),10)*1e3),f?(t.setUTCFullYear(r,n,i),t.setUTCHours(s,o,a,c),t.setTime(+t+u)):(t.setFullYear(r,n,i),t.setHours(s,o,a,c)),t};D.dateToUtcTime=function(e){if(typeof e=="string")return e;var t="",r=[];r.push((""+e.getUTCFullYear()).substr(2)),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z",t};D.dateToGeneralizedTime=function(e){if(typeof e=="string")return e;var t="",r=[];r.push(""+e.getUTCFullYear()),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z",t};D.integerToDer=function(e){var t=dt.util.createBuffer();if(e>=-128&&e<128)return t.putSignedInt(e,8);if(e>=-32768&&e<32768)return t.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return t.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return t.putSignedInt(e,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=e,r};D.derToInteger=function(e){typeof e=="string"&&(e=dt.util.createBuffer(e));var t=e.length()*8;if(t>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)};D.validate=function(e,t,r,n){var i=!1;if((e.tagClass===t.tagClass||typeof t.tagClass>"u")&&(e.type===t.type||typeof t.type>"u"))if(e.constructed===t.constructed||typeof t.constructed>"u"){if(i=!0,t.value&&dt.util.isArray(t.value))for(var s=0,o=0;i&&o<t.value.length;++o)i=t.value[o].optional||!1,e.value[s]&&(i=D.validate(e.value[s],t.value[o],r,n),i?++s:t.value[o].optional&&(i=!0)),!i&&n&&n.push("["+t.name+'] Tag class "'+t.tagClass+'", type "'+t.type+'" expected value length "'+t.value.length+'", got "'+e.value.length+'"');if(i&&r&&(t.capture&&(r[t.capture]=e.value),t.captureAsn1&&(r[t.captureAsn1]=e),t.captureBitStringContents&&"bitStringContents"in e&&(r[t.captureBitStringContents]=e.bitStringContents),t.captureBitStringValue&&"bitStringContents"in e)){var a;if(e.bitStringContents.length<2)r[t.captureBitStringValue]="";else{var c=e.bitStringContents.charCodeAt(0);if(c!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[t.captureBitStringValue]=e.bitStringContents.slice(1)}}}else n&&n.push("["+t.name+'] Expected constructed "'+t.constructed+'", got "'+e.constructed+'"');else n&&(e.tagClass!==t.tagClass&&n.push("["+t.name+'] Expected tag class "'+t.tagClass+'", got "'+e.tagClass+'"'),e.type!==t.type&&n.push("["+t.name+'] Expected type "'+t.type+'", got "'+e.type+'"'));return i};var Za=/[^\\u0000-\\u00ff]/;D.prettyPrint=function(e,t,r){var n="";t=t||0,r=r||2,t>0&&(n+=`
`);for(var i="",s=0;s<t*r;++s)i+=" ";switch(n+=i+"Tag: ",e.tagClass){case D.Class.UNIVERSAL:n+="Universal:";break;case D.Class.APPLICATION:n+="Application:";break;case D.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case D.Class.PRIVATE:n+="Private:";break}if(e.tagClass===D.Class.UNIVERSAL)switch(n+=e.type,e.type){case D.Type.NONE:n+=" (None)";break;case D.Type.BOOLEAN:n+=" (Boolean)";break;case D.Type.INTEGER:n+=" (Integer)";break;case D.Type.BITSTRING:n+=" (Bit string)";break;case D.Type.OCTETSTRING:n+=" (Octet string)";break;case D.Type.NULL:n+=" (Null)";break;case D.Type.OID:n+=" (Object Identifier)";break;case D.Type.ODESC:n+=" (Object Descriptor)";break;case D.Type.EXTERNAL:n+=" (External or Instance of)";break;case D.Type.REAL:n+=" (Real)";break;case D.Type.ENUMERATED:n+=" (Enumerated)";break;case D.Type.EMBEDDED:n+=" (Embedded PDV)";break;case D.Type.UTF8:n+=" (UTF8)";break;case D.Type.ROID:n+=" (Relative Object Identifier)";break;case D.Type.SEQUENCE:n+=" (Sequence)";break;case D.Type.SET:n+=" (Set)";break;case D.Type.PRINTABLESTRING:n+=" (Printable String)";break;case D.Type.IA5String:n+=" (IA5String (ASCII))";break;case D.Type.UTCTIME:n+=" (UTC time)";break;case D.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case D.Type.BMPSTRING:n+=" (BMP String)";break}else n+=e.type;if(n+=`
`,n+=i+"Constructed: "+e.constructed+`
`,e.composed){for(var o=0,a="",s=0;s<e.value.length;++s)e.value[s]!==void 0&&(o+=1,a+=D.prettyPrint(e.value[s],t+1,r),s+1<e.value.length&&(a+=","));n+=i+"Sub values: "+o+a}else{if(n+=i+"Value: ",e.type===D.Type.OID){var c=D.derToOid(e.value);n+=c,dt.pki&&dt.pki.oids&&c in dt.pki.oids&&(n+=" ("+dt.pki.oids[c]+") ")}if(e.type===D.Type.INTEGER)try{n+=D.derToInteger(e.value)}catch{n+="0x"+dt.util.bytesToHex(e.value)}else if(e.type===D.Type.BITSTRING){if(e.value.length>1?n+="0x"+dt.util.bytesToHex(e.value.slice(1)):n+="(none)",e.value.length>0){var u=e.value.charCodeAt(0);u==1?n+=" (1 unused bit shown)":u>1&&(n+=" ("+u+" unused bits shown)")}}else if(e.type===D.Type.OCTETSTRING)Za.test(e.value)||(n+="("+e.value+") "),n+="0x"+dt.util.bytesToHex(e.value);else if(e.type===D.Type.UTF8)try{n+=dt.util.decodeUtf8(e.value)}catch(f){if(f.message==="URI malformed")n+="0x"+dt.util.bytesToHex(e.value)+" (malformed UTF8)";else throw f}else e.type===D.Type.PRINTABLESTRING||e.type===D.Type.IA5String?n+=e.value:Za.test(e.value)?n+="0x"+dt.util.bytesToHex(e.value):e.value.length===0?n+="[null]":n+=e.value}return n}});var hs=lt((ug,Ja)=>{var Pt=ct();Tt();Ja.exports=Pt.cipher=Pt.cipher||{};Pt.cipher.algorithms=Pt.cipher.algorithms||{};Pt.cipher.createCipher=function(e,t){var r=e;if(typeof r=="string"&&(r=Pt.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+e);return new Pt.cipher.BlockCipher({algorithm:r,key:t,decrypt:!1})};Pt.cipher.createDecipher=function(e,t){var r=e;if(typeof r=="string"&&(r=Pt.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+e);return new Pt.cipher.BlockCipher({algorithm:r,key:t,decrypt:!0})};Pt.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),Pt.cipher.algorithms[e]=t};Pt.cipher.getAlgorithm=function(e){return e=e.toUpperCase(),e in Pt.cipher.algorithms?Pt.cipher.algorithms[e]:null};var ls=Pt.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};ls.prototype.start=function(e){e=e||{};var t={};for(var r in e)t[r]=e[r];t.decrypt=this._decrypt,this._finish=!1,this._input=Pt.util.createBuffer(),this.output=e.output||Pt.util.createBuffer(),this.mode.start(t)};ls.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};ls.prototype.finish=function(e){e&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return e(this.blockSize,r,!1)},this.mode.unpad=function(r){return e(this.blockSize,r,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,t))}});var ps=lt((fg,ja)=>{var Dt=ct();Tt();Dt.cipher=Dt.cipher||{};var Z=ja.exports=Dt.cipher.modes=Dt.cipher.modes||{};Z.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};Z.ecb.prototype.start=function(e){};Z.ecb.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])};Z.ecb.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])};Z.ecb.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0};Z.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return n>this.blockSize<<2?!1:(e.truncate(n),!0)};Z.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};Z.cbc.prototype.start=function(e){if(e.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in e)this._iv=Xn(e.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};Z.cbc.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n]);this._prev=this._outBlock};Z.cbc.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};Z.cbc.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0};Z.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return n>this.blockSize<<2?!1:(e.truncate(n),!0)};Z.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=Dt.util.createBuffer(),this._partialBytes=0};Z.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=Xn(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Z.cfb.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32()^this._outBlock[i],t.putInt32(this._inBlock[i]);return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(s>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Z.cfb.prototype.decrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32(),t.putInt32(this._inBlock[i]^this._outBlock[i]);return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(s>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Z.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Dt.util.createBuffer(),this._partialBytes=0};Z.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=Xn(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Z.ofb.prototype.encrypt=function(e,t,r){var n=e.length();if(e.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Z.ofb.prototype.decrypt=Z.ofb.prototype.encrypt;Z.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Dt.util.createBuffer(),this._partialBytes=0};Z.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=Xn(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Z.ctr.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]);else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}Jn(this._inBlock)};Z.ctr.prototype.decrypt=Z.ctr.prototype.encrypt;Z.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=Dt.util.createBuffer(),this._partialBytes=0,this._R=3774873600};Z.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t=Dt.util.createBuffer(e.iv);this._cipherLength=0;var r;if("additionalData"in e?r=Dt.util.createBuffer(e.additionalData):r=Dt.util.createBuffer(),"tagLength"in e?this._tagLength=e.tagLength:this._tagLength=128,this._tag=null,e.decrypt&&(this._tag=Dt.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=t.length();if(n===12)this._j0=[t.getInt32(),t.getInt32(),t.getInt32(),1];else{for(this._j0=[0,0,0,0];t.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(ds(n*8)))}this._inBlock=this._j0.slice(0),Jn(this._inBlock),this._partialBytes=0,r=Dt.util.createBuffer(r),this._aDataLength=ds(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};Z.gcm.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^=e.getInt32());this._cipherLength+=this.blockSize}else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s<=0||r){if(r){var o=n%this.blockSize;this._cipherLength+=o,this._partialOutput.truncate(this.blockSize-o)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),Jn(this._inBlock)};Z.gcm.prototype.decrypt=function(e,t,r){var n=e.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),Jn(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};Z.gcm.prototype.afterFinish=function(e,t){var r=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=Dt.util.createBuffer();var n=this._aDataLength.concat(ds(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var s=0;s<this._ints;++s)this.tag.putInt32(this._s[s]^i[s]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};Z.gcm.prototype.multiply=function(e,t){for(var r=[0,0,0,0],n=t.slice(0),i=0;i<128;++i){var s=e[i/32|0]&1<<31-i%32;s&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};Z.gcm.prototype.pow=function(e,t){for(var r=e[3]&1,n=3;n>0;--n)t[n]=e[n]>>>1|(e[n-1]&1)<<31;t[0]=e[0]>>>1,r&&(t[0]^=this._R)};Z.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=e[n]>>>(7-r%8)*4&15,s=this._m[r][i];t[0]^=s[0],t[1]^=s[1],t[2]^=s[2],t[3]^=s[3]}return t};Z.gcm.prototype.ghash=function(e,t,r){return t[0]^=r[0],t[1]^=r[1],t[2]^=r[2],t[3]^=r[3],this.tableMultiply(t)};Z.gcm.prototype.generateHashTable=function(e,t){for(var r=8/t,n=4*r,i=16*r,s=new Array(i),o=0;o<i;++o){var a=[0,0,0,0],c=o/n|0,u=(n-1-o%n)*t;a[c]=1<<t-1<<u,s[o]=this.generateSubHashTable(this.multiply(a,e),t)}return s};Z.gcm.prototype.generateSubHashTable=function(e,t){var r=1<<t,n=r>>>1,i=new Array(r);i[n]=e.slice(0);for(var s=n>>>1;s>0;)this.pow(i[2*s],i[s]=[]),s>>=1;for(s=2;s<n;){for(var o=1;o<s;++o){var a=i[s],c=i[o];i[s+o]=[a[0]^c[0],a[1]^c[1],a[2]^c[2],a[3]^c[3]]}s*=2}for(i[0]=[0,0,0,0],s=n+1;s<r;++s){var u=i[s^n];i[s]=[e[0]^u[0],e[1]^u[1],e[2]^u[2],e[3]^u[3]]}return i};function Xn(e,t){if(typeof e=="string"&&(e=Dt.util.createBuffer(e)),Dt.util.isArray(e)&&e.length>4){var r=e;e=Dt.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(e.length()<t)throw new Error("Invalid IV length; got "+e.length()+" bytes and expected "+t+" bytes.");if(!Dt.util.isArray(e)){for(var i=[],s=t/4,n=0;n<s;++n)i.push(e.getInt32());e=i}return e}function Jn(e){e[e.length-1]=e[e.length-1]+1&4294967295}function ds(e){return[e/4294967296|0,e&4294967295]}});var xs=lt((lg,n0)=>{var ht=ct();hs();ps();Tt();n0.exports=ht.aes=ht.aes||{};ht.aes.startEncrypting=function(e,t,r,n){var i=jn({key:e,output:r,decrypt:!1,mode:n});return i.start(t),i};ht.aes.createEncryptionCipher=function(e,t){return jn({key:e,output:null,decrypt:!1,mode:t})};ht.aes.startDecrypting=function(e,t,r,n){var i=jn({key:e,output:r,decrypt:!0,mode:n});return i.start(t),i};ht.aes.createDecryptionCipher=function(e,t){return jn({key:e,output:null,decrypt:!0,mode:t})};ht.aes.Algorithm=function(e,t){ms||e0();var r=this;r.name=e,r.mode=new t({blockSize:16,cipher:{encrypt:function(n,i){return gs(r._w,n,i,!1)},decrypt:function(n,i){return gs(r._w,n,i,!0)}}}),r._init=!1};ht.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var t=e.key,r;if(typeof t=="string"&&(t.length===16||t.length===24||t.length===32))t=ht.util.createBuffer(t);else if(ht.util.isArray(t)&&(t.length===16||t.length===24||t.length===32)){r=t,t=ht.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(!ht.util.isArray(t)){r=t,t=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)t.push(r.getInt32())}}if(!ht.util.isArray(t)||!(t.length===4||t.length===6||t.length===8))throw new Error("Invalid key parameter.");var s=this.mode.name,o=["CFB","OFB","CTR","GCM"].indexOf(s)!==-1;this._w=r0(t,e.decrypt&&!o),this._init=!0}};ht.aes._expandKey=function(e,t){return ms||e0(),r0(e,t)};ht.aes._updateBlock=gs;Fr("AES-ECB",ht.cipher.modes.ecb);Fr("AES-CBC",ht.cipher.modes.cbc);Fr("AES-CFB",ht.cipher.modes.cfb);Fr("AES-OFB",ht.cipher.modes.ofb);Fr("AES-CTR",ht.cipher.modes.ctr);Fr("AES-GCM",ht.cipher.modes.gcm);function Fr(e,t){var r=function(){return new ht.aes.Algorithm(e,t)};ht.cipher.registerAlgorithm(e,r)}var ms=!1,Vr=4,Wt,ys,t0,yr,le;function e0(){ms=!0,t0=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;Wt=new Array(256),ys=new Array(256),yr=new Array(4),le=new Array(4);for(var t=0;t<4;++t)yr[t]=new Array(256),le[t]=new Array(256);for(var r=0,n=0,i,s,o,a,c,u,f,t=0;t<256;++t){a=n^n<<1^n<<2^n<<3^n<<4,a=a>>8^a&255^99,Wt[r]=a,ys[a]=r,c=e[a],i=e[r],s=e[i],o=e[s],u=c<<24^a<<16^a<<8^(a^c),f=(i^s^o)<<24^(r^o)<<16^(r^s^o)<<8^(r^i^o);for(var l=0;l<4;++l)yr[l][r]=u,le[l][a]=f,u=u<<24|u>>>8,f=f<<24|f>>>8;r===0?r=n=1:(r=i^e[e[e[i^o]]],n^=e[e[n]])}}function r0(e,t){for(var r=e.slice(0),n,i=1,s=r.length,o=s+6+1,a=Vr*o,c=s;c<a;++c)n=r[c-1],c%s===0?(n=Wt[n>>>16&255]<<24^Wt[n>>>8&255]<<16^Wt[n&255]<<8^Wt[n>>>24]^t0[i]<<24,i++):s>6&&c%s===4&&(n=Wt[n>>>24]<<24^Wt[n>>>16&255]<<16^Wt[n>>>8&255]<<8^Wt[n&255]),r[c]=r[c-s]^n;if(t){var u,f=le[0],l=le[1],h=le[2],y=le[3],d=r.slice(0);a=r.length;for(var c=0,p=a-Vr;c<a;c+=Vr,p-=Vr)if(c===0||c===a-Vr)d[c]=r[p],d[c+1]=r[p+3],d[c+2]=r[p+2],d[c+3]=r[p+1];else for(var g=0;g<Vr;++g)u=r[p+g],d[c+(3&-g)]=f[Wt[u>>>24]]^l[Wt[u>>>16&255]]^h[Wt[u>>>8&255]]^y[Wt[u&255]];r=d}return r}function gs(e,t,r,n){var i=e.length/4-1,s,o,a,c,u;n?(s=le[0],o=le[1],a=le[2],c=le[3],u=ys):(s=yr[0],o=yr[1],a=yr[2],c=yr[3],u=Wt);var f,l,h,y,d,p,g;f=t[0]^e[0],l=t[n?3:1]^e[1],h=t[2]^e[2],y=t[n?1:3]^e[3];for(var x=3,w=1;w<i;++w)d=s[f>>>24]^o[l>>>16&255]^a[h>>>8&255]^c[y&255]^e[++x],p=s[l>>>24]^o[h>>>16&255]^a[y>>>8&255]^c[f&255]^e[++x],g=s[h>>>24]^o[y>>>16&255]^a[f>>>8&255]^c[l&255]^e[++x],y=s[y>>>24]^o[f>>>16&255]^a[l>>>8&255]^c[h&255]^e[++x],f=d,l=p,h=g;r[0]=u[f>>>24]<<24^u[l>>>16&255]<<16^u[h>>>8&255]<<8^u[y&255]^e[++x],r[n?3:1]=u[l>>>24]<<24^u[h>>>16&255]<<16^u[y>>>8&255]<<8^u[f&255]^e[++x],r[2]=u[h>>>24]<<24^u[y>>>16&255]<<16^u[f>>>8&255]<<8^u[l&255]^e[++x],r[n?1:3]=u[y>>>24]<<24^u[f>>>16&255]<<16^u[l>>>8&255]<<8^u[h&255]^e[++x]}function jn(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),r="AES-"+t,n;e.decrypt?n=ht.cipher.createDecipher(r,e.key):n=ht.cipher.createCipher(r,e.key);var i=n.start;return n.start=function(s,o){var a=null;o instanceof ht.util.ByteBuffer&&(a=o,o={}),o=o||{},o.output=a,o.iv=s,i.call(n,o)},n}});var o0=lt((hg,s0)=>{var yt=ct();hs();ps();Tt();s0.exports=yt.des=yt.des||{};yt.des.startEncrypting=function(e,t,r,n){var i=ti({key:e,output:r,decrypt:!1,mode:n||(t===null?"ECB":"CBC")});return i.start(t),i};yt.des.createEncryptionCipher=function(e,t){return ti({key:e,output:null,decrypt:!1,mode:t})};yt.des.startDecrypting=function(e,t,r,n){var i=ti({key:e,output:r,decrypt:!0,mode:n||(t===null?"ECB":"CBC")});return i.start(t),i};yt.des.createDecryptionCipher=function(e,t){return ti({key:e,output:null,decrypt:!0,mode:t})};yt.des.Algorithm=function(e,t){var r=this;r.name=e,r.mode=new t({blockSize:8,cipher:{encrypt:function(n,i){return i0(r._keys,n,i,!1)},decrypt:function(n,i){return i0(r._keys,n,i,!0)}}}),r._init=!1};yt.des.Algorithm.prototype.initialize=function(e){if(!this._init){var t=yt.util.createBuffer(e.key);if(this.name.indexOf("3DES")===0&&t.length()!==24)throw new Error("Invalid Triple-DES key size: "+t.length()*8);this._keys=hl(t),this._init=!0}};we("DES-ECB",yt.cipher.modes.ecb);we("DES-CBC",yt.cipher.modes.cbc);we("DES-CFB",yt.cipher.modes.cfb);we("DES-OFB",yt.cipher.modes.ofb);we("DES-CTR",yt.cipher.modes.ctr);we("3DES-ECB",yt.cipher.modes.ecb);we("3DES-CBC",yt.cipher.modes.cbc);we("3DES-CFB",yt.cipher.modes.cfb);we("3DES-OFB",yt.cipher.modes.ofb);we("3DES-CTR",yt.cipher.modes.ctr);function we(e,t){var r=function(){return new yt.des.Algorithm(e,t)};yt.cipher.registerAlgorithm(e,r)}var il=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],sl=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],ol=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],al=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],cl=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],ul=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],fl=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],ll=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function hl(e){for(var t=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],s=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],o=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],a=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],u=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],f=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],l=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],h=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],y=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],d=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],p=e.length()>8?3:1,g=[],x=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],w=0,b,R=0;R<p;R++){var E=e.getInt32(),S=e.getInt32();b=(E>>>4^S)&252645135,S^=b,E^=b<<4,b=(S>>>-16^E)&65535,E^=b,S^=b<<-16,b=(E>>>2^S)&858993459,S^=b,E^=b<<2,b=(S>>>-16^E)&65535,E^=b,S^=b<<-16,b=(E>>>1^S)&1431655765,S^=b,E^=b<<1,b=(S>>>8^E)&16711935,E^=b,S^=b<<8,b=(E>>>1^S)&1431655765,S^=b,E^=b<<1,b=E<<8|S>>>20&240,E=S<<24|S<<8&16711680|S>>>8&65280|S>>>24&240,S=b;for(var L=0;L<x.length;++L){x[L]?(E=E<<2|E>>>26,S=S<<2|S>>>26):(E=E<<1|E>>>27,S=S<<1|S>>>27),E&=-15,S&=-15;var k=t[E>>>28]|r[E>>>24&15]|n[E>>>20&15]|i[E>>>16&15]|s[E>>>12&15]|o[E>>>8&15]|a[E>>>4&15],G=c[S>>>28]|u[S>>>24&15]|f[S>>>20&15]|l[S>>>16&15]|h[S>>>12&15]|y[S>>>8&15]|d[S>>>4&15];b=(G>>>16^k)&65535,g[w++]=k^b,g[w++]=G^b<<16}}return g}function i0(e,t,r,n){var i=e.length===32?3:9,s;i===3?s=n?[30,-2,-2]:[0,32,2]:s=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var o,a=t[0],c=t[1];o=(a>>>4^c)&252645135,c^=o,a^=o<<4,o=(a>>>16^c)&65535,c^=o,a^=o<<16,o=(c>>>2^a)&858993459,a^=o,c^=o<<2,o=(c>>>8^a)&16711935,a^=o,c^=o<<8,o=(a>>>1^c)&1431655765,c^=o,a^=o<<1,a=a<<1|a>>>31,c=c<<1|c>>>31;for(var u=0;u<i;u+=3){for(var f=s[u+1],l=s[u+2],h=s[u];h!=f;h+=l){var y=c^e[h],d=(c>>>4|c<<28)^e[h+1];o=a,a=c,c=o^(sl[y>>>24&63]|al[y>>>16&63]|ul[y>>>8&63]|ll[y&63]|il[d>>>24&63]|ol[d>>>16&63]|cl[d>>>8&63]|fl[d&63])}o=a,a=c,c=o}a=a>>>1|a<<31,c=c>>>1|c<<31,o=(a>>>1^c)&1431655765,c^=o,a^=o<<1,o=(c>>>8^a)&16711935,a^=o,c^=o<<8,o=(c>>>2^a)&858993459,a^=o,c^=o<<2,o=(a>>>16^c)&65535,c^=o,a^=o<<16,o=(a>>>4^c)&252645135,c^=o,a^=o<<4,r[0]=a,r[1]=c}function ti(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),r="DES-"+t,n;e.decrypt?n=yt.cipher.createDecipher(r,e.key):n=yt.cipher.createCipher(r,e.key);var i=n.start;return n.start=function(s,o){var a=null;o instanceof yt.util.ByteBuffer&&(a=o,o={}),o=o||{},o.output=a,o.iv=s,i.call(n,o)},n}});var gr=lt((dg,a0)=>{var ei=ct();a0.exports=ei.md=ei.md||{};ei.md.algorithms=ei.md.algorithms||{}});var u0=lt((pg,c0)=>{var Pe=ct();gr();Tt();var dl=c0.exports=Pe.hmac=Pe.hmac||{};dl.create=function(){var e=null,t=null,r=null,n=null,i={};return i.start=function(s,o){if(s!==null)if(typeof s=="string")if(s=s.toLowerCase(),s in Pe.md.algorithms)t=Pe.md.algorithms[s].create();else throw new Error('Unknown hash algorithm "'+s+'"');else t=s;if(o===null)o=e;else{if(typeof o=="string")o=Pe.util.createBuffer(o);else if(Pe.util.isArray(o)){var a=o;o=Pe.util.createBuffer();for(var c=0;c<a.length;++c)o.putByte(a[c])}var u=o.length();u>t.blockLength&&(t.start(),t.update(o.bytes()),o=t.digest()),r=Pe.util.createBuffer(),n=Pe.util.createBuffer(),u=o.length();for(var c=0;c<u;++c){var a=o.at(c);r.putByte(54^a),n.putByte(92^a)}if(u<t.blockLength)for(var a=t.blockLength-u,c=0;c<a;++c)r.putByte(54),n.putByte(92);e=o,r=r.bytes(),n=n.bytes()}t.start(),t.update(r)},i.update=function(s){t.update(s)},i.getMac=function(){var s=t.digest().bytes();return t.start(),t.update(n),t.update(s),t.digest()},i.digest=i.getMac,i}});var ri=lt(()=>{});var l0=lt((mg,f0)=>{var $t=ct();u0();gr();Tt();var pl=$t.pkcs5=$t.pkcs5||{},De;$t.util.isNodejs&&!$t.options.usePureJavaScript&&(De=ri());f0.exports=$t.pbkdf2=pl.pbkdf2=function(e,t,r,n,i,s){if(typeof i=="function"&&(s=i,i=null),$t.util.isNodejs&&!$t.options.usePureJavaScript&&De.pbkdf2&&(i===null||typeof i!="object")&&(De.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),e=Buffer.from(e,"binary"),t=Buffer.from(t,"binary"),s?De.pbkdf2Sync.length===4?De.pbkdf2(e,t,r,n,function(b,R){if(b)return s(b);s(null,R.toString("binary"))}):De.pbkdf2(e,t,r,n,i,function(b,R){if(b)return s(b);s(null,R.toString("binary"))}):De.pbkdf2Sync.length===4?De.pbkdf2Sync(e,t,r,n).toString("binary"):De.pbkdf2Sync(e,t,r,n,i).toString("binary");if((typeof i>"u"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in $t.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=$t.md[i].create()}var o=i.digestLength;if(n>4294967295*o){var a=new Error("Derived key is too long.");if(s)return s(a);throw a}var c=Math.ceil(n/o),u=n-(c-1)*o,f=$t.hmac.create();f.start(i,e);var l="",h,y,d;if(!s){for(var p=1;p<=c;++p){f.start(null,null),f.update(t),f.update($t.util.int32ToBytes(p)),h=d=f.digest().getBytes();for(var g=2;g<=r;++g)f.start(null,null),f.update(d),y=f.digest().getBytes(),h=$t.util.xorBytes(h,y,o),d=y;l+=p<c?h:h.substr(0,u)}return l}var p=1,g;function x(){if(p>c)return s(null,l);f.start(null,null),f.update(t),f.update($t.util.int32ToBytes(p)),h=d=f.digest().getBytes(),g=2,w()}function w(){if(g<=r)return f.start(null,null),f.update(d),y=f.digest().getBytes(),h=$t.util.xorBytes(h,y,o),d=y,++g,$t.util.setImmediate(w);l+=p<c?h:h.substr(0,u),++p,x()}x()}});var p0=lt((xg,d0)=>{var ii=ct();Tt();var h0=d0.exports=ii.pem=ii.pem||{};h0.encode=function(e,t){t=t||{};var r="-----BEGIN "+e.type+`-----\r
`,n;if(e.procType&&(n={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]},r+=ni(n)),e.contentDomain&&(n={name:"Content-Domain",values:[e.contentDomain]},r+=ni(n)),e.dekInfo&&(n={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&n.values.push(e.dekInfo.parameters),r+=ni(n)),e.headers)for(var i=0;i<e.headers.length;++i)r+=ni(e.headers[i]);return e.procType&&(r+=`\r
`),r+=ii.util.encode64(e.body,t.maxline||64)+`\r
`,r+="-----END "+e.type+`-----\r
`,r};h0.decode=function(e){for(var t=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,s;s=r.exec(e),!!s;){var o=s[1];o==="NEW CERTIFICATE REQUEST"&&(o="CERTIFICATE REQUEST");var a={type:o,procType:null,contentDomain:null,dekInfo:null,headers:[],body:ii.util.decode64(s[3])};if(t.push(a),!!s[2]){for(var c=s[2].split(i),u=0;s&&u<c.length;){for(var f=c[u].replace(/\s+$/,""),l=u+1;l<c.length;++l){var h=c[l];if(!/\s/.test(h[0]))break;f+=h,u=l}if(s=f.match(n),s){for(var y={name:s[1],values:[]},d=s[2].split(","),p=0;p<d.length;++p)y.values.push(yl(d[p]));if(a.procType)if(!a.contentDomain&&y.name==="Content-Domain")a.contentDomain=d[0]||"";else if(!a.dekInfo&&y.name==="DEK-Info"){if(y.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');a.dekInfo={algorithm:d[0],parameters:d[1]||null}}else a.headers.push(y);else{if(y.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(y.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');a.procType={version:d[0],type:d[1]}}}++u}if(a.procType==="ENCRYPTED"&&!a.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(t.length===0)throw new Error("Invalid PEM formatted message.");return t};function ni(e){for(var t=e.name+": ",r=[],n=function(c,u){return" "+u},i=0;i<e.values.length;++i)r.push(e.values[i].replace(/^(\S+\r\n)/,n));t+=r.join(",")+`\r
`;for(var s=0,o=-1,i=0;i<t.length;++i,++s)if(s>65&&o!==-1){var a=t[o];a===","?(++o,t=t.substr(0,o)+`\r
 `+t.substr(o)):t=t.substr(0,o)+`\r
`+a+t.substr(o+1),s=i-o-1,o=-1,++i}else(t[i]===" "||t[i]==="	"||t[i]===",")&&(o=i);return t}function yl(e){return e.replace(/^\s+/,"")}});var b0=lt((vg,v0)=>{var Ee=ct();gr();Tt();var g0=v0.exports=Ee.sha256=Ee.sha256||{};Ee.md.sha256=Ee.md.algorithms.sha256=g0;g0.create=function(){m0||gl();var e=null,t=Ee.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,s=0;s<i;++s)n.fullMessageLength.push(0);return t=Ee.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,s){s==="utf8"&&(i=Ee.util.encodeUtf8(i));var o=i.length;n.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=o[1],o[1]=o[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,o[0]=o[1]/4294967296>>>0;return t.putBytes(i),y0(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=Ee.util.createBuffer();i.putBytes(t.bytes());var s=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,o=s&n.blockLength-1;i.putBytes(vs.substr(0,n.blockLength-o));for(var a,c,u=n.fullMessageLength[0]*8,f=0;f<n.fullMessageLength.length-1;++f)a=n.fullMessageLength[f+1]*8,c=a/4294967296>>>0,u+=c,i.putInt32(u>>>0),u=a>>>0;i.putInt32(u);var l={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};y0(l,r,i);var h=Ee.util.createBuffer();return h.putInt32(l.h0),h.putInt32(l.h1),h.putInt32(l.h2),h.putInt32(l.h3),h.putInt32(l.h4),h.putInt32(l.h5),h.putInt32(l.h6),h.putInt32(l.h7),h},n};var vs=null,m0=!1,x0=null;function gl(){vs="\x80",vs+=Ee.util.fillString("\0",64),x0=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],m0=!0}function y0(e,t,r){for(var n,i,s,o,a,c,u,f,l,h,y,d,p,g,x,w=r.length();w>=64;){for(u=0;u<16;++u)t[u]=r.getInt32();for(;u<64;++u)n=t[u-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=t[u-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,t[u]=n+t[u-7]+i+t[u-16]|0;for(f=e.h0,l=e.h1,h=e.h2,y=e.h3,d=e.h4,p=e.h5,g=e.h6,x=e.h7,u=0;u<64;++u)o=(d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7),a=g^d&(p^g),s=(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),c=f&l|h&(f^l),n=x+o+a+x0[u]+t[u],i=s+c,x=g,g=p,p=d,d=y+n>>>0,y=h,h=l,l=f,f=n+i>>>0;e.h0=e.h0+f|0,e.h1=e.h1+l|0,e.h2=e.h2+h|0,e.h3=e.h3+y|0,e.h4=e.h4+d|0,e.h5=e.h5+p|0,e.h6=e.h6+g|0,e.h7=e.h7+x|0,w-=64}}});var E0=lt((bg,w0)=>{var Se=ct();Tt();var si=null;Se.util.isNodejs&&!Se.options.usePureJavaScript&&!process.versions["node-webkit"]&&(si=ri());var ml=w0.exports=Se.prng=Se.prng||{};ml.create=function(e){for(var t={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=e.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();t.pools=n,t.pool=0,t.generate=function(u,f){if(!f)return t.generateSync(u);var l=t.plugin.cipher,h=t.plugin.increment,y=t.plugin.formatKey,d=t.plugin.formatSeed,p=Se.util.createBuffer();t.key=null,g();function g(x){if(x)return f(x);if(p.length()>=u)return f(null,p.getBytes(u));if(t.generated>1048575&&(t.key=null),t.key===null)return Se.util.nextTick(function(){s(g)});var w=l(t.key,t.seed);t.generated+=w.length,p.putBytes(w),t.key=y(l(t.key,h(t.seed))),t.seed=d(l(t.key,t.seed)),Se.util.setImmediate(g)}},t.generateSync=function(u){var f=t.plugin.cipher,l=t.plugin.increment,h=t.plugin.formatKey,y=t.plugin.formatSeed;t.key=null;for(var d=Se.util.createBuffer();d.length()<u;){t.generated>1048575&&(t.key=null),t.key===null&&o();var p=f(t.key,t.seed);t.generated+=p.length,d.putBytes(p),t.key=h(f(t.key,l(t.seed))),t.seed=y(f(t.key,t.seed))}return d.getBytes(u)};function s(u){if(t.pools[0].messageLength>=32)return a(),u();var f=32-t.pools[0].messageLength<<5;t.seedFile(f,function(l,h){if(l)return u(l);t.collect(h),a(),u()})}function o(){if(t.pools[0].messageLength>=32)return a();var u=32-t.pools[0].messageLength<<5;t.collect(t.seedFileSync(u)),a()}function a(){t.reseeds=t.reseeds===4294967295?0:t.reseeds+1;var u=t.plugin.md.create();u.update(t.keyBytes);for(var f=1,l=0;l<32;++l)t.reseeds%f===0&&(u.update(t.pools[l].digest().getBytes()),t.pools[l].start()),f=f<<1;t.keyBytes=u.digest().getBytes(),u.start(),u.update(t.keyBytes);var h=u.digest().getBytes();t.key=t.plugin.formatKey(t.keyBytes),t.seed=t.plugin.formatSeed(h),t.generated=0}function c(u){var f=null,l=Se.util.globalScope,h=l.crypto||l.msCrypto;h&&h.getRandomValues&&(f=function(E){return h.getRandomValues(E)});var y=Se.util.createBuffer();if(f)for(;y.length()<u;){var d=Math.max(1,Math.min(u-y.length(),65536)/4),p=new Uint32Array(Math.floor(d));try{f(p);for(var g=0;g<p.length;++g)y.putInt32(p[g])}catch(E){if(!(typeof QuotaExceededError<"u"&&E instanceof QuotaExceededError))throw E}}if(y.length()<u)for(var x,w,b,R=Math.floor(Math.random()*65536);y.length()<u;){w=16807*(R&65535),x=16807*(R>>16),w+=(x&32767)<<16,w+=x>>15,w=(w&2147483647)+(w>>31),R=w&4294967295;for(var g=0;g<3;++g)b=R>>>(g<<3),b^=Math.floor(Math.random()*256),y.putByte(b&255)}return y.getBytes(u)}return si?(t.seedFile=function(u,f){si.randomBytes(u,function(l,h){if(l)return f(l);f(null,h.toString())})},t.seedFileSync=function(u){return si.randomBytes(u).toString()}):(t.seedFile=function(u,f){try{f(null,c(u))}catch(l){f(l)}},t.seedFileSync=c),t.collect=function(u){for(var f=u.length,l=0;l<f;++l)t.pools[t.pool].update(u.substr(l,1)),t.pool=t.pool===31?0:t.pool+1},t.collectInt=function(u,f){for(var l="",h=0;h<f;h+=8)l+=String.fromCharCode(u>>h&255);t.collect(l)},t.registerWorker=function(u){if(u===self)t.seedFile=function(l,h){function y(d){var p=d.data;p.forge&&p.forge.prng&&(self.removeEventListener("message",y),h(p.forge.prng.err,p.forge.prng.bytes))}self.addEventListener("message",y),self.postMessage({forge:{prng:{needed:l}}})};else{var f=function(l){var h=l.data;h.forge&&h.forge.prng&&t.seedFile(h.forge.prng.needed,function(y,d){u.postMessage({forge:{prng:{err:y,bytes:d}}})})};u.addEventListener("message",f)}},t}});var mn=lt((wg,bs)=>{var Ut=ct();xs();b0();E0();Tt();(function(){if(Ut.random&&Ut.random.getBytes){bs.exports=Ut.random;return}(function(e){var t={},r=new Array(4),n=Ut.util.createBuffer();t.formatKey=function(l){var h=Ut.util.createBuffer(l);return l=new Array(4),l[0]=h.getInt32(),l[1]=h.getInt32(),l[2]=h.getInt32(),l[3]=h.getInt32(),Ut.aes._expandKey(l,!1)},t.formatSeed=function(l){var h=Ut.util.createBuffer(l);return l=new Array(4),l[0]=h.getInt32(),l[1]=h.getInt32(),l[2]=h.getInt32(),l[3]=h.getInt32(),l},t.cipher=function(l,h){return Ut.aes._updateBlock(l,h,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},t.increment=function(l){return++l[3],l},t.md=Ut.md.sha256;function i(){var l=Ut.prng.create(t);return l.getBytes=function(h,y){return l.generate(h,y)},l.getBytesSync=function(h){return l.generate(h)},l}var s=i(),o=null,a=Ut.util.globalScope,c=a.crypto||a.msCrypto;if(c&&c.getRandomValues&&(o=function(l){return c.getRandomValues(l)}),Ut.options.usePureJavaScript||!Ut.util.isNodejs&&!o){if(typeof window>"u"||window.document,s.collectInt(+new Date,32),typeof navigator<"u"){var u="";for(var f in navigator)try{typeof navigator[f]=="string"&&(u+=navigator[f])}catch{}s.collect(u),u=null}e&&(e().mousemove(function(l){s.collectInt(l.clientX,16),s.collectInt(l.clientY,16)}),e().keypress(function(l){s.collectInt(l.charCode,8)}))}if(!Ut.random)Ut.random=s;else for(var f in s)Ut.random[f]=s[f];Ut.random.createInstance=i,bs.exports=Ut.random})(typeof jQuery<"u"?jQuery:null)})()});var I0=lt((Eg,A0)=>{var jt=ct();Tt();var ws=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],S0=[1,2,3,5],xl=function(e,t){return e<<t&65535|(e&65535)>>16-t},vl=function(e,t){return(e&65535)>>t|e<<16-t&65535};A0.exports=jt.rc2=jt.rc2||{};jt.rc2.expandKey=function(e,t){typeof e=="string"&&(e=jt.util.createBuffer(e)),t=t||128;var r=e,n=e.length(),i=t,s=Math.ceil(i/8),o=255>>(i&7),a;for(a=n;a<128;a++)r.putByte(ws[r.at(a-1)+r.at(a-n)&255]);for(r.setAt(128-s,ws[r.at(128-s)&o]),a=127-s;a>=0;a--)r.setAt(a,ws[r.at(a+1)^r.at(a+s)]);return r};var B0=function(e,t,r){var n=!1,i=null,s=null,o=null,a,c,u,f,l=[];for(e=jt.rc2.expandKey(e,t),u=0;u<64;u++)l.push(e.getInt16Le());r?(a=function(d){for(u=0;u<4;u++)d[u]+=l[f]+(d[(u+3)%4]&d[(u+2)%4])+(~d[(u+3)%4]&d[(u+1)%4]),d[u]=xl(d[u],S0[u]),f++},c=function(d){for(u=0;u<4;u++)d[u]+=l[d[(u+3)%4]&63]}):(a=function(d){for(u=3;u>=0;u--)d[u]=vl(d[u],S0[u]),d[u]-=l[f]+(d[(u+3)%4]&d[(u+2)%4])+(~d[(u+3)%4]&d[(u+1)%4]),f--},c=function(d){for(u=3;u>=0;u--)d[u]-=l[d[(u+3)%4]&63]});var h=function(d){var p=[];for(u=0;u<4;u++){var g=i.getInt16Le();o!==null&&(r?g^=o.getInt16Le():o.putInt16Le(g)),p.push(g&65535)}f=r?0:63;for(var x=0;x<d.length;x++)for(var w=0;w<d[x][0];w++)d[x][1](p);for(u=0;u<4;u++)o!==null&&(r?o.putInt16Le(p[u]):p[u]^=o.getInt16Le()),s.putInt16Le(p[u])},y=null;return y={start:function(d,p){d&&typeof d=="string"&&(d=jt.util.createBuffer(d)),n=!1,i=jt.util.createBuffer(),s=p||new jt.util.createBuffer,o=d,y.output=s},update:function(d){for(n||i.putBuffer(d);i.length()>=8;)h([[5,a],[1,c],[6,a],[1,c],[5,a]])},finish:function(d){var p=!0;if(r)if(d)p=d(8,i,!r);else{var g=i.length()===8?8:8-i.length();i.fillWithByte(g,g)}if(p&&(n=!0,y.update()),!r&&(p=i.length()===0,p))if(d)p=d(8,s,!r);else{var x=s.length(),w=s.at(x-1);w>x?p=!1:s.truncate(w)}return p}},y};jt.rc2.startEncrypting=function(e,t,r){var n=jt.rc2.createEncryptionCipher(e,128);return n.start(t,r),n};jt.rc2.createEncryptionCipher=function(e,t){return B0(e,t,!0)};jt.rc2.startDecrypting=function(e,t,r){var n=jt.rc2.createDecryptionCipher(e,128);return n.start(t,r),n};jt.rc2.createDecryptionCipher=function(e,t){return B0(e,t,!1)}});var ci=lt((Sg,P0)=>{var Es=ct();P0.exports=Es.jsbn=Es.jsbn||{};var Ue,bl=0xdeadbeefcafe,T0=(bl&16777215)==15715070;function I(e,t,r){this.data=[],e!=null&&(typeof e=="number"?this.fromNumber(e,t,r):t==null&&typeof e!="string"?this.fromString(e,256):this.fromString(e,t))}Es.jsbn.BigInteger=I;function et(){return new I(null)}function wl(e,t,r,n,i,s){for(;--s>=0;){var o=t*this.data[e++]+r.data[n]+i;i=Math.floor(o/67108864),r.data[n++]=o&67108863}return i}function El(e,t,r,n,i,s){for(var o=t&32767,a=t>>15;--s>=0;){var c=this.data[e]&32767,u=this.data[e++]>>15,f=a*c+u*o;c=o*c+((f&32767)<<15)+r.data[n]+(i&1073741823),i=(c>>>30)+(f>>>15)+a*u+(i>>>30),r.data[n++]=c&1073741823}return i}function C0(e,t,r,n,i,s){for(var o=t&16383,a=t>>14;--s>=0;){var c=this.data[e]&16383,u=this.data[e++]>>14,f=a*c+u*o;c=o*c+((f&16383)<<14)+r.data[n]+i,i=(c>>28)+(f>>14)+a*u,r.data[n++]=c&268435455}return i}typeof navigator>"u"?(I.prototype.am=C0,Ue=28):T0&&navigator.appName=="Microsoft Internet Explorer"?(I.prototype.am=El,Ue=30):T0&&navigator.appName!="Netscape"?(I.prototype.am=wl,Ue=26):(I.prototype.am=C0,Ue=28);I.prototype.DB=Ue;I.prototype.DM=(1<<Ue)-1;I.prototype.DV=1<<Ue;var Ss=52;I.prototype.FV=Math.pow(2,Ss);I.prototype.F1=Ss-Ue;I.prototype.F2=2*Ue-Ss;var Sl="0123456789abcdefghijklmnopqrstuvwxyz",oi=new Array,qr,ae;qr=48;for(ae=0;ae<=9;++ae)oi[qr++]=ae;qr=97;for(ae=10;ae<36;++ae)oi[qr++]=ae;qr=65;for(ae=10;ae<36;++ae)oi[qr++]=ae;function _0(e){return Sl.charAt(e)}function R0(e,t){var r=oi[e.charCodeAt(t)];return r??-1}function Bl(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s}function Al(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0}function Xe(e){var t=et();return t.fromInt(e),t}function Il(e,t){var r;if(t==16)r=4;else if(t==8)r=3;else if(t==256)r=8;else if(t==2)r=1;else if(t==32)r=5;else if(t==4)r=2;else{this.fromRadix(e,t);return}this.t=0,this.s=0;for(var n=e.length,i=!1,s=0;--n>=0;){var o=r==8?e[n]&255:R0(e,n);if(o<0){e.charAt(n)=="-"&&(i=!0);continue}i=!1,s==0?this.data[this.t++]=o:s+r>this.DB?(this.data[this.t-1]|=(o&(1<<this.DB-s)-1)<<s,this.data[this.t++]=o>>this.DB-s):this.data[this.t-1]|=o<<s,s+=r,s>=this.DB&&(s-=this.DB)}r==8&&e[0]&128&&(this.s=-1,s>0&&(this.data[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),i&&I.ZERO.subTo(this,this)}function Tl(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t}function Cl(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(e==16)t=4;else if(e==8)t=3;else if(e==2)t=1;else if(e==32)t=5;else if(e==4)t=2;else return this.toRadix(e);var r=(1<<t)-1,n,i=!1,s="",o=this.t,a=this.DB-o*this.DB%t;if(o-- >0)for(a<this.DB&&(n=this.data[o]>>a)>0&&(i=!0,s=_0(n));o>=0;)a<t?(n=(this.data[o]&(1<<a)-1)<<t-a,n|=this.data[--o]>>(a+=this.DB-t)):(n=this.data[o]>>(a-=t)&r,a<=0&&(a+=this.DB,--o)),n>0&&(i=!0),i&&(s+=_0(n));return i?s:"0"}function _l(){var e=et();return I.ZERO.subTo(this,e),e}function Rl(){return this.s<0?this.negate():this}function Ll(e){var t=this.s-e.s;if(t!=0)return t;var r=this.t;if(t=r-e.t,t!=0)return this.s<0?-t:t;for(;--r>=0;)if((t=this.data[r]-e.data[r])!=0)return t;return 0}function ai(e){var t=1,r;return(r=e>>>16)!=0&&(e=r,t+=16),(r=e>>8)!=0&&(e=r,t+=8),(r=e>>4)!=0&&(e=r,t+=4),(r=e>>2)!=0&&(e=r,t+=2),(r=e>>1)!=0&&(e=r,t+=1),t}function kl(){return this.t<=0?0:this.DB*(this.t-1)+ai(this.data[this.t-1]^this.s&this.DM)}function Nl(e,t){var r;for(r=this.t-1;r>=0;--r)t.data[r+e]=this.data[r];for(r=e-1;r>=0;--r)t.data[r]=0;t.t=this.t+e,t.s=this.s}function Pl(e,t){for(var r=e;r<this.t;++r)t.data[r-e]=this.data[r];t.t=Math.max(this.t-e,0),t.s=this.s}function Dl(e,t){var r=e%this.DB,n=this.DB-r,i=(1<<n)-1,s=Math.floor(e/this.DB),o=this.s<<r&this.DM,a;for(a=this.t-1;a>=0;--a)t.data[a+s+1]=this.data[a]>>n|o,o=(this.data[a]&i)<<r;for(a=s-1;a>=0;--a)t.data[a]=0;t.data[s]=o,t.t=this.t+s+1,t.s=this.s,t.clamp()}function Ul(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t){t.t=0;return}var n=e%this.DB,i=this.DB-n,s=(1<<n)-1;t.data[0]=this.data[r]>>n;for(var o=r+1;o<this.t;++o)t.data[o-r-1]|=(this.data[o]&s)<<i,t.data[o-r]=this.data[o]>>n;n>0&&(t.data[this.t-r-1]|=(this.s&s)<<i),t.t=this.t-r,t.clamp()}function Kl(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]-e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t.data[r++]=this.DV+n:n>0&&(t.data[r++]=n),t.t=r,t.clamp()}function Ol(e,t){var r=this.abs(),n=e.abs(),i=r.t;for(t.t=i+n.t;--i>=0;)t.data[i]=0;for(i=0;i<n.t;++i)t.data[i+r.t]=r.am(0,n.data[i],t,i,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&I.ZERO.subTo(t,t)}function Ml(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e.data[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t.data[r],e,2*r,0,1);(e.data[r+t.t]+=t.am(r+1,2*t.data[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e.data[r+t.t]-=t.DV,e.data[r+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(r,t.data[r],e,2*r,0,1)),e.s=0,e.clamp()}function Vl(e,t,r){var n=e.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){t?.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=et());var s=et(),o=this.s,a=e.s,c=this.DB-ai(n.data[n.t-1]);c>0?(n.lShiftTo(c,s),i.lShiftTo(c,r)):(n.copyTo(s),i.copyTo(r));var u=s.t,f=s.data[u-1];if(f!=0){var l=f*(1<<this.F1)+(u>1?s.data[u-2]>>this.F2:0),h=this.FV/l,y=(1<<this.F1)/l,d=1<<this.F2,p=r.t,g=p-u,x=t??et();for(s.dlShiftTo(g,x),r.compareTo(x)>=0&&(r.data[r.t++]=1,r.subTo(x,r)),I.ONE.dlShiftTo(u,x),x.subTo(s,s);s.t<u;)s.data[s.t++]=0;for(;--g>=0;){var w=r.data[--p]==f?this.DM:Math.floor(r.data[p]*h+(r.data[p-1]+d)*y);if((r.data[p]+=s.am(0,w,r,g,0,u))<w)for(s.dlShiftTo(g,x),r.subTo(x,r);r.data[p]<--w;)r.subTo(x,r)}t!=null&&(r.drShiftTo(u,t),o!=a&&I.ZERO.subTo(t,t)),r.t=u,r.clamp(),c>0&&r.rShiftTo(c,r),o<0&&I.ZERO.subTo(r,r)}}}function Fl(e){var t=et();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(I.ZERO)>0&&e.subTo(t,t),t}function mr(e){this.m=e}function ql(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function Hl(e){return e}function zl(e){e.divRemTo(this.m,null,e)}function Gl(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function Wl(e,t){e.squareTo(t),this.reduce(t)}mr.prototype.convert=ql;mr.prototype.revert=Hl;mr.prototype.reduce=zl;mr.prototype.mulTo=Gl;mr.prototype.sqrTo=Wl;function $l(){if(this.t<1)return 0;var e=this.data[0];if(!(e&1))return 0;var t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function xr(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function Ql(e){var t=et();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(I.ZERO)>0&&this.m.subTo(t,t),t}function Yl(e){var t=et();return e.copyTo(t),this.reduce(t),t}function Zl(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=e.data[t]&32767,n=r*this.mpl+((r*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e.data[r]+=this.m.am(0,n,e,t,0,this.m.t);e.data[r]>=e.DV;)e.data[r]-=e.DV,e.data[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function Xl(e,t){e.squareTo(t),this.reduce(t)}function Jl(e,t,r){e.multiplyTo(t,r),this.reduce(r)}xr.prototype.convert=Ql;xr.prototype.revert=Yl;xr.prototype.reduce=Zl;xr.prototype.mulTo=Jl;xr.prototype.sqrTo=Xl;function jl(){return(this.t>0?this.data[0]&1:this.s)==0}function th(e,t){if(e>4294967295||e<1)return I.ONE;var r=et(),n=et(),i=t.convert(this),s=ai(e)-1;for(i.copyTo(r);--s>=0;)if(t.sqrTo(r,n),(e&1<<s)>0)t.mulTo(n,i,r);else{var o=r;r=n,n=o}return t.revert(r)}function eh(e,t){var r;return e<256||t.isEven()?r=new mr(t):r=new xr(t),this.exp(e,r)}I.prototype.copyTo=Bl;I.prototype.fromInt=Al;I.prototype.fromString=Il;I.prototype.clamp=Tl;I.prototype.dlShiftTo=Nl;I.prototype.drShiftTo=Pl;I.prototype.lShiftTo=Dl;I.prototype.rShiftTo=Ul;I.prototype.subTo=Kl;I.prototype.multiplyTo=Ol;I.prototype.squareTo=Ml;I.prototype.divRemTo=Vl;I.prototype.invDigit=$l;I.prototype.isEven=jl;I.prototype.exp=th;I.prototype.toString=Cl;I.prototype.negate=_l;I.prototype.abs=Rl;I.prototype.compareTo=Ll;I.prototype.bitLength=kl;I.prototype.mod=Fl;I.prototype.modPowInt=eh;I.ZERO=Xe(0);I.ONE=Xe(1);function rh(){var e=et();return this.copyTo(e),e}function nh(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function ih(){return this.t==0?this.s:this.data[0]<<24>>24}function sh(){return this.t==0?this.s:this.data[0]<<16>>16}function oh(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function ah(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function ch(e){if(e==null&&(e=10),this.signum()==0||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=Xe(r),i=et(),s=et(),o="";for(this.divRemTo(n,i,s);i.signum()>0;)o=(r+s.intValue()).toString(e).substr(1)+o,i.divRemTo(n,i,s);return s.intValue().toString(e)+o}function uh(e,t){this.fromInt(0),t==null&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),i=!1,s=0,o=0,a=0;a<e.length;++a){var c=R0(e,a);if(c<0){e.charAt(a)=="-"&&this.signum()==0&&(i=!0);continue}o=t*o+c,++s>=r&&(this.dMultiply(n),this.dAddOffset(o,0),s=0,o=0)}s>0&&(this.dMultiply(Math.pow(t,s)),this.dAddOffset(o,0)),i&&I.ZERO.subTo(this,this)}function fh(e,t,r){if(typeof t=="number")if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(I.ONE.shiftLeft(e-1),Bs,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(I.ONE.shiftLeft(e-1),this);else{var n=new Array,i=e&7;n.length=(e>>3)+1,t.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}function lh(){var e=this.t,t=new Array;t[0]=this.s;var r=this.DB-e*this.DB%8,n,i=0;if(e-- >0)for(r<this.DB&&(n=this.data[e]>>r)!=(this.s&this.DM)>>r&&(t[i++]=n|this.s<<this.DB-r);e>=0;)r<8?(n=(this.data[e]&(1<<r)-1)<<8-r,n|=this.data[--e]>>(r+=this.DB-8)):(n=this.data[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),n&128&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(t[i++]=n);return t}function hh(e){return this.compareTo(e)==0}function dh(e){return this.compareTo(e)<0?this:e}function ph(e){return this.compareTo(e)>0?this:e}function yh(e,t,r){var n,i,s=Math.min(e.t,this.t);for(n=0;n<s;++n)r.data[n]=t(this.data[n],e.data[n]);if(e.t<this.t){for(i=e.s&this.DM,n=s;n<this.t;++n)r.data[n]=t(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=s;n<e.t;++n)r.data[n]=t(i,e.data[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()}function gh(e,t){return e&t}function mh(e){var t=et();return this.bitwiseTo(e,gh,t),t}function Bs(e,t){return e|t}function xh(e){var t=et();return this.bitwiseTo(e,Bs,t),t}function L0(e,t){return e^t}function vh(e){var t=et();return this.bitwiseTo(e,L0,t),t}function k0(e,t){return e&~t}function bh(e){var t=et();return this.bitwiseTo(e,k0,t),t}function wh(){for(var e=et(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e}function Eh(e){var t=et();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function Sh(e){var t=et();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function Bh(e){if(e==0)return-1;var t=0;return e&65535||(e>>=16,t+=16),e&255||(e>>=8,t+=8),e&15||(e>>=4,t+=4),e&3||(e>>=2,t+=2),e&1||++t,t}function Ah(){for(var e=0;e<this.t;++e)if(this.data[e]!=0)return e*this.DB+Bh(this.data[e]);return this.s<0?this.t*this.DB:-1}function Ih(e){for(var t=0;e!=0;)e&=e-1,++t;return t}function Th(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=Ih(this.data[r]^t);return e}function Ch(e){var t=Math.floor(e/this.DB);return t>=this.t?this.s!=0:(this.data[t]&1<<e%this.DB)!=0}function _h(e,t){var r=I.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r}function Rh(e){return this.changeBit(e,Bs)}function Lh(e){return this.changeBit(e,k0)}function kh(e){return this.changeBit(e,L0)}function Nh(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]+e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t.data[r++]=n:n<-1&&(t.data[r++]=this.DV+n),t.t=r,t.clamp()}function Ph(e){var t=et();return this.addTo(e,t),t}function Dh(e){var t=et();return this.subTo(e,t),t}function Uh(e){var t=et();return this.multiplyTo(e,t),t}function Kh(e){var t=et();return this.divRemTo(e,t,null),t}function Oh(e){var t=et();return this.divRemTo(e,null,t),t}function Mh(e){var t=et(),r=et();return this.divRemTo(e,t,r),new Array(t,r)}function Vh(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function Fh(e,t){if(e!=0){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}}function xn(){}function N0(e){return e}function qh(e,t,r){e.multiplyTo(t,r)}function Hh(e,t){e.squareTo(t)}xn.prototype.convert=N0;xn.prototype.revert=N0;xn.prototype.mulTo=qh;xn.prototype.sqrTo=Hh;function zh(e){return this.exp(e,new xn)}function Gh(e,t,r){var n=Math.min(this.t+e.t,t);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,e.data[n],r,n,0,this.t);for(i=Math.min(e.t,t);n<i;++n)this.am(0,e.data[n],r,n,0,t-n);r.clamp()}function Wh(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r.data[this.t+n-t]=this.am(t-n,e.data[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)}function Hr(e){this.r2=et(),this.q3=et(),I.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function $h(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=et();return e.copyTo(t),this.reduce(t),t}function Qh(e){return e}function Yh(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function Zh(e,t){e.squareTo(t),this.reduce(t)}function Xh(e,t,r){e.multiplyTo(t,r),this.reduce(r)}Hr.prototype.convert=$h;Hr.prototype.revert=Qh;Hr.prototype.reduce=Yh;Hr.prototype.mulTo=Xh;Hr.prototype.sqrTo=Zh;function Jh(e,t){var r=e.bitLength(),n,i=Xe(1),s;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?s=new mr(t):t.isEven()?s=new Hr(t):s=new xr(t);var o=new Array,a=3,c=n-1,u=(1<<n)-1;if(o[1]=s.convert(this),n>1){var f=et();for(s.sqrTo(o[1],f);a<=u;)o[a]=et(),s.mulTo(f,o[a-2],o[a]),a+=2}var l=e.t-1,h,y=!0,d=et(),p;for(r=ai(e.data[l])-1;l>=0;){for(r>=c?h=e.data[l]>>r-c&u:(h=(e.data[l]&(1<<r+1)-1)<<c-r,l>0&&(h|=e.data[l-1]>>this.DB+r-c)),a=n;!(h&1);)h>>=1,--a;if((r-=a)<0&&(r+=this.DB,--l),y)o[h].copyTo(i),y=!1;else{for(;a>1;)s.sqrTo(i,d),s.sqrTo(d,i),a-=2;a>0?s.sqrTo(i,d):(p=i,i=d,d=p),s.mulTo(d,o[h],i)}for(;l>=0&&!(e.data[l]&1<<r);)s.sqrTo(i,d),p=i,i=d,d=p,--r<0&&(r=this.DB-1,--l)}return s.revert(i)}function jh(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var i=t.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return t;for(i<s&&(s=i),s>0&&(t.rShiftTo(s,t),r.rShiftTo(s,r));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r}function td(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(t==0)r=this.data[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this.data[n])%e;return r}function ed(e){var t=e.isEven();if(this.isEven()&&t||e.signum()==0)return I.ZERO;for(var r=e.clone(),n=this.clone(),i=Xe(1),s=Xe(0),o=Xe(0),a=Xe(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),t?((!i.isEven()||!s.isEven())&&(i.addTo(this,i),s.subTo(e,s)),i.rShiftTo(1,i)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);for(;n.isEven();)n.rShiftTo(1,n),t?((!o.isEven()||!a.isEven())&&(o.addTo(this,o),a.subTo(e,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);r.compareTo(n)>=0?(r.subTo(n,r),t&&i.subTo(o,i),s.subTo(a,s)):(n.subTo(r,n),t&&o.subTo(i,o),a.subTo(s,a))}if(n.compareTo(I.ONE)!=0)return I.ZERO;if(a.compareTo(e)>=0)return a.subtract(e);if(a.signum()<0)a.addTo(e,a);else return a;return a.signum()<0?a.add(e):a}var he=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],rd=(1<<26)/he[he.length-1];function nd(e){var t,r=this.abs();if(r.t==1&&r.data[0]<=he[he.length-1]){for(t=0;t<he.length;++t)if(r.data[0]==he[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<he.length;){for(var n=he[t],i=t+1;i<he.length&&n<rd;)n*=he[i++];for(n=r.modInt(n);t<i;)if(n%he[t++]==0)return!1}return r.millerRabin(e)}function id(e){var t=this.subtract(I.ONE),r=t.getLowestSetBit();if(r<=0)return!1;for(var n=t.shiftRight(r),i=sd(),s,o=0;o<e;++o){do s=new I(this.bitLength(),i);while(s.compareTo(I.ONE)<=0||s.compareTo(t)>=0);var a=s.modPow(n,this);if(a.compareTo(I.ONE)!=0&&a.compareTo(t)!=0){for(var c=1;c++<r&&a.compareTo(t)!=0;)if(a=a.modPowInt(2,this),a.compareTo(I.ONE)==0)return!1;if(a.compareTo(t)!=0)return!1}}return!0}function sd(){return{nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(Math.random()*256)}}}I.prototype.chunkSize=oh;I.prototype.toRadix=ch;I.prototype.fromRadix=uh;I.prototype.fromNumber=fh;I.prototype.bitwiseTo=yh;I.prototype.changeBit=_h;I.prototype.addTo=Nh;I.prototype.dMultiply=Vh;I.prototype.dAddOffset=Fh;I.prototype.multiplyLowerTo=Gh;I.prototype.multiplyUpperTo=Wh;I.prototype.modInt=td;I.prototype.millerRabin=id;I.prototype.clone=rh;I.prototype.intValue=nh;I.prototype.byteValue=ih;I.prototype.shortValue=sh;I.prototype.signum=ah;I.prototype.toByteArray=lh;I.prototype.equals=hh;I.prototype.min=dh;I.prototype.max=ph;I.prototype.and=mh;I.prototype.or=xh;I.prototype.xor=vh;I.prototype.andNot=bh;I.prototype.not=wh;I.prototype.shiftLeft=Eh;I.prototype.shiftRight=Sh;I.prototype.getLowestSetBit=Ah;I.prototype.bitCount=Th;I.prototype.testBit=Ch;I.prototype.setBit=Rh;I.prototype.clearBit=Lh;I.prototype.flipBit=kh;I.prototype.add=Ph;I.prototype.subtract=Dh;I.prototype.multiply=Uh;I.prototype.divide=Kh;I.prototype.remainder=Oh;I.prototype.divideAndRemainder=Mh;I.prototype.modPow=Jh;I.prototype.modInverse=ed;I.prototype.pow=zh;I.prototype.gcd=jh;I.prototype.isProbablePrime=nd});var M0=lt((Bg,O0)=>{var Be=ct();gr();Tt();var U0=O0.exports=Be.sha1=Be.sha1||{};Be.md.sha1=Be.md.algorithms.sha1=U0;U0.create=function(){K0||od();var e=null,t=Be.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,s=0;s<i;++s)n.fullMessageLength.push(0);return t=Be.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,s){s==="utf8"&&(i=Be.util.encodeUtf8(i));var o=i.length;n.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=o[1],o[1]=o[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,o[0]=o[1]/4294967296>>>0;return t.putBytes(i),D0(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=Be.util.createBuffer();i.putBytes(t.bytes());var s=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,o=s&n.blockLength-1;i.putBytes(As.substr(0,n.blockLength-o));for(var a,c,u=n.fullMessageLength[0]*8,f=0;f<n.fullMessageLength.length-1;++f)a=n.fullMessageLength[f+1]*8,c=a/4294967296>>>0,u+=c,i.putInt32(u>>>0),u=a>>>0;i.putInt32(u);var l={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};D0(l,r,i);var h=Be.util.createBuffer();return h.putInt32(l.h0),h.putInt32(l.h1),h.putInt32(l.h2),h.putInt32(l.h3),h.putInt32(l.h4),h},n};var As=null,K0=!1;function od(){As="\x80",As+=Be.util.fillString("\0",64),K0=!0}function D0(e,t,r){for(var n,i,s,o,a,c,u,f,l=r.length();l>=64;){for(i=e.h0,s=e.h1,o=e.h2,a=e.h3,c=e.h4,f=0;f<16;++f)n=r.getInt32(),t[f]=n,u=a^s&(o^a),n=(i<<5|i>>>27)+u+c+1518500249+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;f<20;++f)n=t[f-3]^t[f-8]^t[f-14]^t[f-16],n=n<<1|n>>>31,t[f]=n,u=a^s&(o^a),n=(i<<5|i>>>27)+u+c+1518500249+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;f<32;++f)n=t[f-3]^t[f-8]^t[f-14]^t[f-16],n=n<<1|n>>>31,t[f]=n,u=s^o^a,n=(i<<5|i>>>27)+u+c+1859775393+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;f<40;++f)n=t[f-6]^t[f-16]^t[f-28]^t[f-32],n=n<<2|n>>>30,t[f]=n,u=s^o^a,n=(i<<5|i>>>27)+u+c+1859775393+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;f<60;++f)n=t[f-6]^t[f-16]^t[f-28]^t[f-32],n=n<<2|n>>>30,t[f]=n,u=s&o|a&(s^o),n=(i<<5|i>>>27)+u+c+2400959708+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;f<80;++f)n=t[f-6]^t[f-16]^t[f-28]^t[f-32],n=n<<2|n>>>30,t[f]=n,u=s^o^a,n=(i<<5|i>>>27)+u+c+3395469782+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;e.h0=e.h0+i|0,e.h1=e.h1+s|0,e.h2=e.h2+o|0,e.h3=e.h3+a|0,e.h4=e.h4+c|0,l-=64}}});var q0=lt((Ag,F0)=>{var Ae=ct();Tt();mn();M0();var V0=F0.exports=Ae.pkcs1=Ae.pkcs1||{};V0.encode_rsa_oaep=function(e,t,r){var n,i,s,o;typeof r=="string"?(n=r,i=arguments[3]||void 0,s=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(o=r.mgf1.md)),s?s.start():s=Ae.md.sha1.create(),o||(o=s);var a=Math.ceil(e.n.bitLength()/8),c=a-2*s.digestLength-2;if(t.length>c){var u=new Error("RSAES-OAEP input message length is too long.");throw u.length=t.length,u.maxLength=c,u}n||(n=""),s.update(n,"raw");for(var f=s.digest(),l="",h=c-t.length,y=0;y<h;y++)l+="\0";var d=f.getBytes()+l+""+t;if(!i)i=Ae.random.getBytes(s.digestLength);else if(i.length!==s.digestLength){var u=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw u.seedLength=i.length,u.digestLength=s.digestLength,u}var p=ui(i,a-s.digestLength-1,o),g=Ae.util.xorBytes(d,p,d.length),x=ui(g,s.digestLength,o),w=Ae.util.xorBytes(i,x,i.length);return"\0"+w+g};V0.decode_rsa_oaep=function(e,t,r){var n,i,s;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md));var o=Math.ceil(e.n.bitLength()/8);if(t.length!==o){var g=new Error("RSAES-OAEP encoded message length is invalid.");throw g.length=t.length,g.expectedLength=o,g}if(i===void 0?i=Ae.md.sha1.create():i.start(),s||(s=i),o<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var a=i.digest().getBytes(),c=t.charAt(0),u=t.substring(1,i.digestLength+1),f=t.substring(1+i.digestLength),l=ui(f,i.digestLength,s),h=Ae.util.xorBytes(u,l,u.length),y=ui(h,o-i.digestLength-1,s),d=Ae.util.xorBytes(f,y,f.length),p=d.substring(0,i.digestLength),g=c!=="\0",x=0;x<i.digestLength;++x)g|=a.charAt(x)!==p.charAt(x);for(var w=1,b=i.digestLength,R=i.digestLength;R<d.length;R++){var E=d.charCodeAt(R),S=E&1^1,L=w?65534:0;g|=E&L,w=w&S,b+=w}if(g||d.charCodeAt(b)!==1)throw new Error("Invalid RSAES-OAEP padding.");return d.substring(b+1)};function ui(e,t,r){r||(r=Ae.md.sha1.create());for(var n="",i=Math.ceil(t/r.digestLength),s=0;s<i;++s){var o=String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255);r.start(),r.update(e+o),n+=r.digest().getBytes()}return n.substring(0,t)}});var H0=lt((Ig,Is)=>{var Je=ct();Tt();ci();mn();(function(){if(Je.prime){Is.exports=Je.prime;return}var e=Is.exports=Je.prime=Je.prime||{},t=Je.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new t(null);n.fromInt(30);var i=function(l,h){return l|h};e.generateProbablePrime=function(l,h,y){typeof h=="function"&&(y=h,h={}),h=h||{};var d=h.algorithm||"PRIMEINC";typeof d=="string"&&(d={name:d}),d.options=d.options||{};var p=h.prng||Je.random,g={nextBytes:function(x){for(var w=p.getBytesSync(x.length),b=0;b<x.length;++b)x[b]=w.charCodeAt(b)}};if(d.name==="PRIMEINC")return s(l,g,d.options,y);throw new Error("Invalid prime generation algorithm: "+d.name)};function s(l,h,y,d){return"workers"in y?c(l,h,y,d):o(l,h,y,d)}function o(l,h,y,d){var p=u(l,h),g=0,x=f(p.bitLength());"millerRabinTests"in y&&(x=y.millerRabinTests);var w=10;"maxBlockTime"in y&&(w=y.maxBlockTime),a(p,l,h,g,x,w,d)}function a(l,h,y,d,p,g,x){var w=+new Date;do{if(l.bitLength()>h&&(l=u(h,y)),l.isProbablePrime(p))return x(null,l);l.dAddOffset(r[d++%8],0)}while(g<0||+new Date-w<g);Je.util.setImmediate(function(){a(l,h,y,d,p,g,x)})}function c(l,h,y,d){if(typeof Worker>"u")return o(l,h,y,d);var p=u(l,h),g=y.workers,x=y.workLoad||100,w=x*30/8,b=y.workerScript||"forge/prime.worker.js";if(g===-1)return Je.util.estimateCores(function(E,S){E&&(S=2),g=S-1,R()});R();function R(){g=Math.max(1,g);for(var E=[],S=0;S<g;++S)E[S]=new Worker(b);for(var L=g,S=0;S<g;++S)E[S].addEventListener("message",G);var k=!1;function G(z){if(!k){--L;var q=z.data;if(q.found){for(var X=0;X<E.length;++X)E[X].terminate();return k=!0,d(null,new t(q.prime,16))}p.bitLength()>l&&(p=u(l,h));var at=p.toString(16);z.target.postMessage({hex:at,workLoad:x}),p.dAddOffset(w,0)}}}}function u(l,h){var y=new t(l,h),d=l-1;return y.testBit(d)||y.bitwiseTo(t.ONE.shiftLeft(d),i,y),y.dAddOffset(31-y.mod(n).byteValue(),0),y}function f(l){return l<=100?27:l<=150?18:l<=200?15:l<=250?12:l<=300?9:l<=350?8:l<=400?7:l<=500?6:l<=600?5:l<=800?4:l<=1250?3:2}})()});var li=lt((Tg,Z0)=>{var F=ct();gn();ci();Yn();q0();H0();mn();Tt();typeof tt>"u"&&(tt=F.jsbn.BigInteger);var tt,Ts=F.util.isNodejs?ri():null,v=F.asn1,ce=F.util;F.pki=F.pki||{};Z0.exports=F.pki.rsa=F.rsa=F.rsa||{};var W=F.pki,ad=[6,4,2,4,2,4,6,2],cd={name:"PrivateKeyInfo",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:v.Class.UNIVERSAL,type:v.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},ud={name:"RSAPrivateKey",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},fd={name:"RSAPublicKey",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},ld=F.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:v.Class.UNIVERSAL,type:v.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},hd={name:"DigestInfo",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:v.Class.UNIVERSAL,type:v.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:v.Class.UNIVERSAL,type:v.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},dd=function(e){var t;if(e.algorithm in W.oids)t=W.oids[e.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=e.algorithm,r}var n=v.oidToDer(t).getBytes(),i=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[]),s=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[]);s.value.push(v.create(v.Class.UNIVERSAL,v.Type.OID,!1,n)),s.value.push(v.create(v.Class.UNIVERSAL,v.Type.NULL,!1,""));var o=v.create(v.Class.UNIVERSAL,v.Type.OCTETSTRING,!1,e.digest().getBytes());return i.value.push(s),i.value.push(o),v.toDer(i).getBytes()},Q0=function(e,t,r){if(r)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);t.dP||(t.dP=t.d.mod(t.p.subtract(tt.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(tt.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));var n;do n=new tt(F.util.bytesToHex(F.random.getBytes(t.n.bitLength()/8)),16);while(n.compareTo(t.n)>=0||!n.gcd(t.n).equals(tt.ONE));e=e.multiply(n.modPow(t.e,t.n)).mod(t.n);for(var i=e.mod(t.p).modPow(t.dP,t.p),s=e.mod(t.q).modPow(t.dQ,t.q);i.compareTo(s)<0;)i=i.add(t.p);var o=i.subtract(s).multiply(t.qInv).mod(t.p).multiply(t.q).add(s);return o=o.multiply(n.modInverse(t.n)).mod(t.n),o};W.rsa.encrypt=function(e,t,r){var n=r,i,s=Math.ceil(t.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=Y0(e,t,r)):(i=F.util.createBuffer(),i.putBytes(e));for(var o=new tt(i.toHex(),16),a=Q0(o,t,n),c=a.toString(16),u=F.util.createBuffer(),f=s-Math.ceil(c.length/2);f>0;)u.putByte(0),--f;return u.putBytes(F.util.hexToBytes(c)),u.getBytes()};W.rsa.decrypt=function(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8);if(e.length!==i){var s=new Error("Encrypted message length is invalid.");throw s.length=e.length,s.expected=i,s}var o=new tt(F.util.createBuffer(e).toHex(),16);if(o.compareTo(t.n)>=0)throw new Error("Encrypted message is invalid.");for(var a=Q0(o,t,r),c=a.toString(16),u=F.util.createBuffer(),f=i-Math.ceil(c.length/2);f>0;)u.putByte(0),--f;return u.putBytes(F.util.hexToBytes(c)),n!==!1?fi(u.getBytes(),t,r):u.getBytes()};W.rsa.createKeyPairGenerationState=function(e,t,r){typeof e=="string"&&(e=parseInt(e,10)),e=e||2048,r=r||{};var n=r.prng||F.random,i={nextBytes:function(a){for(var c=n.getBytesSync(a.length),u=0;u<a.length;++u)a[u]=c.charCodeAt(u)}},s=r.algorithm||"PRIMEINC",o;if(s==="PRIMEINC")o={algorithm:s,state:0,bits:e,rng:i,eInt:t||65537,e:new tt(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null},o.e.fromInt(o.eInt);else throw new Error("Invalid key generation algorithm: "+s);return o};W.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var r=new tt(null);r.fromInt(30);for(var n=0,i=function(l,h){return l|h},s=+new Date,o,a=0;e.keys===null&&(t<=0||a<t);){if(e.state===0){var c=e.p===null?e.pBits:e.qBits,u=c-1;e.pqState===0?(e.num=new tt(c,e.rng),e.num.testBit(u)||e.num.bitwiseTo(tt.ONE.shiftLeft(u),i,e.num),e.num.dAddOffset(31-e.num.mod(r).byteValue(),0),n=0,++e.pqState):e.pqState===1?e.num.bitLength()>c?e.pqState=0:e.num.isProbablePrime(yd(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(ad[n++%8],0):e.pqState===2?e.pqState=e.num.subtract(tt.ONE).gcd(e.e).compareTo(tt.ONE)===0?3:0:e.pqState===3&&(e.pqState=0,e.p===null?e.p=e.num:e.q=e.num,e.p!==null&&e.q!==null&&++e.state,e.num=null)}else if(e.state===1)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(e.state===2)e.p1=e.p.subtract(tt.ONE),e.q1=e.q.subtract(tt.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(e.state===3)e.phi.gcd(e.e).compareTo(tt.ONE)===0?++e.state:(e.p=null,e.q=null,e.state=0);else if(e.state===4)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(e.state===5){var f=e.e.modInverse(e.phi);e.keys={privateKey:W.rsa.setPrivateKey(e.n,e.e,f,e.p,e.q,f.mod(e.p1),f.mod(e.q1),e.q.modInverse(e.p)),publicKey:W.rsa.setPublicKey(e.n,e.e)}}o=+new Date,a+=o-s,s=o}return e.keys!==null};W.rsa.generateKeyPair=function(e,t,r,n){if(arguments.length===1?typeof e=="object"?(r=e,e=void 0):typeof e=="function"&&(n=e,e=void 0):arguments.length===2?typeof e=="number"?typeof t=="function"?(n=t,t=void 0):typeof t!="number"&&(r=t,t=void 0):(r=e,n=t,e=void 0,t=void 0):arguments.length===3&&(typeof t=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=t,t=void 0)),r=r||{},e===void 0&&(e=r.bits||2048),t===void 0&&(t=r.e||65537),!F.options.usePureJavaScript&&!r.prng&&e>=256&&e<=16384&&(t===65537||t===3)){if(n){if(z0("generateKeyPair"))return Ts.generateKeyPair("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(a,c,u){if(a)return n(a);n(null,{privateKey:W.privateKeyFromPem(u),publicKey:W.publicKeyFromPem(c)})});if(G0("generateKey")&&G0("exportKey"))return ce.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:$0(t),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(a){return ce.globalScope.crypto.subtle.exportKey("pkcs8",a.privateKey)}).then(void 0,function(a){n(a)}).then(function(a){if(a){var c=W.privateKeyFromAsn1(v.fromDer(F.util.createBuffer(a)));n(null,{privateKey:c,publicKey:W.setRsaPublicKey(c.n,c.e)})}});if(W0("generateKey")&&W0("exportKey")){var i=ce.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:$0(t),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(a){var c=a.target.result,u=ce.globalScope.msCrypto.subtle.exportKey("pkcs8",c.privateKey);u.oncomplete=function(f){var l=f.target.result,h=W.privateKeyFromAsn1(v.fromDer(F.util.createBuffer(l)));n(null,{privateKey:h,publicKey:W.setRsaPublicKey(h.n,h.e)})},u.onerror=function(f){n(f)}},i.onerror=function(a){n(a)};return}}else if(z0("generateKeyPairSync")){var s=Ts.generateKeyPairSync("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:W.privateKeyFromPem(s.privateKey),publicKey:W.publicKeyFromPem(s.publicKey)}}}var o=W.rsa.createKeyPairGenerationState(e,t,r);if(!n)return W.rsa.stepKeyPairGenerationState(o,0),o.keys;pd(o,r,n)};W.setRsaPublicKey=W.rsa.setPublicKey=function(e,t){var r={n:e,e:t};return r.encrypt=function(n,i,s){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:function(a,c,u){return Y0(a,c,2).getBytes()}};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:function(a,c){return F.pkcs1.encode_rsa_oaep(c,a,s)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(a){return a}};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var o=i.encode(n,r,!0);return W.rsa.encrypt(o,r,!0)},r.verify=function(n,i,s,o){typeof s=="string"?s=s.toUpperCase():s===void 0&&(s="RSASSA-PKCS1-V1_5"),o===void 0&&(o={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in o||(o._parseAllDigestBytes=!0),s==="RSASSA-PKCS1-V1_5"?s={verify:function(c,u){u=fi(u,r,!0);var f=v.fromDer(u,{parseAllBytes:o._parseAllDigestBytes}),l={},h=[];if(!v.validate(f,hd,l,h)){var y=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw y.errors=h,y}var d=v.derToOid(l.algorithmIdentifier);if(!(d===F.oids.md2||d===F.oids.md5||d===F.oids.sha1||d===F.oids.sha224||d===F.oids.sha256||d===F.oids.sha384||d===F.oids.sha512||d===F.oids["sha512-224"]||d===F.oids["sha512-256"])){var y=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw y.oid=d,y}if((d===F.oids.md2||d===F.oids.md5)&&!("parameters"in l))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return c===l.digest}}:(s==="NONE"||s==="NULL"||s===null)&&(s={verify:function(c,u){return u=fi(u,r,!0),c===u}});var a=W.rsa.decrypt(i,r,!0,!1);return s.verify(n,a,r.n.bitLength())},r};W.setRsaPrivateKey=W.rsa.setPrivateKey=function(e,t,r,n,i,s,o,a){var c={n:e,e:t,d:r,p:n,q:i,dP:s,dQ:o,qInv:a};return c.decrypt=function(u,f,l){typeof f=="string"?f=f.toUpperCase():f===void 0&&(f="RSAES-PKCS1-V1_5");var h=W.rsa.decrypt(u,c,!1,!1);if(f==="RSAES-PKCS1-V1_5")f={decode:fi};else if(f==="RSA-OAEP"||f==="RSAES-OAEP")f={decode:function(y,d){return F.pkcs1.decode_rsa_oaep(d,y,l)}};else if(["RAW","NONE","NULL",null].indexOf(f)!==-1)f={decode:function(y){return y}};else throw new Error('Unsupported encryption scheme: "'+f+'".');return f.decode(h,c,!1)},c.sign=function(u,f){var l=!1;typeof f=="string"&&(f=f.toUpperCase()),f===void 0||f==="RSASSA-PKCS1-V1_5"?(f={encode:dd},l=1):(f==="NONE"||f==="NULL"||f===null)&&(f={encode:function(){return u}},l=1);var h=f.encode(u,c.n.bitLength());return W.rsa.encrypt(h,c,l)},c};W.wrapRsaPrivateKey=function(e){return v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,v.integerToDer(0).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(W.oids.rsaEncryption).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.NULL,!1,"")]),v.create(v.Class.UNIVERSAL,v.Type.OCTETSTRING,!1,v.toDer(e).getBytes())])};W.privateKeyFromAsn1=function(e){var t={},r=[];if(v.validate(e,cd,t,r)&&(e=v.fromDer(F.util.createBuffer(t.privateKey))),t={},r=[],!v.validate(e,ud,t,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,s,o,a,c,u,f,l;return i=F.util.createBuffer(t.privateKeyModulus).toHex(),s=F.util.createBuffer(t.privateKeyPublicExponent).toHex(),o=F.util.createBuffer(t.privateKeyPrivateExponent).toHex(),a=F.util.createBuffer(t.privateKeyPrime1).toHex(),c=F.util.createBuffer(t.privateKeyPrime2).toHex(),u=F.util.createBuffer(t.privateKeyExponent1).toHex(),f=F.util.createBuffer(t.privateKeyExponent2).toHex(),l=F.util.createBuffer(t.privateKeyCoefficient).toHex(),W.setRsaPrivateKey(new tt(i,16),new tt(s,16),new tt(o,16),new tt(a,16),new tt(c,16),new tt(u,16),new tt(f,16),new tt(l,16))};W.privateKeyToAsn1=W.privateKeyToRSAPrivateKey=function(e){return v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,v.integerToDer(0).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Ie(e.n)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Ie(e.e)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Ie(e.d)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Ie(e.p)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Ie(e.q)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Ie(e.dP)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Ie(e.dQ)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Ie(e.qInv))])};W.publicKeyFromAsn1=function(e){var t={},r=[];if(v.validate(e,ld,t,r)){var n=v.derToOid(t.publicKeyOid);if(n!==W.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}e=t.rsaPublicKey}if(r=[],!v.validate(e,fd,t,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var s=F.util.createBuffer(t.publicKeyModulus).toHex(),o=F.util.createBuffer(t.publicKeyExponent).toHex();return W.setRsaPublicKey(new tt(s,16),new tt(o,16))};W.publicKeyToAsn1=W.publicKeyToSubjectPublicKeyInfo=function(e){return v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(W.oids.rsaEncryption).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.NULL,!1,"")]),v.create(v.Class.UNIVERSAL,v.Type.BITSTRING,!1,[W.publicKeyToRSAPublicKey(e)])])};W.publicKeyToRSAPublicKey=function(e){return v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Ie(e.n)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Ie(e.e))])};function Y0(e,t,r){var n=F.util.createBuffer(),i=Math.ceil(t.n.bitLength()/8);if(e.length>i-11){var s=new Error("Message is too long for PKCS#1 v1.5 padding.");throw s.length=e.length,s.max=i-11,s}n.putByte(0),n.putByte(r);var o=i-3-e.length,a;if(r===0||r===1){a=r===0?0:255;for(var c=0;c<o;++c)n.putByte(a)}else for(;o>0;){for(var u=0,f=F.random.getBytes(o),c=0;c<o;++c)a=f.charCodeAt(c),a===0?++u:n.putByte(a);o=u}return n.putByte(0),n.putBytes(e),n}function fi(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8),s=F.util.createBuffer(e),o=s.getByte(),a=s.getByte();if(o!==0||r&&a!==0&&a!==1||!r&&a!=2||r&&a===0&&typeof n>"u")throw new Error("Encryption block is invalid.");var c=0;if(a===0){c=i-3-n;for(var u=0;u<c;++u)if(s.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(a===1)for(c=0;s.length()>1;){if(s.getByte()!==255){--s.read;break}++c}else if(a===2)for(c=0;s.length()>1;){if(s.getByte()===0){--s.read;break}++c}var f=s.getByte();if(f!==0||c!==i-3-s.length())throw new Error("Encryption block is invalid.");return s.getBytes()}function pd(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};var n={algorithm:{name:t.algorithm||"PRIMEINC",options:{workers:t.workers||2,workLoad:t.workLoad||100,workerScript:t.workerScript}}};"prng"in t&&(n.prng=t.prng),i();function i(){s(e.pBits,function(a,c){if(a)return r(a);if(e.p=c,e.q!==null)return o(a,e.q);s(e.qBits,o)})}function s(a,c){F.prime.generateProbablePrime(a,n,c)}function o(a,c){if(a)return r(a);if(e.q=c,e.p.compareTo(e.q)<0){var u=e.p;e.p=e.q,e.q=u}if(e.p.subtract(tt.ONE).gcd(e.e).compareTo(tt.ONE)!==0){e.p=null,i();return}if(e.q.subtract(tt.ONE).gcd(e.e).compareTo(tt.ONE)!==0){e.q=null,s(e.qBits,o);return}if(e.p1=e.p.subtract(tt.ONE),e.q1=e.q.subtract(tt.ONE),e.phi=e.p1.multiply(e.q1),e.phi.gcd(e.e).compareTo(tt.ONE)!==0){e.p=e.q=null,i();return}if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits){e.q=null,s(e.qBits,o);return}var f=e.e.modInverse(e.phi);e.keys={privateKey:W.rsa.setPrivateKey(e.n,e.e,f,e.p,e.q,f.mod(e.p1),f.mod(e.q1),e.q.modInverse(e.p)),publicKey:W.rsa.setPublicKey(e.n,e.e)},r(null,e.keys)}}function Ie(e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var r=F.util.hexToBytes(t);return r.length>1&&(r.charCodeAt(0)===0&&!(r.charCodeAt(1)&128)||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)===128)?r.substr(1):r}function yd(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function z0(e){return F.util.isNodejs&&typeof Ts[e]=="function"}function G0(e){return typeof ce.globalScope<"u"&&typeof ce.globalScope.crypto=="object"&&typeof ce.globalScope.crypto.subtle=="object"&&typeof ce.globalScope.crypto.subtle[e]=="function"}function W0(e){return typeof ce.globalScope<"u"&&typeof ce.globalScope.msCrypto=="object"&&typeof ce.globalScope.msCrypto.subtle=="object"&&typeof ce.globalScope.msCrypto.subtle[e]=="function"}function $0(e){for(var t=F.util.hexToBytes(e.toString(16)),r=new Uint8Array(t.length),n=0;n<t.length;++n)r[n]=t.charCodeAt(n);return r}});var rc=lt((Cg,ec)=>{var U=ct();xs();gn();o0();gr();Yn();l0();p0();mn();I0();li();Tt();typeof X0>"u"&&(X0=U.jsbn.BigInteger);var X0,B=U.asn1,$=U.pki=U.pki||{};ec.exports=$.pbe=U.pbe=U.pbe||{};var vr=$.oids,gd={name:"EncryptedPrivateKeyInfo",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:B.Class.UNIVERSAL,type:B.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:B.Class.UNIVERSAL,type:B.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},md={name:"PBES2Algorithms",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:B.Class.UNIVERSAL,type:B.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:B.Class.UNIVERSAL,type:B.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:B.Class.UNIVERSAL,type:B.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:B.Class.UNIVERSAL,type:B.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:B.Class.UNIVERSAL,type:B.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:B.Class.UNIVERSAL,type:B.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:B.Class.UNIVERSAL,type:B.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},xd={name:"pkcs-12PbeParams",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:B.Class.UNIVERSAL,type:B.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:B.Class.UNIVERSAL,type:B.Type.INTEGER,constructed:!1,capture:"iterations"}]};$.encryptPrivateKeyInfo=function(e,t,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=U.random.getBytesSync(r.saltSize),i=r.count,s=B.integerToDer(i),o,a,c;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var u,f,l;switch(r.algorithm){case"aes128":o=16,u=16,f=vr["aes128-CBC"],l=U.aes.createEncryptionCipher;break;case"aes192":o=24,u=16,f=vr["aes192-CBC"],l=U.aes.createEncryptionCipher;break;case"aes256":o=32,u=16,f=vr["aes256-CBC"],l=U.aes.createEncryptionCipher;break;case"des":o=8,u=8,f=vr.desCBC,l=U.des.createEncryptionCipher;break;default:var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=r.algorithm,h}var y="hmacWith"+r.prfAlgorithm.toUpperCase(),d=tc(y),p=U.pkcs5.pbkdf2(t,n,i,o,d),g=U.random.getBytesSync(u),x=l(p);x.start(g),x.update(B.toDer(e)),x.finish(),c=x.output.getBytes();var w=vd(n,s,o,y);a=B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(vr.pkcs5PBES2).getBytes()),B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(vr.pkcs5PBKDF2).getBytes()),w]),B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(f).getBytes()),B.create(B.Class.UNIVERSAL,B.Type.OCTETSTRING,!1,g)])])])}else if(r.algorithm==="3des"){o=24;var b=new U.util.ByteBuffer(n),p=$.pbe.generatePkcs12Key(t,b,1,i,o),g=$.pbe.generatePkcs12Key(t,b,2,i,o),x=U.des.createEncryptionCipher(p);x.start(g),x.update(B.toDer(e)),x.finish(),c=x.output.getBytes(),a=B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(vr["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OCTETSTRING,!1,n),B.create(B.Class.UNIVERSAL,B.Type.INTEGER,!1,s.getBytes())])])}else{var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=r.algorithm,h}var R=B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[a,B.create(B.Class.UNIVERSAL,B.Type.OCTETSTRING,!1,c)]);return R};$.decryptPrivateKeyInfo=function(e,t){var r=null,n={},i=[];if(!B.validate(e,gd,n,i)){var s=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}var o=B.derToOid(n.encryptionOid),a=$.pbe.getCipher(o,n.encryptionParams,t),c=U.util.createBuffer(n.encryptedData);return a.update(c),a.finish()&&(r=B.fromDer(a.output)),r};$.encryptedPrivateKeyToPem=function(e,t){var r={type:"ENCRYPTED PRIVATE KEY",body:B.toDer(e).getBytes()};return U.pem.encode(r,{maxline:t})};$.encryptedPrivateKeyFromPem=function(e){var t=U.pem.decode(e)[0];if(t.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return B.fromDer(t.body)};$.encryptRsaPrivateKey=function(e,t,r){if(r=r||{},!r.legacy){var n=$.wrapRsaPrivateKey($.privateKeyToAsn1(e));return n=$.encryptPrivateKeyInfo(n,t,r),$.encryptedPrivateKeyToPem(n)}var i,s,o,a;switch(r.algorithm){case"aes128":i="AES-128-CBC",o=16,s=U.random.getBytesSync(16),a=U.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",o=24,s=U.random.getBytesSync(16),a=U.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",o=32,s=U.random.getBytesSync(16),a=U.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",o=24,s=U.random.getBytesSync(8),a=U.des.createEncryptionCipher;break;case"des":i="DES-CBC",o=8,s=U.random.getBytesSync(8),a=U.des.createEncryptionCipher;break;default:var c=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw c.algorithm=r.algorithm,c}var u=U.pbe.opensslDeriveBytes(t,s.substr(0,8),o),f=a(u);f.start(s),f.update(B.toDer($.privateKeyToAsn1(e))),f.finish();var l={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:U.util.bytesToHex(s).toUpperCase()},body:f.output.getBytes()};return U.pem.encode(l)};$.decryptRsaPrivateKey=function(e,t){var r=null,n=U.pem.decode(e)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var s,o;switch(n.dekInfo.algorithm){case"DES-CBC":s=8,o=U.des.createDecryptionCipher;break;case"DES-EDE3-CBC":s=24,o=U.des.createDecryptionCipher;break;case"AES-128-CBC":s=16,o=U.aes.createDecryptionCipher;break;case"AES-192-CBC":s=24,o=U.aes.createDecryptionCipher;break;case"AES-256-CBC":s=32,o=U.aes.createDecryptionCipher;break;case"RC2-40-CBC":s=5,o=function(l){return U.rc2.createDecryptionCipher(l,40)};break;case"RC2-64-CBC":s=8,o=function(l){return U.rc2.createDecryptionCipher(l,64)};break;case"RC2-128-CBC":s=16,o=function(l){return U.rc2.createDecryptionCipher(l,128)};break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var a=U.util.hexToBytes(n.dekInfo.parameters),c=U.pbe.opensslDeriveBytes(t,a.substr(0,8),s),u=o(c);if(u.start(a),u.update(U.util.createBuffer(n.body)),u.finish())r=u.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=$.decryptPrivateKeyInfo(B.fromDer(r),t):r=B.fromDer(r),r!==null&&(r=$.privateKeyFromAsn1(r)),r};$.pbe.generatePkcs12Key=function(e,t,r,n,i,s){var o,a;if(typeof s>"u"||s===null){if(!("sha1"in U.md))throw new Error('"sha1" hash algorithm unavailable.');s=U.md.sha1.create()}var c=s.digestLength,u=s.blockLength,f=new U.util.ByteBuffer,l=new U.util.ByteBuffer;if(e!=null){for(a=0;a<e.length;a++)l.putInt16(e.charCodeAt(a));l.putInt16(0)}var h=l.length(),y=t.length(),d=new U.util.ByteBuffer;d.fillWithByte(r,u);var p=u*Math.ceil(y/u),g=new U.util.ByteBuffer;for(a=0;a<p;a++)g.putByte(t.at(a%y));var x=u*Math.ceil(h/u),w=new U.util.ByteBuffer;for(a=0;a<x;a++)w.putByte(l.at(a%h));var b=g;b.putBuffer(w);for(var R=Math.ceil(i/c),E=1;E<=R;E++){var S=new U.util.ByteBuffer;S.putBytes(d.bytes()),S.putBytes(b.bytes());for(var L=0;L<n;L++)s.start(),s.update(S.getBytes()),S=s.digest();var k=new U.util.ByteBuffer;for(a=0;a<u;a++)k.putByte(S.at(a%c));var G=Math.ceil(y/u)+Math.ceil(h/u),z=new U.util.ByteBuffer;for(o=0;o<G;o++){var q=new U.util.ByteBuffer(b.getBytes(u)),X=511;for(a=k.length()-1;a>=0;a--)X=X>>8,X+=k.at(a)+q.at(a),q.setAt(a,X&255);z.putBuffer(q)}b=z,f.putBuffer(S)}return f.truncate(f.length()-i),f};$.pbe.getCipher=function(e,t,r){switch(e){case $.oids.pkcs5PBES2:return $.pbe.getCipherForPBES2(e,t,r);case $.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case $.oids["pbewithSHAAnd40BitRC2-CBC"]:return $.pbe.getCipherForPKCS12PBE(e,t,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=e,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};$.pbe.getCipherForPBES2=function(e,t,r){var n={},i=[];if(!B.validate(t,md,n,i)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}if(e=B.derToOid(n.kdfOid),e!==$.oids.pkcs5PBKDF2){var s=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw s.oid=e,s.supportedOids=["pkcs5PBKDF2"],s}if(e=B.derToOid(n.encOid),e!==$.oids["aes128-CBC"]&&e!==$.oids["aes192-CBC"]&&e!==$.oids["aes256-CBC"]&&e!==$.oids["des-EDE3-CBC"]&&e!==$.oids.desCBC){var s=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw s.oid=e,s.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],s}var o=n.kdfSalt,a=U.util.createBuffer(n.kdfIterationCount);a=a.getInt(a.length()<<3);var c,u;switch($.oids[e]){case"aes128-CBC":c=16,u=U.aes.createDecryptionCipher;break;case"aes192-CBC":c=24,u=U.aes.createDecryptionCipher;break;case"aes256-CBC":c=32,u=U.aes.createDecryptionCipher;break;case"des-EDE3-CBC":c=24,u=U.des.createDecryptionCipher;break;case"desCBC":c=8,u=U.des.createDecryptionCipher;break}var f=j0(n.prfOid),l=U.pkcs5.pbkdf2(r,o,a,c,f),h=n.encIv,y=u(l);return y.start(h),y};$.pbe.getCipherForPKCS12PBE=function(e,t,r){var n={},i=[];if(!B.validate(t,xd,n,i)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}var o=U.util.createBuffer(n.salt),a=U.util.createBuffer(n.iterations);a=a.getInt(a.length()<<3);var c,u,f;switch(e){case $.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:c=24,u=8,f=U.des.startDecrypting;break;case $.oids["pbewithSHAAnd40BitRC2-CBC"]:c=5,u=8,f=function(p,g){var x=U.rc2.createDecryptionCipher(p,40);return x.start(g,null),x};break;default:var s=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw s.oid=e,s}var l=j0(n.prfOid),h=$.pbe.generatePkcs12Key(r,o,1,a,c,l);l.start();var y=$.pbe.generatePkcs12Key(r,o,2,a,u,l);return f(h,y)};$.pbe.opensslDeriveBytes=function(e,t,r,n){if(typeof n>"u"||n===null){if(!("md5"in U.md))throw new Error('"md5" hash algorithm unavailable.');n=U.md.md5.create()}t===null&&(t="");for(var i=[J0(n,e+t)],s=16,o=1;s<r;++o,s+=16)i.push(J0(n,i[o-1]+e+t));return i.join("").substr(0,r)};function J0(e,t){return e.start().update(t).digest().getBytes()}function j0(e){var t;if(!e)t="hmacWithSHA1";else if(t=$.oids[B.derToOid(e)],!t){var r=new Error("Unsupported PRF OID.");throw r.oid=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return tc(t)}function tc(e){var t=U.md;switch(e){case"hmacWithSHA224":t=U.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":e=e.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!t||!(e in t))throw new Error("Unknown hash algorithm: "+e);return t[e].create()}function vd(e,t,r,n){var i=B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OCTETSTRING,!1,e),B.create(B.Class.UNIVERSAL,B.Type.INTEGER,!1,t.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(B.create(B.Class.UNIVERSAL,B.Type.INTEGER,!1,U.util.hexToBytes(r.toString(16))),B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer($.oids[n]).getBytes()),B.create(B.Class.UNIVERSAL,B.Type.NULL,!1,"")])),i}});var lu=lt((mv,fu)=>{var pt=ct();gr();Tt();var _n=fu.exports=pt.sha512=pt.sha512||{};pt.md.sha512=pt.md.algorithms.sha512=_n;var cu=pt.sha384=pt.sha512.sha384=pt.sha512.sha384||{};cu.create=function(){return _n.create("SHA-384")};pt.md.sha384=pt.md.algorithms.sha384=cu;pt.sha512.sha256=pt.sha512.sha256||{create:function(){return _n.create("SHA-512/256")}};pt.md["sha512/256"]=pt.md.algorithms["sha512/256"]=pt.sha512.sha256;pt.sha512.sha224=pt.sha512.sha224||{create:function(){return _n.create("SHA-512/224")}};pt.md["sha512/224"]=pt.md.algorithms["sha512/224"]=pt.sha512.sha224;_n.create=function(e){if(uu||Hy(),typeof e>"u"&&(e="SHA-512"),!(e in Cr))throw new Error("Invalid SHA-512 algorithm: "+e);for(var t=Cr[e],r=null,n=pt.util.createBuffer(),i=new Array(80),s=0;s<80;++s)i[s]=new Array(2);var o=64;switch(e){case"SHA-384":o=48;break;case"SHA-512/256":o=32;break;case"SHA-512/224":o=28;break}var a={algorithm:e.replace("-","").toLowerCase(),blockLength:128,digestLength:o,messageLength:0,fullMessageLength:null,messageLengthSize:16};return a.start=function(){a.messageLength=0,a.fullMessageLength=a.messageLength128=[];for(var c=a.messageLengthSize/4,u=0;u<c;++u)a.fullMessageLength.push(0);n=pt.util.createBuffer(),r=new Array(t.length);for(var u=0;u<t.length;++u)r[u]=t[u].slice(0);return a},a.start(),a.update=function(c,u){u==="utf8"&&(c=pt.util.encodeUtf8(c));var f=c.length;a.messageLength+=f,f=[f/4294967296>>>0,f>>>0];for(var l=a.fullMessageLength.length-1;l>=0;--l)a.fullMessageLength[l]+=f[1],f[1]=f[0]+(a.fullMessageLength[l]/4294967296>>>0),a.fullMessageLength[l]=a.fullMessageLength[l]>>>0,f[0]=f[1]/4294967296>>>0;return n.putBytes(c),au(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),a},a.digest=function(){var c=pt.util.createBuffer();c.putBytes(n.bytes());var u=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize,f=u&a.blockLength-1;c.putBytes(Ro.substr(0,a.blockLength-f));for(var l,h,y=a.fullMessageLength[0]*8,d=0;d<a.fullMessageLength.length-1;++d)l=a.fullMessageLength[d+1]*8,h=l/4294967296>>>0,y+=h,c.putInt32(y>>>0),y=l>>>0;c.putInt32(y);for(var p=new Array(r.length),d=0;d<r.length;++d)p[d]=r[d].slice(0);au(p,i,c);var g=pt.util.createBuffer(),x;e==="SHA-512"?x=p.length:e==="SHA-384"?x=p.length-2:x=p.length-4;for(var d=0;d<x;++d)g.putInt32(p[d][0]),(d!==x-1||e!=="SHA-512/224")&&g.putInt32(p[d][1]);return g},a};var Ro=null,uu=!1,Lo=null,Cr=null;function Hy(){Ro="\x80",Ro+=pt.util.fillString("\0",128),Lo=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],Cr={},Cr["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],Cr["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],Cr["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],Cr["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],uu=!0}function au(e,t,r){for(var n,i,s,o,a,c,u,f,l,h,y,d,p,g,x,w,b,R,E,S,L,k,G,z,q,X,at,Kt,T,P,_,N,A,K,V,H=r.length();H>=128;){for(T=0;T<16;++T)t[T][0]=r.getInt32()>>>0,t[T][1]=r.getInt32()>>>0;for(;T<80;++T)N=t[T-2],P=N[0],_=N[1],n=((P>>>19|_<<13)^(_>>>29|P<<3)^P>>>6)>>>0,i=((P<<13|_>>>19)^(_<<3|P>>>29)^(P<<26|_>>>6))>>>0,K=t[T-15],P=K[0],_=K[1],s=((P>>>1|_<<31)^(P>>>8|_<<24)^P>>>7)>>>0,o=((P<<31|_>>>1)^(P<<24|_>>>8)^(P<<25|_>>>7))>>>0,A=t[T-7],V=t[T-16],_=i+A[1]+o+V[1],t[T][0]=n+A[0]+s+V[0]+(_/4294967296>>>0)>>>0,t[T][1]=_>>>0;for(p=e[0][0],g=e[0][1],x=e[1][0],w=e[1][1],b=e[2][0],R=e[2][1],E=e[3][0],S=e[3][1],L=e[4][0],k=e[4][1],G=e[5][0],z=e[5][1],q=e[6][0],X=e[6][1],at=e[7][0],Kt=e[7][1],T=0;T<80;++T)u=((L>>>14|k<<18)^(L>>>18|k<<14)^(k>>>9|L<<23))>>>0,f=((L<<18|k>>>14)^(L<<14|k>>>18)^(k<<23|L>>>9))>>>0,l=(q^L&(G^q))>>>0,h=(X^k&(z^X))>>>0,a=((p>>>28|g<<4)^(g>>>2|p<<30)^(g>>>7|p<<25))>>>0,c=((p<<4|g>>>28)^(g<<30|p>>>2)^(g<<25|p>>>7))>>>0,y=(p&x|b&(p^x))>>>0,d=(g&w|R&(g^w))>>>0,_=Kt+f+h+Lo[T][1]+t[T][1],n=at+u+l+Lo[T][0]+t[T][0]+(_/4294967296>>>0)>>>0,i=_>>>0,_=c+d,s=a+y+(_/4294967296>>>0)>>>0,o=_>>>0,at=q,Kt=X,q=G,X=z,G=L,z=k,_=S+i,L=E+n+(_/4294967296>>>0)>>>0,k=_>>>0,E=b,S=R,b=x,R=w,x=p,w=g,_=i+o,p=n+s+(_/4294967296>>>0)>>>0,g=_>>>0;_=e[0][1]+g,e[0][0]=e[0][0]+p+(_/4294967296>>>0)>>>0,e[0][1]=_>>>0,_=e[1][1]+w,e[1][0]=e[1][0]+x+(_/4294967296>>>0)>>>0,e[1][1]=_>>>0,_=e[2][1]+R,e[2][0]=e[2][0]+b+(_/4294967296>>>0)>>>0,e[2][1]=_>>>0,_=e[3][1]+S,e[3][0]=e[3][0]+E+(_/4294967296>>>0)>>>0,e[3][1]=_>>>0,_=e[4][1]+k,e[4][0]=e[4][0]+L+(_/4294967296>>>0)>>>0,e[4][1]=_>>>0,_=e[5][1]+z,e[5][0]=e[5][0]+G+(_/4294967296>>>0)>>>0,e[5][1]=_>>>0,_=e[6][1]+X,e[6][0]=e[6][0]+q+(_/4294967296>>>0)>>>0,e[6][1]=_>>>0,_=e[7][1]+Kt,e[7][0]=e[7][0]+at+(_/4294967296>>>0)>>>0,e[7][1]=_>>>0,H-=128}}});var pf=lt((JE,ca)=>{"use strict";var $1=Object.prototype.hasOwnProperty,Xt="~";function Vn(){}Object.create&&(Vn.prototype=Object.create(null),new Vn().__proto__||(Xt=!1));function Q1(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function df(e,t,r,n,i){if(typeof r!="function")throw new TypeError("The listener must be a function");var s=new Q1(r,n||e,i),o=Xt?Xt+t:t;return e._events[o]?e._events[o].fn?e._events[o]=[e._events[o],s]:e._events[o].push(s):(e._events[o]=s,e._eventsCount++),e}function qi(e,t){--e._eventsCount===0?e._events=new Vn:delete e._events[t]}function Gt(){this._events=new Vn,this._eventsCount=0}Gt.prototype.eventNames=function(){var t=[],r,n;if(this._eventsCount===0)return t;for(n in r=this._events)$1.call(r,n)&&t.push(Xt?n.slice(1):n);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(r)):t};Gt.prototype.listeners=function(t){var r=Xt?Xt+t:t,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,o=new Array(s);i<s;i++)o[i]=n[i].fn;return o};Gt.prototype.listenerCount=function(t){var r=Xt?Xt+t:t,n=this._events[r];return n?n.fn?1:n.length:0};Gt.prototype.emit=function(t,r,n,i,s,o){var a=Xt?Xt+t:t;if(!this._events[a])return!1;var c=this._events[a],u=arguments.length,f,l;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,r),!0;case 3:return c.fn.call(c.context,r,n),!0;case 4:return c.fn.call(c.context,r,n,i),!0;case 5:return c.fn.call(c.context,r,n,i,s),!0;case 6:return c.fn.call(c.context,r,n,i,s,o),!0}for(l=1,f=new Array(u-1);l<u;l++)f[l-1]=arguments[l];c.fn.apply(c.context,f)}else{var h=c.length,y;for(l=0;l<h;l++)switch(c[l].once&&this.removeListener(t,c[l].fn,void 0,!0),u){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,r);break;case 3:c[l].fn.call(c[l].context,r,n);break;case 4:c[l].fn.call(c[l].context,r,n,i);break;default:if(!f)for(y=1,f=new Array(u-1);y<u;y++)f[y-1]=arguments[y];c[l].fn.apply(c[l].context,f)}}return!0};Gt.prototype.on=function(t,r,n){return df(this,t,r,n,!1)};Gt.prototype.once=function(t,r,n){return df(this,t,r,n,!0)};Gt.prototype.removeListener=function(t,r,n,i){var s=Xt?Xt+t:t;if(!this._events[s])return this;if(!r)return qi(this,s),this;var o=this._events[s];if(o.fn)o.fn===r&&(!i||o.once)&&(!n||o.context===n)&&qi(this,s);else{for(var a=0,c=[],u=o.length;a<u;a++)(o[a].fn!==r||i&&!o[a].once||n&&o[a].context!==n)&&c.push(o[a]);c.length?this._events[s]=c.length===1?c[0]:c:qi(this,s)}return this};Gt.prototype.removeAllListeners=function(t){var r;return t?(r=Xt?Xt+t:t,this._events[r]&&qi(this,r)):(this._events=new Vn,this._eventsCount=0),this};Gt.prototype.off=Gt.prototype.removeListener;Gt.prototype.addListener=Gt.prototype.on;Gt.prefixed=Xt;Gt.EventEmitter=Gt;typeof ca<"u"&&(ca.exports=Gt)});var rg={};Nt(rg,{PersistentPeerStore:()=>La});var Bb=Jt(gn(),1),Ab=Jt(rc(),1);var _g=Symbol.for("@libp2p/connection");var Lg=Symbol.for("@libp2p/content-routing");var Pg=Symbol.for("@libp2p/peer-discovery");var Cs=Symbol.for("@libp2p/peer-id");function nc(e){return e!=null&&!!e[Cs]}var Kg=Symbol.for("@libp2p/peer-routing");var ic;(function(e){e.Accept="accept",e.Ignore="ignore",e.Reject="reject"})(ic||(ic={}));var Fg=Symbol.for("@libp2p/transport");var sc;(function(e){e[e.FATAL_ALL=0]="FATAL_ALL",e[e.NO_FATAL=1]="NO_FATAL"})(sc||(sc={}));var M=class extends Error{code;props;constructor(t,r,n){super(t),this.code=r,this.name=n?.name??"CodeError",this.props=n??{}}};var _s=class extends Event{detail;constructor(t,r){super(t,r),this.detail=r?.detail}},$g=globalThis.CustomEvent??_s;var y1=Jt(ct(),1);function je(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}var Ps={};Nt(Ps,{base10:()=>Ad});function bd(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function l(d){if(d instanceof Uint8Array||(ArrayBuffer.isView(d)?d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength):Array.isArray(d)&&(d=Uint8Array.from(d))),!(d instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(d.length===0)return"";for(var p=0,g=0,x=0,w=d.length;x!==w&&d[x]===0;)x++,p++;for(var b=(w-x)*f+1>>>0,R=new Uint8Array(b);x!==w;){for(var E=d[x],S=0,L=b-1;(E!==0||S<g)&&L!==-1;L--,S++)E+=256*R[L]>>>0,R[L]=E%a>>>0,E=E/a>>>0;if(E!==0)throw new Error("Non-zero carry");g=S,x++}for(var k=b-g;k!==b&&R[k]===0;)k++;for(var G=c.repeat(p);k<b;++k)G+=e.charAt(R[k]);return G}function h(d){if(typeof d!="string")throw new TypeError("Expected String");if(d.length===0)return new Uint8Array;var p=0;if(d[p]!==" "){for(var g=0,x=0;d[p]===c;)g++,p++;for(var w=(d.length-p)*u+1>>>0,b=new Uint8Array(w);d[p];){var R=r[d.charCodeAt(p)];if(R===255)return;for(var E=0,S=w-1;(R!==0||E<x)&&S!==-1;S--,E++)R+=a*b[S]>>>0,b[S]=R%256>>>0,R=R/256>>>0;if(R!==0)throw new Error("Non-zero carry");x=E,p++}if(d[p]!==" "){for(var L=w-x;L!==w&&b[L]===0;)L++;for(var k=new Uint8Array(g+(w-L)),G=g;L!==w;)k[G++]=b[L++];return k}}}function y(d){var p=h(d);if(p)return p;throw new Error(`Non-${t} character`)}return{encode:l,decodeUnsafe:h,decode:y}}var wd=bd,Ed=wd,oc=Ed;var bm=new Uint8Array(0);var ac=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0},Ke=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")};var cc=e=>new TextEncoder().encode(e),uc=e=>new TextDecoder().decode(e);var Rs=class{constructor(t,r,n){this.name=t,this.prefix=r,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}},Ls=class{constructor(t,r,n){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return lc(this,t)}},ks=class{constructor(t){this.decoders=t}or(t){return lc(this,t)}decode(t){let r=t[0],n=this.decoders[r];if(n)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},lc=(e,t)=>new ks({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}}),Ns=class{constructor(t,r,n,i){this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new Rs(t,r,n),this.decoder=new Ls(t,r,i)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}},zr=({name:e,prefix:t,encode:r,decode:n})=>new Ns(e,t,r,n),tr=({prefix:e,name:t,alphabet:r})=>{let{encode:n,decode:i}=oc(r,t);return zr({prefix:e,name:t,encode:n,decode:s=>Ke(i(s))})},Sd=(e,t,r,n)=>{let i={};for(let f=0;f<t.length;++f)i[t[f]]=f;let s=e.length;for(;e[s-1]==="=";)--s;let o=new Uint8Array(s*r/8|0),a=0,c=0,u=0;for(let f=0;f<s;++f){let l=i[e[f]];if(l===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|l,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Bd=(e,t,r)=>{let n=t[t.length-1]==="=",i=(1<<r)-1,s="",o=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],o+=8;o>r;)o-=r,s+=t[i&a>>o];if(o&&(s+=t[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},Et=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>zr({prefix:t,name:e,encode(i){return Bd(i,n,r)},decode(i){return Sd(i,n,r,e)}});var Ad=tr({prefix:"9",name:"base10",alphabet:"0123456789"});var Ds={};Nt(Ds,{base16:()=>Id,base16upper:()=>Td});var Id=Et({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Td=Et({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Us={};Nt(Us,{base2:()=>Cd});var Cd=Et({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Ks={};Nt(Ks,{base256emoji:()=>Nd});var hc=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),_d=hc.reduce((e,t,r)=>(e[r]=t,e),[]),Rd=hc.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);function Ld(e){return e.reduce((t,r)=>(t+=_d[r],t),"")}function kd(e){let t=[];for(let r of e){let n=Rd[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(n)}return new Uint8Array(t)}var Nd=zr({prefix:"\u{1F680}",name:"base256emoji",encode:Ld,decode:kd});var Os={};Nt(Os,{base32:()=>de,base32hex:()=>Kd,base32hexpad:()=>Md,base32hexpadupper:()=>Vd,base32hexupper:()=>Od,base32pad:()=>Dd,base32padupper:()=>Ud,base32upper:()=>Pd,base32z:()=>Fd});var de=Et({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Pd=Et({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Dd=Et({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Ud=Et({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Kd=Et({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Od=Et({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Md=Et({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Vd=Et({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Fd=Et({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Ms={};Nt(Ms,{base36:()=>qd,base36upper:()=>Hd});var qd=tr({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Hd=tr({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Vs={};Nt(Vs,{base58btc:()=>Rt,base58flickr:()=>zd});var Rt=tr({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),zd=tr({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Fs={};Nt(Fs,{base64:()=>hi,base64pad:()=>Gd,base64url:()=>Wd,base64urlpad:()=>$d});var hi=Et({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Gd=Et({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Wd=Et({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),$d=Et({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var qs={};Nt(qs,{base8:()=>Qd});var Qd=Et({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Hs={};Nt(Hs,{identity:()=>Yd});var Yd=zr({prefix:"\0",name:"identity",encode:e=>uc(e),decode:e=>cc(e)});var Dm=new TextEncoder,Um=new TextDecoder;var Gs={};Nt(Gs,{identity:()=>er});var Jd=yc,dc=128,jd=127,tp=~jd,ep=Math.pow(2,31);function yc(e,t,r){t=t||[],r=r||0;for(var n=r;e>=ep;)t[r++]=e&255|dc,e/=128;for(;e&tp;)t[r++]=e&255|dc,e>>>=7;return t[r]=e|0,yc.bytes=r-n+1,t}var rp=zs,np=128,pc=127;function zs(e,n){var r=0,n=n||0,i=0,s=n,o,a=e.length;do{if(s>=a)throw zs.bytes=0,new RangeError("Could not decode varint");o=e[s++],r+=i<28?(o&pc)<<i:(o&pc)*Math.pow(2,i),i+=7}while(o>=np);return zs.bytes=s-n,r}var ip=Math.pow(2,7),sp=Math.pow(2,14),op=Math.pow(2,21),ap=Math.pow(2,28),cp=Math.pow(2,35),up=Math.pow(2,42),fp=Math.pow(2,49),lp=Math.pow(2,56),hp=Math.pow(2,63),dp=function(e){return e<ip?1:e<sp?2:e<op?3:e<ap?4:e<cp?5:e<up?6:e<fp?7:e<lp?8:e<hp?9:10},pp={encode:Jd,decode:rp,encodingLength:dp},yp=pp,vn=yp;var bn=(e,t=0)=>[vn.decode(e,t),vn.decode.bytes],Gr=(e,t,r=0)=>(vn.encode(e,t,r),t),Wr=e=>vn.encodingLength(e);var Te=(e,t)=>{let r=t.byteLength,n=Wr(e),i=n+Wr(r),s=new Uint8Array(i+r);return Gr(e,s,0),Gr(r,s,n),s.set(t,i),new $r(e,r,t,s)},br=e=>{let t=Ke(e),[r,n]=bn(t),[i,s]=bn(t.subarray(n)),o=t.subarray(n+s);if(o.byteLength!==i)throw new Error("Incorrect length");return new $r(r,i,o,t)},gc=(e,t)=>{if(e===t)return!0;{let r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&ac(e.bytes,r.bytes)}},$r=class{constructor(t,r,n,i){this.code=t,this.size=r,this.digest=n,this.bytes=i}};var mc=0,gp="identity",xc=Ke,mp=e=>Te(mc,xc(e)),er={code:mc,name:gp,encode:xc,digest:mp};var Qs={};Nt(Qs,{sha256:()=>Vt,sha512:()=>xp});var $s=({name:e,code:t,encode:r})=>new Ws(e,t,r),Ws=class{constructor(t,r,n){this.name=t,this.code=r,this.encode=n}digest(t){if(t instanceof Uint8Array){let r=this.encode(t);return r instanceof Uint8Array?Te(this.code,r):r.then(n=>Te(this.code,n))}else throw Error("Unknown type, must be binary type")}};var bc=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),Vt=$s({name:"sha2-256",code:18,encode:bc("SHA-256")}),xp=$s({name:"sha2-512",code:19,encode:bc("SHA-512")});var wc=(e,t)=>{let{bytes:r,version:n}=e;switch(n){case 0:return bp(r,Ys(e),t||Rt.encoder);default:return wp(r,Ys(e),t||de.encoder)}};var Ec=new WeakMap,Ys=e=>{let t=Ec.get(e);if(t==null){let r=new Map;return Ec.set(e,r),r}return t},pe=class e{constructor(t,r,n,i){this.code=r,this.version=t,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:t,multihash:r}=this;if(t!==wn)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==Ep)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return e.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:t,digest:r}=this.multihash,n=Te(t,r);return e.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(t){return e.equals(this,t)}static equals(t,r){let n=r;return n&&t.code===n.code&&t.version===n.version&&gc(t.multihash,n.multihash)}toString(t){return wc(this,t)}toJSON(){return{"/":wc(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(t){if(t==null)return null;let r=t;if(r instanceof e)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:i,multihash:s,bytes:o}=r;return new e(n,i,s,o||Sc(n,i,s.bytes))}else if(r[Sp]===!0){let{version:n,multihash:i,code:s}=r,o=br(i);return e.create(n,s,o)}else return null}static create(t,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(t){case 0:{if(r!==wn)throw new Error(`Version 0 CID must use dag-pb (code: ${wn}) block encoding`);return new e(t,r,n,n.bytes)}case 1:{let i=Sc(t,r,n.bytes);return new e(t,r,n,i)}default:throw new Error("Invalid version")}}static createV0(t){return e.create(0,wn,t)}static createV1(t,r){return e.create(1,t,r)}static decode(t){let[r,n]=e.decodeFirst(t);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(t){let r=e.inspectBytes(t),n=r.size-r.multihashSize,i=Ke(t.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");let s=i.subarray(r.multihashSize-r.digestSize),o=new $r(r.multihashCode,r.digestSize,s,i);return[r.version===0?e.createV0(o):e.createV1(r.codec,o),t.subarray(r.size)]}static inspectBytes(t){let r=0,n=()=>{let[l,h]=bn(t.subarray(r));return r+=h,l},i=n(),s=wn;if(i===18?(i=0,r=0):s=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let o=r,a=n(),c=n(),u=r+c,f=u-o;return{version:i,codec:s,multihashCode:a,digestSize:c,multihashSize:f,size:u}}static parse(t,r){let[n,i]=vp(t,r),s=e.decode(i);if(s.version===0&&t[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Ys(s).set(n,t),s}},vp=(e,t)=>{switch(e[0]){case"Q":{let r=t||Rt;return[Rt.prefix,r.decode(`${Rt.prefix}${e}`)]}case Rt.prefix:{let r=t||Rt;return[Rt.prefix,r.decode(e)]}case de.prefix:{let r=t||de;return[de.prefix,r.decode(e)]}default:{if(t==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}},bp=(e,t,r)=>{let{prefix:n}=r;if(n!==Rt.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=t.get(n);if(i==null){let s=r.encode(e).slice(1);return t.set(n,s),s}else return i},wp=(e,t,r)=>{let{prefix:n}=r,i=t.get(n);if(i==null){let s=r.encode(e);return t.set(n,s),s}else return i},wn=112,Ep=18,Sc=(e,t,r)=>{let n=Wr(e),i=n+Wr(t),s=new Uint8Array(i+r.byteLength);return Gr(e,s,0),Gr(t,s,n),s.set(r,i),s},Sp=Symbol.for("@ipld/js-cid/CID");var rr={...Hs,...Us,...qs,...Ps,...Ds,...Os,...Ms,...Vs,...Fs,...Ks},Jm={...Qs,...Gs};function Oe(e=0){return globalThis.Buffer?.alloc!=null?je(globalThis.Buffer.alloc(e)):new Uint8Array(e)}function te(e=0){return globalThis.Buffer?.allocUnsafe!=null?je(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function Ac(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}var Bc=Ac("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),Zs=Ac("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);let t=te(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),Bp={utf8:Bc,"utf-8":Bc,hex:rr.base16,latin1:Zs,ascii:Zs,binary:Zs,...rr},pi=Bp;function St(e,t="utf8"){let r=pi[t];if(r==null)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?je(globalThis.Buffer.from(e,"utf-8")):r.decoder.decode(`${r.prefix}${e}`)}var _o={};Nt(_o,{Ed25519PrivateKey:()=>Tr,Ed25519PublicKey:()=>Cn,generateKeyPair:()=>My,generateKeyPairFromSeed:()=>ou,unmarshalEd25519PrivateKey:()=>Ky,unmarshalEd25519PublicKey:()=>Oy});function vt(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}var p2=Jt(Tt(),1),y2=Jt(ci(),1),Ic=Jt(ct(),1);function Lt(e,t){if(globalThis.Buffer!=null)return je(globalThis.Buffer.concat(e,t));t==null&&(t=e.reduce((i,s)=>i+s.length,0));let r=te(t),n=0;for(let i of e)r.set(i,n),n+=i.length;return je(r)}function ot(e,t="utf8"){let r=pi[t];if(r==null)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):r.encoder.encode(e).substring(1)}function ye(e,t){let r=Uint8Array.from(e.abs().toByteArray());if(r=r[0]===0?r.subarray(1):r,t!=null){if(r.length>t)throw new Error("byte array longer than desired length");r=Lt([new Uint8Array(t-r.length),r])}return ot(r,"base64url")}function ne(e){let t=Tc(e);return new Ic.default.jsbn.BigInteger(ot(t,"base16"),16)}function Tc(e,t){let r=St(e,"base64urlpad");if(t!=null){if(r.length>t)throw new Error("byte array longer than desired length");r=Lt([new Uint8Array(t-r.length),r])}return r}function ue(e){return e==null?!1:typeof e.then=="function"&&typeof e.catch=="function"&&typeof e.finally=="function"}function Cc(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Xs(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function _c(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Cc(e.outputLen),Cc(e.blockLen)}function Qr(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Rc(e,t){Xs(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var yi=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var Lc=e=>e instanceof Uint8Array;var gi=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),ge=(e,t)=>e<<32-t|e>>>t,Ap=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Ap)throw new Error("Non little-endian hardware is not supported");function Js(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function En(e){if(typeof e=="string"&&(e=Js(e)),!Lc(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function mi(...e){let t=new Uint8Array(e.reduce((n,i)=>n+i.length,0)),r=0;return e.forEach(n=>{if(!Lc(n))throw new Error("Uint8Array expected");t.set(n,r),r+=n.length}),t}var Yr=class{clone(){return this._cloneInto()}},S2={}.toString;function xi(e){let t=n=>e().update(En(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function Zr(e=32){if(yi&&typeof yi.getRandomValues=="function")return yi.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function Ip(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,u=n?0:4;e.setUint32(t+c,o,n),e.setUint32(t+u,a,n)}var Xr=class extends Yr{constructor(t,r,n,i){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=gi(this.buffer)}update(t){Qr(this);let{view:r,buffer:n,blockLen:i}=this;t=En(t);let s=t.length;for(let o=0;o<s;){let a=Math.min(i-this.pos,s-o);if(a===i){let c=gi(t);for(;i<=s-o;o+=i)this.process(c,o);continue}n.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Qr(this),Rc(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:s}=this,{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let l=o;l<i;l++)r[l]=0;Ip(n,i-8,BigInt(this.length*8),s),this.process(n,0);let a=gi(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)a.setUint32(4*l,f[l],s)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return t.length=i,t.pos=a,t.finished=s,t.destroyed=o,i%r&&t.buffer.set(n),t}};var vi=BigInt(4294967295),js=BigInt(32);function kc(e,t=!1){return t?{h:Number(e&vi),l:Number(e>>js&vi)}:{h:Number(e>>js&vi)|0,l:Number(e&vi)|0}}function Tp(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){let{h:s,l:o}=kc(e[i],t);[r[i],n[i]]=[s,o]}return[r,n]}var Cp=(e,t)=>BigInt(e>>>0)<<js|BigInt(t>>>0),_p=(e,t,r)=>e>>>r,Rp=(e,t,r)=>e<<32-r|t>>>r,Lp=(e,t,r)=>e>>>r|t<<32-r,kp=(e,t,r)=>e<<32-r|t>>>r,Np=(e,t,r)=>e<<64-r|t>>>r-32,Pp=(e,t,r)=>e>>>r-32|t<<64-r,Dp=(e,t)=>t,Up=(e,t)=>e,Kp=(e,t,r)=>e<<r|t>>>32-r,Op=(e,t,r)=>t<<r|e>>>32-r,Mp=(e,t,r)=>t<<r-32|e>>>64-r,Vp=(e,t,r)=>e<<r-32|t>>>64-r;function Fp(e,t,r,n){let i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:i|0}}var qp=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),Hp=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,zp=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),Gp=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,Wp=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0),$p=(e,t,r,n,i,s)=>t+r+n+i+s+(e/2**32|0)|0;var Qp={fromBig:kc,split:Tp,toBig:Cp,shrSH:_p,shrSL:Rp,rotrSH:Lp,rotrSL:kp,rotrBH:Np,rotrBL:Pp,rotr32H:Dp,rotr32L:Up,rotlSH:Kp,rotlSL:Op,rotlBH:Mp,rotlBL:Vp,add:Fp,add3L:qp,add3H:Hp,add4L:zp,add4H:Gp,add5H:$p,add5L:Wp},Q=Qp;var[Yp,Zp]=Q.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),nr=new Uint32Array(80),ir=new Uint32Array(80),to=class extends Xr{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:t,Al:r,Bh:n,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:u,El:f,Fh:l,Fl:h,Gh:y,Gl:d,Hh:p,Hl:g}=this;return[t,r,n,i,s,o,a,c,u,f,l,h,y,d,p,g]}set(t,r,n,i,s,o,a,c,u,f,l,h,y,d,p,g){this.Ah=t|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=f|0,this.Fh=l|0,this.Fl=h|0,this.Gh=y|0,this.Gl=d|0,this.Hh=p|0,this.Hl=g|0}process(t,r){for(let b=0;b<16;b++,r+=4)nr[b]=t.getUint32(r),ir[b]=t.getUint32(r+=4);for(let b=16;b<80;b++){let R=nr[b-15]|0,E=ir[b-15]|0,S=Q.rotrSH(R,E,1)^Q.rotrSH(R,E,8)^Q.shrSH(R,E,7),L=Q.rotrSL(R,E,1)^Q.rotrSL(R,E,8)^Q.shrSL(R,E,7),k=nr[b-2]|0,G=ir[b-2]|0,z=Q.rotrSH(k,G,19)^Q.rotrBH(k,G,61)^Q.shrSH(k,G,6),q=Q.rotrSL(k,G,19)^Q.rotrBL(k,G,61)^Q.shrSL(k,G,6),X=Q.add4L(L,q,ir[b-7],ir[b-16]),at=Q.add4H(X,S,z,nr[b-7],nr[b-16]);nr[b]=at|0,ir[b]=X|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:u,Dl:f,Eh:l,El:h,Fh:y,Fl:d,Gh:p,Gl:g,Hh:x,Hl:w}=this;for(let b=0;b<80;b++){let R=Q.rotrSH(l,h,14)^Q.rotrSH(l,h,18)^Q.rotrBH(l,h,41),E=Q.rotrSL(l,h,14)^Q.rotrSL(l,h,18)^Q.rotrBL(l,h,41),S=l&y^~l&p,L=h&d^~h&g,k=Q.add5L(w,E,L,Zp[b],ir[b]),G=Q.add5H(k,x,R,S,Yp[b],nr[b]),z=k|0,q=Q.rotrSH(n,i,28)^Q.rotrBH(n,i,34)^Q.rotrBH(n,i,39),X=Q.rotrSL(n,i,28)^Q.rotrBL(n,i,34)^Q.rotrBL(n,i,39),at=n&s^n&a^s&a,Kt=i&o^i&c^o&c;x=p|0,w=g|0,p=y|0,g=d|0,y=l|0,d=h|0,{h:l,l:h}=Q.add(u|0,f|0,G|0,z|0),u=a|0,f=c|0,a=s|0,c=o|0,s=n|0,o=i|0;let T=Q.add3L(z,X,Kt);n=Q.add3H(T,G,q,at),i=T|0}({h:n,l:i}=Q.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=Q.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=Q.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l:f}=Q.add(this.Dh|0,this.Dl|0,u|0,f|0),{h:l,l:h}=Q.add(this.Eh|0,this.El|0,l|0,h|0),{h:y,l:d}=Q.add(this.Fh|0,this.Fl|0,y|0,d|0),{h:p,l:g}=Q.add(this.Gh|0,this.Gl|0,p|0,g|0),{h:x,l:w}=Q.add(this.Hh|0,this.Hl|0,x|0,w|0),this.set(n,i,s,o,a,c,u,f,l,h,y,d,p,g,x,w)}roundClean(){nr.fill(0),ir.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};var eo=xi(()=>new to);var Ei={};Nt(Ei,{bitGet:()=>ny,bitLen:()=>ry,bitMask:()=>Sn,bitSet:()=>iy,bytesToHex:()=>Me,bytesToNumberBE:()=>Ve,bytesToNumberLE:()=>sr,concatBytes:()=>Fe,createHmacDrbg:()=>io,ensureBytes:()=>Bt,equalBytes:()=>ty,hexToBytes:()=>Er,hexToNumber:()=>no,numberToBytesBE:()=>or,numberToBytesLE:()=>Sr,numberToHexUnpadded:()=>Dc,numberToVarBytesBE:()=>jp,utf8ToBytes:()=>ey,validateObject:()=>Ce});var Pc=BigInt(0),bi=BigInt(1),Xp=BigInt(2),wi=e=>e instanceof Uint8Array,Jp=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Me(e){if(!wi(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=Jp[e[r]];return t}function Dc(e){let t=e.toString(16);return t.length&1?`0${t}`:t}function no(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function Er(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(t/2);for(let n=0;n<r.length;n++){let i=n*2,s=e.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");r[n]=o}return r}function Ve(e){return no(Me(e))}function sr(e){if(!wi(e))throw new Error("Uint8Array expected");return no(Me(Uint8Array.from(e).reverse()))}function or(e,t){return Er(e.toString(16).padStart(t*2,"0"))}function Sr(e,t){return or(e,t).reverse()}function jp(e){return Er(Dc(e))}function Bt(e,t,r){let n;if(typeof t=="string")try{n=Er(t)}catch(s){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${s}`)}else if(wi(t))n=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);let i=n.length;if(typeof r=="number"&&i!==r)throw new Error(`${e} expected ${r} bytes, got ${i}`);return n}function Fe(...e){let t=new Uint8Array(e.reduce((n,i)=>n+i.length,0)),r=0;return e.forEach(n=>{if(!wi(n))throw new Error("Uint8Array expected");t.set(n,r),r+=n.length}),t}function ty(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function ey(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function ry(e){let t;for(t=0;e>Pc;e>>=bi,t+=1);return t}function ny(e,t){return e>>BigInt(t)&bi}var iy=(e,t,r)=>e|(r?bi:Pc)<<BigInt(t),Sn=e=>(Xp<<BigInt(e-1))-bi,ro=e=>new Uint8Array(e),Nc=e=>Uint8Array.from(e);function io(e,t,r){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=ro(e),i=ro(e),s=0,o=()=>{n.fill(1),i.fill(0),s=0},a=(...l)=>r(i,n,...l),c=(l=ro())=>{i=a(Nc([0]),l),n=a(),l.length!==0&&(i=a(Nc([1]),l),n=a())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let l=0,h=[];for(;l<t;){n=a();let y=n.slice();h.push(y),l+=n.length}return Fe(...h)};return(l,h)=>{o(),c(l);let y;for(;!(y=h(u()));)c();return o(),y}}var sy={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Ce(e,t,r={}){let n=(i,s,o)=>{let a=sy[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);let c=e[i];if(!(o&&c===void 0)&&!a(c,e))throw new Error(`Invalid param ${String(i)}=${c} (${typeof c}), expected ${s}`)};for(let[i,s]of Object.entries(t))n(i,s,!1);for(let[i,s]of Object.entries(r))n(i,s,!0);return e}var kt=BigInt(0),gt=BigInt(1),Br=BigInt(2),oy=BigInt(3),so=BigInt(4),Uc=BigInt(5),Kc=BigInt(8),ay=BigInt(9),cy=BigInt(16);function ut(e,t){let r=e%t;return r>=kt?r:t+r}function uy(e,t,r){if(r<=kt||t<kt)throw new Error("Expected power/modulo > 0");if(r===gt)return kt;let n=gt;for(;t>kt;)t&gt&&(n=n*e%r),e=e*e%r,t>>=gt;return n}function mt(e,t,r){let n=e;for(;t-- >kt;)n*=n,n%=r;return n}function Si(e,t){if(e===kt||t<=kt)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=ut(e,t),n=t,i=kt,s=gt,o=gt,a=kt;for(;r!==kt;){let u=n/r,f=n%r,l=i-o*u,h=s-a*u;n=r,r=f,i=o,s=a,o=l,a=h}if(n!==gt)throw new Error("invert: does not exist");return ut(i,t)}function fy(e){let t=(e-gt)/Br,r,n,i;for(r=e-gt,n=0;r%Br===kt;r/=Br,n++);for(i=Br;i<e&&uy(i,t,e)!==e-gt;i++);if(n===1){let o=(e+gt)/so;return function(c,u){let f=c.pow(u,o);if(!c.eql(c.sqr(f),u))throw new Error("Cannot find square root");return f}}let s=(r+gt)/Br;return function(a,c){if(a.pow(c,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=n,f=a.pow(a.mul(a.ONE,i),r),l=a.pow(c,s),h=a.pow(c,r);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let y=1;for(let p=a.sqr(h);y<u&&!a.eql(p,a.ONE);y++)p=a.sqr(p);let d=a.pow(f,gt<<BigInt(u-y-1));f=a.sqr(d),l=a.mul(l,d),h=a.mul(h,f),u=y}return l}}function ly(e){if(e%so===oy){let t=(e+gt)/so;return function(n,i){let s=n.pow(i,t);if(!n.eql(n.sqr(s),i))throw new Error("Cannot find square root");return s}}if(e%Kc===Uc){let t=(e-Uc)/Kc;return function(n,i){let s=n.mul(i,Br),o=n.pow(s,t),a=n.mul(i,o),c=n.mul(n.mul(a,Br),o),u=n.mul(a,n.sub(c,n.ONE));if(!n.eql(n.sqr(u),i))throw new Error("Cannot find square root");return u}}return e%cy,fy(e)}var Oc=(e,t)=>(ut(e,t)&gt)===gt,hy=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function oo(e){let t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=hy.reduce((n,i)=>(n[i]="function",n),t);return Ce(e,r)}function dy(e,t,r){if(r<kt)throw new Error("Expected power > 0");if(r===kt)return e.ONE;if(r===gt)return t;let n=e.ONE,i=t;for(;r>kt;)r&gt&&(n=e.mul(n,i)),i=e.sqr(i),r>>=gt;return n}function py(e,t){let r=new Array(t.length),n=t.reduce((s,o,a)=>e.is0(o)?s:(r[a]=s,e.mul(s,o)),e.ONE),i=e.inv(n);return t.reduceRight((s,o,a)=>e.is0(o)?s:(r[a]=e.mul(s,r[a]),e.mul(s,o)),i),r}function ao(e,t){let r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function Bi(e,t,r=!1,n={}){if(e<=kt)throw new Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:i,nByteLength:s}=ao(e,t);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");let o=ly(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:s,MASK:Sn(i),ZERO:kt,ONE:gt,create:c=>ut(c,e),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return kt<=c&&c<e},is0:c=>c===kt,isOdd:c=>(c&gt)===gt,neg:c=>ut(-c,e),eql:(c,u)=>c===u,sqr:c=>ut(c*c,e),add:(c,u)=>ut(c+u,e),sub:(c,u)=>ut(c-u,e),mul:(c,u)=>ut(c*u,e),pow:(c,u)=>dy(a,c,u),div:(c,u)=>ut(c*Si(u,e),e),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>Si(c,e),sqrt:n.sqrt||(c=>o(a,c)),invertBatch:c=>py(a,c),cmov:(c,u,f)=>f?u:c,toBytes:c=>r?Sr(c,s):or(c,s),fromBytes:c=>{if(c.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${c.length}`);return r?sr(c):Ve(c)}});return Object.freeze(a)}function Mc(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");let r=e.sqrt(t);return e.isOdd(r)?e.neg(r):r}function Vc(e){if(typeof e!="bigint")throw new Error("field order must be bigint");let t=e.toString(2).length;return Math.ceil(t/8)}function co(e){let t=Vc(e);return t+Math.ceil(t/2)}function Fc(e,t,r=!1){let n=e.length,i=Vc(t),s=co(t);if(n<16||n<s||n>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${n}`);let o=r?Ve(e):sr(e),a=ut(o,t-gt)+gt;return r?Sr(a,i):or(a,i)}var gy=BigInt(0),uo=BigInt(1);function Ai(e,t){let r=(i,s)=>{let o=s.negate();return i?o:s},n=i=>{let s=Math.ceil(t/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:r,unsafeLadder(i,s){let o=e.ZERO,a=i;for(;s>gy;)s&uo&&(o=o.add(a)),a=a.double(),s>>=uo;return o},precomputeWindow(i,s){let{windows:o,windowSize:a}=n(s),c=[],u=i,f=u;for(let l=0;l<o;l++){f=u,c.push(f);for(let h=1;h<a;h++)f=f.add(u),c.push(f);u=f.double()}return c},wNAF(i,s,o){let{windows:a,windowSize:c}=n(i),u=e.ZERO,f=e.BASE,l=BigInt(2**i-1),h=2**i,y=BigInt(i);for(let d=0;d<a;d++){let p=d*c,g=Number(o&l);o>>=y,g>c&&(g-=h,o+=uo);let x=p,w=p+Math.abs(g)-1,b=d%2!==0,R=g<0;g===0?f=f.add(r(b,s[x])):u=u.add(r(R,s[w]))}return{p:u,f}},wNAFCached(i,s,o,a){let c=i._WINDOW_SIZE||1,u=s.get(i);return u||(u=this.precomputeWindow(i,c),c!==1&&s.set(i,a(u))),this.wNAF(c,u,o)}}}function Bn(e){return oo(e.Fp),Ce(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...ao(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}var me=BigInt(0),ie=BigInt(1),Ii=BigInt(2),my=BigInt(8),xy={zip215:!0};function vy(e){let t=Bn(e);return Ce(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function Ti(e){let t=vy(e),{Fp:r,n,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:c}=t,u=Ii<<BigInt(a*8)-ie,f=r.create,l=t.uvRatio||((N,A)=>{try{return{isValid:!0,value:r.sqrt(N*r.inv(A))}}catch{return{isValid:!1,value:me}}}),h=t.adjustScalarBytes||(N=>N),y=t.domain||((N,A,K)=>{if(A.length||K)throw new Error("Contexts/pre-hash are not supported");return N}),d=N=>typeof N=="bigint"&&me<N,p=(N,A)=>d(N)&&d(A)&&N<A,g=N=>N===me||p(N,u);function x(N,A){if(p(N,A))return N;throw new Error(`Expected valid scalar < ${A}, got ${typeof N} ${N}`)}function w(N){return N===me?N:x(N,n)}let b=new Map;function R(N){if(!(N instanceof E))throw new Error("ExtendedPoint expected")}class E{constructor(A,K,V,H){if(this.ex=A,this.ey=K,this.ez=V,this.et=H,!g(A))throw new Error("x required");if(!g(K))throw new Error("y required");if(!g(V))throw new Error("z required");if(!g(H))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(A){if(A instanceof E)throw new Error("extended point not allowed");let{x:K,y:V}=A||{};if(!g(K)||!g(V))throw new Error("invalid affine point");return new E(K,V,ie,f(K*V))}static normalizeZ(A){let K=r.invertBatch(A.map(V=>V.ez));return A.map((V,H)=>V.toAffine(K[H])).map(E.fromAffine)}_setWindowSize(A){this._WINDOW_SIZE=A,b.delete(this)}assertValidity(){let{a:A,d:K}=t;if(this.is0())throw new Error("bad point: ZERO");let{ex:V,ey:H,ez:Y,et:J}=this,st=f(V*V),j=f(H*H),rt=f(Y*Y),It=f(rt*rt),wt=f(st*A),Ot=f(rt*f(wt+j)),Mt=f(It+f(K*f(st*j)));if(Ot!==Mt)throw new Error("bad point: equation left != right (1)");let _t=f(V*H),qt=f(Y*J);if(_t!==qt)throw new Error("bad point: equation left != right (2)")}equals(A){R(A);let{ex:K,ey:V,ez:H}=this,{ex:Y,ey:J,ez:st}=A,j=f(K*st),rt=f(Y*H),It=f(V*st),wt=f(J*H);return j===rt&&It===wt}is0(){return this.equals(E.ZERO)}negate(){return new E(f(-this.ex),this.ey,this.ez,f(-this.et))}double(){let{a:A}=t,{ex:K,ey:V,ez:H}=this,Y=f(K*K),J=f(V*V),st=f(Ii*f(H*H)),j=f(A*Y),rt=K+V,It=f(f(rt*rt)-Y-J),wt=j+J,Ot=wt-st,Mt=j-J,_t=f(It*Ot),qt=f(wt*Mt),Ne=f(It*Mt),pr=f(Ot*wt);return new E(_t,qt,pr,Ne)}add(A){R(A);let{a:K,d:V}=t,{ex:H,ey:Y,ez:J,et:st}=this,{ex:j,ey:rt,ez:It,et:wt}=A;if(K===BigInt(-1)){let Na=f((Y-H)*(rt+j)),Pa=f((Y+H)*(rt-j)),ss=f(Pa-Na);if(ss===me)return this.double();let Da=f(J*Ii*wt),Ua=f(st*Ii*It),Ka=Ua+Da,Oa=Pa+Na,Ma=Ua-Da,Vf=f(Ka*ss),Ff=f(Oa*Ma),qf=f(Ka*Ma),Hf=f(ss*Oa);return new E(Vf,Ff,Hf,qf)}let Ot=f(H*j),Mt=f(Y*rt),_t=f(st*V*wt),qt=f(J*It),Ne=f((H+Y)*(j+rt)-Ot-Mt),pr=qt-_t,hn=qt+_t,ka=f(Mt-K*Ot),Uf=f(Ne*pr),Kf=f(hn*ka),Of=f(Ne*ka),Mf=f(pr*hn);return new E(Uf,Kf,Mf,Of)}subtract(A){return this.add(A.negate())}wNAF(A){return k.wNAFCached(this,b,A,E.normalizeZ)}multiply(A){let{p:K,f:V}=this.wNAF(x(A,n));return E.normalizeZ([K,V])[0]}multiplyUnsafe(A){let K=w(A);return K===me?L:this.equals(L)||K===ie?this:this.equals(S)?this.wNAF(K).p:k.unsafeLadder(this,K)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return k.unsafeLadder(this,n).is0()}toAffine(A){let{ex:K,ey:V,ez:H}=this,Y=this.is0();A==null&&(A=Y?my:r.inv(H));let J=f(K*A),st=f(V*A),j=f(H*A);if(Y)return{x:me,y:ie};if(j!==ie)throw new Error("invZ was invalid");return{x:J,y:st}}clearCofactor(){let{h:A}=t;return A===ie?this:this.multiplyUnsafe(A)}static fromHex(A,K=!1){let{d:V,a:H}=t,Y=r.BYTES;A=Bt("pointHex",A,Y);let J=A.slice(),st=A[Y-1];J[Y-1]=st&-129;let j=sr(J);j===me||(K?x(j,u):x(j,r.ORDER));let rt=f(j*j),It=f(rt-ie),wt=f(V*rt-H),{isValid:Ot,value:Mt}=l(It,wt);if(!Ot)throw new Error("Point.fromHex: invalid y coordinate");let _t=(Mt&ie)===ie,qt=(st&128)!==0;if(!K&&Mt===me&&qt)throw new Error("Point.fromHex: x=0 and x_0=1");return qt!==_t&&(Mt=f(-Mt)),E.fromAffine({x:Mt,y:j})}static fromPrivateKey(A){return q(A).point}toRawBytes(){let{x:A,y:K}=this.toAffine(),V=Sr(K,r.BYTES);return V[V.length-1]|=A&ie?128:0,V}toHex(){return Me(this.toRawBytes())}}E.BASE=new E(t.Gx,t.Gy,ie,f(t.Gx*t.Gy)),E.ZERO=new E(me,ie,ie,me);let{BASE:S,ZERO:L}=E,k=Ai(E,a*8);function G(N){return ut(N,n)}function z(N){return G(sr(N))}function q(N){let A=a;N=Bt("private key",N,A);let K=Bt("hashed private key",s(N),2*A),V=h(K.slice(0,A)),H=K.slice(A,2*A),Y=z(V),J=S.multiply(Y),st=J.toRawBytes();return{head:V,prefix:H,scalar:Y,point:J,pointBytes:st}}function X(N){return q(N).pointBytes}function at(N=new Uint8Array,...A){let K=Fe(...A);return z(s(y(K,Bt("context",N),!!i)))}function Kt(N,A,K={}){N=Bt("message",N),i&&(N=i(N));let{prefix:V,scalar:H,pointBytes:Y}=q(A),J=at(K.context,V,N),st=S.multiply(J).toRawBytes(),j=at(K.context,st,Y,N),rt=G(J+j*H);w(rt);let It=Fe(st,Sr(rt,r.BYTES));return Bt("result",It,a*2)}let T=xy;function P(N,A,K,V=T){let{context:H,zip215:Y}=V,J=r.BYTES;N=Bt("signature",N,2*J),A=Bt("message",A),i&&(A=i(A));let st=sr(N.slice(J,2*J)),j,rt,It;try{j=E.fromHex(K,Y),rt=E.fromHex(N.slice(0,J),Y),It=S.multiplyUnsafe(st)}catch{return!1}if(!Y&&j.isSmallOrder())return!1;let wt=at(H,rt.toRawBytes(),j.toRawBytes(),A);return rt.add(j.multiplyUnsafe(wt)).subtract(It).clearCofactor().equals(E.ZERO)}return S._setWindowSize(8),{CURVE:t,getPublicKey:X,sign:Kt,verify:P,ExtendedPoint:E,utils:{getExtendedPublicKey:q,randomPrivateKey:()=>o(r.BYTES),precompute(N=8,A=E.BASE){return A._setWindowSize(N),A.multiply(BigInt(3)),A}}}}var lo=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),qc=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),G2=BigInt(0),by=BigInt(1),fo=BigInt(2),wy=BigInt(5),Hc=BigInt(10),Ey=BigInt(20),Sy=BigInt(40),zc=BigInt(80);function By(e){let t=lo,n=e*e%t*e%t,i=mt(n,fo,t)*n%t,s=mt(i,by,t)*e%t,o=mt(s,wy,t)*s%t,a=mt(o,Hc,t)*o%t,c=mt(a,Ey,t)*a%t,u=mt(c,Sy,t)*c%t,f=mt(u,zc,t)*u%t,l=mt(f,zc,t)*u%t,h=mt(l,Hc,t)*o%t;return{pow_p_5_8:mt(h,fo,t)*e%t,b2:n}}function Ay(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function Iy(e,t){let r=lo,n=ut(t*t*t,r),i=ut(n*n*t,r),s=By(e*i).pow_p_5_8,o=ut(e*n*s,r),a=ut(t*o*o,r),c=o,u=ut(o*qc,r),f=a===e,l=a===ut(-e,r),h=a===ut(-e*qc,r);return f&&(o=c),(l||h)&&(o=u),Oc(o,r)&&(o=ut(-o,r)),{isValid:f||l,value:o}}var qe=Bi(lo,void 0,!0),ho={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:qe,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:eo,randomBytes:Zr,adjustScalarBytes:Ay,uvRatio:Iy},Jr=Ti(ho);function Gc(e,t,r){if(t.length>255)throw new Error("Context is too big");return mi(Js("SigEd25519 no Ed25519 collisions"),new Uint8Array([r?1:0,t.length]),t,e)}var W2=Ti({...ho,domain:Gc}),$2=Ti({...ho,domain:Gc,prehash:eo});var Ty=(qe.ORDER+BigInt(3))/BigInt(8),Q2=qe.pow(fo,Ty),Y2=qe.sqrt(qe.neg(qe.ONE)),Z2=(qe.ORDER-BigInt(5))/BigInt(8),X2=BigInt(486662);var J2=Mc(qe,qe.neg(BigInt(486664)));var j2=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),tx=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),ex=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),rx=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");var nx=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");var jr=32,He=64,Ci=32;function Wc(){let e=Jr.utils.randomPrivateKey(),t=Jr.getPublicKey(e);return{privateKey:Zc(e,t),publicKey:t}}function $c(e){if(e.length!==Ci)throw new TypeError('"seed" must be 32 bytes in length.');if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');let t=e,r=Jr.getPublicKey(t);return{privateKey:Zc(t,r),publicKey:r}}function Qc(e,t){let r=e.subarray(0,Ci);return Jr.sign(t instanceof Uint8Array?t:t.subarray(),r)}function Yc(e,t,r){return Jr.verify(t,r instanceof Uint8Array?r:r.subarray(),e)}function Zc(e,t){let r=new Uint8Array(He);for(let n=0;n<Ci;n++)r[n]=e[n],r[Ci+n]=t[n];return r}var ee={get(e=globalThis){let t=e.crypto;if(t==null||t.subtle==null)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p/blob/main/packages/crypto/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return t}};var po={alg:"A128GCM",ext:!0,k:"scm9jmO_4BJAgdwWGVulLg",key_ops:["encrypt","decrypt"],kty:"oct"};function yo(e){let t=e?.algorithm??"AES-GCM",r=e?.keyLength??16,n=e?.nonceLength??12,i=e?.digest??"SHA-256",s=e?.saltLength??16,o=e?.iterations??32767,a=ee.get();r*=8;async function c(l,h){let y=a.getRandomValues(new Uint8Array(s)),d=a.getRandomValues(new Uint8Array(n)),p={name:t,iv:d};typeof h=="string"&&(h=St(h));let g;if(h.length===0){g=await a.subtle.importKey("jwk",po,{name:"AES-GCM"},!0,["encrypt"]);try{let w={name:"PBKDF2",salt:y,iterations:o,hash:{name:i}},b=await a.subtle.importKey("raw",h,{name:"PBKDF2"},!1,["deriveKey"]);g=await a.subtle.deriveKey(w,b,{name:t,length:r},!0,["encrypt"])}catch{g=await a.subtle.importKey("jwk",po,{name:"AES-GCM"},!0,["encrypt"])}}else{let w={name:"PBKDF2",salt:y,iterations:o,hash:{name:i}},b=await a.subtle.importKey("raw",h,{name:"PBKDF2"},!1,["deriveKey"]);g=await a.subtle.deriveKey(w,b,{name:t,length:r},!0,["encrypt"])}let x=await a.subtle.encrypt(p,g,l);return Lt([y,p.iv,new Uint8Array(x)])}async function u(l,h){let y=l.subarray(0,s),d=l.subarray(s,s+n),p=l.subarray(s+n),g={name:t,iv:d};typeof h=="string"&&(h=St(h));let x;if(h.length===0)try{let b={name:"PBKDF2",salt:y,iterations:o,hash:{name:i}},R=await a.subtle.importKey("raw",h,{name:"PBKDF2"},!1,["deriveKey"]);x=await a.subtle.deriveKey(b,R,{name:t,length:r},!0,["decrypt"])}catch{x=await a.subtle.importKey("jwk",po,{name:"AES-GCM"},!0,["decrypt"])}else{let b={name:"PBKDF2",salt:y,iterations:o,hash:{name:i}},R=await a.subtle.importKey("raw",h,{name:"PBKDF2"},!1,["deriveKey"]);x=await a.subtle.deriveKey(b,R,{name:t,length:r},!0,["decrypt"])}let w=await a.subtle.decrypt(g,x,p);return new Uint8Array(w)}return{encrypt:c,decrypt:u}}async function tn(e,t){let n=await yo().encrypt(e,t);return hi.encode(n)}var go=new Float32Array([-0]),ar=new Uint8Array(go.buffer);function Jc(e,t,r){go[0]=e,t[r]=ar[0],t[r+1]=ar[1],t[r+2]=ar[2],t[r+3]=ar[3]}function jc(e,t){return ar[0]=e[t],ar[1]=e[t+1],ar[2]=e[t+2],ar[3]=e[t+3],go[0]}var mo=new Float64Array([-0]),Ht=new Uint8Array(mo.buffer);function tu(e,t,r){mo[0]=e,t[r]=Ht[0],t[r+1]=Ht[1],t[r+2]=Ht[2],t[r+3]=Ht[3],t[r+4]=Ht[4],t[r+5]=Ht[5],t[r+6]=Ht[6],t[r+7]=Ht[7]}function eu(e,t){return Ht[0]=e[t],Ht[1]=e[t+1],Ht[2]=e[t+2],Ht[3]=e[t+3],Ht[4]=e[t+4],Ht[5]=e[t+5],Ht[6]=e[t+6],Ht[7]=e[t+7],mo[0]}var _y=BigInt(Number.MAX_SAFE_INTEGER),Ry=BigInt(Number.MIN_SAFE_INTEGER),re=class e{lo;hi;constructor(t,r){this.lo=t|0,this.hi=r|0}toNumber(t=!1){if(!t&&this.hi>>>31>0){let r=~this.lo+1>>>0,n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296}toBigInt(t=!1){if(t)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31){let r=~this.lo+1>>>0,n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(BigInt(r)+(BigInt(n)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toString(t=!1){return this.toBigInt(t).toString()}zzEncode(){let t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this}zzDecode(){let t=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this}length(){let t=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?t<16384?t<128?1:2:t<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}static fromBigInt(t){if(t===0n)return Ar;if(t<_y&&t>Ry)return this.fromNumber(Number(t));let r=t<0n;r&&(t=-t);let n=t>>32n,i=t-(n<<32n);return r&&(n=~n|0n,i=~i|0n,++i>ru&&(i=0n,++n>ru&&(n=0n))),new e(Number(i),Number(n))}static fromNumber(t){if(t===0)return Ar;let r=t<0;r&&(t=-t);let n=t>>>0,i=(t-n)/4294967296>>>0;return r&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new e(n,i)}static from(t){return typeof t=="number"?e.fromNumber(t):typeof t=="bigint"?e.fromBigInt(t):typeof t=="string"?e.fromBigInt(BigInt(t)):t.low!=null||t.high!=null?new e(t.low>>>0,t.high>>>0):Ar}},Ar=new re(0,0);Ar.toBigInt=function(){return 0n};Ar.zzEncode=Ar.zzDecode=function(){return this};Ar.length=function(){return 1};var ru=4294967296n;function nu(e){let t=0,r=0;for(let n=0;n<e.length;++n)r=e.charCodeAt(n),r<128?t+=1:r<2048?t+=2:(r&64512)===55296&&(e.charCodeAt(n+1)&64512)===56320?(++n,t+=4):t+=3;return t}function iu(e,t,r){if(r-t<1)return"";let i,s=[],o=0,a;for(;t<r;)a=e[t++],a<128?s[o++]=a:a>191&&a<224?s[o++]=(a&31)<<6|e[t++]&63:a>239&&a<365?(a=((a&7)<<18|(e[t++]&63)<<12|(e[t++]&63)<<6|e[t++]&63)-65536,s[o++]=55296+(a>>10),s[o++]=56320+(a&1023)):s[o++]=(a&15)<<12|(e[t++]&63)<<6|e[t++]&63,o>8191&&((i??(i=[])).push(String.fromCharCode.apply(String,s)),o=0);return i!=null?(o>0&&i.push(String.fromCharCode.apply(String,s.slice(0,o))),i.join("")):String.fromCharCode.apply(String,s.slice(0,o))}function xo(e,t,r){let n=r,i,s;for(let o=0;o<e.length;++o)i=e.charCodeAt(o),i<128?t[r++]=i:i<2048?(t[r++]=i>>6|192,t[r++]=i&63|128):(i&64512)===55296&&((s=e.charCodeAt(o+1))&64512)===56320?(i=65536+((i&1023)<<10)+(s&1023),++o,t[r++]=i>>18|240,t[r++]=i>>12&63|128,t[r++]=i>>6&63|128,t[r++]=i&63|128):(t[r++]=i>>12|224,t[r++]=i>>6&63|128,t[r++]=i&63|128);return r-n}function xe(e,t){return RangeError(`index out of range: ${e.pos} + ${t??1} > ${e.len}`)}function _i(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}var vo=class{buf;pos;len;_slice=Uint8Array.prototype.subarray;constructor(t){this.buf=t,this.pos=0,this.len=t.length}uint32(){let t=4294967295;if(t=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(t=(t|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return t;if((this.pos+=5)>this.len)throw this.pos=this.len,xe(this,10);return t}int32(){return this.uint32()|0}sint32(){let t=this.uint32();return t>>>1^-(t&1)|0}bool(){return this.uint32()!==0}fixed32(){if(this.pos+4>this.len)throw xe(this,4);return _i(this.buf,this.pos+=4)}sfixed32(){if(this.pos+4>this.len)throw xe(this,4);return _i(this.buf,this.pos+=4)|0}float(){if(this.pos+4>this.len)throw xe(this,4);let t=jc(this.buf,this.pos);return this.pos+=4,t}double(){if(this.pos+8>this.len)throw xe(this,4);let t=eu(this.buf,this.pos);return this.pos+=8,t}bytes(){let t=this.uint32(),r=this.pos,n=this.pos+t;if(n>this.len)throw xe(this,t);return this.pos+=t,r===n?new Uint8Array(0):this.buf.subarray(r,n)}string(){let t=this.bytes();return iu(t,0,t.length)}skip(t){if(typeof t=="number"){if(this.pos+t>this.len)throw xe(this,t);this.pos+=t}else do if(this.pos>=this.len)throw xe(this);while(this.buf[this.pos++]&128);return this}skipType(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!==4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error(`invalid wire type ${t} at offset ${this.pos}`)}return this}readLongVarint(){let t=new re(0,0),r=0;if(this.len-this.pos>4){for(;r<4;++r)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;r=0}else{for(;r<3;++r){if(this.pos>=this.len)throw xe(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<r*7)>>>0,t}if(this.len-this.pos>4){for(;r<5;++r)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;r<5;++r){if(this.pos>=this.len)throw xe(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}readFixed64(){if(this.pos+8>this.len)throw xe(this,8);let t=_i(this.buf,this.pos+=4),r=_i(this.buf,this.pos+=4);return new re(t,r)}int64(){return this.readLongVarint().toBigInt()}int64Number(){return this.readLongVarint().toNumber()}int64String(){return this.readLongVarint().toString()}uint64(){return this.readLongVarint().toBigInt(!0)}uint64Number(){return this.readLongVarint().toNumber(!0)}uint64String(){return this.readLongVarint().toString(!0)}sint64(){return this.readLongVarint().zzDecode().toBigInt()}sint64Number(){return this.readLongVarint().zzDecode().toNumber()}sint64String(){return this.readLongVarint().zzDecode().toString()}fixed64(){return this.readFixed64().toBigInt()}fixed64Number(){return this.readFixed64().toNumber()}fixed64String(){return this.readFixed64().toString()}sfixed64(){return this.readFixed64().toBigInt()}sfixed64Number(){return this.readFixed64().toNumber()}sfixed64String(){return this.readFixed64().toString()}};function bo(e){return new vo(e instanceof Uint8Array?e:e.subarray())}function Qt(e,t){let r=bo(e);return t.decode(r)}function wo(e){let t=e??8192,r=t>>>1,n,i=t;return function(o){if(o<1||o>r)return te(o);i+o>t&&(n=te(t),i=0);let a=n.subarray(i,i+=o);return i&7&&(i=(i|7)+1),a}}var Ir=class{fn;len;next;val;constructor(t,r,n){this.fn=t,this.len=r,this.next=void 0,this.val=n}};function Eo(){}var Bo=class{head;tail;len;next;constructor(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}},Ly=wo();function ky(e){return globalThis.Buffer!=null?te(e):Ly(e)}var Tn=class{len;head;tail;states;constructor(){this.len=0,this.head=new Ir(Eo,0,0),this.tail=this.head,this.states=null}_push(t,r,n){return this.tail=this.tail.next=new Ir(t,r,n),this.len+=r,this}uint32(t){return this.len+=(this.tail=this.tail.next=new Ao((t=t>>>0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this}int32(t){return t<0?this._push(An,10,re.fromNumber(t)):this.uint32(t)}sint32(t){return this.uint32((t<<1^t>>31)>>>0)}uint64(t){let r=re.fromBigInt(t);return this._push(An,r.length(),r)}uint64Number(t){let r=re.fromNumber(t);return this._push(An,r.length(),r)}uint64String(t){return this.uint64(BigInt(t))}int64(t){return this.uint64(t)}int64Number(t){return this.uint64Number(t)}int64String(t){return this.uint64String(t)}sint64(t){let r=re.fromBigInt(t).zzEncode();return this._push(An,r.length(),r)}sint64Number(t){let r=re.fromNumber(t).zzEncode();return this._push(An,r.length(),r)}sint64String(t){return this.sint64(BigInt(t))}bool(t){return this._push(So,1,t?1:0)}fixed32(t){return this._push(In,4,t>>>0)}sfixed32(t){return this.fixed32(t)}fixed64(t){let r=re.fromBigInt(t);return this._push(In,4,r.lo)._push(In,4,r.hi)}fixed64Number(t){let r=re.fromNumber(t);return this._push(In,4,r.lo)._push(In,4,r.hi)}fixed64String(t){return this.fixed64(BigInt(t))}sfixed64(t){return this.fixed64(t)}sfixed64Number(t){return this.fixed64Number(t)}sfixed64String(t){return this.fixed64String(t)}float(t){return this._push(Jc,4,t)}double(t){return this._push(tu,8,t)}bytes(t){let r=t.length>>>0;return r===0?this._push(So,1,0):this.uint32(r)._push(Py,r,t)}string(t){let r=nu(t);return r!==0?this.uint32(r)._push(xo,r,t):this._push(So,1,0)}fork(){return this.states=new Bo(this),this.head=this.tail=new Ir(Eo,0,0),this.len=0,this}reset(){return this.states!=null?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Ir(Eo,0,0),this.len=0),this}ldelim(){let t=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n!==0&&(this.tail.next=t.next,this.tail=r,this.len+=n),this}finish(){let t=this.head.next,r=ky(this.len),n=0;for(;t!=null;)t.fn(t.val,r,n),n+=t.len,t=t.next;return r}};function So(e,t,r){t[r]=e&255}function Ny(e,t,r){for(;e>127;)t[r++]=e&127|128,e>>>=7;t[r]=e}var Ao=class extends Ir{next;constructor(t,r){super(Ny,t,r),this.next=void 0}};function An(e,t,r){for(;e.hi!==0;)t[r++]=e.lo&127|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=e.lo&127|128,e.lo=e.lo>>>7;t[r++]=e.lo}function In(e,t,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function Py(e,t,r){t.set(e,r)}globalThis.Buffer!=null&&(Tn.prototype.bytes=function(e){let t=e.length>>>0;return this.uint32(t),t>0&&this._push(Dy,t,e),this},Tn.prototype.string=function(e){let t=globalThis.Buffer.byteLength(e);return this.uint32(t),t>0&&this._push(Uy,t,e),this});function Dy(e,t,r){t.set(e,r)}function Uy(e,t,r){e.length<40?xo(e,t,r):t.utf8Write!=null?t.utf8Write(e,r):t.set(St(e),r)}function Io(){return new Tn}function Yt(e,t){let r=Io();return t.encode(e,r,{lengthDelimited:!1}),r.finish()}var en;(function(e){e[e.VARINT=0]="VARINT",e[e.BIT64=1]="BIT64",e[e.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",e[e.START_GROUP=3]="START_GROUP",e[e.END_GROUP=4]="END_GROUP",e[e.BIT32=5]="BIT32"})(en||(en={}));function Ri(e,t,r,n){return{name:e,type:t,encode:r,decode:n}}function To(e){function t(i){if(e[i.toString()]==null)throw new Error("Invalid enum value");return e[i]}let r=function(s,o){let a=t(s);o.int32(a)},n=function(s){let o=s.int32();return t(o)};return Ri("enum",en.VARINT,r,n)}function Zt(e,t){return Ri("message",en.LENGTH_DELIMITED,e,t)}var xt;(function(e){e.RSA="RSA",e.Ed25519="Ed25519",e.Secp256k1="Secp256k1"})(xt||(xt={}));var Co;(function(e){e[e.RSA=0]="RSA",e[e.Ed25519=1]="Ed25519",e[e.Secp256k1=2]="Secp256k1"})(Co||(Co={}));(function(e){e.codec=()=>To(Co)})(xt||(xt={}));var _e;(function(e){let t;e.codec=()=>(t==null&&(t=Zt((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),xt.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={},s=n==null?r.len:r.pos+n;for(;r.pos<s;){let o=r.uint32();switch(o>>>3){case 1:i.Type=xt.codec().decode(r);break;case 2:i.Data=r.bytes();break;default:r.skipType(o&7);break}}return i})),t),e.encode=r=>Yt(r,e.codec()),e.decode=r=>Qt(r,e.codec())})(_e||(_e={}));var Re;(function(e){let t;e.codec=()=>(t==null&&(t=Zt((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),xt.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={},s=n==null?r.len:r.pos+n;for(;r.pos<s;){let o=r.uint32();switch(o>>>3){case 1:i.Type=xt.codec().decode(r);break;case 2:i.Data=r.bytes();break;default:r.skipType(o&7);break}}return i})),t),e.encode=r=>Yt(r,e.codec()),e.decode=r=>Qt(r,e.codec())})(Re||(Re={}));var Cn=class{_key;constructor(t){this._key=rn(t,jr)}verify(t,r){return Yc(this._key,r,t)}marshal(){return this._key}get bytes(){return _e.encode({Type:xt.Ed25519,Data:this.marshal()}).subarray()}equals(t){return vt(this.bytes,t.bytes)}hash(){let t=Vt.digest(this.bytes);return ue(t)?t.then(({bytes:r})=>r):t.bytes}},Tr=class{_key;_publicKey;constructor(t,r){this._key=rn(t,He),this._publicKey=rn(r,jr)}sign(t){return Qc(this._key,t)}get public(){return new Cn(this._publicKey)}marshal(){return this._key}get bytes(){return Re.encode({Type:xt.Ed25519,Data:this.marshal()}).subarray()}equals(t){return vt(this.bytes,t.bytes)}async hash(){let t=Vt.digest(this.bytes),r;return ue(t)?{bytes:r}=await t:r=t.bytes,r}async id(){let t=er.digest(this.public.bytes);return Rt.encode(t.bytes).substring(1)}async export(t,r="libp2p-key"){if(r==="libp2p-key")return tn(this.bytes,t);throw new M(`export format '${r}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}};function Ky(e){if(e.length>He){e=rn(e,He+jr);let n=e.subarray(0,He),i=e.subarray(He,e.length);return new Tr(n,i)}e=rn(e,He);let t=e.subarray(0,He),r=e.subarray(jr);return new Tr(t,r)}function Oy(e){return e=rn(e,jr),new Cn(e)}async function My(){let{privateKey:e,publicKey:t}=Wc();return new Tr(e,t)}async function ou(e){let{privateKey:t,publicKey:r}=$c(e);return new Tr(t,r)}function rn(e,t){if(e=Uint8Array.from(e??[]),e.length!==t)throw new M(`Key must be a Uint8Array of length ${t}, got ${e.length}`,"ERR_INVALID_KEY_TYPE");return e}var Vy={"P-256":256,"P-384":384,"P-521":521},Fy=Object.keys(Vy),ev=Fy.join(" / ");var Po={};Nt(Po,{MAX_KEY_SIZE:()=>kn,RsaPrivateKey:()=>nn,RsaPublicKey:()=>Ln,fromJwk:()=>Jy,generateKeyPair:()=>jy,unmarshalRsaPrivateKey:()=>Zy,unmarshalRsaPublicKey:()=>Xy});var Rn=Jt(ct(),1);var Mv=Jt(lu(),1);function ki(e){if(isNaN(e)||e<=0)throw new M("random bytes length must be a Number bigger than 0","ERR_INVALID_LENGTH");return Zr(e)}var wv=Jt(li(),1),ko=Jt(ct(),1);function hu(e,t){return t.map(r=>ne(e[r]))}function du(e){return ko.default.pki.setRsaPrivateKey(...hu(e,["n","e","d","p","q","dp","dq","qi"]))}function pu(e){return ko.default.pki.setRsaPublicKey(...hu(e,["n","e"]))}var _r={};Nt(_r,{jwkToPkcs1:()=>Gy,jwkToPkix:()=>$y,pkcs1ToJwk:()=>zy,pkixToJwk:()=>Wy});var Bv=Jt(gn(),1),Av=Jt(li(),1);var ze=Jt(ct(),1);function zy(e){let t=ze.default.asn1.fromDer(ot(e,"ascii")),r=ze.default.pki.privateKeyFromAsn1(t);return{kty:"RSA",n:ye(r.n),e:ye(r.e),d:ye(r.d),p:ye(r.p),q:ye(r.q),dp:ye(r.dP),dq:ye(r.dQ),qi:ye(r.qInv),alg:"RS256"}}function Gy(e){if(e.n==null||e.e==null||e.d==null||e.p==null||e.q==null||e.dp==null||e.dq==null||e.qi==null)throw new M("JWK was missing components","ERR_INVALID_PARAMETERS");let t=ze.default.pki.privateKeyToAsn1({n:ne(e.n),e:ne(e.e),d:ne(e.d),p:ne(e.p),q:ne(e.q),dP:ne(e.dp),dQ:ne(e.dq),qInv:ne(e.qi)});return St(ze.default.asn1.toDer(t).getBytes(),"ascii")}function Wy(e){let t=ze.default.asn1.fromDer(ot(e,"ascii")),r=ze.default.pki.publicKeyFromAsn1(t);return{kty:"RSA",n:ye(r.n),e:ye(r.e)}}function $y(e){if(e.n==null||e.e==null)throw new M("JWK was missing components","ERR_INVALID_PARAMETERS");let t=ze.default.pki.publicKeyToAsn1({n:ne(e.n),e:ne(e.e)});return St(ze.default.asn1.toDer(t).getBytes(),"ascii")}async function yu(e){let t=await ee.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),r=await xu(t);return{privateKey:r[0],publicKey:r[1]}}async function No(e){let r=[await ee.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),await Qy(e)],n=await xu({privateKey:r[0],publicKey:r[1]});return{privateKey:n[0],publicKey:n[1]}}async function gu(e,t){let r=await ee.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),n=await ee.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},r,t instanceof Uint8Array?t:t.subarray());return new Uint8Array(n,0,n.byteLength)}async function mu(e,t,r){let n=await ee.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return ee.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},n,t,r instanceof Uint8Array?r:r.subarray())}async function xu(e){if(e.privateKey==null||e.publicKey==null)throw new M("Private and public key are required","ERR_INVALID_PARAMETERS");return Promise.all([ee.get().subtle.exportKey("jwk",e.privateKey),ee.get().subtle.exportKey("jwk",e.publicKey)])}async function Qy(e){return ee.get().subtle.importKey("jwk",{kty:e.kty,n:e.n,e:e.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}function vu(e,t,r,n){let i=t?pu(e):du(e),s=ot(r instanceof Uint8Array?r:r.subarray(),"ascii"),o=n(s,i);return St(o,"ascii")}function bu(e,t){return vu(e,!0,t,(r,n)=>n.encrypt(r))}function wu(e,t){return vu(e,!1,t,(r,n)=>n.decrypt(r))}function Ni(e){if(e.kty!=="RSA")throw new M("invalid key type","ERR_INVALID_KEY_TYPE");if(e.n==null)throw new M("invalid key modulus","ERR_INVALID_KEY_MODULUS");return St(e.n,"base64url").length*8}var kn=8192,Ln=class{_key;constructor(t){this._key=t}verify(t,r){return mu(this._key,r,t)}marshal(){return _r.jwkToPkix(this._key)}get bytes(){return _e.encode({Type:xt.RSA,Data:this.marshal()}).subarray()}encrypt(t){return bu(this._key,t)}equals(t){return vt(this.bytes,t.bytes)}hash(){let t=Vt.digest(this.bytes);return ue(t)?t.then(({bytes:r})=>r):t.bytes}},nn=class{_key;_publicKey;constructor(t,r){this._key=t,this._publicKey=r}genSecret(){return ki(16)}sign(t){return gu(this._key,t)}get public(){if(this._publicKey==null)throw new M("public key not provided","ERR_PUBKEY_NOT_PROVIDED");return new Ln(this._publicKey)}decrypt(t){return wu(this._key,t)}marshal(){return _r.jwkToPkcs1(this._key)}get bytes(){return Re.encode({Type:xt.RSA,Data:this.marshal()}).subarray()}equals(t){return vt(this.bytes,t.bytes)}hash(){let t=Vt.digest(this.bytes);return ue(t)?t.then(({bytes:r})=>r):t.bytes}async id(){let t=await this.public.hash();return ot(t,"base58btc")}async export(t,r="pkcs-8"){if(r==="pkcs-8"){let n=new Rn.default.util.ByteBuffer(this.marshal()),i=Rn.default.asn1.fromDer(n),s=Rn.default.pki.privateKeyFromAsn1(i),o={algorithm:"aes256",count:1e4,saltSize:128/8,prfAlgorithm:"sha512"};return Rn.default.pki.encryptRsaPrivateKey(s,t,o)}else{if(r==="libp2p-key")return tn(this.bytes,t);throw new M(`export format '${r}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}};async function Zy(e){let t=_r.pkcs1ToJwk(e);if(Ni(t)>kn)throw new M("key size is too large","ERR_KEY_SIZE_TOO_LARGE");let r=await No(t);return new nn(r.privateKey,r.publicKey)}function Xy(e){let t=_r.pkixToJwk(e);if(Ni(t)>kn)throw new M("key size is too large","ERR_KEY_SIZE_TOO_LARGE");return new Ln(t)}async function Jy(e){if(Ni(e)>kn)throw new M("key size is too large","ERR_KEY_SIZE_TOO_LARGE");let t=await No(e);return new nn(t.privateKey,t.publicKey)}async function jy(e){if(e>kn)throw new M("key size is too large","ERR_KEY_SIZE_TOO_LARGE");let t=await yu(e);return new nn(t.privateKey,t.publicKey)}var Vo={};Nt(Vo,{Secp256k1PrivateKey:()=>Pn,Secp256k1PublicKey:()=>Nn,generateKeyPair:()=>p1,unmarshalSecp256k1PrivateKey:()=>h1,unmarshalSecp256k1PublicKey:()=>d1});var t1=(e,t,r)=>e&t^~e&r,e1=(e,t,r)=>e&t^e&r^t&r,r1=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),cr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ur=new Uint32Array(64),Do=class extends Xr{constructor(){super(64,32,8,!1),this.A=cr[0]|0,this.B=cr[1]|0,this.C=cr[2]|0,this.D=cr[3]|0,this.E=cr[4]|0,this.F=cr[5]|0,this.G=cr[6]|0,this.H=cr[7]|0}get(){let{A:t,B:r,C:n,D:i,E:s,F:o,G:a,H:c}=this;return[t,r,n,i,s,o,a,c]}set(t,r,n,i,s,o,a,c){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(t,r){for(let l=0;l<16;l++,r+=4)ur[l]=t.getUint32(r,!1);for(let l=16;l<64;l++){let h=ur[l-15],y=ur[l-2],d=ge(h,7)^ge(h,18)^h>>>3,p=ge(y,17)^ge(y,19)^y>>>10;ur[l]=p+ur[l-7]+d+ur[l-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:c,G:u,H:f}=this;for(let l=0;l<64;l++){let h=ge(a,6)^ge(a,11)^ge(a,25),y=f+h+t1(a,c,u)+r1[l]+ur[l]|0,p=(ge(n,2)^ge(n,13)^ge(n,22))+e1(n,i,s)|0;f=u,u=c,c=a,a=o+y|0,o=s,s=i,i=n,n=y+p|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,f=f+this.H|0,this.set(n,i,s,o,a,c,u,f)}roundClean(){ur.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var Eu=xi(()=>new Do);function n1(e){let t=Bn(e);Ce(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}var{bytesToNumberBE:i1,hexToBytes:s1}=Ei,Rr={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){let{Err:t}=Rr;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");let r=e[1],n=e.subarray(2,r+2);if(!r||n.length!==r)throw new t("Invalid signature integer: wrong length");if(n[0]&128)throw new t("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:i1(n),l:e.subarray(r+2)}},toSig(e){let{Err:t}=Rr,r=typeof e=="string"?s1(e):e;if(!(r instanceof Uint8Array))throw new Error("ui8a expected");let n=r.length;if(n<2||r[0]!=48)throw new t("Invalid signature tag");if(r[1]!==n-2)throw new t("Invalid signature: incorrect length");let{d:i,l:s}=Rr._parseInt(r.subarray(2)),{d:o,l:a}=Rr._parseInt(s);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(e){let t=u=>Number.parseInt(u[0],16)&8?"00"+u:u,r=u=>{let f=u.toString(16);return f.length&1?`0${f}`:f},n=t(r(e.s)),i=t(r(e.r)),s=n.length/2,o=i.length/2,a=r(s),c=r(o);return`30${r(o+s+4)}02${c}${i}02${a}${n}`}},Ge=BigInt(0),fe=BigInt(1),Yv=BigInt(2),Su=BigInt(3),Zv=BigInt(4);function o1(e){let t=n1(e),{Fp:r}=t,n=t.toBytes||((d,p,g)=>{let x=p.toAffine();return Fe(Uint8Array.from([4]),r.toBytes(x.x),r.toBytes(x.y))}),i=t.fromBytes||(d=>{let p=d.subarray(1),g=r.fromBytes(p.subarray(0,r.BYTES)),x=r.fromBytes(p.subarray(r.BYTES,2*r.BYTES));return{x:g,y:x}});function s(d){let{a:p,b:g}=t,x=r.sqr(d),w=r.mul(x,d);return r.add(r.add(w,r.mul(d,p)),g)}if(!r.eql(r.sqr(t.Gy),s(t.Gx)))throw new Error("bad generator point: equation left != right");function o(d){return typeof d=="bigint"&&Ge<d&&d<t.n}function a(d){if(!o(d))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(d){let{allowedPrivateKeyLengths:p,nByteLength:g,wrapPrivateKey:x,n:w}=t;if(p&&typeof d!="bigint"){if(d instanceof Uint8Array&&(d=Me(d)),typeof d!="string"||!p.includes(d.length))throw new Error("Invalid key");d=d.padStart(g*2,"0")}let b;try{b=typeof d=="bigint"?d:Ve(Bt("private key",d,g))}catch{throw new Error(`private key must be ${g} bytes, hex or bigint, not ${typeof d}`)}return x&&(b=ut(b,w)),a(b),b}let u=new Map;function f(d){if(!(d instanceof l))throw new Error("ProjectivePoint expected")}class l{constructor(p,g,x){if(this.px=p,this.py=g,this.pz=x,p==null||!r.isValid(p))throw new Error("x required");if(g==null||!r.isValid(g))throw new Error("y required");if(x==null||!r.isValid(x))throw new Error("z required")}static fromAffine(p){let{x:g,y:x}=p||{};if(!p||!r.isValid(g)||!r.isValid(x))throw new Error("invalid affine point");if(p instanceof l)throw new Error("projective point not allowed");let w=b=>r.eql(b,r.ZERO);return w(g)&&w(x)?l.ZERO:new l(g,x,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(p){let g=r.invertBatch(p.map(x=>x.pz));return p.map((x,w)=>x.toAffine(g[w])).map(l.fromAffine)}static fromHex(p){let g=l.fromAffine(i(Bt("pointHex",p)));return g.assertValidity(),g}static fromPrivateKey(p){return l.BASE.multiply(c(p))}_setWindowSize(p){this._WINDOW_SIZE=p,u.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:p,y:g}=this.toAffine();if(!r.isValid(p)||!r.isValid(g))throw new Error("bad point: x or y not FE");let x=r.sqr(g),w=s(p);if(!r.eql(x,w))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:p}=this.toAffine();if(r.isOdd)return!r.isOdd(p);throw new Error("Field doesn't support isOdd")}equals(p){f(p);let{px:g,py:x,pz:w}=this,{px:b,py:R,pz:E}=p,S=r.eql(r.mul(g,E),r.mul(b,w)),L=r.eql(r.mul(x,E),r.mul(R,w));return S&&L}negate(){return new l(this.px,r.neg(this.py),this.pz)}double(){let{a:p,b:g}=t,x=r.mul(g,Su),{px:w,py:b,pz:R}=this,E=r.ZERO,S=r.ZERO,L=r.ZERO,k=r.mul(w,w),G=r.mul(b,b),z=r.mul(R,R),q=r.mul(w,b);return q=r.add(q,q),L=r.mul(w,R),L=r.add(L,L),E=r.mul(p,L),S=r.mul(x,z),S=r.add(E,S),E=r.sub(G,S),S=r.add(G,S),S=r.mul(E,S),E=r.mul(q,E),L=r.mul(x,L),z=r.mul(p,z),q=r.sub(k,z),q=r.mul(p,q),q=r.add(q,L),L=r.add(k,k),k=r.add(L,k),k=r.add(k,z),k=r.mul(k,q),S=r.add(S,k),z=r.mul(b,R),z=r.add(z,z),k=r.mul(z,q),E=r.sub(E,k),L=r.mul(z,G),L=r.add(L,L),L=r.add(L,L),new l(E,S,L)}add(p){f(p);let{px:g,py:x,pz:w}=this,{px:b,py:R,pz:E}=p,S=r.ZERO,L=r.ZERO,k=r.ZERO,G=t.a,z=r.mul(t.b,Su),q=r.mul(g,b),X=r.mul(x,R),at=r.mul(w,E),Kt=r.add(g,x),T=r.add(b,R);Kt=r.mul(Kt,T),T=r.add(q,X),Kt=r.sub(Kt,T),T=r.add(g,w);let P=r.add(b,E);return T=r.mul(T,P),P=r.add(q,at),T=r.sub(T,P),P=r.add(x,w),S=r.add(R,E),P=r.mul(P,S),S=r.add(X,at),P=r.sub(P,S),k=r.mul(G,T),S=r.mul(z,at),k=r.add(S,k),S=r.sub(X,k),k=r.add(X,k),L=r.mul(S,k),X=r.add(q,q),X=r.add(X,q),at=r.mul(G,at),T=r.mul(z,T),X=r.add(X,at),at=r.sub(q,at),at=r.mul(G,at),T=r.add(T,at),q=r.mul(X,T),L=r.add(L,q),q=r.mul(P,T),S=r.mul(Kt,S),S=r.sub(S,q),q=r.mul(Kt,X),k=r.mul(P,k),k=r.add(k,q),new l(S,L,k)}subtract(p){return this.add(p.negate())}is0(){return this.equals(l.ZERO)}wNAF(p){return y.wNAFCached(this,u,p,g=>{let x=r.invertBatch(g.map(w=>w.pz));return g.map((w,b)=>w.toAffine(x[b])).map(l.fromAffine)})}multiplyUnsafe(p){let g=l.ZERO;if(p===Ge)return g;if(a(p),p===fe)return this;let{endo:x}=t;if(!x)return y.unsafeLadder(this,p);let{k1neg:w,k1:b,k2neg:R,k2:E}=x.splitScalar(p),S=g,L=g,k=this;for(;b>Ge||E>Ge;)b&fe&&(S=S.add(k)),E&fe&&(L=L.add(k)),k=k.double(),b>>=fe,E>>=fe;return w&&(S=S.negate()),R&&(L=L.negate()),L=new l(r.mul(L.px,x.beta),L.py,L.pz),S.add(L)}multiply(p){a(p);let g=p,x,w,{endo:b}=t;if(b){let{k1neg:R,k1:E,k2neg:S,k2:L}=b.splitScalar(g),{p:k,f:G}=this.wNAF(E),{p:z,f:q}=this.wNAF(L);k=y.constTimeNegate(R,k),z=y.constTimeNegate(S,z),z=new l(r.mul(z.px,b.beta),z.py,z.pz),x=k.add(z),w=G.add(q)}else{let{p:R,f:E}=this.wNAF(g);x=R,w=E}return l.normalizeZ([x,w])[0]}multiplyAndAddUnsafe(p,g,x){let w=l.BASE,b=(E,S)=>S===Ge||S===fe||!E.equals(w)?E.multiplyUnsafe(S):E.multiply(S),R=b(this,g).add(b(p,x));return R.is0()?void 0:R}toAffine(p){let{px:g,py:x,pz:w}=this,b=this.is0();p==null&&(p=b?r.ONE:r.inv(w));let R=r.mul(g,p),E=r.mul(x,p),S=r.mul(w,p);if(b)return{x:r.ZERO,y:r.ZERO};if(!r.eql(S,r.ONE))throw new Error("invZ was invalid");return{x:R,y:E}}isTorsionFree(){let{h:p,isTorsionFree:g}=t;if(p===fe)return!0;if(g)return g(l,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:p,clearCofactor:g}=t;return p===fe?this:g?g(l,this):this.multiplyUnsafe(t.h)}toRawBytes(p=!0){return this.assertValidity(),n(l,this,p)}toHex(p=!0){return Me(this.toRawBytes(p))}}l.BASE=new l(t.Gx,t.Gy,r.ONE),l.ZERO=new l(r.ZERO,r.ONE,r.ZERO);let h=t.nBitLength,y=Ai(l,t.endo?Math.ceil(h/2):h);return{CURVE:t,ProjectivePoint:l,normPrivateKeyToScalar:c,weierstrassEquation:s,isWithinCurveOrder:o}}function a1(e){let t=Bn(e);return Ce(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function Bu(e){let t=a1(e),{Fp:r,n}=t,i=r.BYTES+1,s=2*r.BYTES+1;function o(T){return Ge<T&&T<r.ORDER}function a(T){return ut(T,n)}function c(T){return Si(T,n)}let{ProjectivePoint:u,normPrivateKeyToScalar:f,weierstrassEquation:l,isWithinCurveOrder:h}=o1({...t,toBytes(T,P,_){let N=P.toAffine(),A=r.toBytes(N.x),K=Fe;return _?K(Uint8Array.from([P.hasEvenY()?2:3]),A):K(Uint8Array.from([4]),A,r.toBytes(N.y))},fromBytes(T){let P=T.length,_=T[0],N=T.subarray(1);if(P===i&&(_===2||_===3)){let A=Ve(N);if(!o(A))throw new Error("Point is not on curve");let K=l(A),V=r.sqrt(K),H=(V&fe)===fe;return(_&1)===1!==H&&(V=r.neg(V)),{x:A,y:V}}else if(P===s&&_===4){let A=r.fromBytes(N.subarray(0,r.BYTES)),K=r.fromBytes(N.subarray(r.BYTES,2*r.BYTES));return{x:A,y:K}}else throw new Error(`Point of length ${P} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),y=T=>Me(or(T,t.nByteLength));function d(T){let P=n>>fe;return T>P}function p(T){return d(T)?a(-T):T}let g=(T,P,_)=>Ve(T.slice(P,_));class x{constructor(P,_,N){this.r=P,this.s=_,this.recovery=N,this.assertValidity()}static fromCompact(P){let _=t.nByteLength;return P=Bt("compactSignature",P,_*2),new x(g(P,0,_),g(P,_,2*_))}static fromDER(P){let{r:_,s:N}=Rr.toSig(Bt("DER",P));return new x(_,N)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(P){return new x(this.r,this.s,P)}recoverPublicKey(P){let{r:_,s:N,recovery:A}=this,K=L(Bt("msgHash",P));if(A==null||![0,1,2,3].includes(A))throw new Error("recovery id invalid");let V=A===2||A===3?_+t.n:_;if(V>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let H=A&1?"03":"02",Y=u.fromHex(H+y(V)),J=c(V),st=a(-K*J),j=a(N*J),rt=u.BASE.multiplyAndAddUnsafe(Y,st,j);if(!rt)throw new Error("point at infinify");return rt.assertValidity(),rt}hasHighS(){return d(this.s)}normalizeS(){return this.hasHighS()?new x(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Er(this.toDERHex())}toDERHex(){return Rr.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Er(this.toCompactHex())}toCompactHex(){return y(this.r)+y(this.s)}}let w={isValidPrivateKey(T){try{return f(T),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{let T=co(t.n);return Fc(t.randomBytes(T),t.n)},precompute(T=8,P=u.BASE){return P._setWindowSize(T),P.multiply(BigInt(3)),P}};function b(T,P=!0){return u.fromPrivateKey(T).toRawBytes(P)}function R(T){let P=T instanceof Uint8Array,_=typeof T=="string",N=(P||_)&&T.length;return P?N===i||N===s:_?N===2*i||N===2*s:T instanceof u}function E(T,P,_=!0){if(R(T))throw new Error("first arg must be private key");if(!R(P))throw new Error("second arg must be public key");return u.fromHex(P).multiply(f(T)).toRawBytes(_)}let S=t.bits2int||function(T){let P=Ve(T),_=T.length*8-t.nBitLength;return _>0?P>>BigInt(_):P},L=t.bits2int_modN||function(T){return a(S(T))},k=Sn(t.nBitLength);function G(T){if(typeof T!="bigint")throw new Error("bigint expected");if(!(Ge<=T&&T<k))throw new Error(`bigint expected < 2^${t.nBitLength}`);return or(T,t.nByteLength)}function z(T,P,_=q){if(["recovered","canonical"].some(wt=>wt in _))throw new Error("sign() legacy options not supported");let{hash:N,randomBytes:A}=t,{lowS:K,prehash:V,extraEntropy:H}=_;K==null&&(K=!0),T=Bt("msgHash",T),V&&(T=Bt("prehashed msgHash",N(T)));let Y=L(T),J=f(P),st=[G(J),G(Y)];if(H!=null){let wt=H===!0?A(r.BYTES):H;st.push(Bt("extraEntropy",wt))}let j=Fe(...st),rt=Y;function It(wt){let Ot=S(wt);if(!h(Ot))return;let Mt=c(Ot),_t=u.BASE.multiply(Ot).toAffine(),qt=a(_t.x);if(qt===Ge)return;let Ne=a(Mt*a(rt+qt*J));if(Ne===Ge)return;let pr=(_t.x===qt?0:2)|Number(_t.y&fe),hn=Ne;return K&&d(Ne)&&(hn=p(Ne),pr^=1),new x(qt,hn,pr)}return{seed:j,k2sig:It}}let q={lowS:t.lowS,prehash:!1},X={lowS:t.lowS,prehash:!1};function at(T,P,_=q){let{seed:N,k2sig:A}=z(T,P,_),K=t;return io(K.hash.outputLen,K.nByteLength,K.hmac)(N,A)}u.BASE._setWindowSize(8);function Kt(T,P,_,N=X){let A=T;if(P=Bt("msgHash",P),_=Bt("publicKey",_),"strict"in N)throw new Error("options.strict was renamed to lowS");let{lowS:K,prehash:V}=N,H,Y;try{if(typeof A=="string"||A instanceof Uint8Array)try{H=x.fromDER(A)}catch(_t){if(!(_t instanceof Rr.Err))throw _t;H=x.fromCompact(A)}else if(typeof A=="object"&&typeof A.r=="bigint"&&typeof A.s=="bigint"){let{r:_t,s:qt}=A;H=new x(_t,qt)}else throw new Error("PARSE");Y=u.fromHex(_)}catch(_t){if(_t.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(K&&H.hasHighS())return!1;V&&(P=t.hash(P));let{r:J,s:st}=H,j=L(P),rt=c(st),It=a(j*rt),wt=a(J*rt),Ot=u.BASE.multiplyAndAddUnsafe(Y,It,wt)?.toAffine();return Ot?a(Ot.x)===J:!1}return{CURVE:t,getPublicKey:b,getSharedSecret:E,sign:at,verify:Kt,ProjectivePoint:u,Signature:x,utils:w}}var Pi=class extends Yr{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,_c(t);let n=En(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?t.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=t.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(t){return Qr(this),this.iHash.update(t),this}digestInto(t){Qr(this),Xs(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=s,t.blockLen=o,t.outputLen=a,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},Uo=(e,t,r)=>new Pi(e,t).update(r).digest();Uo.create=(e,t)=>new Pi(e,t);function c1(e){return{hash:e,hmac:(t,...r)=>Uo(e,t,mi(...r)),randomBytes:Zr}}function Au(e,t){let r=n=>Bu({...e,...c1(n)});return Object.freeze({...r(t),create:r})}var Cu=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Iu=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),u1=BigInt(1),Ko=BigInt(2),Tu=(e,t)=>(e+t/Ko)/t;function f1(e){let t=Cu,r=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),u=e*e*e%t,f=u*u*e%t,l=mt(f,r,t)*f%t,h=mt(l,r,t)*f%t,y=mt(h,Ko,t)*u%t,d=mt(y,i,t)*y%t,p=mt(d,s,t)*d%t,g=mt(p,a,t)*p%t,x=mt(g,c,t)*g%t,w=mt(x,a,t)*p%t,b=mt(w,r,t)*f%t,R=mt(b,o,t)*d%t,E=mt(R,n,t)*u%t,S=mt(E,Ko,t);if(!Oo.eql(Oo.sqr(S),e))throw new Error("Cannot find square root");return S}var Oo=Bi(Cu,void 0,void 0,{sqrt:f1}),ve=Au({a:BigInt(0),b:BigInt(7),Fp:Oo,n:Iu,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=Iu,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-u1*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,o=BigInt("0x100000000000000000000000000000000"),a=Tu(s*e,t),c=Tu(-n*e,t),u=ut(e-a*r-c*i,t),f=ut(-a*n-c*s,t),l=u>o,h=f>o;if(l&&(u=t-u),h&&(f=t-f),u>o||f>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:l,k1:u,k2neg:h,k2:f}}}},Eu),cb=BigInt(0);var ub=ve.ProjectivePoint;function _u(){return ve.utils.randomPrivateKey()}function Ru(e,t){let r=Vt.digest(t instanceof Uint8Array?t:t.subarray());if(ue(r))return r.then(({digest:n})=>ve.sign(n,e).toDERRawBytes()).catch(n=>{throw new M(String(n),"ERR_INVALID_INPUT")});try{return ve.sign(r.digest,e).toDERRawBytes()}catch(n){throw new M(String(n),"ERR_INVALID_INPUT")}}function Lu(e,t,r){let n=Vt.digest(r instanceof Uint8Array?r:r.subarray());if(ue(n))return n.then(({digest:i})=>ve.verify(t,i,e)).catch(i=>{throw new M(String(i),"ERR_INVALID_INPUT")});try{return ve.verify(t,n.digest,e)}catch(i){throw new M(String(i),"ERR_INVALID_INPUT")}}function ku(e){return ve.ProjectivePoint.fromHex(e).toRawBytes(!0)}function Nu(e){try{ve.getPublicKey(e,!0)}catch(t){throw new M(String(t),"ERR_INVALID_PRIVATE_KEY")}}function Mo(e){try{ve.ProjectivePoint.fromHex(e)}catch(t){throw new M(String(t),"ERR_INVALID_PUBLIC_KEY")}}function Pu(e){try{return ve.getPublicKey(e,!0)}catch(t){throw new M(String(t),"ERR_INVALID_PRIVATE_KEY")}}var Nn=class{_key;constructor(t){Mo(t),this._key=t}verify(t,r){return Lu(this._key,r,t)}marshal(){return ku(this._key)}get bytes(){return _e.encode({Type:xt.Secp256k1,Data:this.marshal()}).subarray()}equals(t){return vt(this.bytes,t.bytes)}async hash(){let t=Vt.digest(this.bytes),r;return ue(t)?{bytes:r}=await t:r=t.bytes,r}},Pn=class{_key;_publicKey;constructor(t,r){this._key=t,this._publicKey=r??Pu(t),Nu(this._key),Mo(this._publicKey)}sign(t){return Ru(this._key,t)}get public(){return new Nn(this._publicKey)}marshal(){return this._key}get bytes(){return Re.encode({Type:xt.Secp256k1,Data:this.marshal()}).subarray()}equals(t){return vt(this.bytes,t.bytes)}hash(){let t=Vt.digest(this.bytes);return ue(t)?t.then(({bytes:r})=>r):t.bytes}async id(){let t=await this.public.hash();return ot(t,"base58btc")}async export(t,r="libp2p-key"){if(r==="libp2p-key")return tn(this.bytes,t);throw new M(`export format '${r}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}};function h1(e){return new Pn(e)}function d1(e){return new Nn(e)}async function p1(){let e=_u();return new Pn(e)}var Lr={rsa:Po,ed25519:_o,secp256k1:Vo};function Du(e){let t=Object.keys(Lr).join(" / ");return new M(`invalid or unsupported key type ${e}. Must be ${t}`,"ERR_UNSUPPORTED_KEY_TYPE")}function Uu(e){let t=_e.decode(e),r=t.Data??new Uint8Array;switch(t.Type){case xt.RSA:return Lr.rsa.unmarshalRsaPublicKey(r);case xt.Ed25519:return Lr.ed25519.unmarshalEd25519PublicKey(r);case xt.Secp256k1:return Lr.secp256k1.unmarshalSecp256k1PublicKey(r);default:throw Du(t.Type??"unknown")}}async function Ku(e){let t=Re.decode(e),r=t.Data??new Uint8Array;switch(t.Type){case xt.RSA:return Lr.rsa.unmarshalRsaPrivateKey(r);case xt.Ed25519:return Lr.ed25519.unmarshalEd25519PrivateKey(r);case xt.Secp256k1:return Lr.secp256k1.unmarshalSecp256k1PrivateKey(r);default:throw Du(t.Type??"RSA")}}var g1=Symbol.for("nodejs.util.inspect.custom"),Ou=Object.values(rr).map(e=>e.decoder).reduce((e,t)=>e.or(t),rr.identity.decoder),Mu=114,Fo=36,qo=37,Dn=class{type;multihash;privateKey;publicKey;string;constructor(t){this.type=t.type,this.multihash=t.multihash,this.privateKey=t.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}[Cs]=!0;toString(){return this.string==null&&(this.string=Rt.encode(this.multihash.bytes).slice(1)),this.string}toCID(){return pe.createV1(Mu,this.multihash)}toBytes(){return this.multihash.bytes}toJSON(){return this.toString()}equals(t){if(t instanceof Uint8Array)return vt(this.multihash.bytes,t);if(typeof t=="string")return Ct(t).equals(this);if(t?.multihash?.bytes!=null)return vt(this.multihash.bytes,t.multihash.bytes);throw new Error("not valid Id")}[g1](){return`PeerId(${this.toString()})`}},kr=class extends Dn{type="RSA";publicKey;constructor(t){super({...t,type:"RSA"}),this.publicKey=t.publicKey}},Nr=class extends Dn{type="Ed25519";publicKey;constructor(t){super({...t,type:"Ed25519"}),this.publicKey=t.multihash.digest}},Pr=class extends Dn{type="secp256k1";publicKey;constructor(t){super({...t,type:"secp256k1"}),this.publicKey=t.multihash.digest}};function Vu(e){if(e.type==="RSA")return new kr(e);if(e.type==="Ed25519")return new Nr(e);if(e.type==="secp256k1")return new Pr(e);throw new M("Not a PeerId","ERR_INVALID_PARAMETERS")}function Ct(e,t){if(t=t??Ou,e.charAt(0)==="1"||e.charAt(0)==="Q"){let r=br(Rt.decode(`z${e}`));return e.startsWith("12D")?new Nr({multihash:r}):e.startsWith("16U")?new Pr({multihash:r}):new kr({multihash:r})}return Un(Ou.decode(e))}function Un(e){try{let t=br(e);if(t.code===er.code){if(t.digest.length===Fo)return new Nr({multihash:t});if(t.digest.length===qo)return new Pr({multihash:t})}if(t.code===Vt.code)return new kr({multihash:t})}catch{return m1(pe.decode(e))}throw new Error("Supplied PeerID CID is invalid")}function m1(e){if(e==null||e.multihash==null||e.version==null||e.version===1&&e.code!==Mu)throw new Error("Supplied PeerID CID is invalid");let t=e.multihash;if(t.code===Vt.code)return new kr({multihash:e.multihash});if(t.code===er.code){if(t.digest.length===Fo)return new Nr({multihash:e.multihash});if(t.digest.length===qo)return new Pr({multihash:e.multihash})}throw new Error("Supplied PeerID CID is invalid")}async function Fu(e,t){return e.length===Fo?new Nr({multihash:Te(er.code,e),privateKey:t}):e.length===qo?new Pr({multihash:Te(er.code,e),privateKey:t}):new kr({multihash:await Vt.digest(e),publicKey:e,privateKey:t})}var x1=Math.pow(2,7),v1=Math.pow(2,14),b1=Math.pow(2,21),Ho=Math.pow(2,28),zo=Math.pow(2,35),Go=Math.pow(2,42),Wo=Math.pow(2,49),it=128,zt=127;function Le(e){if(e<x1)return 1;if(e<v1)return 2;if(e<b1)return 3;if(e<Ho)return 4;if(e<zo)return 5;if(e<Go)return 6;if(e<Wo)return 7;if(Number.MAX_SAFE_INTEGER!=null&&e>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return 8}function w1(e,t,r=0){switch(Le(e)){case 8:t[r++]=e&255|it,e/=128;case 7:t[r++]=e&255|it,e/=128;case 6:t[r++]=e&255|it,e/=128;case 5:t[r++]=e&255|it,e/=128;case 4:t[r++]=e&255|it,e>>>=7;case 3:t[r++]=e&255|it,e>>>=7;case 2:t[r++]=e&255|it,e>>>=7;case 1:{t[r++]=e&255,e>>>=7;break}default:throw new Error("unreachable")}return t}function E1(e,t,r=0){switch(Le(e)){case 8:t.set(r++,e&255|it),e/=128;case 7:t.set(r++,e&255|it),e/=128;case 6:t.set(r++,e&255|it),e/=128;case 5:t.set(r++,e&255|it),e/=128;case 4:t.set(r++,e&255|it),e>>>=7;case 3:t.set(r++,e&255|it),e>>>=7;case 2:t.set(r++,e&255|it),e>>>=7;case 1:{t.set(r++,e&255),e>>>=7;break}default:throw new Error("unreachable")}return t}function S1(e,t){let r=e[t],n=0;if(n+=r&zt,r<it||(r=e[t+1],n+=(r&zt)<<7,r<it)||(r=e[t+2],n+=(r&zt)<<14,r<it)||(r=e[t+3],n+=(r&zt)<<21,r<it)||(r=e[t+4],n+=(r&zt)*Ho,r<it)||(r=e[t+5],n+=(r&zt)*zo,r<it)||(r=e[t+6],n+=(r&zt)*Go,r<it)||(r=e[t+7],n+=(r&zt)*Wo,r<it))return n;throw new RangeError("Could not decode varint")}function B1(e,t){let r=e.get(t),n=0;if(n+=r&zt,r<it||(r=e.get(t+1),n+=(r&zt)<<7,r<it)||(r=e.get(t+2),n+=(r&zt)<<14,r<it)||(r=e.get(t+3),n+=(r&zt)<<21,r<it)||(r=e.get(t+4),n+=(r&zt)*Ho,r<it)||(r=e.get(t+5),n+=(r&zt)*zo,r<it)||(r=e.get(t+6),n+=(r&zt)*Go,r<it)||(r=e.get(t+7),n+=(r&zt)*Wo,r<it))return n;throw new RangeError("Could not decode varint")}function ke(e,t,r=0){return t==null&&(t=te(Le(e))),t instanceof Uint8Array?w1(e,t,r):E1(e,t,r)}function Dr(e,t=0){return e instanceof Uint8Array?S1(e,t):B1(e,t)}var Hu=Symbol.for("@achingbrain/uint8arraylist");function qu(e,t){if(t==null||t<0)throw new RangeError("index is out of bounds");let r=0;for(let n of e){let i=r+n.byteLength;if(t<i)return{buf:n,index:t-r};r=i}throw new RangeError("index is out of bounds")}function Di(e){return!!e?.[Hu]}var Ui=class e{bufs;length;[Hu]=!0;constructor(...t){this.bufs=[],this.length=0,t.length>0&&this.appendAll(t)}*[Symbol.iterator](){yield*this.bufs}get byteLength(){return this.length}append(...t){this.appendAll(t)}appendAll(t){let r=0;for(let n of t)if(n instanceof Uint8Array)r+=n.byteLength,this.bufs.push(n);else if(Di(n))r+=n.byteLength,this.bufs.push(...n.bufs);else throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");this.length+=r}prepend(...t){this.prependAll(t)}prependAll(t){let r=0;for(let n of t.reverse())if(n instanceof Uint8Array)r+=n.byteLength,this.bufs.unshift(n);else if(Di(n))r+=n.byteLength,this.bufs.unshift(...n.bufs);else throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");this.length+=r}get(t){let r=qu(this.bufs,t);return r.buf[r.index]}set(t,r){let n=qu(this.bufs,t);n.buf[n.index]=r}write(t,r=0){if(t instanceof Uint8Array)for(let n=0;n<t.length;n++)this.set(r+n,t[n]);else if(Di(t))for(let n=0;n<t.length;n++)this.set(r+n,t.get(n));else throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList")}consume(t){if(t=Math.trunc(t),!(Number.isNaN(t)||t<=0)){if(t===this.byteLength){this.bufs=[],this.length=0;return}for(;this.bufs.length>0;)if(t>=this.bufs[0].byteLength)t-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift();else{this.bufs[0]=this.bufs[0].subarray(t),this.length-=t;break}}}slice(t,r){let{bufs:n,length:i}=this._subList(t,r);return Lt(n,i)}subarray(t,r){let{bufs:n,length:i}=this._subList(t,r);return n.length===1?n[0]:Lt(n,i)}sublist(t,r){let{bufs:n,length:i}=this._subList(t,r),s=new e;return s.length=i,s.bufs=[...n],s}_subList(t,r){if(t=t??0,r=r??this.length,t<0&&(t=this.length+t),r<0&&(r=this.length+r),t<0||r>this.length)throw new RangeError("index is out of bounds");if(t===r)return{bufs:[],length:0};if(t===0&&r===this.length)return{bufs:this.bufs,length:this.length};let n=[],i=0;for(let s=0;s<this.bufs.length;s++){let o=this.bufs[s],a=i,c=a+o.byteLength;if(i=c,t>=c)continue;let u=t>=a&&t<c,f=r>a&&r<=c;if(u&&f){if(t===a&&r===c){n.push(o);break}let l=t-a;n.push(o.subarray(l,l+(r-t)));break}if(u){if(t===0){n.push(o);continue}n.push(o.subarray(t-a));continue}if(f){if(r===c){n.push(o);break}n.push(o.subarray(0,r-a));break}n.push(o)}return{bufs:n,length:r-t}}indexOf(t,r=0){if(!Di(t)&&!(t instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');let n=t instanceof Uint8Array?t:t.subarray();if(r=Number(r??0),isNaN(r)&&(r=0),r<0&&(r=this.length+r),r<0&&(r=0),t.length===0)return r>this.length?this.length:r;let i=n.byteLength;if(i===0)throw new TypeError("search must be at least 1 byte long");let s=256,o=new Int32Array(s);for(let l=0;l<s;l++)o[l]=-1;for(let l=0;l<i;l++)o[n[l]]=l;let a=o,c=this.byteLength-n.byteLength,u=n.byteLength-1,f;for(let l=r;l<=c;l+=f){f=0;for(let h=u;h>=0;h--){let y=this.get(l+h);if(n[h]!==y){f=Math.max(1,h-a[y]);break}}if(f===0)return l}return-1}getInt8(t){let r=this.subarray(t,t+1);return new DataView(r.buffer,r.byteOffset,r.byteLength).getInt8(0)}setInt8(t,r){let n=te(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt8(0,r),this.write(n,t)}getInt16(t,r){let n=this.subarray(t,t+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt16(0,r)}setInt16(t,r,n){let i=Oe(2);new DataView(i.buffer,i.byteOffset,i.byteLength).setInt16(0,r,n),this.write(i,t)}getInt32(t,r){let n=this.subarray(t,t+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt32(0,r)}setInt32(t,r,n){let i=Oe(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setInt32(0,r,n),this.write(i,t)}getBigInt64(t,r){let n=this.subarray(t,t+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigInt64(0,r)}setBigInt64(t,r,n){let i=Oe(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setBigInt64(0,r,n),this.write(i,t)}getUint8(t){let r=this.subarray(t,t+1);return new DataView(r.buffer,r.byteOffset,r.byteLength).getUint8(0)}setUint8(t,r){let n=te(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint8(0,r),this.write(n,t)}getUint16(t,r){let n=this.subarray(t,t+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint16(0,r)}setUint16(t,r,n){let i=Oe(2);new DataView(i.buffer,i.byteOffset,i.byteLength).setUint16(0,r,n),this.write(i,t)}getUint32(t,r){let n=this.subarray(t,t+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint32(0,r)}setUint32(t,r,n){let i=Oe(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setUint32(0,r,n),this.write(i,t)}getBigUint64(t,r){let n=this.subarray(t,t+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigUint64(0,r)}setBigUint64(t,r,n){let i=Oe(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setBigUint64(0,r,n),this.write(i,t)}getFloat32(t,r){let n=this.subarray(t,t+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat32(0,r)}setFloat32(t,r,n){let i=Oe(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setFloat32(0,r,n),this.write(i,t)}getFloat64(t,r){let n=this.subarray(t,t+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat64(0,r)}setFloat64(t,r,n){let i=Oe(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setFloat64(0,r,n),this.write(i,t)}equals(t){if(t==null||!(t instanceof e)||t.bufs.length!==this.bufs.length)return!1;for(let r=0;r<this.bufs.length;r++)if(!vt(this.bufs[r],t.bufs[r]))return!1;return!0}static fromUint8Arrays(t,r){let n=new e;return n.bufs=t,r==null&&(r=t.reduce((i,s)=>i+s.byteLength,0)),n.length=r,n}};var zu={ERR_SIGNATURE_NOT_VALID:"ERR_SIGNATURE_NOT_VALID"};var Kn;(function(e){let t;e.codec=()=>(t==null&&(t=Zt((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.publicKey!=null&&r.publicKey.byteLength>0&&(n.uint32(10),n.bytes(r.publicKey)),r.payloadType!=null&&r.payloadType.byteLength>0&&(n.uint32(18),n.bytes(r.payloadType)),r.payload!=null&&r.payload.byteLength>0&&(n.uint32(26),n.bytes(r.payload)),r.signature!=null&&r.signature.byteLength>0&&(n.uint32(42),n.bytes(r.signature)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={publicKey:new Uint8Array(0),payloadType:new Uint8Array(0),payload:new Uint8Array(0),signature:new Uint8Array(0)},s=n==null?r.len:r.pos+n;for(;r.pos<s;){let o=r.uint32();switch(o>>>3){case 1:i.publicKey=r.bytes();break;case 2:i.payloadType=r.bytes();break;case 3:i.payload=r.bytes();break;case 5:i.signature=r.bytes();break;default:r.skipType(o&7);break}}return i})),t),e.encode=r=>Yt(r,e.codec()),e.decode=r=>Qt(r,e.codec())})(Kn||(Kn={}));var sn=class e{static createFromProtobuf=async t=>{let r=Kn.decode(t),n=await Fu(r.publicKey);return new e({peerId:n,payloadType:r.payloadType,payload:r.payload,signature:r.signature})};static seal=async(t,r)=>{if(r.privateKey==null)throw new Error("Missing private key");let n=t.domain,i=t.codec,s=t.marshal(),o=Gu(n,i,s),c=await(await Ku(r.privateKey)).sign(o.subarray());return new e({peerId:r,payloadType:i,payload:s,signature:c})};static openAndCertify=async(t,r)=>{let n=await e.createFromProtobuf(t);if(!await n.validate(r))throw new M("envelope signature is not valid for the given domain",zu.ERR_SIGNATURE_NOT_VALID);return n};peerId;payloadType;payload;signature;marshaled;constructor(t){let{peerId:r,payloadType:n,payload:i,signature:s}=t;this.peerId=r,this.payloadType=n,this.payload=i,this.signature=s}marshal(){if(this.peerId.publicKey==null)throw new Error("Missing public key");return this.marshaled==null&&(this.marshaled=Kn.encode({publicKey:this.peerId.publicKey,payloadType:this.payloadType,payload:this.payload.subarray(),signature:this.signature})),this.marshaled}equals(t){return vt(this.marshal(),t.marshal())}async validate(t){let r=Gu(t,this.payloadType,this.payload);if(this.peerId.publicKey==null)throw new Error("Missing public key");return Uu(this.peerId.publicKey).verify(r.subarray(),this.signature)}},Gu=(e,t,r)=>{let n=St(e),i=ke(n.byteLength),s=ke(t.length),o=ke(r.length);return new Ui(i,n,s,t,o,r)};function Wu(e,t){let r=(n,i)=>n.toString().localeCompare(i.toString());return e.length!==t.length?!1:(t.sort(r),e.sort(r).every((n,i)=>t[i].equals(n)))}var Ki=class{index=0;input="";new(t){return this.index=0,this.input=t,this}readAtomically(t){let r=this.index,n=t();return n===void 0&&(this.index=r),n}parseWith(t){let r=t();if(this.index===this.input.length)return r}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(t){return this.readAtomically(()=>{let r=this.readChar();if(r===t)return r})}readSeparator(t,r,n){return this.readAtomically(()=>{if(!(r>0&&this.readGivenChar(t)===void 0))return n()})}readNumber(t,r,n,i){return this.readAtomically(()=>{let s=0,o=0,a=this.peekChar();if(a===void 0)return;let c=a==="0",u=2**(8*i)-1;for(;;){let f=this.readAtomically(()=>{let l=this.readChar();if(l===void 0)return;let h=Number.parseInt(l,t);if(!Number.isNaN(h))return h});if(f===void 0)break;if(s*=t,s+=f,s>u||(o+=1,r!==void 0&&o>r))return}if(o!==0)return!n&&c&&o>1?void 0:s})}readIPv4Addr(){return this.readAtomically(()=>{let t=new Uint8Array(4);for(let r=0;r<t.length;r++){let n=this.readSeparator(".",r,()=>this.readNumber(10,3,!1,1));if(n===void 0)return;t[r]=n}return t})}readIPv6Addr(){let t=r=>{for(let n=0;n<r.length/2;n++){let i=n*2;if(n<r.length-3){let o=this.readSeparator(":",n,()=>this.readIPv4Addr());if(o!==void 0)return r[i]=o[0],r[i+1]=o[1],r[i+2]=o[2],r[i+3]=o[3],[i+4,!0]}let s=this.readSeparator(":",n,()=>this.readNumber(16,4,!0,2));if(s===void 0)return[i,!1];r[i]=s>>8,r[i+1]=s&255}return[r.length,!1]};return this.readAtomically(()=>{let r=new Uint8Array(16),[n,i]=t(r);if(n===16)return r;if(i||this.readGivenChar(":")===void 0||this.readGivenChar(":")===void 0)return;let s=new Uint8Array(14),o=16-(n+2),[a]=t(s.subarray(0,o));return r.set(s.subarray(0,a),16-a),r})}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}};var $u=45,A1=15,on=new Ki;function Qo(e){if(!(e.length>A1))return on.new(e).parseWith(()=>on.readIPv4Addr())}function Yo(e){if(e.includes("%")&&(e=e.split("%")[0]),!(e.length>$u))return on.new(e).parseWith(()=>on.readIPv6Addr())}function Oi(e){if(e.includes("%")&&(e=e.split("%")[0]),!(e.length>$u))return on.new(e).parseWith(()=>on.readIPAddr())}var pw=parseInt("0xFFFF",16),yw=new Uint8Array([0,0,0,0,0,0,0,0,0,0,255,255]);function Zu(e){return!!Qo(e)}function Xu(e){return!!Yo(e)}function Mi(e){return!!Oi(e)}var Ju=Zu,R1=Xu,Zo=function(e){let t=0;if(e=e.toString().trim(),Ju(e)){let r=new Uint8Array(t+4);return e.split(/\./g).forEach(n=>{r[t++]=parseInt(n,10)&255}),r}if(R1(e)){let r=e.split(":",8),n;for(n=0;n<r.length;n++){let s=Ju(r[n]),o;s&&(o=Zo(r[n]),r[n]=ot(o.slice(0,2),"base16")),o!=null&&++n<8&&r.splice(n,0,ot(o.slice(2,4),"base16"))}if(r[0]==="")for(;r.length<8;)r.unshift("0");else if(r[r.length-1]==="")for(;r.length<8;)r.push("0");else if(r.length<8){for(n=0;n<r.length&&r[n]!=="";n++);let s=[n,1];for(n=9-r.length;n>0;n--)s.push("0");r.splice.apply(r,s)}let i=new Uint8Array(t+16);for(n=0;n<r.length;n++){let s=parseInt(r[n],16);i[t++]=s>>8&255,i[t++]=s&255}return i}throw new Error("invalid ip address")},ju=function(e,t=0,r){t=~~t,r=r??e.length-t;let n=new DataView(e.buffer);if(r===4){let i=[];for(let s=0;s<r;s++)i.push(e[t+s]);return i.join(".")}if(r===16){let i=[];for(let s=0;s<r;s+=2)i.push(n.getUint16(t+s).toString(16));return i.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""};var an={},Xo={},k1=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,-1,"ip6zone"],[43,8,"ipcidr"],[53,-1,"dns",!0],[54,-1,"dns4",!0],[55,-1,"dns6",!0],[56,-1,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc-direct"],[281,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,-1,"unix",!1,!0],[421,-1,"ipfs"],[421,-1,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,-1,"garlic64"],[448,0,"tls"],[449,-1,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,-1,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,-1,"memory"]];k1.forEach(e=>{let t=N1(...e);Xo[t.code]=t,an[t.name]=t});function N1(e,t,r,n,i){return{code:e,size:t,name:r,resolvable:!!n,path:!!i}}function ft(e){if(typeof e=="number"){if(Xo[e]!=null)return Xo[e];throw new Error(`no protocol with code: ${e}`)}else if(typeof e=="string"){if(an[e]!=null)return an[e];throw new Error(`no protocol with name: ${e}`)}throw new Error(`invalid protocol id type: ${typeof e}`)}var Jw=ft("ip4"),jw=ft("ip6"),tE=ft("ipcidr");function jo(e,t){switch(ft(e).code){case 4:case 41:return D1(t);case 42:return rf(t);case 6:case 273:case 33:case 132:return sf(t).toString();case 53:case 54:case 55:case 56:case 400:case 449:case 777:return rf(t);case 421:return M1(t);case 444:return nf(t);case 445:return nf(t);case 466:return O1(t);default:return ot(t,"base16")}}function ta(e,t){switch(ft(e).code){case 4:return tf(t);case 41:return tf(t);case 42:return ef(t);case 6:case 273:case 33:case 132:return ea(parseInt(t,10));case 53:case 54:case 55:case 56:case 400:case 449:case 777:return ef(t);case 421:return U1(t);case 444:return V1(t);case 445:return F1(t);case 466:return K1(t);default:return St(t,"base16")}}var Jo=Object.values(rr).map(e=>e.decoder),P1=function(){let e=Jo[0].or(Jo[1]);return Jo.slice(2).forEach(t=>e=e.or(t)),e}();function tf(e){if(!Mi(e))throw new Error("invalid ip address");return Zo(e)}function D1(e){let t=ju(e,0,e.length);if(t==null)throw new Error("ipBuff is required");if(!Mi(t))throw new Error("invalid ip address");return t}function ea(e){let t=new ArrayBuffer(2);return new DataView(t).setUint16(0,e),new Uint8Array(t)}function sf(e){return new DataView(e.buffer).getUint16(e.byteOffset)}function ef(e){let t=St(e),r=Uint8Array.from(ke(t.length));return Lt([r,t],r.length+t.length)}function rf(e){let t=Dr(e);if(e=e.slice(Le(t)),e.length!==t)throw new Error("inconsistent lengths");return ot(e)}function U1(e){let t;e[0]==="Q"||e[0]==="1"?t=br(Rt.decode(`z${e}`)).bytes:t=pe.parse(e).multihash.bytes;let r=Uint8Array.from(ke(t.length));return Lt([r,t],r.length+t.length)}function K1(e){let t=P1.decode(e),r=Uint8Array.from(ke(t.length));return Lt([r,t],r.length+t.length)}function O1(e){let t=Dr(e),r=e.slice(Le(t));if(r.length!==t)throw new Error("inconsistent lengths");return"u"+ot(r,"base64url")}function M1(e){let t=Dr(e),r=e.slice(Le(t));if(r.length!==t)throw new Error("inconsistent lengths");return ot(r,"base58btc")}function V1(e){let t=e.split(":");if(t.length!==2)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(t[0].length!==16)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion address.`);let r=de.decode("b"+t[0]),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=ea(n);return Lt([r,i],r.length+i.length)}function F1(e){let t=e.split(":");if(t.length!==2)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(t[0].length!==56)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion3 address.`);let r=de.decode(`b${t[0]}`),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=ea(n);return Lt([r,i],r.length+i.length)}function nf(e){let t=e.slice(0,e.length-2),r=e.slice(e.length-2),n=ot(t,"base32"),i=sf(r);return`${n}:${i}`}function of(e){e=ra(e);let t=[],r=[],n=null,i=e.split("/").slice(1);if(i.length===1&&i[0]==="")return{bytes:new Uint8Array,string:"/",tuples:[],stringTuples:[],path:null};for(let s=0;s<i.length;s++){let o=i[s],a=ft(o);if(a.size===0){t.push([a.code]),r.push([a.code]);continue}if(s++,s>=i.length)throw cf("invalid address: "+e);if(a.path===!0){n=ra(i.slice(s).join("/")),t.push([a.code,ta(a.code,n)]),r.push([a.code,n]);break}let c=ta(a.code,i[s]);t.push([a.code,c]),r.push([a.code,jo(a.code,c)])}return{string:af(r),bytes:ia(t),tuples:t,stringTuples:r,path:n}}function na(e){let t=[],r=[],n=null,i=0;for(;i<e.length;){let s=Dr(e,i),o=Le(s),a=ft(s),c=q1(a,e.slice(i+o));if(c===0){t.push([s]),r.push([s]),i+=o;continue}let u=e.slice(i+o,i+o+c);if(i+=c+o,i>e.length)throw cf("Invalid address Uint8Array: "+ot(e,"base16"));t.push([s,u]);let f=jo(s,u);if(r.push([s,f]),a.path===!0){n=f;break}}return{bytes:Uint8Array.from(e),string:af(r),tuples:t,stringTuples:r,path:n}}function af(e){let t=[];return e.map(r=>{let n=ft(r[0]);return t.push(n.name),r.length>1&&r[1]!=null&&t.push(r[1]),null}),ra(t.join("/"))}function ia(e){return Lt(e.map(t=>{let r=ft(t[0]),n=Uint8Array.from(ke(r.code));return t.length>1&&t[1]!=null&&(n=Lt([n,t[1]])),n}))}function q1(e,t){if(e.size>0)return e.size/8;if(e.size===0)return 0;{let r=Dr(t instanceof Uint8Array?t:Uint8Array.from(t));return r+Le(r)}}function ra(e){return"/"+e.trim().split("/").filter(t=>t).join("/")}function cf(e){return new Error("Error parsing address: "+e)}var H1=Symbol.for("nodejs.util.inspect.custom"),sa=Symbol.for("@multiformats/js-multiaddr/multiaddr"),z1=[ft("dns").code,ft("dns4").code,ft("dns6").code,ft("dnsaddr").code],Vi=class e{bytes;#t;#e;#r;#n;[sa]=!0;constructor(t){t==null&&(t="");let r;if(t instanceof Uint8Array)r=na(t);else if(typeof t=="string"){if(t.length>0&&t.charAt(0)!=="/")throw new Error(`multiaddr "${t}" must start with a "/"`);r=of(t)}else if(Fi(t))r=na(t.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=r.bytes,this.#t=r.string,this.#e=r.tuples,this.#r=r.stringTuples,this.#n=r.path}toString(){return this.#t}toJSON(){return this.toString()}toOptions(){let t,r,n,i,s="",o=ft("tcp"),a=ft("udp"),c=ft("ip4"),u=ft("ip6"),f=ft("dns6"),l=ft("ip6zone");for(let[y,d]of this.stringTuples())y===l.code&&(s=`%${d??""}`),z1.includes(y)&&(r=o.name,i=443,n=`${d??""}${s}`,t=y===f.code?6:4),(y===o.code||y===a.code)&&(r=ft(y).name,i=parseInt(d??"")),(y===c.code||y===u.code)&&(r=ft(y).name,n=`${d??""}${s}`,t=y===u.code?6:4);if(t==null||r==null||n==null||i==null)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:t,host:n,transport:r,port:i}}protos(){return this.#e.map(([t])=>Object.assign({},ft(t)))}protoCodes(){return this.#e.map(([t])=>t)}protoNames(){return this.#e.map(([t])=>ft(t).name)}tuples(){return this.#e}stringTuples(){return this.#r}encapsulate(t){return t=new e(t),new e(this.toString()+t.toString())}decapsulate(t){let r=t.toString(),n=this.toString(),i=n.lastIndexOf(r);if(i<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${t.toString()}`);return new e(n.slice(0,i))}decapsulateCode(t){let r=this.tuples();for(let n=r.length-1;n>=0;n--)if(r[n][0]===t)return new e(ia(r.slice(0,n)));return this}getPeerId(){try{let t=[];this.stringTuples().forEach(([n,i])=>{n===an.p2p.code&&t.push([n,i]),n===an["p2p-circuit"].code&&(t=[])});let r=t.pop();if(r?.[1]!=null){let n=r[1];return n[0]==="Q"||n[0]==="1"?ot(Rt.decode(`z${n}`),"base58btc"):ot(pe.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){return this.#n}equals(t){return vt(this.bytes,t.bytes)}async resolve(t){let r=this.protos().find(s=>s.resolvable);if(r==null)return[this];let n=uf.get(r.name);if(n==null)throw new M(`no available resolver for ${r.name}`,"ERR_NO_AVAILABLE_RESOLVER");return(await n(this,t)).map(s=>new e(s))}nodeAddress(){let t=this.toOptions();if(t.transport!=="tcp"&&t.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${t.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:t.family,address:t.host,port:t.port}}isThinWaistAddress(t){let r=(t??this).protos();return!(r.length!==2||r[0].code!==4&&r[0].code!==41||r[1].code!==6&&r[1].code!==273)}[H1](){return`Multiaddr(${this.#t})`}};var uf=new Map;function Fi(e){return!!e?.[sa]}function Ur(e){return new Vi(e)}var ff="libp2p-peer-record",lf=Uint8Array.from([3,1]);var On;(function(e){let t;(function(n){let i;n.codec=()=>(i==null&&(i=Zt((s,o,a={})=>{a.lengthDelimited!==!1&&o.fork(),s.multiaddr!=null&&s.multiaddr.byteLength>0&&(o.uint32(10),o.bytes(s.multiaddr)),a.lengthDelimited!==!1&&o.ldelim()},(s,o)=>{let a={multiaddr:new Uint8Array(0)},c=o==null?s.len:s.pos+o;for(;s.pos<c;){let u=s.uint32();switch(u>>>3){case 1:a.multiaddr=s.bytes();break;default:s.skipType(u&7);break}}return a})),i),n.encode=s=>Yt(s,n.codec()),n.decode=s=>Qt(s,n.codec())})(t=e.AddressInfo||(e.AddressInfo={}));let r;e.codec=()=>(r==null&&(r=Zt((n,i,s={})=>{if(s.lengthDelimited!==!1&&i.fork(),n.peerId!=null&&n.peerId.byteLength>0&&(i.uint32(10),i.bytes(n.peerId)),n.seq!=null&&n.seq!==0n&&(i.uint32(16),i.uint64(n.seq)),n.addresses!=null)for(let o of n.addresses)i.uint32(26),e.AddressInfo.codec().encode(o,i);s.lengthDelimited!==!1&&i.ldelim()},(n,i)=>{let s={peerId:new Uint8Array(0),seq:0n,addresses:[]},o=i==null?n.len:n.pos+i;for(;n.pos<o;){let a=n.uint32();switch(a>>>3){case 1:s.peerId=n.bytes();break;case 2:s.seq=n.uint64();break;case 3:s.addresses.push(e.AddressInfo.codec().decode(n,n.uint32()));break;default:n.skipType(a&7);break}}return s})),r),e.encode=n=>Yt(n,e.codec()),e.decode=n=>Qt(n,e.codec())})(On||(On={}));var Kr=class e{static createFromProtobuf=t=>{let r=On.decode(t),n=Un(r.peerId),i=(r.addresses??[]).map(o=>Ur(o.multiaddr)),s=r.seq;return new e({peerId:n,multiaddrs:i,seqNumber:s})};static DOMAIN=ff;static CODEC=lf;peerId;multiaddrs;seqNumber;domain=e.DOMAIN;codec=e.CODEC;marshaled;constructor(t){let{peerId:r,multiaddrs:n,seqNumber:i}=t;this.peerId=r,this.multiaddrs=n??[],this.seqNumber=i??BigInt(Date.now())}marshal(){return this.marshaled==null&&(this.marshaled=On.encode({peerId:this.peerId.toBytes(),seq:BigInt(this.seqNumber),addresses:this.multiaddrs.map(t=>({multiaddr:t.bytes}))})),this.marshaled}equals(t){return!(!(t instanceof e)||!this.peerId.equals(t.peerId)||this.seqNumber!==t.seqNumber||!Wu(this.multiaddrs,t.multiaddrs))}};function G1(e){return e[Symbol.asyncIterator]!=null}function W1(e){if(G1(e))return(async()=>{let r=[];for await(let n of e)r.push(n);return r})();let t=[];for(let r of e)t.push(r);return t}var hf=W1;function We(e,t){let r={[Symbol.iterator]:()=>r,next:()=>{let n=e.next(),i=n.value;return n.done===!0||i==null?{done:!0,value:void 0}:{done:!1,value:t(i)}}};return r}var Mn=class{map;constructor(t){if(this.map=new Map,t!=null)for(let[r,n]of t.entries())this.map.set(r.toString(),n)}[Symbol.iterator](){return this.entries()}clear(){this.map.clear()}delete(t){this.map.delete(t.toString())}entries(){return We(this.map.entries(),t=>[Ct(t[0]),t[1]])}forEach(t){this.map.forEach((r,n)=>{t(r,Ct(n),this)})}get(t){return this.map.get(t.toString())}has(t){return this.map.has(t.toString())}set(t,r){this.map.set(t.toString(),r)}keys(){return We(this.map.keys(),t=>Ct(t))}values(){return this.map.values()}get size(){return this.map.size}};var oa=class e{set;constructor(t){if(this.set=new Set,t!=null)for(let r of t)this.set.add(r.toString())}get size(){return this.set.size}[Symbol.iterator](){return this.values()}add(t){this.set.add(t.toString())}clear(){this.set.clear()}delete(t){this.set.delete(t.toString())}entries(){return We(this.set.entries(),t=>{let r=Ct(t[0]);return[r,r]})}forEach(t){this.set.forEach(r=>{let n=Ct(r);t(n,n,this)})}has(t){return this.set.has(t.toString())}values(){return We(this.set.values(),t=>Ct(t))}intersection(t){let r=new e;for(let n of t)this.has(n)&&r.add(n);return r}difference(t){let r=new e;for(let n of this)t.has(n)||r.add(n);return r}union(t){let r=new e;for(let n of t)r.add(n);for(let n of this)r.add(n);return r}};var aa=class e{list;constructor(t){if(this.list=[],t!=null)for(let r of t)this.list.push(r.toString())}[Symbol.iterator](){return We(this.list.entries(),t=>Ct(t[1]))}concat(t){let r=new e(this);for(let n of t)r.push(n);return r}entries(){return We(this.list.entries(),t=>[t[0],Ct(t[1])])}every(t){return this.list.every((r,n)=>t(Ct(r),n,this))}filter(t){let r=new e;return this.list.forEach((n,i)=>{let s=Ct(n);t(s,i,this)&&r.push(s)}),r}find(t){let r=this.list.find((n,i)=>t(Ct(n),i,this));if(r!=null)return Ct(r)}findIndex(t){return this.list.findIndex((r,n)=>t(Ct(r),n,this))}forEach(t){this.list.forEach((r,n)=>{t(Ct(r),n,this)})}includes(t){return this.list.includes(t.toString())}indexOf(t){return this.list.indexOf(t.toString())}pop(){let t=this.list.pop();if(t!=null)return Ct(t)}push(...t){for(let r of t)this.list.push(r.toString())}shift(){let t=this.list.shift();if(t!=null)return Ct(t)}unshift(...t){let r=this.list.length;for(let n=t.length-1;n>-1;n--)r=this.list.unshift(t[n].toString());return r}get length(){return this.list.length}};var ua=Jt(pf(),1);var Fn=class extends Error{constructor(t){super(t),this.name="TimeoutError"}},fa=class extends Error{constructor(t){super(),this.name="AbortError",this.message=t}},yf=e=>globalThis.DOMException===void 0?new fa(e):new DOMException(e),gf=e=>{let t=e.reason===void 0?yf("This operation was aborted."):e.reason;return t instanceof Error?t:yf(t)};function la(e,t,r,n){let i,s=new Promise((o,a)=>{if(typeof t!="number"||Math.sign(t)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${t}\``);if(t===Number.POSITIVE_INFINITY){o(e);return}if(n={customTimers:{setTimeout,clearTimeout},...n},n.signal){let{signal:c}=n;c.aborted&&a(gf(c)),c.addEventListener("abort",()=>{a(gf(c))})}i=n.customTimers.setTimeout.call(void 0,()=>{if(typeof r=="function"){try{o(r())}catch(f){a(f)}return}let c=typeof r=="string"?r:`Promise timed out after ${t} milliseconds`,u=r instanceof Error?r:new Fn(c);typeof e.cancel=="function"&&e.cancel(),a(u)},t),(async()=>{try{o(await e)}catch(c){a(c)}finally{n.customTimers.clearTimeout.call(void 0,i)}})()});return s.clear=()=>{clearTimeout(i),i=void 0},s}function ha(e,t,r){let n=0,i=e.length;for(;i>0;){let s=Math.trunc(i/2),o=n+s;r(e[o],t)<=0?(n=++o,i-=s+1):i=s}return n}var Or=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},$e,da=class{constructor(){$e.set(this,[])}enqueue(t,r){r={priority:0,...r};let n={priority:r.priority,run:t};if(this.size&&Or(this,$e,"f")[this.size-1].priority>=r.priority){Or(this,$e,"f").push(n);return}let i=ha(Or(this,$e,"f"),n,(s,o)=>o.priority-s.priority);Or(this,$e,"f").splice(i,0,n)}dequeue(){let t=Or(this,$e,"f").shift();return t?.run}filter(t){return Or(this,$e,"f").filter(r=>r.priority===t.priority).map(r=>r.run)}get size(){return Or(this,$e,"f").length}};$e=new WeakMap;var mf=da;var bt=function(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r},O=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},At,Hn,zn,lr,Qi,Gn,Hi,be,qn,se,zi,oe,Wn,fr,Gi,xf,vf,Ef,bf,wf,Wi,pa,ya,Yi,Sf,$i,Zi=class extends Error{},ga=class extends ua.default{constructor(t){var r,n,i,s;if(super(),At.add(this),Hn.set(this,void 0),zn.set(this,void 0),lr.set(this,0),Qi.set(this,void 0),Gn.set(this,void 0),Hi.set(this,0),be.set(this,void 0),qn.set(this,void 0),se.set(this,void 0),zi.set(this,void 0),oe.set(this,0),Wn.set(this,void 0),fr.set(this,void 0),Gi.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),t={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:mf,...t},!(typeof t.intervalCap=="number"&&t.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(n=(r=t.intervalCap)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:""}\` (${typeof t.intervalCap})`);if(t.interval===void 0||!(Number.isFinite(t.interval)&&t.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(s=(i=t.interval)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""}\` (${typeof t.interval})`);bt(this,Hn,t.carryoverConcurrencyCount,"f"),bt(this,zn,t.intervalCap===Number.POSITIVE_INFINITY||t.interval===0,"f"),bt(this,Qi,t.intervalCap,"f"),bt(this,Gn,t.interval,"f"),bt(this,se,new t.queueClass,"f"),bt(this,zi,t.queueClass,"f"),this.concurrency=t.concurrency,this.timeout=t.timeout,bt(this,Gi,t.throwOnTimeout===!0,"f"),bt(this,fr,t.autoStart===!1,"f")}get concurrency(){return O(this,Wn,"f")}set concurrency(t){if(!(typeof t=="number"&&t>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${t}\` (${typeof t})`);bt(this,Wn,t,"f"),O(this,At,"m",Yi).call(this)}async add(t,r={}){return r={timeout:this.timeout,throwOnTimeout:O(this,Gi,"f"),...r},new Promise((n,i)=>{O(this,se,"f").enqueue(async()=>{var s,o,a;bt(this,oe,(o=O(this,oe,"f"),o++,o),"f"),bt(this,lr,(a=O(this,lr,"f"),a++,a),"f");try{if(!((s=r.signal)===null||s===void 0)&&s.aborted)throw new Zi("The task was aborted.");let c=t({signal:r.signal});r.timeout&&(c=la(Promise.resolve(c),r.timeout)),r.signal&&(c=Promise.race([c,O(this,At,"m",Sf).call(this,r.signal)]));let u=await c;n(u),this.emit("completed",u)}catch(c){if(c instanceof Fn&&!r.throwOnTimeout){n();return}i(c),this.emit("error",c)}finally{O(this,At,"m",Ef).call(this)}},r),this.emit("add"),O(this,At,"m",Wi).call(this)})}async addAll(t,r){return Promise.all(t.map(async n=>this.add(n,r)))}start(){return O(this,fr,"f")?(bt(this,fr,!1,"f"),O(this,At,"m",Yi).call(this),this):this}pause(){bt(this,fr,!0,"f")}clear(){bt(this,se,new(O(this,zi,"f")),"f")}async onEmpty(){O(this,se,"f").size!==0&&await O(this,At,"m",$i).call(this,"empty")}async onSizeLessThan(t){O(this,se,"f").size<t||await O(this,At,"m",$i).call(this,"next",()=>O(this,se,"f").size<t)}async onIdle(){O(this,oe,"f")===0&&O(this,se,"f").size===0||await O(this,At,"m",$i).call(this,"idle")}get size(){return O(this,se,"f").size}sizeBy(t){return O(this,se,"f").filter(t).length}get pending(){return O(this,oe,"f")}get isPaused(){return O(this,fr,"f")}};Hn=new WeakMap,zn=new WeakMap,lr=new WeakMap,Qi=new WeakMap,Gn=new WeakMap,Hi=new WeakMap,be=new WeakMap,qn=new WeakMap,se=new WeakMap,zi=new WeakMap,oe=new WeakMap,Wn=new WeakMap,fr=new WeakMap,Gi=new WeakMap,At=new WeakSet,xf=function(){return O(this,zn,"f")||O(this,lr,"f")<O(this,Qi,"f")},vf=function(){return O(this,oe,"f")<O(this,Wn,"f")},Ef=function(){var t;bt(this,oe,(t=O(this,oe,"f"),t--,t),"f"),O(this,At,"m",Wi).call(this),this.emit("next")},bf=function(){O(this,At,"m",ya).call(this),O(this,At,"m",pa).call(this),bt(this,qn,void 0,"f")},wf=function(){let t=Date.now();if(O(this,be,"f")===void 0){let r=O(this,Hi,"f")-t;if(r<0)bt(this,lr,O(this,Hn,"f")?O(this,oe,"f"):0,"f");else return O(this,qn,"f")===void 0&&bt(this,qn,setTimeout(()=>{O(this,At,"m",bf).call(this)},r),"f"),!0}return!1},Wi=function(){if(O(this,se,"f").size===0)return O(this,be,"f")&&clearInterval(O(this,be,"f")),bt(this,be,void 0,"f"),this.emit("empty"),O(this,oe,"f")===0&&this.emit("idle"),!1;if(!O(this,fr,"f")){let t=!O(this,At,"a",wf);if(O(this,At,"a",xf)&&O(this,At,"a",vf)){let r=O(this,se,"f").dequeue();return r?(this.emit("active"),r(),t&&O(this,At,"m",pa).call(this),!0):!1}}return!1},pa=function(){O(this,zn,"f")||O(this,be,"f")!==void 0||(bt(this,be,setInterval(()=>{O(this,At,"m",ya).call(this)},O(this,Gn,"f")),"f"),bt(this,Hi,Date.now()+O(this,Gn,"f"),"f"))},ya=function(){O(this,lr,"f")===0&&O(this,oe,"f")===0&&O(this,be,"f")&&(clearInterval(O(this,be,"f")),bt(this,be,void 0,"f")),bt(this,lr,O(this,Hn,"f")?O(this,oe,"f"):0,"f"),O(this,At,"m",Yi).call(this)},Yi=function(){for(;O(this,At,"m",Wi).call(this););},Sf=async function(t){return new Promise((r,n)=>{t.addEventListener("abort",()=>{n(new Zi("The task was aborted."))},{once:!0})})},$i=async function(t,r){return new Promise(n=>{let i=()=>{r&&!r()||(this.off(t,i),n())};this.on(t,i)})};var ma=ga;var xa=class extends Error{constructor(t){super(t),this.name="TimeoutError"}},va=class extends Error{constructor(t){super(),this.name="AbortError",this.message=t}},Bf=e=>globalThis.DOMException===void 0?new va(e):new DOMException(e),Af=e=>{let t=e.reason===void 0?Bf("This operation was aborted."):e.reason;return t instanceof Error?t:Bf(t)};function ba(e,t){let{milliseconds:r,fallback:n,message:i,customTimers:s={setTimeout,clearTimeout}}=t,o,c=new Promise((u,f)=>{if(typeof r!="number"||Math.sign(r)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${r}\``);if(t.signal){let{signal:h}=t;h.aborted&&f(Af(h)),h.addEventListener("abort",()=>{f(Af(h))})}if(r===Number.POSITIVE_INFINITY){e.then(u,f);return}let l=new xa;o=s.setTimeout.call(void 0,()=>{if(n){try{u(n())}catch(h){f(h)}return}typeof e.cancel=="function"&&e.cancel(),i===!1?u():i instanceof Error?f(i):(l.message=i??`Promise timed out after ${r} milliseconds`,f(l))},r),(async()=>{try{u(await e)}catch(h){f(h)}})()}).finally(()=>{c.clear()});return c.clear=()=>{s.clearTimeout.call(void 0,o),o=void 0},c}var If=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,r)=>(r&=63,r<36?t+=r.toString(36):r<62?t+=(r-26).toString(36).toUpperCase():r>62?t+="-":t+="_",t),"");var wa="lock:worker:request-read",Ea="lock:worker:release-read",Sa="lock:master:grant-read",Ba="lock:worker:request-write",Aa="lock:worker:release-write",Ia="lock:master:grant-write";var hr={},cn=e=>{e.addEventListener("message",t=>{cn.dispatchEvent("message",e,t)}),e.port!=null&&e.port.addEventListener("message",t=>{cn.dispatchEvent("message",e,t)})};cn.addEventListener=(e,t)=>{hr[e]==null&&(hr[e]=[]),hr[e].push(t)};cn.removeEventListener=(e,t)=>{hr[e]!=null&&(hr[e]=hr[e].filter(r=>r===t))};cn.dispatchEvent=function(e,t,r){hr[e]!=null&&hr[e].forEach(n=>n(t,r))};var Ta=cn;var Tf=(e,t,r,n,i)=>(s,o)=>{if(o.data.type!==r)return;let a={type:o.data.type,name:o.data.name,identifier:o.data.identifier};e.dispatchEvent(new MessageEvent(t,{data:{name:a.name,handler:async()=>(s.postMessage({type:i,name:a.name,identifier:a.identifier}),await new Promise(c=>{let u=f=>{if(f==null||f.data==null)return;let l={type:f.data.type,name:f.data.name,identifier:f.data.identifier};l.type===n&&l.identifier===a.identifier&&(s.removeEventListener("message",u),c())};s.addEventListener("message",u)}))}}))},Cf=(e,t,r,n)=>async()=>{let i=If();return globalThis.postMessage({type:t,identifier:i,name:e}),await new Promise(s=>{let o=a=>{if(a==null||a.data==null)return;let c={type:a.data.type,identifier:a.data.identifier};c.type===r&&c.identifier===i&&(globalThis.removeEventListener("message",o),s(()=>{globalThis.postMessage({type:n,identifier:i,name:e})}))};globalThis.addEventListener("message",o)})},Y1={singleProcess:!1},_f=e=>{if(e=Object.assign({},Y1,e),!!globalThis.document||e.singleProcess){let r=new EventTarget;return Ta.addEventListener("message",Tf(r,"requestReadLock",wa,Ea,Sa)),Ta.addEventListener("message",Tf(r,"requestWriteLock",Ba,Aa,Ia)),r}return{isWorker:!0,readLock:r=>Cf(r,wa,Sa,Ea),writeLock:r=>Cf(r,Ba,Ia,Aa)}};var Mr={},dr;async function Ca(e,t){let r,n=new Promise(i=>{r=i});return e.add(async()=>await ba((async()=>await new Promise(i=>{r(()=>{i()})}))(),{milliseconds:t.timeout})),await n}var Z1=(e,t)=>{if(dr.isWorker===!0)return{readLock:dr.readLock(e,t),writeLock:dr.writeLock(e,t)};let r=new ma({concurrency:1}),n;return{async readLock(){if(n!=null)return await Ca(n,t);n=new ma({concurrency:t.concurrency,autoStart:!1});let i=n,s=Ca(n,t);return r.add(async()=>(i.start(),await i.onIdle().then(()=>{n===i&&(n=null)}))),await s},async writeLock(){return n=null,await Ca(r,t)}}},X1={name:"lock",concurrency:1/0,timeout:846e5,singleProcess:!1};function _a(e){let t=Object.assign({},X1,e);return dr==null&&(dr=_f(t),dr.isWorker!==!0&&(dr.addEventListener("requestReadLock",r=>{Mr[r.data.name]!=null&&Mr[r.data.name].readLock().then(async n=>await r.data.handler().finally(()=>n()))}),dr.addEventListener("requestWriteLock",async r=>{Mr[r.data.name]!=null&&Mr[r.data.name].writeLock().then(async n=>await r.data.handler().finally(()=>n()))}))),Mr[t.name]==null&&(Mr[t.name]=Z1(t.name,t)),Mr[t.name]}var Ft={ERR_INVALID_PARAMETERS:"ERR_INVALID_PARAMETERS"};var un;(function(e){let t;(function(i){let s;i.codec=()=>(s==null&&(s=Zt((o,a,c={})=>{c.lengthDelimited!==!1&&a.fork(),o.key!=null&&o.key!==""&&(a.uint32(10),a.string(o.key)),o.value!=null&&o.value.byteLength>0&&(a.uint32(18),a.bytes(o.value)),c.lengthDelimited!==!1&&a.ldelim()},(o,a)=>{let c={key:"",value:new Uint8Array(0)},u=a==null?o.len:o.pos+a;for(;o.pos<u;){let f=o.uint32();switch(f>>>3){case 1:c.key=o.string();break;case 2:c.value=o.bytes();break;default:o.skipType(f&7);break}}return c})),s),i.encode=o=>Yt(o,i.codec()),i.decode=o=>Qt(o,i.codec())})(t=e.Peer$metadataEntry||(e.Peer$metadataEntry={}));let r;(function(i){let s;i.codec=()=>(s==null&&(s=Zt((o,a,c={})=>{c.lengthDelimited!==!1&&a.fork(),o.key!=null&&o.key!==""&&(a.uint32(10),a.string(o.key)),o.value!=null&&(a.uint32(18),Ji.codec().encode(o.value,a)),c.lengthDelimited!==!1&&a.ldelim()},(o,a)=>{let c={key:""},u=a==null?o.len:o.pos+a;for(;o.pos<u;){let f=o.uint32();switch(f>>>3){case 1:c.key=o.string();break;case 2:c.value=Ji.codec().decode(o,o.uint32());break;default:o.skipType(f&7);break}}return c})),s),i.encode=o=>Yt(o,i.codec()),i.decode=o=>Qt(o,i.codec())})(r=e.Peer$tagsEntry||(e.Peer$tagsEntry={}));let n;e.codec=()=>(n==null&&(n=Zt((i,s,o={})=>{if(o.lengthDelimited!==!1&&s.fork(),i.addresses!=null)for(let a of i.addresses)s.uint32(10),Xi.codec().encode(a,s);if(i.protocols!=null)for(let a of i.protocols)s.uint32(18),s.string(a);if(i.publicKey!=null&&(s.uint32(34),s.bytes(i.publicKey)),i.peerRecordEnvelope!=null&&(s.uint32(42),s.bytes(i.peerRecordEnvelope)),i.metadata!=null&&i.metadata.size!==0)for(let[a,c]of i.metadata.entries())s.uint32(50),e.Peer$metadataEntry.codec().encode({key:a,value:c},s);if(i.tags!=null&&i.tags.size!==0)for(let[a,c]of i.tags.entries())s.uint32(58),e.Peer$tagsEntry.codec().encode({key:a,value:c},s);o.lengthDelimited!==!1&&s.ldelim()},(i,s)=>{let o={addresses:[],protocols:[],metadata:new Map,tags:new Map},a=s==null?i.len:i.pos+s;for(;i.pos<a;){let c=i.uint32();switch(c>>>3){case 1:o.addresses.push(Xi.codec().decode(i,i.uint32()));break;case 2:o.protocols.push(i.string());break;case 4:o.publicKey=i.bytes();break;case 5:o.peerRecordEnvelope=i.bytes();break;case 6:{let u=e.Peer$metadataEntry.codec().decode(i,i.uint32());o.metadata.set(u.key,u.value);break}case 7:{let u=e.Peer$tagsEntry.codec().decode(i,i.uint32());o.tags.set(u.key,u.value);break}default:i.skipType(c&7);break}}return o})),n),e.encode=i=>Yt(i,e.codec()),e.decode=i=>Qt(i,e.codec())})(un||(un={}));var Xi;(function(e){let t;e.codec=()=>(t==null&&(t=Zt((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.multiaddr!=null&&r.multiaddr.byteLength>0&&(n.uint32(10),n.bytes(r.multiaddr)),r.isCertified!=null&&(n.uint32(16),n.bool(r.isCertified)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={multiaddr:new Uint8Array(0)},s=n==null?r.len:r.pos+n;for(;r.pos<s;){let o=r.uint32();switch(o>>>3){case 1:i.multiaddr=r.bytes();break;case 2:i.isCertified=r.bool();break;default:r.skipType(o&7);break}}return i})),t),e.encode=r=>Yt(r,e.codec()),e.decode=r=>Qt(r,e.codec())})(Xi||(Xi={}));var Ji;(function(e){let t;e.codec=()=>(t==null&&(t=Zt((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.value!=null&&r.value!==0&&(n.uint32(8),n.uint32(r.value)),r.expiry!=null&&(n.uint32(16),n.uint64(r.expiry)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={value:0},s=n==null?r.len:r.pos+n;for(;r.pos<s;){let o=r.uint32();switch(o>>>3){case 1:i.value=r.uint32();break;case 2:i.expiry=r.uint64();break;default:r.skipType(o&7);break}}return i})),t),e.encode=r=>Yt(r,e.codec()),e.decode=r=>Qt(r,e.codec())})(Ji||(Ji={}));function fn(e,t){let r=un.decode(t);r.publicKey!=null&&e.publicKey==null&&(e=Vu({...e,publicKey:e.publicKey}));let n=new Map,i=BigInt(Date.now());for(let[s,o]of r.tags.entries())o.expiry!=null&&o.expiry<i||n.set(s,o);return{...r,id:e,addresses:r.addresses.map(({multiaddr:s,isCertified:o})=>({multiaddr:Ur(s),isCertified:o??!1})),metadata:r.metadata,peerRecordEnvelope:r.peerRecordEnvelope??void 0,tags:n}}var Rf=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,r)=>(r&=63,r<36?t+=r.toString(36):r<62?t+=(r-26).toString(36).toUpperCase():r>62?t+="-":t+="_",t),"");var Qe="/",Lf=new TextEncoder().encode(Qe),ji=Lf[0],ts=class e{_buf;constructor(t,r){if(typeof t=="string")this._buf=St(t);else if(t instanceof Uint8Array)this._buf=t;else throw new Error("Invalid key, should be String of Uint8Array");if(r==null&&(r=!0),r&&this.clean(),this._buf.byteLength===0||this._buf[0]!==ji)throw new Error("Invalid key")}toString(t="utf8"){return ot(this._buf,t)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(t){return new e(t.join(Qe))}static random(){return new e(Rf().replace(/-/g,""))}static asKey(t){return t instanceof Uint8Array||typeof t=="string"?new e(t):typeof t.uint8Array=="function"?new e(t.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=Lf),this._buf[0]!==ji){let t=new Uint8Array(this._buf.byteLength+1);t.fill(ji,0,1),t.set(this._buf,1),this._buf=t}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===ji;)this._buf=this._buf.subarray(0,-1)}less(t){let r=this.list(),n=t.list();for(let i=0;i<r.length;i++){if(n.length<i+1)return!1;let s=r[i],o=n[i];if(s<o)return!0;if(s>o)return!1}return r.length<n.length}reverse(){return e.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let t=this.namespaces();return t[t.length-1]}list(){return this.toString().split(Qe).slice(1)}type(){return J1(this.baseNamespace())}name(){return j1(this.baseNamespace())}instance(t){return new e(this.toString()+":"+t)}path(){let t=this.parent().toString();return t.endsWith(Qe)||(t+=Qe),t+=this.type(),new e(t)}parent(){let t=this.list();return t.length===1?new e(Qe):new e(t.slice(0,-1).join(Qe))}child(t){return this.toString()===Qe?t:t.toString()===Qe?this:new e(this.toString()+t.toString(),!1)}isAncestorOf(t){return t.toString()===this.toString()?!1:t.toString().startsWith(this.toString())}isDecendantOf(t){return t.toString()===this.toString()?!1:this.toString().startsWith(t.toString())}isTopLevel(){return this.list().length===1}concat(...t){return e.withNamespaces([...this.namespaces(),...tg(t.map(r=>r.namespaces()))])}};function J1(e){let t=e.split(":");return t.length<2?"":t.slice(0,-1).join(":")}function j1(e){let t=e.split(":");return t[t.length-1]}function tg(e){return[].concat(...e)}var Ra="/peers/";function ln(e){if(!nc(e)||e.type==null)throw new M("Invalid PeerId",Ft.ERR_INVALID_PARAMETERS);let t=e.toCID().toString();return new ts(`${Ra}${t}`)}async function kf(e,t,r){let n=new Map;for(let i of r){if(i==null)continue;if(i.multiaddr instanceof Uint8Array&&(i.multiaddr=Ur(i.multiaddr)),!Fi(i.multiaddr))throw new M("Multiaddr was invalid",Ft.ERR_INVALID_PARAMETERS);if(!await t(e,i.multiaddr))continue;let s=i.isCertified??!1,o=i.multiaddr.toString(),a=n.get(o);a!=null?i.isCertified=a.isCertified||s:n.set(o,{multiaddr:i.multiaddr,isCertified:s})}return[...n.values()].sort((i,s)=>i.multiaddr.toString().localeCompare(s.multiaddr.toString())).map(({isCertified:i,multiaddr:s})=>({isCertified:i,multiaddr:s.bytes}))}async function rs(e,t,r,n){if(t==null)throw new M("Invalid PeerData",Ft.ERR_INVALID_PARAMETERS);if(t.publicKey!=null&&e.publicKey!=null&&!vt(t.publicKey,e.publicKey))throw new M("publicKey bytes do not match peer id publicKey bytes",Ft.ERR_INVALID_PARAMETERS);let i=n.existingPeer;if(i!=null&&!e.equals(i.id))throw new M("peer id did not match existing peer id",Ft.ERR_INVALID_PARAMETERS);let s=i?.addresses??[],o=new Set(i?.protocols??[]),a=i?.metadata??new Map,c=i?.tags??new Map,u=i?.peerRecordEnvelope;if(r==="patch"){if((t.multiaddrs!=null||t.addresses!=null)&&(s=[],t.multiaddrs!=null&&s.push(...t.multiaddrs.map(l=>({isCertified:!1,multiaddr:l}))),t.addresses!=null&&s.push(...t.addresses)),t.protocols!=null&&(o=new Set(t.protocols)),t.metadata!=null){let l=t.metadata instanceof Map?[...t.metadata.entries()]:Object.entries(t.metadata);a=es(l,{validate:Nf})}if(t.tags!=null){let l=t.tags instanceof Map?[...t.tags.entries()]:Object.entries(t.tags);c=es(l,{validate:Pf,map:Df})}t.peerRecordEnvelope!=null&&(u=t.peerRecordEnvelope)}if(r==="merge"){if(t.multiaddrs!=null&&s.push(...t.multiaddrs.map(l=>({isCertified:!1,multiaddr:l}))),t.addresses!=null&&s.push(...t.addresses),t.protocols!=null&&(o=new Set([...o,...t.protocols])),t.metadata!=null){let l=t.metadata instanceof Map?[...t.metadata.entries()]:Object.entries(t.metadata);for(let[h,y]of l)y==null?a.delete(h):a.set(h,y);a=es([...a.entries()],{validate:Nf})}if(t.tags!=null){let l=t.tags instanceof Map?[...t.tags.entries()]:Object.entries(t.tags),h=new Map(c);for(let[y,d]of l)d==null?h.delete(y):h.set(y,d);c=es([...h.entries()],{validate:Pf,map:Df})}t.peerRecordEnvelope!=null&&(u=t.peerRecordEnvelope)}let f={addresses:await kf(e,n.addressFilter??(async()=>!0),s),protocols:[...o.values()].sort((l,h)=>l.localeCompare(h)),metadata:a,tags:c,publicKey:i?.id.publicKey??t.publicKey??e.publicKey,peerRecordEnvelope:u};return e.type!=="RSA"&&delete f.publicKey,f}function es(e,t){let r=new Map;for(let[n,i]of e)i!=null&&t.validate(n,i);for(let[n,i]of e.sort(([s],[o])=>s.localeCompare(o)))i!=null&&r.set(n,t.map?.(n,i)??i);return r}function Nf(e,t){if(typeof e!="string")throw new M("Metadata key must be a string",Ft.ERR_INVALID_PARAMETERS);if(!(t instanceof Uint8Array))throw new M("Metadata value must be a Uint8Array",Ft.ERR_INVALID_PARAMETERS)}function Pf(e,t){if(typeof e!="string")throw new M("Tag name must be a string",Ft.ERR_INVALID_PARAMETERS);if(t.value!=null){if(parseInt(`${t.value}`,10)!==t.value)throw new M("Tag value must be an integer",Ft.ERR_INVALID_PARAMETERS);if(t.value<0||t.value>100)throw new M("Tag value must be between 0-100",Ft.ERR_INVALID_PARAMETERS)}if(t.ttl!=null){if(parseInt(`${t.ttl}`,10)!==t.ttl)throw new M("Tag ttl must be an integer",Ft.ERR_INVALID_PARAMETERS);if(t.ttl<0)throw new M("Tag ttl must be between greater than 0",Ft.ERR_INVALID_PARAMETERS)}}function Df(e,t){let r;return t.expiry!=null&&(r=t.expiry),t.ttl!=null&&(r=BigInt(Date.now()+Number(t.ttl))),{value:t.value??0,expiry:r}}function ns(e,t,r){let n=e.toString().split("/")[2],i=de.decode(n),s=Un(i),o=r.get(s);if(o!=null)return o;let a=fn(s,t);return r.set(s,a),a}function eg(e,t){return e==null?{}:{prefix:Ra,filters:(e.filters??[]).map(r=>({key:n,value:i})=>r(ns(n,i,t))),orders:(e.orders??[]).map(r=>(n,i)=>r(ns(n.key,n.value,t),ns(i.key,i.value,t)))}}var is=class{peerId;datastore;lock;addressFilter;constructor(t,r={}){this.peerId=t.peerId,this.datastore=t.datastore,this.addressFilter=r.addressFilter,this.lock=_a({name:"peer-store",singleProcess:!0})}async has(t){return this.datastore.has(ln(t))}async delete(t){if(this.peerId.equals(t))throw new M("Cannot delete self peer",Ft.ERR_INVALID_PARAMETERS);await this.datastore.delete(ln(t))}async load(t){let r=await this.datastore.get(ln(t));return fn(t,r)}async save(t,r){let{existingBuf:n,existingPeer:i}=await this.#t(t),s=await rs(t,r,"patch",{addressFilter:this.addressFilter});return this.#e(t,s,n,i)}async patch(t,r){let{existingBuf:n,existingPeer:i}=await this.#t(t),s=await rs(t,r,"patch",{addressFilter:this.addressFilter,existingPeer:i});return this.#e(t,s,n,i)}async merge(t,r){let{existingBuf:n,existingPeer:i}=await this.#t(t),s=await rs(t,r,"merge",{addressFilter:this.addressFilter,existingPeer:i});return this.#e(t,s,n,i)}async*all(t){let r=new Mn;for await(let{key:n,value:i}of this.datastore.query(eg(t??{},r))){let s=ns(n,i,r);s.id.equals(this.peerId)||(yield s)}}async#t(t){try{let r=await this.datastore.get(ln(t)),n=fn(t,r);return{existingBuf:r,existingPeer:n}}catch(r){if(r.code!=="ERR_NOT_FOUND")throw r}return{}}async#e(t,r,n,i){let s=un.encode(r);return n!=null&&vt(s,n)?{peer:fn(t,s),previous:i,updated:!1}:(await this.datastore.put(ln(t),s),{peer:fn(t,s),previous:i,updated:!0})}};var La=class{store;events;peerId;log;constructor(t,r={}){this.log=t.logger.forComponent("libp2p:peer-store"),this.events=t.events,this.peerId=t.peerId,this.store=new is(t,r)}async forEach(t,r){this.log.trace("forEach await read lock");let n=await this.store.lock.readLock();this.log.trace("forEach got read lock");try{for await(let i of this.store.all(r))t(i)}finally{this.log.trace("forEach release read lock"),n()}}async all(t){this.log.trace("all await read lock");let r=await this.store.lock.readLock();this.log.trace("all got read lock");try{return await hf(this.store.all(t))}finally{this.log.trace("all release read lock"),r()}}async delete(t){this.log.trace("delete await write lock");let r=await this.store.lock.writeLock();this.log.trace("delete got write lock");try{await this.store.delete(t)}finally{this.log.trace("delete release write lock"),r()}}async has(t){this.log.trace("has await read lock");let r=await this.store.lock.readLock();this.log.trace("has got read lock");try{return await this.store.has(t)}finally{this.log.trace("has release read lock"),r()}}async get(t){this.log.trace("get await read lock");let r=await this.store.lock.readLock();this.log.trace("get got read lock");try{return await this.store.load(t)}finally{this.log.trace("get release read lock"),r()}}async save(t,r){this.log.trace("save await write lock");let n=await this.store.lock.writeLock();this.log.trace("save got write lock");try{let i=await this.store.save(t,r);return this.#t(t,i),i.peer}finally{this.log.trace("save release write lock"),n()}}async patch(t,r){this.log.trace("patch await write lock");let n=await this.store.lock.writeLock();this.log.trace("patch got write lock");try{let i=await this.store.patch(t,r);return this.#t(t,i),i.peer}finally{this.log.trace("patch release write lock"),n()}}async merge(t,r){this.log.trace("merge await write lock");let n=await this.store.lock.writeLock();this.log.trace("merge got write lock");try{let i=await this.store.merge(t,r);return this.#t(t,i),i.peer}finally{this.log.trace("merge release write lock"),n()}}async consumePeerRecord(t,r){let n=await sn.openAndCertify(t,Kr.DOMAIN);if(r?.equals(n.peerId)===!1)return this.log("envelope peer id was not the expected peer id - expected: %p received: %p",r,n.peerId),!1;let i=Kr.createFromProtobuf(n.payload),s;try{s=await this.get(n.peerId)}catch(o){if(o.code!=="ERR_NOT_FOUND")throw o}if(s?.peerRecordEnvelope!=null){let o=await sn.createFromProtobuf(s.peerRecordEnvelope),a=Kr.createFromProtobuf(o.payload);if(a.seqNumber>=i.seqNumber)return this.log("sequence number was lower or equal to existing sequence number - stored: %d received: %d",a.seqNumber,i.seqNumber),!1}return await this.patch(i.peerId,{peerRecordEnvelope:t,addresses:i.multiaddrs.map(o=>({isCertified:!0,multiaddr:o}))}),!0}#t(t,r){r.updated&&(this.peerId.equals(t)?this.events.safeDispatchEvent("self:peer:update",{detail:r}):this.events.safeDispatchEvent("peer:update",{detail:r}))}};return Yf(rg);})();
/*! Bundled license information:

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/edwards.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/ed25519.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
return Libp2PPeerStore}));
