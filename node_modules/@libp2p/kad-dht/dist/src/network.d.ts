import { TypedEventEmitter } from '@libp2p/interface/events';
import { Message } from './message/index.js';
import type { KadDHTComponents, QueryEvent, QueryOptions } from './index.js';
import type { AbortOptions } from '@libp2p/interface';
import type { PeerId } from '@libp2p/interface/peer-id';
import type { PeerInfo } from '@libp2p/interface/peer-info';
import type { Startable } from '@libp2p/interface/startable';
import type { Duplex, Source } from 'it-stream-types';
import type { Uint8ArrayList } from 'uint8arraylist';
export interface NetworkInit {
    protocol: string;
    lan: boolean;
}
interface NetworkEvents {
    'peer': CustomEvent<PeerInfo>;
}
/**
 * Handle network operations for the dht
 */
export declare class Network extends TypedEventEmitter<NetworkEvents> implements Startable {
    private readonly log;
    private readonly protocol;
    private running;
    private readonly components;
    /**
     * Create a new network
     */
    constructor(components: KadDHTComponents, init: NetworkInit);
    /**
     * Start the network
     */
    start(): Promise<void>;
    /**
     * Stop all network activity
     */
    stop(): Promise<void>;
    /**
     * Is the network online?
     */
    isStarted(): boolean;
    /**
     * Send a request and record RTT for latency measurements
     */
    sendRequest(to: PeerId, msg: Message, options?: QueryOptions): AsyncGenerator<QueryEvent>;
    /**
     * Sends a message without expecting an answer
     */
    sendMessage(to: PeerId, msg: Message, options?: QueryOptions): AsyncGenerator<QueryEvent>;
    /**
     * Write a message to the given stream
     */
    _writeMessage(stream: Duplex<AsyncGenerator<Uint8ArrayList>, Source<Uint8ArrayList | Uint8Array>>, msg: Uint8Array | Uint8ArrayList, options: AbortOptions): Promise<void>;
    /**
     * Write a message and read its response.
     * If no response is received after the specified timeout
     * this will error out.
     */
    _writeReadMessage(stream: Duplex<AsyncGenerator<Uint8ArrayList>, Source<Uint8ArrayList | Uint8Array>>, msg: Uint8Array | Uint8ArrayList, options: AbortOptions): Promise<Message>;
}
export {};
//# sourceMappingURL=network.d.ts.map