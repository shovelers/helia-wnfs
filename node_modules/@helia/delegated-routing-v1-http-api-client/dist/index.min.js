(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.HeliaDelegatedRoutingV1HttpApiClient = factory()}(typeof self !== 'undefined' ? self : this, function () {
"use strict";var HeliaDelegatedRoutingV1HttpApiClient=(()=>{var Wh=Object.create;var Bi=Object.defineProperty;var Yh=Object.getOwnPropertyDescriptor;var Zh=Object.getOwnPropertyNames;var Qh=Object.getPrototypeOf,Xh=Object.prototype.hasOwnProperty;var lt=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Kt=(t,e)=>{for(var r in e)Bi(t,r,{get:e[r],enumerable:!0})},N0=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Zh(e))!Xh.call(t,i)&&i!==r&&Bi(t,i,{get:()=>e[i],enumerable:!(n=Yh(e,i))||n.enumerable});return t};var Pt=(t,e,r)=>(r=t!=null?Wh(Qh(t)):{},N0(e||!t||!t.__esModule?Bi(r,"default",{value:t,enumerable:!0}):r,t)),Jh=t=>N0(Bi({},"__esModule",{value:!0}),t);var U0=lt((f2,k0)=>{var Xr=1e3,Jr=Xr*60,jr=Jr*60,Dr=jr*24,jh=Dr*7,td=Dr*365.25;k0.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return ed(t);if(r==="number"&&isFinite(t))return e.long?nd(t):rd(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function ed(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*td;case"weeks":case"week":case"w":return r*jh;case"days":case"day":case"d":return r*Dr;case"hours":case"hour":case"hrs":case"hr":case"h":return r*jr;case"minutes":case"minute":case"mins":case"min":case"m":return r*Jr;case"seconds":case"second":case"secs":case"sec":case"s":return r*Xr;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function rd(t){var e=Math.abs(t);return e>=Dr?Math.round(t/Dr)+"d":e>=jr?Math.round(t/jr)+"h":e>=Jr?Math.round(t/Jr)+"m":e>=Xr?Math.round(t/Xr)+"s":t+"ms"}function nd(t){var e=Math.abs(t);return e>=Dr?Ai(t,e,Dr,"day"):e>=jr?Ai(t,e,jr,"hour"):e>=Jr?Ai(t,e,Jr,"minute"):e>=Xr?Ai(t,e,Xr,"second"):t+" ms"}function Ai(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var F0=lt((l2,O0)=>{function id(t){r.debug=r,r.default=r,r.coerce=c,r.disable=o,r.enable=i,r.enabled=s,r.humanize=U0(),r.destroy=u,Object.keys(t).forEach(f=>{r[f]=t[f]}),r.names=[],r.skips=[],r.formatters={};function e(f){let l=0;for(let h=0;h<f.length;h++)l=(l<<5)-l+f.charCodeAt(h),l|=0;return r.colors[Math.abs(l)%r.colors.length]}r.selectColor=e;function r(f){let l,h=null,g,d;function p(...y){if(!p.enabled)return;let m=p,w=Number(new Date),b=w-(l||w);m.diff=b,m.prev=l,m.curr=w,l=w,y[0]=r.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");let L=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,(S,P)=>{if(S==="%%")return"%";L++;let B=r.formatters[P];if(typeof B=="function"){let O=y[L];S=B.call(m,O),y.splice(L,1),L--}return S}),r.formatArgs.call(m,y),(m.log||r.log).apply(m,y)}return p.namespace=f,p.useColors=r.useColors(),p.color=r.selectColor(f),p.extend=n,p.destroy=r.destroy,Object.defineProperty(p,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(g!==r.namespaces&&(g=r.namespaces,d=r.enabled(f)),d),set:y=>{h=y}}),typeof r.init=="function"&&r.init(p),p}function n(f,l){let h=r(this.namespace+(typeof l>"u"?":":l)+f);return h.log=this.log,h}function i(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];let l,h=(typeof f=="string"?f:"").split(/[\s,]+/),g=h.length;for(l=0;l<g;l++)h[l]&&(f=h[l].replace(/\*/g,".*?"),f[0]==="-"?r.skips.push(new RegExp("^"+f.slice(1)+"$")):r.names.push(new RegExp("^"+f+"$")))}function o(){let f=[...r.names.map(a),...r.skips.map(a).map(l=>"-"+l)].join(",");return r.enable(""),f}function s(f){if(f[f.length-1]==="*")return!0;let l,h;for(l=0,h=r.skips.length;l<h;l++)if(r.skips[l].test(f))return!1;for(l=0,h=r.names.length;l<h;l++)if(r.names[l].test(f))return!0;return!1}function a(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function c(f){return f instanceof Error?f.stack||f.message:f}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}O0.exports=id});var K0=lt((se,Ci)=>{se.formatArgs=sd;se.save=ad;se.load=cd;se.useColors=od;se.storage=ud();se.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();se.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function od(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function sd(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+Ci.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}se.log=console.debug||console.log||(()=>{});function ad(t){try{t?se.storage.setItem("debug",t):se.storage.removeItem("debug")}catch{}}function cd(){let t;try{t=se.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function ud(){try{return localStorage}catch{}}Ci.exports=F0()(se);var{formatters:fd}=Ci.exports;fd.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var gt=lt((Fw,Nc)=>{Nc.exports={options:{usePureJavaScript:!1}}});var Pc=lt((Kw,Lc)=>{var Fs={};Lc.exports=Fs;var Dc={};Fs.encode=function(t,e,r){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(t instanceof Uint8Array))n=Hp(t,e);else{var i=0,o=e.length,s=e.charAt(0),a=[0];for(i=0;i<t.length;++i){for(var c=0,u=t[i];c<a.length;++c)u+=a[c]<<8,a[c]=u%o,u=u/o|0;for(;u>0;)a.push(u%o),u=u/o|0}for(i=0;t[i]===0&&i<t.length-1;++i)n+=s;for(i=a.length-1;i>=0;--i)n+=e[a[i]]}if(r){var f=new RegExp(".{1,"+r+"}","g");n=n.match(f).join(`\r
`)}return n};Fs.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var r=Dc[e];if(!r){r=Dc[e]=[];for(var n=0;n<e.length;++n)r[e.charCodeAt(n)]=n}t=t.replace(/\s/g,"");for(var i=e.length,o=e.charAt(0),s=[0],n=0;n<t.length;n++){var a=r[t.charCodeAt(n)];if(a===void 0)return;for(var c=0,u=a;c<s.length;++c)u+=s[c]*i,s[c]=u&255,u>>=8;for(;u>0;)s.push(u&255),u>>=8}for(var f=0;t[f]===o&&f<t.length-1;++f)s.push(0);return typeof Buffer<"u"?Buffer.from(s.reverse()):new Uint8Array(s.reverse())};function Hp(t,e){var r=0,n=e.length,i=e.charAt(0),o=[0];for(r=0;r<t.length();++r){for(var s=0,a=t.at(r);s<o.length;++s)a+=o[s]<<8,o[s]=a%n,a=a/n|0;for(;a>0;)o.push(a%n),a=a/n|0}var c="";for(r=0;t.at(r)===0&&r<t.length()-1;++r)c+=i;for(r=o.length-1;r>=0;--r)c+=e[o[r]];return c}});var kt=lt((Mw,Fc)=>{var kc=gt(),Uc=Pc(),x=Fc.exports=kc.util=kc.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){x.nextTick=process.nextTick,typeof setImmediate=="function"?x.setImmediate=setImmediate:x.setImmediate=x.nextTick;return}if(typeof setImmediate=="function"){x.setImmediate=function(){return setImmediate.apply(void 0,arguments)},x.nextTick=function(a){return setImmediate(a)};return}if(x.setImmediate=function(a){setTimeout(a,0)},typeof window<"u"&&typeof window.postMessage=="function"){let a=function(c){if(c.source===window&&c.data===t){c.stopPropagation();var u=e.slice();e.length=0,u.forEach(function(f){f()})}};var s=a,t="forge.setImmediate",e=[];x.setImmediate=function(c){e.push(c),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",a,!0)}if(typeof MutationObserver<"u"){var r=Date.now(),n=!0,i=document.createElement("div"),e=[];new MutationObserver(function(){var c=e.slice();e.length=0,c.forEach(function(u){u()})}).observe(i,{attributes:!0});var o=x.setImmediate;x.setImmediate=function(c){Date.now()-r>15?(r=Date.now(),o(c)):(e.push(c),e.length===1&&i.setAttribute("a",n=!n))}}x.nextTick=x.setImmediate})();x.isNodejs=typeof process<"u"&&process.versions&&process.versions.node;x.globalScope=function(){return x.isNodejs?globalThis:typeof self>"u"?window:self}();x.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};x.isArrayBuffer=function(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer};x.isArrayBufferView=function(t){return t&&x.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function zn(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}x.ByteBuffer=Ks;function Ks(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(x.isArrayBuffer(t)||x.isArrayBufferView(t))if(typeof Buffer<"u"&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch{for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof Ks||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}x.ByteStringBuffer=Ks;var Gp=4096;x.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>Gp&&(this.data.substr(0,1),this._constructedStringLength=0)};x.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};x.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};x.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};x.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this};x.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};x.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(x.encodeUtf8(t))};x.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};x.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};x.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};x.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};x.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};x.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};x.ByteStringBuffer.prototype.putInt=function(t,e){zn(e);var r="";do e-=8,r+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(r)};x.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};x.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};x.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};x.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};x.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};x.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};x.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};x.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};x.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};x.ByteStringBuffer.prototype.getInt=function(t){zn(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};x.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};x.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};x.ByteStringBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};x.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};x.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};x.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};x.ByteStringBuffer.prototype.copy=function(){var t=x.createBuffer(this.data);return t.read=this.read,t};x.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};x.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};x.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};x.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t};x.ByteStringBuffer.prototype.toString=function(){return x.decodeUtf8(this.bytes())};function $p(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=x.isArrayBuffer(t),n=x.isArrayBufferView(t);if(r||n){r?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}x.DataBuffer=$p;x.DataBuffer.prototype.length=function(){return this.write-this.read};x.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};x.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this};x.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};x.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this};x.DataBuffer.prototype.putBytes=function(t,e){if(x.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(x.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof x.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&x.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var i=new Uint8Array(t.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(t instanceof x.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var o;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),o=new Uint8Array(this.data.buffer,this.write),this.write+=x.binary.hex.decode(t,o,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),o=new Uint8Array(this.data.buffer,this.write),this.write+=x.binary.base64.decode(t,o,this.write),this;if(e==="utf8"&&(t=x.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),o=new Uint8Array(this.data.buffer,this.write),this.write+=x.binary.raw.decode(o),this;if(e==="utf16")return this.accommodate(t.length*2),o=new Uint16Array(this.data.buffer,this.write),this.write+=x.text.utf16.encode(o),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};x.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};x.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};x.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};x.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};x.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};x.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};x.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};x.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};x.DataBuffer.prototype.putInt=function(t,e){zn(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};x.DataBuffer.prototype.putSignedInt=function(t,e){return zn(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};x.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};x.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};x.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};x.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};x.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};x.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};x.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};x.DataBuffer.prototype.getInt=function(t){zn(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};x.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};x.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};x.DataBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};x.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};x.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};x.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};x.DataBuffer.prototype.copy=function(){return new x.DataBuffer(this)};x.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};x.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};x.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};x.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t};x.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return x.binary.raw.encode(e);if(t==="hex")return x.binary.hex.encode(e);if(t==="base64")return x.binary.base64.encode(e);if(t==="utf8")return x.text.utf8.decode(e);if(t==="utf16")return x.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};x.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=x.encodeUtf8(t)),new x.ByteBuffer(t)};x.fillString=function(t,e){for(var r="";e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return r};x.xorBytes=function(t,e,r){for(var n="",i="",o="",s=0,a=0;r>0;--r,++s)i=t.charCodeAt(s)^e.charCodeAt(s),a>=10&&(n+=o,o="",a=0),o+=String.fromCharCode(i),++a;return n+=o,n};x.hexToBytes=function(t){var e="",r=0;for(t.length&!0&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e};x.bytesToHex=function(t){return x.createBuffer(t).toHex()};x.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var yr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",gr=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],Oc="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";x.encode64=function(t,e){for(var r="",n="",i,o,s,a=0;a<t.length;)i=t.charCodeAt(a++),o=t.charCodeAt(a++),s=t.charCodeAt(a++),r+=yr.charAt(i>>2),r+=yr.charAt((i&3)<<4|o>>4),isNaN(o)?r+="==":(r+=yr.charAt((o&15)<<2|s>>6),r+=isNaN(s)?"=":yr.charAt(s&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};x.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",r,n,i,o,s=0;s<t.length;)r=gr[t.charCodeAt(s++)-43],n=gr[t.charCodeAt(s++)-43],i=gr[t.charCodeAt(s++)-43],o=gr[t.charCodeAt(s++)-43],e+=String.fromCharCode(r<<2|n>>4),i!==64&&(e+=String.fromCharCode((n&15)<<4|i>>2),o!==64&&(e+=String.fromCharCode((i&3)<<6|o)));return e};x.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};x.decodeUtf8=function(t){return decodeURIComponent(escape(t))};x.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:Uc.encode,decode:Uc.decode}};x.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};x.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n};x.binary.hex.encode=x.bytesToHex;x.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var i=0,o=r;for(t.length&1&&(i=1,n[o++]=parseInt(t[0],16));i<t.length;i+=2)n[o++]=parseInt(t.substr(i,2),16);return e?o-r:n};x.binary.base64.encode=function(t,e){for(var r="",n="",i,o,s,a=0;a<t.byteLength;)i=t[a++],o=t[a++],s=t[a++],r+=yr.charAt(i>>2),r+=yr.charAt((i&3)<<4|o>>4),isNaN(o)?r+="==":(r+=yr.charAt((o&15)<<2|s>>6),r+=isNaN(s)?"=":yr.charAt(s&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};x.binary.base64.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,o,s,a,c=0,u=r;c<t.length;)i=gr[t.charCodeAt(c++)-43],o=gr[t.charCodeAt(c++)-43],s=gr[t.charCodeAt(c++)-43],a=gr[t.charCodeAt(c++)-43],n[u++]=i<<2|o>>4,s!==64&&(n[u++]=(o&15)<<4|s>>2,a!==64&&(n[u++]=(s&3)<<6|a));return e?u-r:n.subarray(0,u)};x.binary.base58.encode=function(t,e){return x.binary.baseN.encode(t,Oc,e)};x.binary.base58.decode=function(t,e){return x.binary.baseN.decode(t,Oc,e)};x.text={utf8:{},utf16:{}};x.text.utf8.encode=function(t,e,r){t=x.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n};x.text.utf8.decode=function(t){return x.decodeUtf8(String.fromCharCode.apply(null,t))};x.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var o=r,s=r,a=0;a<t.length;++a)i[s++]=t.charCodeAt(a),o+=2;return e?o-r:n};x.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};x.deflate=function(t,e,r){if(e=x.decode64(t.deflate(x.encode64(e)).rval),r){var n=2,i=e.charCodeAt(1);i&32&&(n=6),e=e.substring(n,e.length-4)}return e};x.inflate=function(t,e,r){var n=t.inflate(x.encode64(e)).rval;return n===null?null:x.decode64(n)};var Ms=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(r===null?n=t.removeItem(e):(r=x.encode64(JSON.stringify(r)),n=t.setItem(e,r)),typeof n<"u"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},Vs=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(x.decode64(r))),r},Wp=function(t,e,r,n){var i=Vs(t,e);i===null&&(i={}),i[r]=n,Ms(t,e,i)},Yp=function(t,e,r){var n=Vs(t,e);return n!==null&&(n=r in n?n[r]:null),n},Zp=function(t,e,r){var n=Vs(t,e);if(n!==null&&r in n){delete n[r];var i=!0;for(var o in n){i=!1;break}i&&(n=null),Ms(t,e,n)}},Qp=function(t,e){Ms(t,e,null)},Ui=function(t,e,r){var n=null;typeof r>"u"&&(r=["web","flash"]);var i,o=!1,s=null;for(var a in r){i=r[a];try{if(i==="flash"||i==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");n=t.apply(this,e),o=i==="flash"}(i==="web"||i==="both")&&(e[0]=localStorage,n=t.apply(this,e),o=!0)}catch(c){s=c}if(o)break}if(!o)throw s;return n};x.setItem=function(t,e,r,n,i){Ui(Wp,arguments,i)};x.getItem=function(t,e,r,n){return Ui(Yp,arguments,n)};x.removeItem=function(t,e,r,n){Ui(Zp,arguments,n)};x.clearItems=function(t,e,r){Ui(Qp,arguments,r)};x.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};x.format=function(t){for(var e=/%./g,r,n,i=0,o=[],s=0;r=e.exec(t);){n=t.substring(s,e.lastIndex-2),n.length>0&&o.push(n),s=e.lastIndex;var a=r[0][1];switch(a){case"s":case"o":i<arguments.length?o.push(arguments[i+++1]):o.push("<?>");break;case"%":o.push("%");break;default:o.push("<%"+a+"?>")}}return o.push(t.substring(s)),o.join("")};x.formatNumber=function(t,e,r,n){var i=t,o=isNaN(e=Math.abs(e))?2:e,s=r===void 0?",":r,a=n===void 0?".":n,c=i<0?"-":"",u=parseInt(i=Math.abs(+i||0).toFixed(o),10)+"",f=u.length>3?u.length%3:0;return c+(f?u.substr(0,f)+a:"")+u.substr(f).replace(/(\d{3})(?=\d)/g,"$1"+a)+(o?s+Math.abs(i-u).toFixed(o).slice(2):"")};x.formatSize=function(t){return t>=1073741824?t=x.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=x.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=x.formatNumber(t/1024,0)+" KiB":t=x.formatNumber(t,0)+" bytes",t};x.bytesFromIP=function(t){return t.indexOf(".")!==-1?x.bytesFromIPv4(t):t.indexOf(":")!==-1?x.bytesFromIPv6(t):null};x.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=x.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()};x.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(s){return s.length===0&&++e,!0});for(var r=(8-t.length+e)*2,n=x.createBuffer(),i=0;i<8;++i){if(!t[i]||t[i].length===0){n.fillWithByte(0,r),r=0;continue}var o=x.hexToBytes(t[i]);o.length<2&&n.putByte(0),n.putBytes(o)}return n.getBytes()};x.bytesToIP=function(t){return t.length===4?x.bytesToIPv4(t):t.length===16?x.bytesToIPv6(t):null};x.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")};x.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],r=[],n=0,i=0;i<t.length;i+=2){for(var o=x.bytesToHex(t[i]+t[i+1]);o[0]==="0"&&o!=="0";)o=o.substr(1);if(o==="0"){var s=r[r.length-1],a=e.length;!s||a!==s.end+1?r.push({start:a,end:a}):(s.end=a,s.end-s.start>r[n].end-r[n].start&&(n=r.length-1))}e.push(o)}if(r.length>0){var c=r[n];c.end-c.start>0&&(e.splice(c.start,c.end-c.start+1,""),c.start===0&&e.unshift(""),c.end===7&&e.push(""))}return e.join(":")};x.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in x&&!t.update)return e(null,x.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return x.cores=navigator.hardwareConcurrency,e(null,x.cores);if(typeof Worker>"u")return x.cores=1,e(null,x.cores);if(typeof Blob>"u")return x.cores=2,e(null,x.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(s){for(var a=Date.now(),c=a+4;Date.now()<c;);self.postMessage({st:a,et:c})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(s,a,c){if(a===0){var u=Math.floor(s.reduce(function(f,l){return f+l},0)/s.length);return x.cores=Math.max(1,u),URL.revokeObjectURL(r),e(null,x.cores)}i(c,function(f,l){s.push(o(c,l)),n(s,a-1,c)})}function i(s,a){for(var c=[],u=[],f=0;f<s;++f){var l=new Worker(r);l.addEventListener("message",function(h){if(u.push(h.data),u.length===s){for(var g=0;g<s;++g)c[g].terminate();a(null,u)}}),c.push(l)}for(var f=0;f<s;++f)c[f].postMessage(f)}function o(s,a){for(var c=[],u=0;u<s;++u)for(var f=a[u],l=c[u]=[],h=0;h<s;++h)if(u!==h){var g=a[h];(f.st>g.st&&f.st<g.et||g.st>f.st&&g.st<f.et)&&l.push(h)}return c.reduce(function(d,p){return Math.max(d,p.length)},0)}}});var Oi=lt((Vw,Kc)=>{var Hn=gt();Hn.pki=Hn.pki||{};var qs=Kc.exports=Hn.pki.oids=Hn.oids=Hn.oids||{};function D(t,e){qs[t]=e,qs[e]=t}function dt(t,e){qs[t]=e}D("1.2.840.113549.1.1.1","rsaEncryption");D("1.2.840.113549.1.1.4","md5WithRSAEncryption");D("1.2.840.113549.1.1.5","sha1WithRSAEncryption");D("1.2.840.113549.1.1.7","RSAES-OAEP");D("1.2.840.113549.1.1.8","mgf1");D("1.2.840.113549.1.1.9","pSpecified");D("1.2.840.113549.1.1.10","RSASSA-PSS");D("1.2.840.113549.1.1.11","sha256WithRSAEncryption");D("1.2.840.113549.1.1.12","sha384WithRSAEncryption");D("1.2.840.113549.1.1.13","sha512WithRSAEncryption");D("1.3.101.112","EdDSA25519");D("1.2.840.10040.4.3","dsa-with-sha1");D("1.3.14.3.2.7","desCBC");D("1.3.14.3.2.26","sha1");D("1.3.14.3.2.29","sha1WithRSASignature");D("2.16.840.1.101.3.4.2.1","sha256");D("2.16.840.1.101.3.4.2.2","sha384");D("2.16.840.1.101.3.4.2.3","sha512");D("2.16.840.1.101.3.4.2.4","sha224");D("2.16.840.1.101.3.4.2.5","sha512-224");D("2.16.840.1.101.3.4.2.6","sha512-256");D("1.2.840.113549.2.2","md2");D("1.2.840.113549.2.5","md5");D("1.2.840.113549.1.7.1","data");D("1.2.840.113549.1.7.2","signedData");D("1.2.840.113549.1.7.3","envelopedData");D("1.2.840.113549.1.7.4","signedAndEnvelopedData");D("1.2.840.113549.1.7.5","digestedData");D("1.2.840.113549.1.7.6","encryptedData");D("1.2.840.113549.1.9.1","emailAddress");D("1.2.840.113549.1.9.2","unstructuredName");D("1.2.840.113549.1.9.3","contentType");D("1.2.840.113549.1.9.4","messageDigest");D("1.2.840.113549.1.9.5","signingTime");D("1.2.840.113549.1.9.6","counterSignature");D("1.2.840.113549.1.9.7","challengePassword");D("1.2.840.113549.1.9.8","unstructuredAddress");D("1.2.840.113549.1.9.14","extensionRequest");D("1.2.840.113549.1.9.20","friendlyName");D("1.2.840.113549.1.9.21","localKeyId");D("1.2.840.113549.1.9.22.1","x509Certificate");D("1.2.840.113549.1.12.10.1.1","keyBag");D("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");D("1.2.840.113549.1.12.10.1.3","certBag");D("1.2.840.113549.1.12.10.1.4","crlBag");D("1.2.840.113549.1.12.10.1.5","secretBag");D("1.2.840.113549.1.12.10.1.6","safeContentsBag");D("1.2.840.113549.1.5.13","pkcs5PBES2");D("1.2.840.113549.1.5.12","pkcs5PBKDF2");D("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");D("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");D("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");D("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");D("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");D("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");D("1.2.840.113549.2.7","hmacWithSHA1");D("1.2.840.113549.2.8","hmacWithSHA224");D("1.2.840.113549.2.9","hmacWithSHA256");D("1.2.840.113549.2.10","hmacWithSHA384");D("1.2.840.113549.2.11","hmacWithSHA512");D("1.2.840.113549.3.7","des-EDE3-CBC");D("2.16.840.1.101.3.4.1.2","aes128-CBC");D("2.16.840.1.101.3.4.1.22","aes192-CBC");D("2.16.840.1.101.3.4.1.42","aes256-CBC");D("2.5.4.3","commonName");D("2.5.4.4","surname");D("2.5.4.5","serialNumber");D("2.5.4.6","countryName");D("2.5.4.7","localityName");D("2.5.4.8","stateOrProvinceName");D("2.5.4.9","streetAddress");D("2.5.4.10","organizationName");D("2.5.4.11","organizationalUnitName");D("2.5.4.12","title");D("2.5.4.13","description");D("2.5.4.15","businessCategory");D("2.5.4.17","postalCode");D("2.5.4.42","givenName");D("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");D("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");D("2.16.840.1.113730.1.1","nsCertType");D("2.16.840.1.113730.1.13","nsComment");dt("2.5.29.1","authorityKeyIdentifier");dt("2.5.29.2","keyAttributes");dt("2.5.29.3","certificatePolicies");dt("2.5.29.4","keyUsageRestriction");dt("2.5.29.5","policyMapping");dt("2.5.29.6","subtreesConstraint");dt("2.5.29.7","subjectAltName");dt("2.5.29.8","issuerAltName");dt("2.5.29.9","subjectDirectoryAttributes");dt("2.5.29.10","basicConstraints");dt("2.5.29.11","nameConstraints");dt("2.5.29.12","policyConstraints");dt("2.5.29.13","basicConstraints");D("2.5.29.14","subjectKeyIdentifier");D("2.5.29.15","keyUsage");dt("2.5.29.16","privateKeyUsagePeriod");D("2.5.29.17","subjectAltName");D("2.5.29.18","issuerAltName");D("2.5.29.19","basicConstraints");dt("2.5.29.20","cRLNumber");dt("2.5.29.21","cRLReason");dt("2.5.29.22","expirationDate");dt("2.5.29.23","instructionCode");dt("2.5.29.24","invalidityDate");dt("2.5.29.25","cRLDistributionPoints");dt("2.5.29.26","issuingDistributionPoint");dt("2.5.29.27","deltaCRLIndicator");dt("2.5.29.28","issuingDistributionPoint");dt("2.5.29.29","certificateIssuer");dt("2.5.29.30","nameConstraints");D("2.5.29.31","cRLDistributionPoints");D("2.5.29.32","certificatePolicies");dt("2.5.29.33","policyMappings");dt("2.5.29.34","policyConstraints");D("2.5.29.35","authorityKeyIdentifier");dt("2.5.29.36","policyConstraints");D("2.5.29.37","extKeyUsage");dt("2.5.29.46","freshestCRL");dt("2.5.29.54","inhibitAnyPolicy");D("1.3.6.1.4.1.11129.2.4.2","timestampList");D("1.3.6.1.5.5.7.1.1","authorityInfoAccess");D("1.3.6.1.5.5.7.3.1","serverAuth");D("1.3.6.1.5.5.7.3.2","clientAuth");D("1.3.6.1.5.5.7.3.3","codeSigning");D("1.3.6.1.5.5.7.3.4","emailProtection");D("1.3.6.1.5.5.7.3.8","timeStamping")});var $n=lt((qw,Vc)=>{var bt=gt();kt();Oi();var M=Vc.exports=bt.asn1=bt.asn1||{};M.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};M.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};M.create=function(t,e,r,n,i){if(bt.util.isArray(n)){for(var o=[],s=0;s<n.length;++s)n[s]!==void 0&&o.push(n[s]);n=o}var a={tagClass:t,type:e,constructed:r,composed:r||bt.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(a.bitStringContents=i.bitStringContents,a.original=M.copy(a)),a};M.copy=function(t,e){var r;if(bt.util.isArray(t)){r=[];for(var n=0;n<t.length;++n)r.push(M.copy(t[n],e));return r}return typeof t=="string"?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:M.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)};M.equals=function(t,e,r){if(bt.util.isArray(t)){if(!bt.util.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!M.equals(t[n],e[n]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var i=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&M.equals(t.value,e.value);return r&&r.includeBitStringContents&&(i=i&&t.bitStringContents===e.bitStringContents),i};M.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var r,n=e&128;return n?r=t.getInt((e&127)<<3):r=e,r}};function Gn(t,e,r){if(r>e){var n=new Error("Too few bytes to parse DER.");throw n.available=t.length(),n.remaining=e,n.requested=r,n}}var Xp=function(t,e){var r=t.getByte();if(e--,r!==128){var n,i=r&128;if(!i)n=r;else{var o=r&127;Gn(t,e,o),n=t.getInt(o<<3)}if(n<0)throw new Error("Negative length: "+n);return n}};M.fromDer=function(t,e){e===void 0&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=bt.util.createBuffer(t));var r=t.length(),n=Fi(t,t.length(),0,e);if(e.parseAllBytes&&t.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=t.length(),i}return n};function Fi(t,e,r,n){var i;Gn(t,e,2);var o=t.getByte();e--;var s=o&192,a=o&31;i=t.length();var c=Xp(t,e);if(e-=i-t.length(),c!==void 0&&c>e){if(n.strict){var u=new Error("Too few bytes to read ASN.1 value.");throw u.available=t.length(),u.remaining=e,u.requested=c,u}c=e}var f,l,h=(o&32)===32;if(h)if(f=[],c===void 0)for(;;){if(Gn(t,e,2),t.bytes(2)==="\0\0"){t.getBytes(2),e-=2;break}i=t.length(),f.push(Fi(t,e,r+1,n)),e-=i-t.length()}else for(;c>0;)i=t.length(),f.push(Fi(t,c,r+1,n)),e-=i-t.length(),c-=i-t.length();if(f===void 0&&s===M.Class.UNIVERSAL&&a===M.Type.BITSTRING&&(l=t.bytes(c)),f===void 0&&n.decodeBitStrings&&s===M.Class.UNIVERSAL&&a===M.Type.BITSTRING&&c>1){var g=t.read,d=e,p=0;if(a===M.Type.BITSTRING&&(Gn(t,e,1),p=t.getByte(),e--),p===0)try{i=t.length();var y={strict:!0,decodeBitStrings:!0},m=Fi(t,e,r+1,y),w=i-t.length();e-=w,a==M.Type.BITSTRING&&w++;var b=m.tagClass;w===c&&(b===M.Class.UNIVERSAL||b===M.Class.CONTEXT_SPECIFIC)&&(f=[m])}catch{}f===void 0&&(t.read=g,e=d)}if(f===void 0){if(c===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");c=e}if(a===M.Type.BMPSTRING)for(f="";c>0;c-=2)Gn(t,e,2),f+=String.fromCharCode(t.getInt16()),e-=2;else f=t.getBytes(c),e-=c}var L=l===void 0?null:{bitStringContents:l};return M.create(s,a,h,f,L)}M.toDer=function(t){var e=bt.util.createBuffer(),r=t.tagClass|t.type,n=bt.util.createBuffer(),i=!1;if("bitStringContents"in t&&(i=!0,t.original&&(i=M.equals(t,t.original))),i)n.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:n.putByte(0);for(var o=0;o<t.value.length;++o)t.value[o]!==void 0&&n.putBuffer(M.toDer(t.value[o]))}else if(t.type===M.Type.BMPSTRING)for(var o=0;o<t.value.length;++o)n.putInt16(t.value.charCodeAt(o));else t.type===M.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&!(t.value.charCodeAt(1)&128)||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)===128)?n.putBytes(t.value.substr(1)):n.putBytes(t.value);if(e.putByte(r),n.length()<=127)e.putByte(n.length()&127);else{var s=n.length(),a="";do a+=String.fromCharCode(s&255),s=s>>>8;while(s>0);e.putByte(a.length|128);for(var o=a.length-1;o>=0;--o)e.putByte(a.charCodeAt(o))}return e.putBuffer(n),e};M.oidToDer=function(t){var e=t.split("."),r=bt.util.createBuffer();r.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var n,i,o,s,a=2;a<e.length;++a){n=!0,i=[],o=parseInt(e[a],10);do s=o&127,o=o>>>7,n||(s|=128),i.push(s),n=!1;while(o>0);for(var c=i.length-1;c>=0;--c)r.putByte(i[c])}return r};M.derToOid=function(t){var e;typeof t=="string"&&(t=bt.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var n=0;t.length()>0;)r=t.getByte(),n=n<<7,r&128?n+=r&127:(e+="."+(n+r),n=0);return e};M.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(t.substr(2,2),10)-1,i=parseInt(t.substr(4,2),10),o=parseInt(t.substr(6,2),10),s=parseInt(t.substr(8,2),10),a=0;if(t.length>11){var c=t.charAt(10),u=10;c!=="+"&&c!=="-"&&(a=parseInt(t.substr(10,2),10),u+=2)}if(e.setUTCFullYear(r,n,i),e.setUTCHours(o,s,a,0),u&&(c=t.charAt(u),c==="+"||c==="-")){var f=parseInt(t.substr(u+1,2),10),l=parseInt(t.substr(u+4,2),10),h=f*60+l;h*=6e4,c==="+"?e.setTime(+e-h):e.setTime(+e+h)}return e};M.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),o=parseInt(t.substr(8,2),10),s=parseInt(t.substr(10,2),10),a=parseInt(t.substr(12,2),10),c=0,u=0,f=!1;t.charAt(t.length-1)==="Z"&&(f=!0);var l=t.length-5,h=t.charAt(l);if(h==="+"||h==="-"){var g=parseInt(t.substr(l+1,2),10),d=parseInt(t.substr(l+4,2),10);u=g*60+d,u*=6e4,h==="+"&&(u*=-1),f=!0}return t.charAt(14)==="."&&(c=parseFloat(t.substr(14),10)*1e3),f?(e.setUTCFullYear(r,n,i),e.setUTCHours(o,s,a,c),e.setTime(+e+u)):(e.setFullYear(r,n,i),e.setHours(o,s,a,c)),e};M.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};M.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};M.integerToDer=function(t){var e=bt.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r};M.derToInteger=function(t){typeof t=="string"&&(t=bt.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};M.validate=function(t,e,r,n){var i=!1;if((t.tagClass===e.tagClass||typeof e.tagClass>"u")&&(t.type===e.type||typeof e.type>"u"))if(t.constructed===e.constructed||typeof e.constructed>"u"){if(i=!0,e.value&&bt.util.isArray(e.value))for(var o=0,s=0;i&&s<e.value.length;++s)i=e.value[s].optional||!1,t.value[o]&&(i=M.validate(t.value[o],e.value[s],r,n),i?++o:e.value[s].optional&&(i=!0)),!i&&n&&n.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(i&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)){var a;if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{var c=t.bitStringContents.charCodeAt(0);if(c!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}}else n&&n.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else n&&(t.tagClass!==e.tagClass&&n.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&n.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return i};var Mc=/[^\\u0000-\\u00ff]/;M.prettyPrint=function(t,e,r){var n="";e=e||0,r=r||2,e>0&&(n+=`
`);for(var i="",o=0;o<e*r;++o)i+=" ";switch(n+=i+"Tag: ",t.tagClass){case M.Class.UNIVERSAL:n+="Universal:";break;case M.Class.APPLICATION:n+="Application:";break;case M.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case M.Class.PRIVATE:n+="Private:";break}if(t.tagClass===M.Class.UNIVERSAL)switch(n+=t.type,t.type){case M.Type.NONE:n+=" (None)";break;case M.Type.BOOLEAN:n+=" (Boolean)";break;case M.Type.INTEGER:n+=" (Integer)";break;case M.Type.BITSTRING:n+=" (Bit string)";break;case M.Type.OCTETSTRING:n+=" (Octet string)";break;case M.Type.NULL:n+=" (Null)";break;case M.Type.OID:n+=" (Object Identifier)";break;case M.Type.ODESC:n+=" (Object Descriptor)";break;case M.Type.EXTERNAL:n+=" (External or Instance of)";break;case M.Type.REAL:n+=" (Real)";break;case M.Type.ENUMERATED:n+=" (Enumerated)";break;case M.Type.EMBEDDED:n+=" (Embedded PDV)";break;case M.Type.UTF8:n+=" (UTF8)";break;case M.Type.ROID:n+=" (Relative Object Identifier)";break;case M.Type.SEQUENCE:n+=" (Sequence)";break;case M.Type.SET:n+=" (Set)";break;case M.Type.PRINTABLESTRING:n+=" (Printable String)";break;case M.Type.IA5String:n+=" (IA5String (ASCII))";break;case M.Type.UTCTIME:n+=" (UTC time)";break;case M.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case M.Type.BMPSTRING:n+=" (BMP String)";break}else n+=t.type;if(n+=`
`,n+=i+"Constructed: "+t.constructed+`
`,t.composed){for(var s=0,a="",o=0;o<t.value.length;++o)t.value[o]!==void 0&&(s+=1,a+=M.prettyPrint(t.value[o],e+1,r),o+1<t.value.length&&(a+=","));n+=i+"Sub values: "+s+a}else{if(n+=i+"Value: ",t.type===M.Type.OID){var c=M.derToOid(t.value);n+=c,bt.pki&&bt.pki.oids&&c in bt.pki.oids&&(n+=" ("+bt.pki.oids[c]+") ")}if(t.type===M.Type.INTEGER)try{n+=M.derToInteger(t.value)}catch{n+="0x"+bt.util.bytesToHex(t.value)}else if(t.type===M.Type.BITSTRING){if(t.value.length>1?n+="0x"+bt.util.bytesToHex(t.value.slice(1)):n+="(none)",t.value.length>0){var u=t.value.charCodeAt(0);u==1?n+=" (1 unused bit shown)":u>1&&(n+=" ("+u+" unused bits shown)")}}else if(t.type===M.Type.OCTETSTRING)Mc.test(t.value)||(n+="("+t.value+") "),n+="0x"+bt.util.bytesToHex(t.value);else if(t.type===M.Type.UTF8)try{n+=bt.util.decodeUtf8(t.value)}catch(f){if(f.message==="URI malformed")n+="0x"+bt.util.bytesToHex(t.value)+" (malformed UTF8)";else throw f}else t.type===M.Type.PRINTABLESTRING||t.type===M.Type.IA5String?n+=t.value:Mc.test(t.value)?n+="0x"+bt.util.bytesToHex(t.value):t.value.length===0?n+="[null]":n+=t.value}return n}});var Hs=lt((zw,qc)=>{var Mt=gt();kt();qc.exports=Mt.cipher=Mt.cipher||{};Mt.cipher.algorithms=Mt.cipher.algorithms||{};Mt.cipher.createCipher=function(t,e){var r=t;if(typeof r=="string"&&(r=Mt.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new Mt.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})};Mt.cipher.createDecipher=function(t,e){var r=t;if(typeof r=="string"&&(r=Mt.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new Mt.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})};Mt.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),Mt.cipher.algorithms[t]=e};Mt.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in Mt.cipher.algorithms?Mt.cipher.algorithms[t]:null};var zs=Mt.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};zs.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=Mt.util.createBuffer(),this.output=t.output||Mt.util.createBuffer(),this.mode.start(e)};zs.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};zs.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return t(this.blockSize,r,!1)},this.mode.unpad=function(r){return t(this.blockSize,r,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))}});var $s=lt((Hw,zc)=>{var Vt=gt();kt();Vt.cipher=Vt.cipher||{};var nt=zc.exports=Vt.cipher.modes=Vt.cipher.modes||{};nt.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};nt.ecb.prototype.start=function(t){};nt.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};nt.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};nt.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};nt.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};nt.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};nt.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=Ki(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};nt.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]);this._prev=this._outBlock};nt.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};nt.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};nt.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};nt.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=Vt.util.createBuffer(),this._partialBytes=0};nt.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=Ki(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};nt.cfb.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};nt.cfb.prototype.decrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};nt.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Vt.util.createBuffer(),this._partialBytes=0};nt.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=Ki(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};nt.ofb.prototype.encrypt=function(t,e,r){var n=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};nt.ofb.prototype.decrypt=nt.ofb.prototype.encrypt;nt.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Vt.util.createBuffer(),this._partialBytes=0};nt.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=Ki(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};nt.ctr.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]);else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}Mi(this._inBlock)};nt.ctr.prototype.decrypt=nt.ctr.prototype.encrypt;nt.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=Vt.util.createBuffer(),this._partialBytes=0,this._R=3774873600};nt.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=Vt.util.createBuffer(t.iv);this._cipherLength=0;var r;if("additionalData"in t?r=Vt.util.createBuffer(t.additionalData):r=Vt.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=Vt.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=e.length();if(n===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(Gs(n*8)))}this._inBlock=this._j0.slice(0),Mi(this._inBlock),this._partialBytes=0,r=Vt.util.createBuffer(r),this._aDataLength=Gs(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};nt.gcm.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^=t.getInt32());this._cipherLength+=this.blockSize}else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o<=0||r){if(r){var s=n%this.blockSize;this._cipherLength+=s,this._partialOutput.truncate(this.blockSize-s)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),Mi(this._inBlock)};nt.gcm.prototype.decrypt=function(t,e,r){var n=t.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),Mi(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};nt.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=Vt.util.createBuffer();var n=this._aDataLength.concat(Gs(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var o=0;o<this._ints;++o)this.tag.putInt32(this._s[o]^i[o]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};nt.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],n=e.slice(0),i=0;i<128;++i){var o=t[i/32|0]&1<<31-i%32;o&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};nt.gcm.prototype.pow=function(t,e){for(var r=t[3]&1,n=3;n>0;--n)e[n]=t[n]>>>1|(t[n-1]&1)<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)};nt.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=t[n]>>>(7-r%8)*4&15,o=this._m[r][i];e[0]^=o[0],e[1]^=o[1],e[2]^=o[2],e[3]^=o[3]}return e};nt.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)};nt.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,n=4*r,i=16*r,o=new Array(i),s=0;s<i;++s){var a=[0,0,0,0],c=s/n|0,u=(n-1-s%n)*e;a[c]=1<<e-1<<u,o[s]=this.generateSubHashTable(this.multiply(a,t),e)}return o};nt.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,n=r>>>1,i=new Array(r);i[n]=t.slice(0);for(var o=n>>>1;o>0;)this.pow(i[2*o],i[o]=[]),o>>=1;for(o=2;o<n;){for(var s=1;s<o;++s){var a=i[o],c=i[s];i[o+s]=[a[0]^c[0],a[1]^c[1],a[2]^c[2],a[3]^c[3]]}o*=2}for(i[0]=[0,0,0,0],o=n+1;o<r;++o){var u=i[o^n];i[o]=[t[0]^u[0],t[1]^u[1],t[2]^u[2],t[3]^u[3]]}return i};function Ki(t,e){if(typeof t=="string"&&(t=Vt.util.createBuffer(t)),Vt.util.isArray(t)&&t.length>4){var r=t;t=Vt.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!Vt.util.isArray(t)){for(var i=[],o=e/4,n=0;n<o;++n)i.push(t.getInt32());t=i}return t}function Mi(t){t[t.length-1]=t[t.length-1]+1&4294967295}function Gs(t){return[t/4294967296|0,t&4294967295]}});var Qs=lt((Gw,Wc)=>{var vt=gt();Hs();$s();kt();Wc.exports=vt.aes=vt.aes||{};vt.aes.startEncrypting=function(t,e,r,n){var i=Vi({key:t,output:r,decrypt:!1,mode:n});return i.start(e),i};vt.aes.createEncryptionCipher=function(t,e){return Vi({key:t,output:null,decrypt:!1,mode:e})};vt.aes.startDecrypting=function(t,e,r,n){var i=Vi({key:t,output:r,decrypt:!0,mode:n});return i.start(e),i};vt.aes.createDecryptionCipher=function(t,e){return Vi({key:t,output:null,decrypt:!0,mode:e})};vt.aes.Algorithm=function(t,e){Zs||Gc();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:function(n,i){return Ys(r._w,n,i,!1)},decrypt:function(n,i){return Ys(r._w,n,i,!0)}}}),r._init=!1};vt.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,r;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=vt.util.createBuffer(e);else if(vt.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){r=e,e=vt.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(!vt.util.isArray(e)){r=e,e=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)e.push(r.getInt32())}}if(!vt.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var o=this.mode.name,s=["CFB","OFB","CTR","GCM"].indexOf(o)!==-1;this._w=$c(e,t.decrypt&&!s),this._init=!0}};vt.aes._expandKey=function(t,e){return Zs||Gc(),$c(t,e)};vt.aes._updateBlock=Ys;yn("AES-ECB",vt.cipher.modes.ecb);yn("AES-CBC",vt.cipher.modes.cbc);yn("AES-CFB",vt.cipher.modes.cfb);yn("AES-OFB",vt.cipher.modes.ofb);yn("AES-CTR",vt.cipher.modes.ctr);yn("AES-GCM",vt.cipher.modes.gcm);function yn(t,e){var r=function(){return new vt.aes.Algorithm(t,e)};vt.cipher.registerAlgorithm(t,r)}var Zs=!1,pn=4,jt,Ws,Hc,kr,Be;function Gc(){Zs=!0,Hc=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;jt=new Array(256),Ws=new Array(256),kr=new Array(4),Be=new Array(4);for(var e=0;e<4;++e)kr[e]=new Array(256),Be[e]=new Array(256);for(var r=0,n=0,i,o,s,a,c,u,f,e=0;e<256;++e){a=n^n<<1^n<<2^n<<3^n<<4,a=a>>8^a&255^99,jt[r]=a,Ws[a]=r,c=t[a],i=t[r],o=t[i],s=t[o],u=c<<24^a<<16^a<<8^(a^c),f=(i^o^s)<<24^(r^s)<<16^(r^o^s)<<8^(r^i^s);for(var l=0;l<4;++l)kr[l][r]=u,Be[l][a]=f,u=u<<24|u>>>8,f=f<<24|f>>>8;r===0?r=n=1:(r=i^t[t[t[i^s]]],n^=t[t[n]])}}function $c(t,e){for(var r=t.slice(0),n,i=1,o=r.length,s=o+6+1,a=pn*s,c=o;c<a;++c)n=r[c-1],c%o===0?(n=jt[n>>>16&255]<<24^jt[n>>>8&255]<<16^jt[n&255]<<8^jt[n>>>24]^Hc[i]<<24,i++):o>6&&c%o===4&&(n=jt[n>>>24]<<24^jt[n>>>16&255]<<16^jt[n>>>8&255]<<8^jt[n&255]),r[c]=r[c-o]^n;if(e){var u,f=Be[0],l=Be[1],h=Be[2],g=Be[3],d=r.slice(0);a=r.length;for(var c=0,p=a-pn;c<a;c+=pn,p-=pn)if(c===0||c===a-pn)d[c]=r[p],d[c+1]=r[p+3],d[c+2]=r[p+2],d[c+3]=r[p+1];else for(var y=0;y<pn;++y)u=r[p+y],d[c+(3&-y)]=f[jt[u>>>24]]^l[jt[u>>>16&255]]^h[jt[u>>>8&255]]^g[jt[u&255]];r=d}return r}function Ys(t,e,r,n){var i=t.length/4-1,o,s,a,c,u;n?(o=Be[0],s=Be[1],a=Be[2],c=Be[3],u=Ws):(o=kr[0],s=kr[1],a=kr[2],c=kr[3],u=jt);var f,l,h,g,d,p,y;f=e[0]^t[0],l=e[n?3:1]^t[1],h=e[2]^t[2],g=e[n?1:3]^t[3];for(var m=3,w=1;w<i;++w)d=o[f>>>24]^s[l>>>16&255]^a[h>>>8&255]^c[g&255]^t[++m],p=o[l>>>24]^s[h>>>16&255]^a[g>>>8&255]^c[f&255]^t[++m],y=o[h>>>24]^s[g>>>16&255]^a[f>>>8&255]^c[l&255]^t[++m],g=o[g>>>24]^s[f>>>16&255]^a[l>>>8&255]^c[h&255]^t[++m],f=d,l=p,h=y;r[0]=u[f>>>24]<<24^u[l>>>16&255]<<16^u[h>>>8&255]<<8^u[g&255]^t[++m],r[n?3:1]=u[l>>>24]<<24^u[h>>>16&255]<<16^u[g>>>8&255]<<8^u[f&255]^t[++m],r[2]=u[h>>>24]<<24^u[g>>>16&255]<<16^u[f>>>8&255]<<8^u[l&255]^t[++m],r[n?1:3]=u[g>>>24]<<24^u[f>>>16&255]<<16^u[l>>>8&255]<<8^u[h&255]^t[++m]}function Vi(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="AES-"+e,n;t.decrypt?n=vt.cipher.createDecipher(r,t.key):n=vt.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(o,s){var a=null;s instanceof vt.util.ByteBuffer&&(a=s,s={}),s=s||{},s.output=a,s.iv=o,i.call(n,s)},n}});var Qc=lt(($w,Zc)=>{var Et=gt();Hs();$s();kt();Zc.exports=Et.des=Et.des||{};Et.des.startEncrypting=function(t,e,r,n){var i=qi({key:t,output:r,decrypt:!1,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};Et.des.createEncryptionCipher=function(t,e){return qi({key:t,output:null,decrypt:!1,mode:e})};Et.des.startDecrypting=function(t,e,r,n){var i=qi({key:t,output:r,decrypt:!0,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};Et.des.createDecryptionCipher=function(t,e){return qi({key:t,output:null,decrypt:!0,mode:e})};Et.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:function(n,i){return Yc(r._keys,n,i,!1)},decrypt:function(n,i){return Yc(r._keys,n,i,!0)}}}),r._init=!1};Et.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=Et.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=sy(e),this._init=!0}};Ue("DES-ECB",Et.cipher.modes.ecb);Ue("DES-CBC",Et.cipher.modes.cbc);Ue("DES-CFB",Et.cipher.modes.cfb);Ue("DES-OFB",Et.cipher.modes.ofb);Ue("DES-CTR",Et.cipher.modes.ctr);Ue("3DES-ECB",Et.cipher.modes.ecb);Ue("3DES-CBC",Et.cipher.modes.cbc);Ue("3DES-CFB",Et.cipher.modes.cfb);Ue("3DES-OFB",Et.cipher.modes.ofb);Ue("3DES-CTR",Et.cipher.modes.ctr);function Ue(t,e){var r=function(){return new Et.des.Algorithm(t,e)};Et.cipher.registerAlgorithm(t,r)}var Jp=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],jp=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],ty=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],ey=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],ry=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],ny=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],iy=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],oy=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function sy(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],o=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],s=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],a=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],u=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],f=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],l=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],h=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],g=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],d=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],p=t.length()>8?3:1,y=[],m=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],w=0,b,L=0;L<p;L++){var E=t.getInt32(),S=t.getInt32();b=(E>>>4^S)&252645135,S^=b,E^=b<<4,b=(S>>>-16^E)&65535,E^=b,S^=b<<-16,b=(E>>>2^S)&858993459,S^=b,E^=b<<2,b=(S>>>-16^E)&65535,E^=b,S^=b<<-16,b=(E>>>1^S)&1431655765,S^=b,E^=b<<1,b=(S>>>8^E)&16711935,E^=b,S^=b<<8,b=(E>>>1^S)&1431655765,S^=b,E^=b<<1,b=E<<8|S>>>20&240,E=S<<24|S<<8&16711680|S>>>8&65280|S>>>24&240,S=b;for(var P=0;P<m.length;++P){m[P]?(E=E<<2|E>>>26,S=S<<2|S>>>26):(E=E<<1|E>>>27,S=S<<1|S>>>27),E&=-15,S&=-15;var B=e[E>>>28]|r[E>>>24&15]|n[E>>>20&15]|i[E>>>16&15]|o[E>>>12&15]|s[E>>>8&15]|a[E>>>4&15],O=c[S>>>28]|u[S>>>24&15]|f[S>>>20&15]|l[S>>>16&15]|h[S>>>12&15]|g[S>>>8&15]|d[S>>>4&15];b=(O>>>16^B)&65535,y[w++]=B^b,y[w++]=O^b<<16}}return y}function Yc(t,e,r,n){var i=t.length===32?3:9,o;i===3?o=n?[30,-2,-2]:[0,32,2]:o=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var s,a=e[0],c=e[1];s=(a>>>4^c)&252645135,c^=s,a^=s<<4,s=(a>>>16^c)&65535,c^=s,a^=s<<16,s=(c>>>2^a)&858993459,a^=s,c^=s<<2,s=(c>>>8^a)&16711935,a^=s,c^=s<<8,s=(a>>>1^c)&1431655765,c^=s,a^=s<<1,a=a<<1|a>>>31,c=c<<1|c>>>31;for(var u=0;u<i;u+=3){for(var f=o[u+1],l=o[u+2],h=o[u];h!=f;h+=l){var g=c^t[h],d=(c>>>4|c<<28)^t[h+1];s=a,a=c,c=s^(jp[g>>>24&63]|ey[g>>>16&63]|ny[g>>>8&63]|oy[g&63]|Jp[d>>>24&63]|ty[d>>>16&63]|ry[d>>>8&63]|iy[d&63])}s=a,a=c,c=s}a=a>>>1|a<<31,c=c>>>1|c<<31,s=(a>>>1^c)&1431655765,c^=s,a^=s<<1,s=(c>>>8^a)&16711935,a^=s,c^=s<<8,s=(c>>>2^a)&858993459,a^=s,c^=s<<2,s=(a>>>16^c)&65535,c^=s,a^=s<<16,s=(a>>>4^c)&252645135,c^=s,a^=s<<4,r[0]=a,r[1]=c}function qi(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="DES-"+e,n;t.decrypt?n=Et.cipher.createDecipher(r,t.key):n=Et.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(o,s){var a=null;s instanceof Et.util.ByteBuffer&&(a=s,s={}),s=s||{},s.output=a,s.iv=o,i.call(n,s)},n}});var Ur=lt((Ww,Xc)=>{var zi=gt();Xc.exports=zi.md=zi.md||{};zi.md.algorithms=zi.md.algorithms||{}});var jc=lt((Yw,Jc)=>{var Ye=gt();Ur();kt();var ay=Jc.exports=Ye.hmac=Ye.hmac||{};ay.create=function(){var t=null,e=null,r=null,n=null,i={};return i.start=function(o,s){if(o!==null)if(typeof o=="string")if(o=o.toLowerCase(),o in Ye.md.algorithms)e=Ye.md.algorithms[o].create();else throw new Error('Unknown hash algorithm "'+o+'"');else e=o;if(s===null)s=t;else{if(typeof s=="string")s=Ye.util.createBuffer(s);else if(Ye.util.isArray(s)){var a=s;s=Ye.util.createBuffer();for(var c=0;c<a.length;++c)s.putByte(a[c])}var u=s.length();u>e.blockLength&&(e.start(),e.update(s.bytes()),s=e.digest()),r=Ye.util.createBuffer(),n=Ye.util.createBuffer(),u=s.length();for(var c=0;c<u;++c){var a=s.at(c);r.putByte(54^a),n.putByte(92^a)}if(u<e.blockLength)for(var a=e.blockLength-u,c=0;c<a;++c)r.putByte(54),n.putByte(92);t=s,r=r.bytes(),n=n.bytes()}e.start(),e.update(r)},i.update=function(o){e.update(o)},i.getMac=function(){var o=e.digest().bytes();return e.start(),e.update(n),e.update(o),e.digest()},i.digest=i.getMac,i}});var Hi=lt(()=>{});var eu=lt((Xw,tu)=>{var te=gt();jc();Ur();kt();var cy=te.pkcs5=te.pkcs5||{},Ze;te.util.isNodejs&&!te.options.usePureJavaScript&&(Ze=Hi());tu.exports=te.pbkdf2=cy.pbkdf2=function(t,e,r,n,i,o){if(typeof i=="function"&&(o=i,i=null),te.util.isNodejs&&!te.options.usePureJavaScript&&Ze.pbkdf2&&(i===null||typeof i!="object")&&(Ze.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),o?Ze.pbkdf2Sync.length===4?Ze.pbkdf2(t,e,r,n,function(b,L){if(b)return o(b);o(null,L.toString("binary"))}):Ze.pbkdf2(t,e,r,n,i,function(b,L){if(b)return o(b);o(null,L.toString("binary"))}):Ze.pbkdf2Sync.length===4?Ze.pbkdf2Sync(t,e,r,n).toString("binary"):Ze.pbkdf2Sync(t,e,r,n,i).toString("binary");if((typeof i>"u"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in te.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=te.md[i].create()}var s=i.digestLength;if(n>4294967295*s){var a=new Error("Derived key is too long.");if(o)return o(a);throw a}var c=Math.ceil(n/s),u=n-(c-1)*s,f=te.hmac.create();f.start(i,t);var l="",h,g,d;if(!o){for(var p=1;p<=c;++p){f.start(null,null),f.update(e),f.update(te.util.int32ToBytes(p)),h=d=f.digest().getBytes();for(var y=2;y<=r;++y)f.start(null,null),f.update(d),g=f.digest().getBytes(),h=te.util.xorBytes(h,g,s),d=g;l+=p<c?h:h.substr(0,u)}return l}var p=1,y;function m(){if(p>c)return o(null,l);f.start(null,null),f.update(e),f.update(te.util.int32ToBytes(p)),h=d=f.digest().getBytes(),y=2,w()}function w(){if(y<=r)return f.start(null,null),f.update(d),g=f.digest().getBytes(),h=te.util.xorBytes(h,g,s),d=g,++y,te.util.setImmediate(w);l+=p<c?h:h.substr(0,u),++p,m()}m()}});var iu=lt((Jw,nu)=>{var $i=gt();kt();var ru=nu.exports=$i.pem=$i.pem||{};ru.encode=function(t,e){e=e||{};var r="-----BEGIN "+t.type+`-----\r
`,n;if(t.procType&&(n={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},r+=Gi(n)),t.contentDomain&&(n={name:"Content-Domain",values:[t.contentDomain]},r+=Gi(n)),t.dekInfo&&(n={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&n.values.push(t.dekInfo.parameters),r+=Gi(n)),t.headers)for(var i=0;i<t.headers.length;++i)r+=Gi(t.headers[i]);return t.procType&&(r+=`\r
`),r+=$i.util.encode64(t.body,e.maxline||64)+`\r
`,r+="-----END "+t.type+`-----\r
`,r};ru.decode=function(t){for(var e=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,o;o=r.exec(t),!!o;){var s=o[1];s==="NEW CERTIFICATE REQUEST"&&(s="CERTIFICATE REQUEST");var a={type:s,procType:null,contentDomain:null,dekInfo:null,headers:[],body:$i.util.decode64(o[3])};if(e.push(a),!!o[2]){for(var c=o[2].split(i),u=0;o&&u<c.length;){for(var f=c[u].replace(/\s+$/,""),l=u+1;l<c.length;++l){var h=c[l];if(!/\s/.test(h[0]))break;f+=h,u=l}if(o=f.match(n),o){for(var g={name:o[1],values:[]},d=o[2].split(","),p=0;p<d.length;++p)g.values.push(uy(d[p]));if(a.procType)if(!a.contentDomain&&g.name==="Content-Domain")a.contentDomain=d[0]||"";else if(!a.dekInfo&&g.name==="DEK-Info"){if(g.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');a.dekInfo={algorithm:d[0],parameters:d[1]||null}}else a.headers.push(g);else{if(g.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(g.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');a.procType={version:d[0],type:d[1]}}}++u}if(a.procType==="ENCRYPTED"&&!a.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function Gi(t){for(var e=t.name+": ",r=[],n=function(c,u){return" "+u},i=0;i<t.values.length;++i)r.push(t.values[i].replace(/^(\S+\r\n)/,n));e+=r.join(",")+`\r
`;for(var o=0,s=-1,i=0;i<e.length;++i,++o)if(o>65&&s!==-1){var a=e[s];a===","?(++s,e=e.substr(0,s)+`\r
 `+e.substr(s)):e=e.substr(0,s)+`\r
`+a+e.substr(s+1),o=i-s-1,s=-1,++i}else(e[i]===" "||e[i]==="	"||e[i]===",")&&(s=i);return e}function uy(t){return t.replace(/^\s+/,"")}});var fu=lt((jw,uu)=>{var Oe=gt();Ur();kt();var su=uu.exports=Oe.sha256=Oe.sha256||{};Oe.md.sha256=Oe.md.algorithms.sha256=su;su.create=function(){au||fy();var t=null,e=Oe.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=Oe.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=Oe.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=s[1],s[1]=s[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),ou(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=Oe.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=o&n.blockLength-1;i.putBytes(Xs.substr(0,n.blockLength-s));for(var a,c,u=n.fullMessageLength[0]*8,f=0;f<n.fullMessageLength.length-1;++f)a=n.fullMessageLength[f+1]*8,c=a/4294967296>>>0,u+=c,i.putInt32(u>>>0),u=a>>>0;i.putInt32(u);var l={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};ou(l,r,i);var h=Oe.util.createBuffer();return h.putInt32(l.h0),h.putInt32(l.h1),h.putInt32(l.h2),h.putInt32(l.h3),h.putInt32(l.h4),h.putInt32(l.h5),h.putInt32(l.h6),h.putInt32(l.h7),h},n};var Xs=null,au=!1,cu=null;function fy(){Xs="\x80",Xs+=Oe.util.fillString("\0",64),cu=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],au=!0}function ou(t,e,r){for(var n,i,o,s,a,c,u,f,l,h,g,d,p,y,m,w=r.length();w>=64;){for(u=0;u<16;++u)e[u]=r.getInt32();for(;u<64;++u)n=e[u-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=e[u-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[u]=n+e[u-7]+i+e[u-16]|0;for(f=t.h0,l=t.h1,h=t.h2,g=t.h3,d=t.h4,p=t.h5,y=t.h6,m=t.h7,u=0;u<64;++u)s=(d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7),a=y^d&(p^y),o=(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),c=f&l|h&(f^l),n=m+s+a+cu[u]+e[u],i=o+c,m=y,y=p,p=d,d=g+n>>>0,g=h,h=l,l=f,f=n+i>>>0;t.h0=t.h0+f|0,t.h1=t.h1+l|0,t.h2=t.h2+h|0,t.h3=t.h3+g|0,t.h4=t.h4+d|0,t.h5=t.h5+p|0,t.h6=t.h6+y|0,t.h7=t.h7+m|0,w-=64}}});var hu=lt((tE,lu)=>{var Fe=gt();kt();var Wi=null;Fe.util.isNodejs&&!Fe.options.usePureJavaScript&&!process.versions["node-webkit"]&&(Wi=Hi());var ly=lu.exports=Fe.prng=Fe.prng||{};ly.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();e.pools=n,e.pool=0,e.generate=function(u,f){if(!f)return e.generateSync(u);var l=e.plugin.cipher,h=e.plugin.increment,g=e.plugin.formatKey,d=e.plugin.formatSeed,p=Fe.util.createBuffer();e.key=null,y();function y(m){if(m)return f(m);if(p.length()>=u)return f(null,p.getBytes(u));if(e.generated>1048575&&(e.key=null),e.key===null)return Fe.util.nextTick(function(){o(y)});var w=l(e.key,e.seed);e.generated+=w.length,p.putBytes(w),e.key=g(l(e.key,h(e.seed))),e.seed=d(l(e.key,e.seed)),Fe.util.setImmediate(y)}},e.generateSync=function(u){var f=e.plugin.cipher,l=e.plugin.increment,h=e.plugin.formatKey,g=e.plugin.formatSeed;e.key=null;for(var d=Fe.util.createBuffer();d.length()<u;){e.generated>1048575&&(e.key=null),e.key===null&&s();var p=f(e.key,e.seed);e.generated+=p.length,d.putBytes(p),e.key=h(f(e.key,l(e.seed))),e.seed=g(f(e.key,e.seed))}return d.getBytes(u)};function o(u){if(e.pools[0].messageLength>=32)return a(),u();var f=32-e.pools[0].messageLength<<5;e.seedFile(f,function(l,h){if(l)return u(l);e.collect(h),a(),u()})}function s(){if(e.pools[0].messageLength>=32)return a();var u=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(u)),a()}function a(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var u=e.plugin.md.create();u.update(e.keyBytes);for(var f=1,l=0;l<32;++l)e.reseeds%f===0&&(u.update(e.pools[l].digest().getBytes()),e.pools[l].start()),f=f<<1;e.keyBytes=u.digest().getBytes(),u.start(),u.update(e.keyBytes);var h=u.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(h),e.generated=0}function c(u){var f=null,l=Fe.util.globalScope,h=l.crypto||l.msCrypto;h&&h.getRandomValues&&(f=function(E){return h.getRandomValues(E)});var g=Fe.util.createBuffer();if(f)for(;g.length()<u;){var d=Math.max(1,Math.min(u-g.length(),65536)/4),p=new Uint32Array(Math.floor(d));try{f(p);for(var y=0;y<p.length;++y)g.putInt32(p[y])}catch(E){if(!(typeof QuotaExceededError<"u"&&E instanceof QuotaExceededError))throw E}}if(g.length()<u)for(var m,w,b,L=Math.floor(Math.random()*65536);g.length()<u;){w=16807*(L&65535),m=16807*(L>>16),w+=(m&32767)<<16,w+=m>>15,w=(w&2147483647)+(w>>31),L=w&4294967295;for(var y=0;y<3;++y)b=L>>>(y<<3),b^=Math.floor(Math.random()*256),g.putByte(b&255)}return g.getBytes(u)}return Wi?(e.seedFile=function(u,f){Wi.randomBytes(u,function(l,h){if(l)return f(l);f(null,h.toString())})},e.seedFileSync=function(u){return Wi.randomBytes(u).toString()}):(e.seedFile=function(u,f){try{f(null,c(u))}catch(l){f(l)}},e.seedFileSync=c),e.collect=function(u){for(var f=u.length,l=0;l<f;++l)e.pools[e.pool].update(u.substr(l,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(u,f){for(var l="",h=0;h<f;h+=8)l+=String.fromCharCode(u>>h&255);e.collect(l)},e.registerWorker=function(u){if(u===self)e.seedFile=function(l,h){function g(d){var p=d.data;p.forge&&p.forge.prng&&(self.removeEventListener("message",g),h(p.forge.prng.err,p.forge.prng.bytes))}self.addEventListener("message",g),self.postMessage({forge:{prng:{needed:l}}})};else{var f=function(l){var h=l.data;h.forge&&h.forge.prng&&e.seedFile(h.forge.prng.needed,function(g,d){u.postMessage({forge:{prng:{err:g,bytes:d}}})})};u.addEventListener("message",f)}},e}});var Wn=lt((eE,Js)=>{var qt=gt();Qs();fu();hu();kt();(function(){if(qt.random&&qt.random.getBytes){Js.exports=qt.random;return}(function(t){var e={},r=new Array(4),n=qt.util.createBuffer();e.formatKey=function(l){var h=qt.util.createBuffer(l);return l=new Array(4),l[0]=h.getInt32(),l[1]=h.getInt32(),l[2]=h.getInt32(),l[3]=h.getInt32(),qt.aes._expandKey(l,!1)},e.formatSeed=function(l){var h=qt.util.createBuffer(l);return l=new Array(4),l[0]=h.getInt32(),l[1]=h.getInt32(),l[2]=h.getInt32(),l[3]=h.getInt32(),l},e.cipher=function(l,h){return qt.aes._updateBlock(l,h,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},e.increment=function(l){return++l[3],l},e.md=qt.md.sha256;function i(){var l=qt.prng.create(e);return l.getBytes=function(h,g){return l.generate(h,g)},l.getBytesSync=function(h){return l.generate(h)},l}var o=i(),s=null,a=qt.util.globalScope,c=a.crypto||a.msCrypto;if(c&&c.getRandomValues&&(s=function(l){return c.getRandomValues(l)}),qt.options.usePureJavaScript||!qt.util.isNodejs&&!s){if(typeof window>"u"||window.document,o.collectInt(+new Date,32),typeof navigator<"u"){var u="";for(var f in navigator)try{typeof navigator[f]=="string"&&(u+=navigator[f])}catch{}o.collect(u),u=null}t&&(t().mousemove(function(l){o.collectInt(l.clientX,16),o.collectInt(l.clientY,16)}),t().keypress(function(l){o.collectInt(l.charCode,8)}))}if(!qt.random)qt.random=o;else for(var f in o)qt.random[f]=o[f];qt.random.createInstance=i,Js.exports=qt.random})(typeof jQuery<"u"?jQuery:null)})()});var gu=lt((rE,yu)=>{var re=gt();kt();var js=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],du=[1,2,3,5],hy=function(t,e){return t<<e&65535|(t&65535)>>16-e},dy=function(t,e){return(t&65535)>>e|t<<16-e&65535};yu.exports=re.rc2=re.rc2||{};re.rc2.expandKey=function(t,e){typeof t=="string"&&(t=re.util.createBuffer(t)),e=e||128;var r=t,n=t.length(),i=e,o=Math.ceil(i/8),s=255>>(i&7),a;for(a=n;a<128;a++)r.putByte(js[r.at(a-1)+r.at(a-n)&255]);for(r.setAt(128-o,js[r.at(128-o)&s]),a=127-o;a>=0;a--)r.setAt(a,js[r.at(a+1)^r.at(a+o)]);return r};var pu=function(t,e,r){var n=!1,i=null,o=null,s=null,a,c,u,f,l=[];for(t=re.rc2.expandKey(t,e),u=0;u<64;u++)l.push(t.getInt16Le());r?(a=function(d){for(u=0;u<4;u++)d[u]+=l[f]+(d[(u+3)%4]&d[(u+2)%4])+(~d[(u+3)%4]&d[(u+1)%4]),d[u]=hy(d[u],du[u]),f++},c=function(d){for(u=0;u<4;u++)d[u]+=l[d[(u+3)%4]&63]}):(a=function(d){for(u=3;u>=0;u--)d[u]=dy(d[u],du[u]),d[u]-=l[f]+(d[(u+3)%4]&d[(u+2)%4])+(~d[(u+3)%4]&d[(u+1)%4]),f--},c=function(d){for(u=3;u>=0;u--)d[u]-=l[d[(u+3)%4]&63]});var h=function(d){var p=[];for(u=0;u<4;u++){var y=i.getInt16Le();s!==null&&(r?y^=s.getInt16Le():s.putInt16Le(y)),p.push(y&65535)}f=r?0:63;for(var m=0;m<d.length;m++)for(var w=0;w<d[m][0];w++)d[m][1](p);for(u=0;u<4;u++)s!==null&&(r?s.putInt16Le(p[u]):p[u]^=s.getInt16Le()),o.putInt16Le(p[u])},g=null;return g={start:function(d,p){d&&typeof d=="string"&&(d=re.util.createBuffer(d)),n=!1,i=re.util.createBuffer(),o=p||new re.util.createBuffer,s=d,g.output=o},update:function(d){for(n||i.putBuffer(d);i.length()>=8;)h([[5,a],[1,c],[6,a],[1,c],[5,a]])},finish:function(d){var p=!0;if(r)if(d)p=d(8,i,!r);else{var y=i.length()===8?8:8-i.length();i.fillWithByte(y,y)}if(p&&(n=!0,g.update()),!r&&(p=i.length()===0,p))if(d)p=d(8,o,!r);else{var m=o.length(),w=o.at(m-1);w>m?p=!1:o.truncate(w)}return p}},g};re.rc2.startEncrypting=function(t,e,r){var n=re.rc2.createEncryptionCipher(t,128);return n.start(e,r),n};re.rc2.createEncryptionCipher=function(t,e){return pu(t,e,!0)};re.rc2.startDecrypting=function(t,e,r){var n=re.rc2.createDecryptionCipher(t,128);return n.start(e,r),n};re.rc2.createDecryptionCipher=function(t,e){return pu(t,e,!1)}});var Qi=lt((nE,Bu)=>{var ta=gt();Bu.exports=ta.jsbn=ta.jsbn||{};var Qe,py=0xdeadbeefcafe,mu=(py&16777215)==15715070;function _(t,e,r){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,r):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}ta.jsbn.BigInteger=_;function at(){return new _(null)}function yy(t,e,r,n,i,o){for(;--o>=0;){var s=e*this.data[t++]+r.data[n]+i;i=Math.floor(s/67108864),r.data[n++]=s&67108863}return i}function gy(t,e,r,n,i,o){for(var s=e&32767,a=e>>15;--o>=0;){var c=this.data[t]&32767,u=this.data[t++]>>15,f=a*c+u*s;c=s*c+((f&32767)<<15)+r.data[n]+(i&1073741823),i=(c>>>30)+(f>>>15)+a*u+(i>>>30),r.data[n++]=c&1073741823}return i}function xu(t,e,r,n,i,o){for(var s=e&16383,a=e>>14;--o>=0;){var c=this.data[t]&16383,u=this.data[t++]>>14,f=a*c+u*s;c=s*c+((f&16383)<<14)+r.data[n]+i,i=(c>>28)+(f>>14)+a*u,r.data[n++]=c&268435455}return i}typeof navigator>"u"?(_.prototype.am=xu,Qe=28):mu&&navigator.appName=="Microsoft Internet Explorer"?(_.prototype.am=gy,Qe=30):mu&&navigator.appName!="Netscape"?(_.prototype.am=yy,Qe=26):(_.prototype.am=xu,Qe=28);_.prototype.DB=Qe;_.prototype.DM=(1<<Qe)-1;_.prototype.DV=1<<Qe;var ea=52;_.prototype.FV=Math.pow(2,ea);_.prototype.F1=ea-Qe;_.prototype.F2=2*Qe-ea;var my="0123456789abcdefghijklmnopqrstuvwxyz",Yi=new Array,gn,ge;gn=48;for(ge=0;ge<=9;++ge)Yi[gn++]=ge;gn=97;for(ge=10;ge<36;++ge)Yi[gn++]=ge;gn=65;for(ge=10;ge<36;++ge)Yi[gn++]=ge;function vu(t){return my.charAt(t)}function bu(t,e){var r=Yi[t.charCodeAt(e)];return r??-1}function xy(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}function vy(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}function mr(t){var e=at();return e.fromInt(t),e}function by(t,e){var r;if(e==16)r=4;else if(e==8)r=3;else if(e==256)r=8;else if(e==2)r=1;else if(e==32)r=5;else if(e==4)r=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var n=t.length,i=!1,o=0;--n>=0;){var s=r==8?t[n]&255:bu(t,n);if(s<0){t.charAt(n)=="-"&&(i=!0);continue}i=!1,o==0?this.data[this.t++]=s:o+r>this.DB?(this.data[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this.data[this.t++]=s>>this.DB-o):this.data[this.t-1]|=s<<o,o+=r,o>=this.DB&&(o-=this.DB)}r==8&&t[0]&128&&(this.s=-1,o>0&&(this.data[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&_.ZERO.subTo(this,this)}function wy(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}function Ey(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,n,i=!1,o="",s=this.t,a=this.DB-s*this.DB%e;if(s-- >0)for(a<this.DB&&(n=this.data[s]>>a)>0&&(i=!0,o=vu(n));s>=0;)a<e?(n=(this.data[s]&(1<<a)-1)<<e-a,n|=this.data[--s]>>(a+=this.DB-e)):(n=this.data[s]>>(a-=e)&r,a<=0&&(a+=this.DB,--s)),n>0&&(i=!0),i&&(o+=vu(n));return i?o:"0"}function Sy(){var t=at();return _.ZERO.subTo(this,t),t}function By(){return this.s<0?this.negate():this}function Ay(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this.data[r]-t.data[r])!=0)return e;return 0}function Zi(t){var e=1,r;return(r=t>>>16)!=0&&(t=r,e+=16),(r=t>>8)!=0&&(t=r,e+=8),(r=t>>4)!=0&&(t=r,e+=4),(r=t>>2)!=0&&(t=r,e+=2),(r=t>>1)!=0&&(t=r,e+=1),e}function Cy(){return this.t<=0?0:this.DB*(this.t-1)+Zi(this.data[this.t-1]^this.s&this.DM)}function Iy(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}function Ty(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}function _y(t,e){var r=t%this.DB,n=this.DB-r,i=(1<<n)-1,o=Math.floor(t/this.DB),s=this.s<<r&this.DM,a;for(a=this.t-1;a>=0;--a)e.data[a+o+1]=this.data[a]>>n|s,s=(this.data[a]&i)<<r;for(a=o-1;a>=0;--a)e.data[a]=0;e.data[o]=s,e.t=this.t+o+1,e.s=this.s,e.clamp()}function Ry(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var n=t%this.DB,i=this.DB-n,o=(1<<n)-1;e.data[0]=this.data[r]>>n;for(var s=r+1;s<this.t;++s)e.data[s-r-1]|=(this.data[s]&o)<<i,e.data[s-r]=this.data[s]>>n;n>0&&(e.data[this.t-r-1]|=(this.s&o)<<i),e.t=this.t-r,e.clamp()}function Ny(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]-t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e.data[r++]=this.DV+n:n>0&&(e.data[r++]=n),e.t=r,e.clamp()}function Dy(t,e){var r=this.abs(),n=t.abs(),i=r.t;for(e.t=i+n.t;--i>=0;)e.data[i]=0;for(i=0;i<n.t;++i)e.data[i+r.t]=r.am(0,n.data[i],e,i,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&_.ZERO.subTo(e,e)}function Ly(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}function Py(t,e,r){var n=t.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){e?.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=at());var o=at(),s=this.s,a=t.s,c=this.DB-Zi(n.data[n.t-1]);c>0?(n.lShiftTo(c,o),i.lShiftTo(c,r)):(n.copyTo(o),i.copyTo(r));var u=o.t,f=o.data[u-1];if(f!=0){var l=f*(1<<this.F1)+(u>1?o.data[u-2]>>this.F2:0),h=this.FV/l,g=(1<<this.F1)/l,d=1<<this.F2,p=r.t,y=p-u,m=e??at();for(o.dlShiftTo(y,m),r.compareTo(m)>=0&&(r.data[r.t++]=1,r.subTo(m,r)),_.ONE.dlShiftTo(u,m),m.subTo(o,o);o.t<u;)o.data[o.t++]=0;for(;--y>=0;){var w=r.data[--p]==f?this.DM:Math.floor(r.data[p]*h+(r.data[p-1]+d)*g);if((r.data[p]+=o.am(0,w,r,y,0,u))<w)for(o.dlShiftTo(y,m),r.subTo(m,r);r.data[p]<--w;)r.subTo(m,r)}e!=null&&(r.drShiftTo(u,e),s!=a&&_.ZERO.subTo(e,e)),r.t=u,r.clamp(),c>0&&r.rShiftTo(c,r),s<0&&_.ZERO.subTo(r,r)}}}function ky(t){var e=at();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(_.ZERO)>0&&t.subTo(e,e),e}function Or(t){this.m=t}function Uy(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function Oy(t){return t}function Fy(t){t.divRemTo(this.m,null,t)}function Ky(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function My(t,e){t.squareTo(e),this.reduce(e)}Or.prototype.convert=Uy;Or.prototype.revert=Oy;Or.prototype.reduce=Fy;Or.prototype.mulTo=Ky;Or.prototype.sqrTo=My;function Vy(){if(this.t<1)return 0;var t=this.data[0];if(!(t&1))return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function Fr(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function qy(t){var e=at();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(_.ZERO)>0&&this.m.subTo(e,e),e}function zy(t){var e=at();return t.copyTo(e),this.reduce(e),e}function Hy(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t.data[e]&32767,n=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,n,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function Gy(t,e){t.squareTo(e),this.reduce(e)}function $y(t,e,r){t.multiplyTo(e,r),this.reduce(r)}Fr.prototype.convert=qy;Fr.prototype.revert=zy;Fr.prototype.reduce=Hy;Fr.prototype.mulTo=$y;Fr.prototype.sqrTo=Gy;function Wy(){return(this.t>0?this.data[0]&1:this.s)==0}function Yy(t,e){if(t>4294967295||t<1)return _.ONE;var r=at(),n=at(),i=e.convert(this),o=Zi(t)-1;for(i.copyTo(r);--o>=0;)if(e.sqrTo(r,n),(t&1<<o)>0)e.mulTo(n,i,r);else{var s=r;r=n,n=s}return e.revert(r)}function Zy(t,e){var r;return t<256||e.isEven()?r=new Or(e):r=new Fr(e),this.exp(t,r)}_.prototype.copyTo=xy;_.prototype.fromInt=vy;_.prototype.fromString=by;_.prototype.clamp=wy;_.prototype.dlShiftTo=Iy;_.prototype.drShiftTo=Ty;_.prototype.lShiftTo=_y;_.prototype.rShiftTo=Ry;_.prototype.subTo=Ny;_.prototype.multiplyTo=Dy;_.prototype.squareTo=Ly;_.prototype.divRemTo=Py;_.prototype.invDigit=Vy;_.prototype.isEven=Wy;_.prototype.exp=Yy;_.prototype.toString=Ey;_.prototype.negate=Sy;_.prototype.abs=By;_.prototype.compareTo=Ay;_.prototype.bitLength=Cy;_.prototype.mod=ky;_.prototype.modPowInt=Zy;_.ZERO=mr(0);_.ONE=mr(1);function Qy(){var t=at();return this.copyTo(t),t}function Xy(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function Jy(){return this.t==0?this.s:this.data[0]<<24>>24}function jy(){return this.t==0?this.s:this.data[0]<<16>>16}function t1(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function e1(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function r1(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=mr(r),i=at(),o=at(),s="";for(this.divRemTo(n,i,o);i.signum()>0;)s=(r+o.intValue()).toString(t).substr(1)+s,i.divRemTo(n,i,o);return o.intValue().toString(t)+s}function n1(t,e){this.fromInt(0),e==null&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),i=!1,o=0,s=0,a=0;a<t.length;++a){var c=bu(t,a);if(c<0){t.charAt(a)=="-"&&this.signum()==0&&(i=!0);continue}s=e*s+c,++o>=r&&(this.dMultiply(n),this.dAddOffset(s,0),o=0,s=0)}o>0&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(s,0)),i&&_.ZERO.subTo(this,this)}function i1(t,e,r){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(_.ONE.shiftLeft(t-1),ra,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(_.ONE.shiftLeft(t-1),this);else{var n=new Array,i=t&7;n.length=(t>>3)+1,e.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}function o1(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,n,i=0;if(t-- >0)for(r<this.DB&&(n=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this.data[t]&(1<<r)-1)<<8-r,n|=this.data[--t]>>(r+=this.DB-8)):(n=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),n&128&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e}function s1(t){return this.compareTo(t)==0}function a1(t){return this.compareTo(t)<0?this:t}function c1(t){return this.compareTo(t)>0?this:t}function u1(t,e,r){var n,i,o=Math.min(t.t,this.t);for(n=0;n<o;++n)r.data[n]=e(this.data[n],t.data[n]);if(t.t<this.t){for(i=t.s&this.DM,n=o;n<this.t;++n)r.data[n]=e(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=o;n<t.t;++n)r.data[n]=e(i,t.data[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}function f1(t,e){return t&e}function l1(t){var e=at();return this.bitwiseTo(t,f1,e),e}function ra(t,e){return t|e}function h1(t){var e=at();return this.bitwiseTo(t,ra,e),e}function wu(t,e){return t^e}function d1(t){var e=at();return this.bitwiseTo(t,wu,e),e}function Eu(t,e){return t&~e}function p1(t){var e=at();return this.bitwiseTo(t,Eu,e),e}function y1(){for(var t=at(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}function g1(t){var e=at();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function m1(t){var e=at();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function x1(t){if(t==0)return-1;var e=0;return t&65535||(t>>=16,e+=16),t&255||(t>>=8,e+=8),t&15||(t>>=4,e+=4),t&3||(t>>=2,e+=2),t&1||++e,e}function v1(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+x1(this.data[t]);return this.s<0?this.t*this.DB:-1}function b1(t){for(var e=0;t!=0;)t&=t-1,++e;return e}function w1(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=b1(this.data[r]^e);return t}function E1(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}function S1(t,e){var r=_.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}function B1(t){return this.changeBit(t,ra)}function A1(t){return this.changeBit(t,Eu)}function C1(t){return this.changeBit(t,wu)}function I1(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]+t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e.data[r++]=n:n<-1&&(e.data[r++]=this.DV+n),e.t=r,e.clamp()}function T1(t){var e=at();return this.addTo(t,e),e}function _1(t){var e=at();return this.subTo(t,e),e}function R1(t){var e=at();return this.multiplyTo(t,e),e}function N1(t){var e=at();return this.divRemTo(t,e,null),e}function D1(t){var e=at();return this.divRemTo(t,null,e),e}function L1(t){var e=at(),r=at();return this.divRemTo(t,e,r),new Array(e,r)}function P1(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function k1(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}function Yn(){}function Su(t){return t}function U1(t,e,r){t.multiplyTo(e,r)}function O1(t,e){t.squareTo(e)}Yn.prototype.convert=Su;Yn.prototype.revert=Su;Yn.prototype.mulTo=U1;Yn.prototype.sqrTo=O1;function F1(t){return this.exp(t,new Yn)}function K1(t,e,r){var n=Math.min(this.t+t.t,e);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,t.data[n],r,n,0,this.t);for(i=Math.min(t.t,e);n<i;++n)this.am(0,t.data[n],r,n,0,e-n);r.clamp()}function M1(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r.data[this.t+n-e]=this.am(e-n,t.data[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)}function mn(t){this.r2=at(),this.q3=at(),_.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function V1(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=at();return t.copyTo(e),this.reduce(e),e}function q1(t){return t}function z1(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function H1(t,e){t.squareTo(e),this.reduce(e)}function G1(t,e,r){t.multiplyTo(e,r),this.reduce(r)}mn.prototype.convert=V1;mn.prototype.revert=q1;mn.prototype.reduce=z1;mn.prototype.mulTo=G1;mn.prototype.sqrTo=H1;function $1(t,e){var r=t.bitLength(),n,i=mr(1),o;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?o=new Or(e):e.isEven()?o=new mn(e):o=new Fr(e);var s=new Array,a=3,c=n-1,u=(1<<n)-1;if(s[1]=o.convert(this),n>1){var f=at();for(o.sqrTo(s[1],f);a<=u;)s[a]=at(),o.mulTo(f,s[a-2],s[a]),a+=2}var l=t.t-1,h,g=!0,d=at(),p;for(r=Zi(t.data[l])-1;l>=0;){for(r>=c?h=t.data[l]>>r-c&u:(h=(t.data[l]&(1<<r+1)-1)<<c-r,l>0&&(h|=t.data[l-1]>>this.DB+r-c)),a=n;!(h&1);)h>>=1,--a;if((r-=a)<0&&(r+=this.DB,--l),g)s[h].copyTo(i),g=!1;else{for(;a>1;)o.sqrTo(i,d),o.sqrTo(d,i),a-=2;a>0?o.sqrTo(i,d):(p=i,i=d,d=p),o.mulTo(d,s[h],i)}for(;l>=0&&!(t.data[l]&1<<r);)o.sqrTo(i,d),p=i,i=d,d=p,--r<0&&(r=this.DB-1,--l)}return o.revert(i)}function W1(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),o>0&&(e.rShiftTo(o,e),r.rShiftTo(o,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r}function Y1(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e==0)r=this.data[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this.data[n])%t;return r}function Z1(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return _.ZERO;for(var r=t.clone(),n=this.clone(),i=mr(1),o=mr(0),s=mr(0),a=mr(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),e?((!i.isEven()||!o.isEven())&&(i.addTo(this,i),o.subTo(t,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;n.isEven();)n.rShiftTo(1,n),e?((!s.isEven()||!a.isEven())&&(s.addTo(this,s),a.subTo(t,a)),s.rShiftTo(1,s)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);r.compareTo(n)>=0?(r.subTo(n,r),e&&i.subTo(s,i),o.subTo(a,o)):(n.subTo(r,n),e&&s.subTo(i,s),a.subTo(o,a))}if(n.compareTo(_.ONE)!=0)return _.ZERO;if(a.compareTo(t)>=0)return a.subtract(t);if(a.signum()<0)a.addTo(t,a);else return a;return a.signum()<0?a.add(t):a}var Ae=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],Q1=(1<<26)/Ae[Ae.length-1];function X1(t){var e,r=this.abs();if(r.t==1&&r.data[0]<=Ae[Ae.length-1]){for(e=0;e<Ae.length;++e)if(r.data[0]==Ae[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<Ae.length;){for(var n=Ae[e],i=e+1;i<Ae.length&&n<Q1;)n*=Ae[i++];for(n=r.modInt(n);e<i;)if(n%Ae[e++]==0)return!1}return r.millerRabin(t)}function J1(t){var e=this.subtract(_.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var n=e.shiftRight(r),i=j1(),o,s=0;s<t;++s){do o=new _(this.bitLength(),i);while(o.compareTo(_.ONE)<=0||o.compareTo(e)>=0);var a=o.modPow(n,this);if(a.compareTo(_.ONE)!=0&&a.compareTo(e)!=0){for(var c=1;c++<r&&a.compareTo(e)!=0;)if(a=a.modPowInt(2,this),a.compareTo(_.ONE)==0)return!1;if(a.compareTo(e)!=0)return!1}}return!0}function j1(){return{nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)}}}_.prototype.chunkSize=t1;_.prototype.toRadix=r1;_.prototype.fromRadix=n1;_.prototype.fromNumber=i1;_.prototype.bitwiseTo=u1;_.prototype.changeBit=S1;_.prototype.addTo=I1;_.prototype.dMultiply=P1;_.prototype.dAddOffset=k1;_.prototype.multiplyLowerTo=K1;_.prototype.multiplyUpperTo=M1;_.prototype.modInt=Y1;_.prototype.millerRabin=J1;_.prototype.clone=Qy;_.prototype.intValue=Xy;_.prototype.byteValue=Jy;_.prototype.shortValue=jy;_.prototype.signum=e1;_.prototype.toByteArray=o1;_.prototype.equals=s1;_.prototype.min=a1;_.prototype.max=c1;_.prototype.and=l1;_.prototype.or=h1;_.prototype.xor=d1;_.prototype.andNot=p1;_.prototype.not=y1;_.prototype.shiftLeft=g1;_.prototype.shiftRight=m1;_.prototype.getLowestSetBit=v1;_.prototype.bitCount=w1;_.prototype.testBit=E1;_.prototype.setBit=B1;_.prototype.clearBit=A1;_.prototype.flipBit=C1;_.prototype.add=T1;_.prototype.subtract=_1;_.prototype.multiply=R1;_.prototype.divide=N1;_.prototype.remainder=D1;_.prototype.divideAndRemainder=L1;_.prototype.modPow=$1;_.prototype.modInverse=Z1;_.prototype.pow=F1;_.prototype.gcd=W1;_.prototype.isProbablePrime=X1});var _u=lt((iE,Tu)=>{var Ke=gt();Ur();kt();var Cu=Tu.exports=Ke.sha1=Ke.sha1||{};Ke.md.sha1=Ke.md.algorithms.sha1=Cu;Cu.create=function(){Iu||tg();var t=null,e=Ke.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=Ke.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=Ke.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=s[1],s[1]=s[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),Au(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=Ke.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=o&n.blockLength-1;i.putBytes(na.substr(0,n.blockLength-s));for(var a,c,u=n.fullMessageLength[0]*8,f=0;f<n.fullMessageLength.length-1;++f)a=n.fullMessageLength[f+1]*8,c=a/4294967296>>>0,u+=c,i.putInt32(u>>>0),u=a>>>0;i.putInt32(u);var l={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};Au(l,r,i);var h=Ke.util.createBuffer();return h.putInt32(l.h0),h.putInt32(l.h1),h.putInt32(l.h2),h.putInt32(l.h3),h.putInt32(l.h4),h},n};var na=null,Iu=!1;function tg(){na="\x80",na+=Ke.util.fillString("\0",64),Iu=!0}function Au(t,e,r){for(var n,i,o,s,a,c,u,f,l=r.length();l>=64;){for(i=t.h0,o=t.h1,s=t.h2,a=t.h3,c=t.h4,f=0;f<16;++f)n=r.getInt32(),e[f]=n,u=a^o&(s^a),n=(i<<5|i>>>27)+u+c+1518500249+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;f<20;++f)n=e[f-3]^e[f-8]^e[f-14]^e[f-16],n=n<<1|n>>>31,e[f]=n,u=a^o&(s^a),n=(i<<5|i>>>27)+u+c+1518500249+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;f<32;++f)n=e[f-3]^e[f-8]^e[f-14]^e[f-16],n=n<<1|n>>>31,e[f]=n,u=o^s^a,n=(i<<5|i>>>27)+u+c+1859775393+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;f<40;++f)n=e[f-6]^e[f-16]^e[f-28]^e[f-32],n=n<<2|n>>>30,e[f]=n,u=o^s^a,n=(i<<5|i>>>27)+u+c+1859775393+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;f<60;++f)n=e[f-6]^e[f-16]^e[f-28]^e[f-32],n=n<<2|n>>>30,e[f]=n,u=o&s|a&(o^s),n=(i<<5|i>>>27)+u+c+2400959708+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;f<80;++f)n=e[f-6]^e[f-16]^e[f-28]^e[f-32],n=n<<2|n>>>30,e[f]=n,u=o^s^a,n=(i<<5|i>>>27)+u+c+3395469782+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+s|0,t.h3=t.h3+a|0,t.h4=t.h4+c|0,l-=64}}});var Du=lt((oE,Nu)=>{var Me=gt();kt();Wn();_u();var Ru=Nu.exports=Me.pkcs1=Me.pkcs1||{};Ru.encode_rsa_oaep=function(t,e,r){var n,i,o,s;typeof r=="string"?(n=r,i=arguments[3]||void 0,o=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,o=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md)),o?o.start():o=Me.md.sha1.create(),s||(s=o);var a=Math.ceil(t.n.bitLength()/8),c=a-2*o.digestLength-2;if(e.length>c){var u=new Error("RSAES-OAEP input message length is too long.");throw u.length=e.length,u.maxLength=c,u}n||(n=""),o.update(n,"raw");for(var f=o.digest(),l="",h=c-e.length,g=0;g<h;g++)l+="\0";var d=f.getBytes()+l+""+e;if(!i)i=Me.random.getBytes(o.digestLength);else if(i.length!==o.digestLength){var u=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw u.seedLength=i.length,u.digestLength=o.digestLength,u}var p=Xi(i,a-o.digestLength-1,s),y=Me.util.xorBytes(d,p,d.length),m=Xi(y,o.digestLength,s),w=Me.util.xorBytes(i,m,i.length);return"\0"+w+y};Ru.decode_rsa_oaep=function(t,e,r){var n,i,o;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(o=r.mgf1.md));var s=Math.ceil(t.n.bitLength()/8);if(e.length!==s){var y=new Error("RSAES-OAEP encoded message length is invalid.");throw y.length=e.length,y.expectedLength=s,y}if(i===void 0?i=Me.md.sha1.create():i.start(),o||(o=i),s<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var a=i.digest().getBytes(),c=e.charAt(0),u=e.substring(1,i.digestLength+1),f=e.substring(1+i.digestLength),l=Xi(f,i.digestLength,o),h=Me.util.xorBytes(u,l,u.length),g=Xi(h,s-i.digestLength-1,o),d=Me.util.xorBytes(f,g,f.length),p=d.substring(0,i.digestLength),y=c!=="\0",m=0;m<i.digestLength;++m)y|=a.charAt(m)!==p.charAt(m);for(var w=1,b=i.digestLength,L=i.digestLength;L<d.length;L++){var E=d.charCodeAt(L),S=E&1^1,P=w?65534:0;y|=E&P,w=w&S,b+=w}if(y||d.charCodeAt(b)!==1)throw new Error("Invalid RSAES-OAEP padding.");return d.substring(b+1)};function Xi(t,e,r){r||(r=Me.md.sha1.create());for(var n="",i=Math.ceil(e/r.digestLength),o=0;o<i;++o){var s=String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,o&255);r.start(),r.update(t+s),n+=r.digest().getBytes()}return n.substring(0,e)}});var Lu=lt((sE,ia)=>{var xr=gt();kt();Qi();Wn();(function(){if(xr.prime){ia.exports=xr.prime;return}var t=ia.exports=xr.prime=xr.prime||{},e=xr.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new e(null);n.fromInt(30);var i=function(l,h){return l|h};t.generateProbablePrime=function(l,h,g){typeof h=="function"&&(g=h,h={}),h=h||{};var d=h.algorithm||"PRIMEINC";typeof d=="string"&&(d={name:d}),d.options=d.options||{};var p=h.prng||xr.random,y={nextBytes:function(m){for(var w=p.getBytesSync(m.length),b=0;b<m.length;++b)m[b]=w.charCodeAt(b)}};if(d.name==="PRIMEINC")return o(l,y,d.options,g);throw new Error("Invalid prime generation algorithm: "+d.name)};function o(l,h,g,d){return"workers"in g?c(l,h,g,d):s(l,h,g,d)}function s(l,h,g,d){var p=u(l,h),y=0,m=f(p.bitLength());"millerRabinTests"in g&&(m=g.millerRabinTests);var w=10;"maxBlockTime"in g&&(w=g.maxBlockTime),a(p,l,h,y,m,w,d)}function a(l,h,g,d,p,y,m){var w=+new Date;do{if(l.bitLength()>h&&(l=u(h,g)),l.isProbablePrime(p))return m(null,l);l.dAddOffset(r[d++%8],0)}while(y<0||+new Date-w<y);xr.util.setImmediate(function(){a(l,h,g,d,p,y,m)})}function c(l,h,g,d){if(typeof Worker>"u")return s(l,h,g,d);var p=u(l,h),y=g.workers,m=g.workLoad||100,w=m*30/8,b=g.workerScript||"forge/prime.worker.js";if(y===-1)return xr.util.estimateCores(function(E,S){E&&(S=2),y=S-1,L()});L();function L(){y=Math.max(1,y);for(var E=[],S=0;S<y;++S)E[S]=new Worker(b);for(var P=y,S=0;S<y;++S)E[S].addEventListener("message",O);var B=!1;function O(K){if(!B){--P;var U=K.data;if(U.found){for(var V=0;V<E.length;++V)E[V].terminate();return B=!0,d(null,new e(U.prime,16))}p.bitLength()>l&&(p=u(l,h));var Y=p.toString(16);K.target.postMessage({hex:Y,workLoad:m}),p.dAddOffset(w,0)}}}}function u(l,h){var g=new e(l,h),d=l-1;return g.testBit(d)||g.bitwiseTo(e.ONE.shiftLeft(d),i,g),g.dAddOffset(31-g.mod(n).byteValue(),0),g}function f(l){return l<=100?27:l<=150?18:l<=200?15:l<=250?12:l<=300?9:l<=350?8:l<=400?7:l<=500?6:l<=600?5:l<=800?4:l<=1250?3:2}})()});var ji=lt((aE,Mu)=>{var W=gt();$n();Qi();Oi();Du();Lu();Wn();kt();typeof st>"u"&&(st=W.jsbn.BigInteger);var st,oa=W.util.isNodejs?Hi():null,v=W.asn1,me=W.util;W.pki=W.pki||{};Mu.exports=W.pki.rsa=W.rsa=W.rsa||{};var J=W.pki,eg=[6,4,2,4,2,4,6,2],rg={name:"PrivateKeyInfo",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:v.Class.UNIVERSAL,type:v.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},ng={name:"RSAPrivateKey",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},ig={name:"RSAPublicKey",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},og=W.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:v.Class.UNIVERSAL,type:v.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},sg={name:"DigestInfo",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:v.Class.UNIVERSAL,type:v.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:v.Class.UNIVERSAL,type:v.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},ag=function(t){var e;if(t.algorithm in J.oids)e=J.oids[t.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}var n=v.oidToDer(e).getBytes(),i=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[]),o=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[]);o.value.push(v.create(v.Class.UNIVERSAL,v.Type.OID,!1,n)),o.value.push(v.create(v.Class.UNIVERSAL,v.Type.NULL,!1,""));var s=v.create(v.Class.UNIVERSAL,v.Type.OCTETSTRING,!1,t.digest().getBytes());return i.value.push(o),i.value.push(s),v.toDer(i).getBytes()},Fu=function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(st.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(st.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var n;do n=new st(W.util.bytesToHex(W.random.getBytes(e.n.bitLength()/8)),16);while(n.compareTo(e.n)>=0||!n.gcd(e.n).equals(st.ONE));t=t.multiply(n.modPow(e.e,e.n)).mod(e.n);for(var i=t.mod(e.p).modPow(e.dP,e.p),o=t.mod(e.q).modPow(e.dQ,e.q);i.compareTo(o)<0;)i=i.add(e.p);var s=i.subtract(o).multiply(e.qInv).mod(e.p).multiply(e.q).add(o);return s=s.multiply(n.modInverse(e.n)).mod(e.n),s};J.rsa.encrypt=function(t,e,r){var n=r,i,o=Math.ceil(e.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=Ku(t,e,r)):(i=W.util.createBuffer(),i.putBytes(t));for(var s=new st(i.toHex(),16),a=Fu(s,e,n),c=a.toString(16),u=W.util.createBuffer(),f=o-Math.ceil(c.length/2);f>0;)u.putByte(0),--f;return u.putBytes(W.util.hexToBytes(c)),u.getBytes()};J.rsa.decrypt=function(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8);if(t.length!==i){var o=new Error("Encrypted message length is invalid.");throw o.length=t.length,o.expected=i,o}var s=new st(W.util.createBuffer(t).toHex(),16);if(s.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var a=Fu(s,e,r),c=a.toString(16),u=W.util.createBuffer(),f=i-Math.ceil(c.length/2);f>0;)u.putByte(0),--f;return u.putBytes(W.util.hexToBytes(c)),n!==!1?Ji(u.getBytes(),e,r):u.getBytes()};J.rsa.createKeyPairGenerationState=function(t,e,r){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,r=r||{};var n=r.prng||W.random,i={nextBytes:function(a){for(var c=n.getBytesSync(a.length),u=0;u<a.length;++u)a[u]=c.charCodeAt(u)}},o=r.algorithm||"PRIMEINC",s;if(o==="PRIMEINC")s={algorithm:o,state:0,bits:t,rng:i,eInt:e||65537,e:new st(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},s.e.fromInt(s.eInt);else throw new Error("Invalid key generation algorithm: "+o);return s};J.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new st(null);r.fromInt(30);for(var n=0,i=function(l,h){return l|h},o=+new Date,s,a=0;t.keys===null&&(e<=0||a<e);){if(t.state===0){var c=t.p===null?t.pBits:t.qBits,u=c-1;t.pqState===0?(t.num=new st(c,t.rng),t.num.testBit(u)||t.num.bitwiseTo(st.ONE.shiftLeft(u),i,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),n=0,++t.pqState):t.pqState===1?t.num.bitLength()>c?t.pqState=0:t.num.isProbablePrime(ug(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(eg[n++%8],0):t.pqState===2?t.pqState=t.num.subtract(st.ONE).gcd(t.e).compareTo(st.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(st.ONE),t.q1=t.q.subtract(st.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(st.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var f=t.e.modInverse(t.phi);t.keys={privateKey:J.rsa.setPrivateKey(t.n,t.e,f,t.p,t.q,f.mod(t.p1),f.mod(t.q1),t.q.modInverse(t.p)),publicKey:J.rsa.setPublicKey(t.n,t.e)}}s=+new Date,a+=s-o,o=s}return t.keys!==null};J.rsa.generateKeyPair=function(t,e,r,n){if(arguments.length===1?typeof t=="object"?(r=t,t=void 0):typeof t=="function"&&(n=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(n=e,e=void 0):typeof e!="number"&&(r=e,e=void 0):(r=t,n=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=e,e=void 0)),r=r||{},t===void 0&&(t=r.bits||2048),e===void 0&&(e=r.e||65537),!W.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(n){if(Pu("generateKeyPair"))return oa.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(a,c,u){if(a)return n(a);n(null,{privateKey:J.privateKeyFromPem(u),publicKey:J.publicKeyFromPem(c)})});if(ku("generateKey")&&ku("exportKey"))return me.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:Ou(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(a){return me.globalScope.crypto.subtle.exportKey("pkcs8",a.privateKey)}).then(void 0,function(a){n(a)}).then(function(a){if(a){var c=J.privateKeyFromAsn1(v.fromDer(W.util.createBuffer(a)));n(null,{privateKey:c,publicKey:J.setRsaPublicKey(c.n,c.e)})}});if(Uu("generateKey")&&Uu("exportKey")){var i=me.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:Ou(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(a){var c=a.target.result,u=me.globalScope.msCrypto.subtle.exportKey("pkcs8",c.privateKey);u.oncomplete=function(f){var l=f.target.result,h=J.privateKeyFromAsn1(v.fromDer(W.util.createBuffer(l)));n(null,{privateKey:h,publicKey:J.setRsaPublicKey(h.n,h.e)})},u.onerror=function(f){n(f)}},i.onerror=function(a){n(a)};return}}else if(Pu("generateKeyPairSync")){var o=oa.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:J.privateKeyFromPem(o.privateKey),publicKey:J.publicKeyFromPem(o.publicKey)}}}var s=J.rsa.createKeyPairGenerationState(t,e,r);if(!n)return J.rsa.stepKeyPairGenerationState(s,0),s.keys;cg(s,r,n)};J.setRsaPublicKey=J.rsa.setPublicKey=function(t,e){var r={n:t,e};return r.encrypt=function(n,i,o){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:function(a,c,u){return Ku(a,c,2).getBytes()}};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:function(a,c){return W.pkcs1.encode_rsa_oaep(c,a,o)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(a){return a}};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var s=i.encode(n,r,!0);return J.rsa.encrypt(s,r,!0)},r.verify=function(n,i,o,s){typeof o=="string"?o=o.toUpperCase():o===void 0&&(o="RSASSA-PKCS1-V1_5"),s===void 0&&(s={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in s||(s._parseAllDigestBytes=!0),o==="RSASSA-PKCS1-V1_5"?o={verify:function(c,u){u=Ji(u,r,!0);var f=v.fromDer(u,{parseAllBytes:s._parseAllDigestBytes}),l={},h=[];if(!v.validate(f,sg,l,h)){var g=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw g.errors=h,g}var d=v.derToOid(l.algorithmIdentifier);if(!(d===W.oids.md2||d===W.oids.md5||d===W.oids.sha1||d===W.oids.sha224||d===W.oids.sha256||d===W.oids.sha384||d===W.oids.sha512||d===W.oids["sha512-224"]||d===W.oids["sha512-256"])){var g=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw g.oid=d,g}if((d===W.oids.md2||d===W.oids.md5)&&!("parameters"in l))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return c===l.digest}}:(o==="NONE"||o==="NULL"||o===null)&&(o={verify:function(c,u){return u=Ji(u,r,!0),c===u}});var a=J.rsa.decrypt(i,r,!0,!1);return o.verify(n,a,r.n.bitLength())},r};J.setRsaPrivateKey=J.rsa.setPrivateKey=function(t,e,r,n,i,o,s,a){var c={n:t,e,d:r,p:n,q:i,dP:o,dQ:s,qInv:a};return c.decrypt=function(u,f,l){typeof f=="string"?f=f.toUpperCase():f===void 0&&(f="RSAES-PKCS1-V1_5");var h=J.rsa.decrypt(u,c,!1,!1);if(f==="RSAES-PKCS1-V1_5")f={decode:Ji};else if(f==="RSA-OAEP"||f==="RSAES-OAEP")f={decode:function(g,d){return W.pkcs1.decode_rsa_oaep(d,g,l)}};else if(["RAW","NONE","NULL",null].indexOf(f)!==-1)f={decode:function(g){return g}};else throw new Error('Unsupported encryption scheme: "'+f+'".');return f.decode(h,c,!1)},c.sign=function(u,f){var l=!1;typeof f=="string"&&(f=f.toUpperCase()),f===void 0||f==="RSASSA-PKCS1-V1_5"?(f={encode:ag},l=1):(f==="NONE"||f==="NULL"||f===null)&&(f={encode:function(){return u}},l=1);var h=f.encode(u,c.n.bitLength());return J.rsa.encrypt(h,c,l)},c};J.wrapRsaPrivateKey=function(t){return v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,v.integerToDer(0).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(J.oids.rsaEncryption).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.NULL,!1,"")]),v.create(v.Class.UNIVERSAL,v.Type.OCTETSTRING,!1,v.toDer(t).getBytes())])};J.privateKeyFromAsn1=function(t){var e={},r=[];if(v.validate(t,rg,e,r)&&(t=v.fromDer(W.util.createBuffer(e.privateKey))),e={},r=[],!v.validate(t,ng,e,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,o,s,a,c,u,f,l;return i=W.util.createBuffer(e.privateKeyModulus).toHex(),o=W.util.createBuffer(e.privateKeyPublicExponent).toHex(),s=W.util.createBuffer(e.privateKeyPrivateExponent).toHex(),a=W.util.createBuffer(e.privateKeyPrime1).toHex(),c=W.util.createBuffer(e.privateKeyPrime2).toHex(),u=W.util.createBuffer(e.privateKeyExponent1).toHex(),f=W.util.createBuffer(e.privateKeyExponent2).toHex(),l=W.util.createBuffer(e.privateKeyCoefficient).toHex(),J.setRsaPrivateKey(new st(i,16),new st(o,16),new st(s,16),new st(a,16),new st(c,16),new st(u,16),new st(f,16),new st(l,16))};J.privateKeyToAsn1=J.privateKeyToRSAPrivateKey=function(t){return v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,v.integerToDer(0).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Ve(t.n)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Ve(t.e)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Ve(t.d)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Ve(t.p)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Ve(t.q)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Ve(t.dP)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Ve(t.dQ)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Ve(t.qInv))])};J.publicKeyFromAsn1=function(t){var e={},r=[];if(v.validate(t,og,e,r)){var n=v.derToOid(e.publicKeyOid);if(n!==J.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}t=e.rsaPublicKey}if(r=[],!v.validate(t,ig,e,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var o=W.util.createBuffer(e.publicKeyModulus).toHex(),s=W.util.createBuffer(e.publicKeyExponent).toHex();return J.setRsaPublicKey(new st(o,16),new st(s,16))};J.publicKeyToAsn1=J.publicKeyToSubjectPublicKeyInfo=function(t){return v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(J.oids.rsaEncryption).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.NULL,!1,"")]),v.create(v.Class.UNIVERSAL,v.Type.BITSTRING,!1,[J.publicKeyToRSAPublicKey(t)])])};J.publicKeyToRSAPublicKey=function(t){return v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Ve(t.n)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Ve(t.e))])};function Ku(t,e,r){var n=W.util.createBuffer(),i=Math.ceil(e.n.bitLength()/8);if(t.length>i-11){var o=new Error("Message is too long for PKCS#1 v1.5 padding.");throw o.length=t.length,o.max=i-11,o}n.putByte(0),n.putByte(r);var s=i-3-t.length,a;if(r===0||r===1){a=r===0?0:255;for(var c=0;c<s;++c)n.putByte(a)}else for(;s>0;){for(var u=0,f=W.random.getBytes(s),c=0;c<s;++c)a=f.charCodeAt(c),a===0?++u:n.putByte(a);s=u}return n.putByte(0),n.putBytes(t),n}function Ji(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8),o=W.util.createBuffer(t),s=o.getByte(),a=o.getByte();if(s!==0||r&&a!==0&&a!==1||!r&&a!=2||r&&a===0&&typeof n>"u")throw new Error("Encryption block is invalid.");var c=0;if(a===0){c=i-3-n;for(var u=0;u<c;++u)if(o.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(a===1)for(c=0;o.length()>1;){if(o.getByte()!==255){--o.read;break}++c}else if(a===2)for(c=0;o.length()>1;){if(o.getByte()===0){--o.read;break}++c}var f=o.getByte();if(f!==0||c!==i-3-o.length())throw new Error("Encryption block is invalid.");return o.getBytes()}function cg(t,e,r){typeof e=="function"&&(r=e,e={}),e=e||{};var n={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(n.prng=e.prng),i();function i(){o(t.pBits,function(a,c){if(a)return r(a);if(t.p=c,t.q!==null)return s(a,t.q);o(t.qBits,s)})}function o(a,c){W.prime.generateProbablePrime(a,n,c)}function s(a,c){if(a)return r(a);if(t.q=c,t.p.compareTo(t.q)<0){var u=t.p;t.p=t.q,t.q=u}if(t.p.subtract(st.ONE).gcd(t.e).compareTo(st.ONE)!==0){t.p=null,i();return}if(t.q.subtract(st.ONE).gcd(t.e).compareTo(st.ONE)!==0){t.q=null,o(t.qBits,s);return}if(t.p1=t.p.subtract(st.ONE),t.q1=t.q.subtract(st.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(st.ONE)!==0){t.p=t.q=null,i();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,o(t.qBits,s);return}var f=t.e.modInverse(t.phi);t.keys={privateKey:J.rsa.setPrivateKey(t.n,t.e,f,t.p,t.q,f.mod(t.p1),f.mod(t.q1),t.q.modInverse(t.p)),publicKey:J.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}}function Ve(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=W.util.hexToBytes(e);return r.length>1&&(r.charCodeAt(0)===0&&!(r.charCodeAt(1)&128)||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)===128)?r.substr(1):r}function ug(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function Pu(t){return W.util.isNodejs&&typeof oa[t]=="function"}function ku(t){return typeof me.globalScope<"u"&&typeof me.globalScope.crypto=="object"&&typeof me.globalScope.crypto.subtle=="object"&&typeof me.globalScope.crypto.subtle[t]=="function"}function Uu(t){return typeof me.globalScope<"u"&&typeof me.globalScope.msCrypto=="object"&&typeof me.globalScope.msCrypto.subtle=="object"&&typeof me.globalScope.msCrypto.subtle[t]=="function"}function Ou(t){for(var e=W.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}});var $u=lt((cE,Gu)=>{var q=gt();Qs();$n();Qc();Ur();Oi();eu();iu();Wn();gu();ji();kt();typeof Vu>"u"&&(Vu=q.jsbn.BigInteger);var Vu,C=q.asn1,j=q.pki=q.pki||{};Gu.exports=j.pbe=q.pbe=q.pbe||{};var Kr=j.oids,fg={name:"EncryptedPrivateKeyInfo",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:C.Class.UNIVERSAL,type:C.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:C.Class.UNIVERSAL,type:C.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},lg={name:"PBES2Algorithms",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:C.Class.UNIVERSAL,type:C.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:C.Class.UNIVERSAL,type:C.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:C.Class.UNIVERSAL,type:C.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:C.Class.UNIVERSAL,type:C.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:C.Class.UNIVERSAL,type:C.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:C.Class.UNIVERSAL,type:C.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:C.Class.UNIVERSAL,type:C.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},hg={name:"pkcs-12PbeParams",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:C.Class.UNIVERSAL,type:C.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:C.Class.UNIVERSAL,type:C.Type.INTEGER,constructed:!1,capture:"iterations"}]};j.encryptPrivateKeyInfo=function(t,e,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=q.random.getBytesSync(r.saltSize),i=r.count,o=C.integerToDer(i),s,a,c;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var u,f,l;switch(r.algorithm){case"aes128":s=16,u=16,f=Kr["aes128-CBC"],l=q.aes.createEncryptionCipher;break;case"aes192":s=24,u=16,f=Kr["aes192-CBC"],l=q.aes.createEncryptionCipher;break;case"aes256":s=32,u=16,f=Kr["aes256-CBC"],l=q.aes.createEncryptionCipher;break;case"des":s=8,u=8,f=Kr.desCBC,l=q.des.createEncryptionCipher;break;default:var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=r.algorithm,h}var g="hmacWith"+r.prfAlgorithm.toUpperCase(),d=Hu(g),p=q.pkcs5.pbkdf2(e,n,i,s,d),y=q.random.getBytesSync(u),m=l(p);m.start(y),m.update(C.toDer(t)),m.finish(),c=m.output.getBytes();var w=dg(n,o,s,g);a=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(Kr.pkcs5PBES2).getBytes()),C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(Kr.pkcs5PBKDF2).getBytes()),w]),C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(f).getBytes()),C.create(C.Class.UNIVERSAL,C.Type.OCTETSTRING,!1,y)])])])}else if(r.algorithm==="3des"){s=24;var b=new q.util.ByteBuffer(n),p=j.pbe.generatePkcs12Key(e,b,1,i,s),y=j.pbe.generatePkcs12Key(e,b,2,i,s),m=q.des.createEncryptionCipher(p);m.start(y),m.update(C.toDer(t)),m.finish(),c=m.output.getBytes(),a=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(Kr["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OCTETSTRING,!1,n),C.create(C.Class.UNIVERSAL,C.Type.INTEGER,!1,o.getBytes())])])}else{var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=r.algorithm,h}var L=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[a,C.create(C.Class.UNIVERSAL,C.Type.OCTETSTRING,!1,c)]);return L};j.decryptPrivateKeyInfo=function(t,e){var r=null,n={},i=[];if(!C.validate(t,fg,n,i)){var o=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var s=C.derToOid(n.encryptionOid),a=j.pbe.getCipher(s,n.encryptionParams,e),c=q.util.createBuffer(n.encryptedData);return a.update(c),a.finish()&&(r=C.fromDer(a.output)),r};j.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:C.toDer(t).getBytes()};return q.pem.encode(r,{maxline:e})};j.encryptedPrivateKeyFromPem=function(t){var e=q.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return C.fromDer(e.body)};j.encryptRsaPrivateKey=function(t,e,r){if(r=r||{},!r.legacy){var n=j.wrapRsaPrivateKey(j.privateKeyToAsn1(t));return n=j.encryptPrivateKeyInfo(n,e,r),j.encryptedPrivateKeyToPem(n)}var i,o,s,a;switch(r.algorithm){case"aes128":i="AES-128-CBC",s=16,o=q.random.getBytesSync(16),a=q.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",s=24,o=q.random.getBytesSync(16),a=q.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",s=32,o=q.random.getBytesSync(16),a=q.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",s=24,o=q.random.getBytesSync(8),a=q.des.createEncryptionCipher;break;case"des":i="DES-CBC",s=8,o=q.random.getBytesSync(8),a=q.des.createEncryptionCipher;break;default:var c=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw c.algorithm=r.algorithm,c}var u=q.pbe.opensslDeriveBytes(e,o.substr(0,8),s),f=a(u);f.start(o),f.update(C.toDer(j.privateKeyToAsn1(t))),f.finish();var l={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:q.util.bytesToHex(o).toUpperCase()},body:f.output.getBytes()};return q.pem.encode(l)};j.decryptRsaPrivateKey=function(t,e){var r=null,n=q.pem.decode(t)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var o,s;switch(n.dekInfo.algorithm){case"DES-CBC":o=8,s=q.des.createDecryptionCipher;break;case"DES-EDE3-CBC":o=24,s=q.des.createDecryptionCipher;break;case"AES-128-CBC":o=16,s=q.aes.createDecryptionCipher;break;case"AES-192-CBC":o=24,s=q.aes.createDecryptionCipher;break;case"AES-256-CBC":o=32,s=q.aes.createDecryptionCipher;break;case"RC2-40-CBC":o=5,s=function(l){return q.rc2.createDecryptionCipher(l,40)};break;case"RC2-64-CBC":o=8,s=function(l){return q.rc2.createDecryptionCipher(l,64)};break;case"RC2-128-CBC":o=16,s=function(l){return q.rc2.createDecryptionCipher(l,128)};break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var a=q.util.hexToBytes(n.dekInfo.parameters),c=q.pbe.opensslDeriveBytes(e,a.substr(0,8),o),u=s(c);if(u.start(a),u.update(q.util.createBuffer(n.body)),u.finish())r=u.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=j.decryptPrivateKeyInfo(C.fromDer(r),e):r=C.fromDer(r),r!==null&&(r=j.privateKeyFromAsn1(r)),r};j.pbe.generatePkcs12Key=function(t,e,r,n,i,o){var s,a;if(typeof o>"u"||o===null){if(!("sha1"in q.md))throw new Error('"sha1" hash algorithm unavailable.');o=q.md.sha1.create()}var c=o.digestLength,u=o.blockLength,f=new q.util.ByteBuffer,l=new q.util.ByteBuffer;if(t!=null){for(a=0;a<t.length;a++)l.putInt16(t.charCodeAt(a));l.putInt16(0)}var h=l.length(),g=e.length(),d=new q.util.ByteBuffer;d.fillWithByte(r,u);var p=u*Math.ceil(g/u),y=new q.util.ByteBuffer;for(a=0;a<p;a++)y.putByte(e.at(a%g));var m=u*Math.ceil(h/u),w=new q.util.ByteBuffer;for(a=0;a<m;a++)w.putByte(l.at(a%h));var b=y;b.putBuffer(w);for(var L=Math.ceil(i/c),E=1;E<=L;E++){var S=new q.util.ByteBuffer;S.putBytes(d.bytes()),S.putBytes(b.bytes());for(var P=0;P<n;P++)o.start(),o.update(S.getBytes()),S=o.digest();var B=new q.util.ByteBuffer;for(a=0;a<u;a++)B.putByte(S.at(a%c));var O=Math.ceil(g/u)+Math.ceil(h/u),K=new q.util.ByteBuffer;for(s=0;s<O;s++){var U=new q.util.ByteBuffer(b.getBytes(u)),V=511;for(a=B.length()-1;a>=0;a--)V=V>>8,V+=B.at(a)+U.at(a),U.setAt(a,V&255);K.putBuffer(U)}b=K,f.putBuffer(S)}return f.truncate(f.length()-i),f};j.pbe.getCipher=function(t,e,r){switch(t){case j.oids.pkcs5PBES2:return j.pbe.getCipherForPBES2(t,e,r);case j.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case j.oids["pbewithSHAAnd40BitRC2-CBC"]:return j.pbe.getCipherForPKCS12PBE(t,e,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=t,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};j.pbe.getCipherForPBES2=function(t,e,r){var n={},i=[];if(!C.validate(e,lg,n,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}if(t=C.derToOid(n.kdfOid),t!==j.oids.pkcs5PBKDF2){var o=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw o.oid=t,o.supportedOids=["pkcs5PBKDF2"],o}if(t=C.derToOid(n.encOid),t!==j.oids["aes128-CBC"]&&t!==j.oids["aes192-CBC"]&&t!==j.oids["aes256-CBC"]&&t!==j.oids["des-EDE3-CBC"]&&t!==j.oids.desCBC){var o=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw o.oid=t,o.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],o}var s=n.kdfSalt,a=q.util.createBuffer(n.kdfIterationCount);a=a.getInt(a.length()<<3);var c,u;switch(j.oids[t]){case"aes128-CBC":c=16,u=q.aes.createDecryptionCipher;break;case"aes192-CBC":c=24,u=q.aes.createDecryptionCipher;break;case"aes256-CBC":c=32,u=q.aes.createDecryptionCipher;break;case"des-EDE3-CBC":c=24,u=q.des.createDecryptionCipher;break;case"desCBC":c=8,u=q.des.createDecryptionCipher;break}var f=zu(n.prfOid),l=q.pkcs5.pbkdf2(r,s,a,c,f),h=n.encIv,g=u(l);return g.start(h),g};j.pbe.getCipherForPKCS12PBE=function(t,e,r){var n={},i=[];if(!C.validate(e,hg,n,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var s=q.util.createBuffer(n.salt),a=q.util.createBuffer(n.iterations);a=a.getInt(a.length()<<3);var c,u,f;switch(t){case j.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:c=24,u=8,f=q.des.startDecrypting;break;case j.oids["pbewithSHAAnd40BitRC2-CBC"]:c=5,u=8,f=function(p,y){var m=q.rc2.createDecryptionCipher(p,40);return m.start(y,null),m};break;default:var o=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw o.oid=t,o}var l=zu(n.prfOid),h=j.pbe.generatePkcs12Key(r,s,1,a,c,l);l.start();var g=j.pbe.generatePkcs12Key(r,s,2,a,u,l);return f(h,g)};j.pbe.opensslDeriveBytes=function(t,e,r,n){if(typeof n>"u"||n===null){if(!("md5"in q.md))throw new Error('"md5" hash algorithm unavailable.');n=q.md.md5.create()}e===null&&(e="");for(var i=[qu(n,t+e)],o=16,s=1;o<r;++s,o+=16)i.push(qu(n,i[s-1]+t+e));return i.join("").substr(0,r)};function qu(t,e){return t.start().update(e).digest().getBytes()}function zu(t){var e;if(!t)e="hmacWithSHA1";else if(e=j.oids[C.derToOid(t)],!e){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return Hu(e)}function Hu(t){var e=q.md;switch(t){case"hmacWithSHA224":e=q.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}function dg(t,e,r,n){var i=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OCTETSTRING,!1,t),C.create(C.Class.UNIVERSAL,C.Type.INTEGER,!1,e.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(C.create(C.Class.UNIVERSAL,C.Type.INTEGER,!1,q.util.hexToBytes(r.toString(16))),C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(j.oids[n]).getBytes()),C.create(C.Class.UNIVERSAL,C.Type.NULL,!1,"")])),i}});var Lf=lt((l8,Df)=>{var wt=gt();Ur();kt();var ni=Df.exports=wt.sha512=wt.sha512||{};wt.md.sha512=wt.md.algorithms.sha512=ni;var Rf=wt.sha384=wt.sha512.sha384=wt.sha512.sha384||{};Rf.create=function(){return ni.create("SHA-384")};wt.md.sha384=wt.md.algorithms.sha384=Rf;wt.sha512.sha256=wt.sha512.sha256||{create:function(){return ni.create("SHA-512/256")}};wt.md["sha512/256"]=wt.md.algorithms["sha512/256"]=wt.sha512.sha256;wt.sha512.sha224=wt.sha512.sha224||{create:function(){return ni.create("SHA-512/224")}};wt.md["sha512/224"]=wt.md.algorithms["sha512/224"]=wt.sha512.sha224;ni.create=function(t){if(Nf||Dm(),typeof t>"u"&&(t="SHA-512"),!(t in $r))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=$r[t],r=null,n=wt.util.createBuffer(),i=new Array(80),o=0;o<80;++o)i[o]=new Array(2);var s=64;switch(t){case"SHA-384":s=48;break;case"SHA-512/256":s=32;break;case"SHA-512/224":s=28;break}var a={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:s,messageLength:0,fullMessageLength:null,messageLengthSize:16};return a.start=function(){a.messageLength=0,a.fullMessageLength=a.messageLength128=[];for(var c=a.messageLengthSize/4,u=0;u<c;++u)a.fullMessageLength.push(0);n=wt.util.createBuffer(),r=new Array(e.length);for(var u=0;u<e.length;++u)r[u]=e[u].slice(0);return a},a.start(),a.update=function(c,u){u==="utf8"&&(c=wt.util.encodeUtf8(c));var f=c.length;a.messageLength+=f,f=[f/4294967296>>>0,f>>>0];for(var l=a.fullMessageLength.length-1;l>=0;--l)a.fullMessageLength[l]+=f[1],f[1]=f[0]+(a.fullMessageLength[l]/4294967296>>>0),a.fullMessageLength[l]=a.fullMessageLength[l]>>>0,f[0]=f[1]/4294967296>>>0;return n.putBytes(c),_f(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),a},a.digest=function(){var c=wt.util.createBuffer();c.putBytes(n.bytes());var u=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize,f=u&a.blockLength-1;c.putBytes(Oa.substr(0,a.blockLength-f));for(var l,h,g=a.fullMessageLength[0]*8,d=0;d<a.fullMessageLength.length-1;++d)l=a.fullMessageLength[d+1]*8,h=l/4294967296>>>0,g+=h,c.putInt32(g>>>0),g=l>>>0;c.putInt32(g);for(var p=new Array(r.length),d=0;d<r.length;++d)p[d]=r[d].slice(0);_f(p,i,c);var y=wt.util.createBuffer(),m;t==="SHA-512"?m=p.length:t==="SHA-384"?m=p.length-2:m=p.length-4;for(var d=0;d<m;++d)y.putInt32(p[d][0]),(d!==m-1||t!=="SHA-512/224")&&y.putInt32(p[d][1]);return y},a};var Oa=null,Nf=!1,Fa=null,$r=null;function Dm(){Oa="\x80",Oa+=wt.util.fillString("\0",128),Fa=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],$r={},$r["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],$r["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],$r["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],$r["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],Nf=!0}function _f(t,e,r){for(var n,i,o,s,a,c,u,f,l,h,g,d,p,y,m,w,b,L,E,S,P,B,O,K,U,V,Y,et,A,R,N,k,I,z,$,Z=r.length();Z>=128;){for(A=0;A<16;++A)e[A][0]=r.getInt32()>>>0,e[A][1]=r.getInt32()>>>0;for(;A<80;++A)k=e[A-2],R=k[0],N=k[1],n=((R>>>19|N<<13)^(N>>>29|R<<3)^R>>>6)>>>0,i=((R<<13|N>>>19)^(N<<3|R>>>29)^(R<<26|N>>>6))>>>0,z=e[A-15],R=z[0],N=z[1],o=((R>>>1|N<<31)^(R>>>8|N<<24)^R>>>7)>>>0,s=((R<<31|N>>>1)^(R<<24|N>>>8)^(R<<25|N>>>7))>>>0,I=e[A-7],$=e[A-16],N=i+I[1]+s+$[1],e[A][0]=n+I[0]+o+$[0]+(N/4294967296>>>0)>>>0,e[A][1]=N>>>0;for(p=t[0][0],y=t[0][1],m=t[1][0],w=t[1][1],b=t[2][0],L=t[2][1],E=t[3][0],S=t[3][1],P=t[4][0],B=t[4][1],O=t[5][0],K=t[5][1],U=t[6][0],V=t[6][1],Y=t[7][0],et=t[7][1],A=0;A<80;++A)u=((P>>>14|B<<18)^(P>>>18|B<<14)^(B>>>9|P<<23))>>>0,f=((P<<18|B>>>14)^(P<<14|B>>>18)^(B<<23|P>>>9))>>>0,l=(U^P&(O^U))>>>0,h=(V^B&(K^V))>>>0,a=((p>>>28|y<<4)^(y>>>2|p<<30)^(y>>>7|p<<25))>>>0,c=((p<<4|y>>>28)^(y<<30|p>>>2)^(y<<25|p>>>7))>>>0,g=(p&m|b&(p^m))>>>0,d=(y&w|L&(y^w))>>>0,N=et+f+h+Fa[A][1]+e[A][1],n=Y+u+l+Fa[A][0]+e[A][0]+(N/4294967296>>>0)>>>0,i=N>>>0,N=c+d,o=a+g+(N/4294967296>>>0)>>>0,s=N>>>0,Y=U,et=V,U=O,V=K,O=P,K=B,N=S+i,P=E+n+(N/4294967296>>>0)>>>0,B=N>>>0,E=b,S=L,b=m,L=w,m=p,w=y,N=i+s,p=n+o+(N/4294967296>>>0)>>>0,y=N>>>0;N=t[0][1]+y,t[0][0]=t[0][0]+p+(N/4294967296>>>0)>>>0,t[0][1]=N>>>0,N=t[1][1]+w,t[1][0]=t[1][0]+m+(N/4294967296>>>0)>>>0,t[1][1]=N>>>0,N=t[2][1]+L,t[2][0]=t[2][0]+b+(N/4294967296>>>0)>>>0,t[2][1]=N>>>0,N=t[3][1]+S,t[3][0]=t[3][0]+E+(N/4294967296>>>0)>>>0,t[3][1]=N>>>0,N=t[4][1]+B,t[4][0]=t[4][0]+P+(N/4294967296>>>0)>>>0,t[4][1]=N>>>0,N=t[5][1]+K,t[5][0]=t[5][0]+O+(N/4294967296>>>0)>>>0,t[5][1]=N>>>0,N=t[6][1]+V,t[6][0]=t[6][0]+U+(N/4294967296>>>0)>>>0,t[6][1]=N>>>0,N=t[7][1]+et,t[7][0]=t[7][0]+Y+(N/4294967296>>>0)>>>0,t[7][1]=N>>>0,Z-=128}}});var Eo=lt((S3,il)=>{"use strict";function nl(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function sx(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return nl(t,r)}catch{r.message=t.message,r.stack=t.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(t)),nl(new i,r)}}il.exports=sx});var Xa=lt((R3,Qa)=>{var _3=function(){typeof Qa<"u"&&(Qa.exports=p);var t=86400,e=3200,r=146097*e/400,n=t*r,i=1e3*n,o=864e13,s=4294967296,a=1e6,c="000000000",u=Math.trunc||function(B){var O=B-B%1;return O==0&&(B<0||B===0&&1/B!=1/0)?-0:O},f=p.prototype,l=(p.fromDate=function(B){return new p(+B)},p.fromInt64BE=L(0,1,2,3,0,4),p.fromInt64LE=L(3,2,1,0,4,0),p.fromString=function(U){var O,K=new p,U=(U+="").replace(/^\s*[+\-]?\d+/,function(Y){var Y=+Y,et=1970+(Y-1970)%400;return K.year=Y-et,et}).replace(/(?:Z|([+\-]\d{2}):?(\d{2}))$/,function(V,Y,et){return Y<0&&(et*=-1),O=6e4*(60*+Y+ +et),""}).replace(/\.\d+$/,function(V){return K.nano=+(V+c).substr(1,9),""}).split(/\D+/);if(1<U.length?U[1]--:U[1]=0,K.time=O=Date.UTC.apply(Date,U)-(O||0),isNaN(O))throw new TypeError("Invalid Date");return y(K)},p.fromTimeT=function(B){return w(B,0)},f.year=0,f.time=0,f.nano=0,f.addNano=function(B){return this.nano+=+B||0,this},f.getNano=function(){var B=y(this);return(B.time%1e3*a+ +B.nano+1e9)%1e9},f.getTimeT=function(){var O=y(this),B=Math.floor(O.time/1e3),O=O.year;return O&&(B+=O*r*t/e),B},f.getYear=function(){return this.toDate().getUTCFullYear()+this.year},f.toDate=function(){return m(y(this).time)},f.toJSON=function(){return this.toString().replace(/0{1,6}Z$/,"Z")},f.toString=function(B){var O=this,K=O.toDate(),U={H:function(){return S(K.getUTCHours())},L:function(){return P(K.getUTCMilliseconds(),3)},M:function(){return S(K.getUTCMinutes())},N:function(){return P(O.getNano(),9)},S:function(){return S(K.getUTCSeconds())},Y:function(){var V=O.getYear();return 999999<V?"+"+V:9999<V?"+"+P(V,6):0<=V?P(V,4):-999999<=V?"-"+P(-V,6):V},a:function(){return g[K.getUTCDay()]},b:function(){return h[K.getUTCMonth()]},d:function(){return S(K.getUTCDate())},e:function(){return function(V){return(9<V?"":" ")+(0|V)}(K.getUTCDate())},m:function(){return S(K.getUTCMonth()+1)}};return function V(Y){return Y.replace(/%./g,function(et){var R=et[1],A=d[R],R=U[R];return A?V(A):R?R():et})}(B||l)},f.writeInt64BE=b(0,1,2,3,0,4),f.writeInt64LE=b(3,2,1,0,4,0),"%Y-%m-%dT%H:%M:%S.%NZ"),h=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],g=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],d={"%":"%",F:"%Y-%m-%d",n:`
`,R:"%H:%M",T:"%H:%M:%S",t:"	",X:"%T",Z:"GMT",z:"+0000"};return p;function p(B,O,K){var U=this;if(!(U instanceof p))return new p(B,O,K);U.time=+B||0,U.nano=+O||0,U.year=+K||0,y(U)}function y(B){var O,K,U,V=B.year,Y=B.time,et=B.nano,A=((et<0||a<=et)&&(et-=(K=Math.floor(et/a))*a,Y+=K,K=1),V%e);return(Y<-o||o<Y||A)&&((O=u(Y/i))&&(V+=O*e,Y-=O*i),(U=m(Y)).setUTCFullYear(A+U.getUTCFullYear()),U=(Y=+U)+(O=u((V-=A)/e))*i,O&&-o<=U&&U<=o&&(V-=O*e,Y=U),K=1),K&&(B.year=V,B.time=Y,B.nano=et),B}function m(B){var O=new Date(0);return O.setTime(B),O}function w(V,U){V=+V||0;var K=u((U=(U|0)*s)/n)+u(V/n),U=U%n+V%n,V=u(U/n);return V&&(K+=V,U-=V*n),new p(1e3*U,0,K*e)}function b(B,O,K,U,V,Y){return function(A,R){var k=y(this);A=A||new Array(8),E(A,R|=0);var I=Math.floor(k.time/1e3),k=k.year*(r*t/e),N=u(k/s)+u(I/s),k=k%s+I%s,I=Math.floor(k/s);return I&&(N+=I,k-=I*s),et(A,R+V,N),et(A,R+Y,k),A};function et(A,R,N){A[R+B]=N>>24&255,A[R+O]=N>>16&255,A[R+K]=N>>8&255,A[R+U]=255&N}}function L(B,O,K,U,V,Y){return function(A,R){E(A,R|=0);var N=et(A,R+V);return w(et(A,R+Y),N)};function et(A,R){return 16777216*A[R+B]+(A[R+O]<<16|A[R+K]<<8|A[R+U])}}function E(B,O){if(B=B&&B.length,B==null)throw new TypeError("Invalid Buffer");if(B<O+8)throw new RangeError("Out of range")}function S(B){return(9<B?"":"0")+(0|B)}function P(B,O){return(c+(0|B)).substr(-O)}}()});var Eh=lt((C6,d0)=>{"use strict";var $x=Object.prototype.hasOwnProperty,ee="~";function mi(){}Object.create&&(mi.prototype=Object.create(null),new mi().__proto__||(ee=!1));function Wx(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function wh(t,e,r,n,i){if(typeof r!="function")throw new TypeError("The listener must be a function");var o=new Wx(r,n||t,i),s=ee?ee+e:e;return t._events[s]?t._events[s].fn?t._events[s]=[t._events[s],o]:t._events[s].push(o):(t._events[s]=o,t._eventsCount++),t}function Oo(t,e){--t._eventsCount===0?t._events=new mi:delete t._events[e]}function Xt(){this._events=new mi,this._eventsCount=0}Xt.prototype.eventNames=function(){var e=[],r,n;if(this._eventsCount===0)return e;for(n in r=this._events)$x.call(r,n)&&e.push(ee?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(r)):e};Xt.prototype.listeners=function(e){var r=ee?ee+e:e,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,s=new Array(o);i<o;i++)s[i]=n[i].fn;return s};Xt.prototype.listenerCount=function(e){var r=ee?ee+e:e,n=this._events[r];return n?n.fn?1:n.length:0};Xt.prototype.emit=function(e,r,n,i,o,s){var a=ee?ee+e:e;if(!this._events[a])return!1;var c=this._events[a],u=arguments.length,f,l;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,r),!0;case 3:return c.fn.call(c.context,r,n),!0;case 4:return c.fn.call(c.context,r,n,i),!0;case 5:return c.fn.call(c.context,r,n,i,o),!0;case 6:return c.fn.call(c.context,r,n,i,o,s),!0}for(l=1,f=new Array(u-1);l<u;l++)f[l-1]=arguments[l];c.fn.apply(c.context,f)}else{var h=c.length,g;for(l=0;l<h;l++)switch(c[l].once&&this.removeListener(e,c[l].fn,void 0,!0),u){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,r);break;case 3:c[l].fn.call(c[l].context,r,n);break;case 4:c[l].fn.call(c[l].context,r,n,i);break;default:if(!f)for(g=1,f=new Array(u-1);g<u;g++)f[g-1]=arguments[g];c[l].fn.apply(c[l].context,f)}}return!0};Xt.prototype.on=function(e,r,n){return wh(this,e,r,n,!1)};Xt.prototype.once=function(e,r,n){return wh(this,e,r,n,!0)};Xt.prototype.removeListener=function(e,r,n,i){var o=ee?ee+e:e;if(!this._events[o])return this;if(!r)return Oo(this,o),this;var s=this._events[o];if(s.fn)s.fn===r&&(!i||s.once)&&(!n||s.context===n)&&Oo(this,o);else{for(var a=0,c=[],u=s.length;a<u;a++)(s[a].fn!==r||i&&!s[a].once||n&&s[a].context!==n)&&c.push(s[a]);c.length?this._events[o]=c.length===1?c[0]:c:Oo(this,o)}return this};Xt.prototype.removeAllListeners=function(e){var r;return e?(r=ee?ee+e:e,this._events[r]&&Oo(this,r)):(this._events=new mi,this._eventsCount=0),this};Xt.prototype.off=Xt.prototype.removeListener;Xt.prototype.addListener=Xt.prototype.on;Xt.prefixed=ee;Xt.EventEmitter=Xt;typeof d0<"u"&&(d0.exports=Xt)});var t2={};Kt(t2,{createDelegatedRoutingV1HttpApiClient:()=>jx});var D0=Symbol.for("@libp2p/content-routing");var X=class extends Error{code;props;constructor(e,r,n){super(e),this.code=r,this.name=n?.name??"CodeError",this.props=n??{}}};var Qo=class extends Event{detail;constructor(e,r){super(e,r),this.detail=r?.detail}},a2=globalThis.CustomEvent??Qo;var L0=(t,...e)=>{try{[...e]}catch{}};var P0=Symbol.for("@libp2p/peer-routing");var ae=Pt(K0(),1);var es={};Kt(es,{base32:()=>Ee,base32hex:()=>xd,base32hexpad:()=>bd,base32hexpadupper:()=>wd,base32hexupper:()=>vd,base32pad:()=>gd,base32padupper:()=>md,base32upper:()=>$0,base32z:()=>Ed});function ld(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var o=t.charAt(i),s=o.charCodeAt(0);if(r[s]!==255)throw new TypeError(o+" is ambiguous");r[s]=i}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function l(d){if(d instanceof Uint8Array||(ArrayBuffer.isView(d)?d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength):Array.isArray(d)&&(d=Uint8Array.from(d))),!(d instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(d.length===0)return"";for(var p=0,y=0,m=0,w=d.length;m!==w&&d[m]===0;)m++,p++;for(var b=(w-m)*f+1>>>0,L=new Uint8Array(b);m!==w;){for(var E=d[m],S=0,P=b-1;(E!==0||S<y)&&P!==-1;P--,S++)E+=256*L[P]>>>0,L[P]=E%a>>>0,E=E/a>>>0;if(E!==0)throw new Error("Non-zero carry");y=S,m++}for(var B=b-y;B!==b&&L[B]===0;)B++;for(var O=c.repeat(p);B<b;++B)O+=t.charAt(L[B]);return O}function h(d){if(typeof d!="string")throw new TypeError("Expected String");if(d.length===0)return new Uint8Array;var p=0;if(d[p]!==" "){for(var y=0,m=0;d[p]===c;)y++,p++;for(var w=(d.length-p)*u+1>>>0,b=new Uint8Array(w);d[p];){var L=r[d.charCodeAt(p)];if(L===255)return;for(var E=0,S=w-1;(L!==0||E<m)&&S!==-1;S--,E++)L+=a*b[S]>>>0,b[S]=L%256>>>0,L=L/256>>>0;if(L!==0)throw new Error("Non-zero carry");m=E,p++}if(d[p]!==" "){for(var P=w-m;P!==w&&b[P]===0;)P++;for(var B=new Uint8Array(y+(w-P)),O=y;P!==w;)B[O++]=b[P++];return B}}}function g(d){var p=h(d);if(p)return p;throw new Error(`Non-${e} character`)}return{encode:l,decodeUnsafe:h,decode:g}}var hd=ld,dd=hd,M0=dd;var d2=new Uint8Array(0);var V0=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},We=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};var q0=t=>new TextEncoder().encode(t),z0=t=>new TextDecoder().decode(t);var Xo=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Jo=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return G0(this,e)}},jo=class{constructor(e){this.decoders=e}or(e){return G0(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},G0=(t,e)=>new jo({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),ts=class{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new Xo(e,r,n),this.decoder=new Jo(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},tn=({name:t,prefix:e,encode:r,decode:n})=>new ts(t,e,r,n),fr=({prefix:t,name:e,alphabet:r})=>{let{encode:n,decode:i}=M0(r,e);return tn({prefix:t,name:e,encode:n,decode:o=>We(i(o))})},pd=(t,e,r,n)=>{let i={};for(let f=0;f<e.length;++f)i[e[f]]=f;let o=t.length;for(;t[o-1]==="=";)--o;let s=new Uint8Array(o*r/8|0),a=0,c=0,u=0;for(let f=0;f<o;++f){let l=i[t[f]];if(l===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|l,a+=r,a>=8&&(a-=8,s[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return s},yd=(t,e,r)=>{let n=e[e.length-1]==="=",i=(1<<r)-1,o="",s=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],s+=8;s>r;)s-=r,o+=e[i&a>>s];if(s&&(o+=e[i&a<<r-s]),n)for(;o.length*r&7;)o+="=";return o},It=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>tn({prefix:e,name:t,encode(i){return yd(i,n,r)},decode(i){return pd(i,n,r,t)}});var Ee=It({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),$0=It({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),gd=It({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),md=It({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),xd=It({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),vd=It({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),bd=It({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),wd=It({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Ed=It({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var rs={};Kt(rs,{base58btc:()=>_t,base58flickr:()=>Sd});var _t=fr({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Sd=fr({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var ns={};Kt(ns,{base64:()=>en,base64pad:()=>Bd,base64url:()=>Ad,base64urlpad:()=>Cd});var en=It({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Bd=It({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Ad=It({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Cd=It({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});ae.default.formatters.b=t=>t==null?"undefined":_t.baseEncode(t);ae.default.formatters.t=t=>t==null?"undefined":Ee.baseEncode(t);ae.default.formatters.m=t=>t==null?"undefined":en.baseEncode(t);ae.default.formatters.p=t=>t==null?"undefined":t.toString();ae.default.formatters.c=t=>t==null?"undefined":t.toString();ae.default.formatters.k=t=>t==null?"undefined":t.toString();ae.default.formatters.a=t=>t==null?"undefined":t.toString();function Id(t){let e=()=>{};return e.enabled=!1,e.color="",e.diff=0,e.log=()=>{},e.namespace=t,e.destroy=()=>!0,e.extend=()=>e,e}function lr(t){let e=Id(`${t}:trace`);return ae.default.enabled(`${t}:trace`)&&ae.default.names.map(r=>r.toString()).find(r=>r.includes(":trace"))!=null&&(e=(0,ae.default)(`${t}:trace`)),Object.assign((0,ae.default)(t),{error:(0,ae.default)(`${t}:error`),trace:e})}var is=Symbol.for("@libp2p/peer-id");function W0(t){return t!=null&&!!t[is]}var os={};Kt(os,{base10:()=>Td});var Td=fr({prefix:"9",name:"base10",alphabet:"0123456789"});var ss={};Kt(ss,{base16:()=>_d,base16upper:()=>Rd});var _d=It({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Rd=It({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var as={};Kt(as,{base2:()=>Nd});var Nd=It({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var cs={};Kt(cs,{base256emoji:()=>Ud});var Y0=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),Dd=Y0.reduce((t,e,r)=>(t[r]=e,t),[]),Ld=Y0.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function Pd(t){return t.reduce((e,r)=>(e+=Dd[r],e),"")}function kd(t){let e=[];for(let r of t){let n=Ld[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}var Ud=tn({prefix:"\u{1F680}",name:"base256emoji",encode:Pd,decode:kd});var us={};Kt(us,{base36:()=>Ii,base36upper:()=>Od});var Ii=fr({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Od=fr({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var fs={};Kt(fs,{base8:()=>Fd});var Fd=It({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var ls={};Kt(ls,{identity:()=>Kd});var Kd=tn({prefix:"\0",name:"identity",encode:t=>z0(t),decode:t=>q0(t)});var U2=new TextEncoder,O2=new TextDecoder;var ds={};Kt(ds,{identity:()=>Pe});var qd=X0,Z0=128,zd=127,Hd=~zd,Gd=Math.pow(2,31);function X0(t,e,r){e=e||[],r=r||0;for(var n=r;t>=Gd;)e[r++]=t&255|Z0,t/=128;for(;t&Hd;)e[r++]=t&255|Z0,t>>>=7;return e[r]=t|0,X0.bytes=r-n+1,e}var $d=hs,Wd=128,Q0=127;function hs(t,n){var r=0,n=n||0,i=0,o=n,s,a=t.length;do{if(o>=a)throw hs.bytes=0,new RangeError("Could not decode varint");s=t[o++],r+=i<28?(s&Q0)<<i:(s&Q0)*Math.pow(2,i),i+=7}while(s>=Wd);return hs.bytes=o-n,r}var Yd=Math.pow(2,7),Zd=Math.pow(2,14),Qd=Math.pow(2,21),Xd=Math.pow(2,28),Jd=Math.pow(2,35),jd=Math.pow(2,42),tp=Math.pow(2,49),ep=Math.pow(2,56),rp=Math.pow(2,63),np=function(t){return t<Yd?1:t<Zd?2:t<Qd?3:t<Xd?4:t<Jd?5:t<jd?6:t<tp?7:t<ep?8:t<rp?9:10},ip={encode:qd,decode:$d,encodingLength:np},op=ip,On=op;var Fn=(t,e=0)=>[On.decode(t,e),On.decode.bytes],rn=(t,e,r=0)=>(On.encode(t,e,r),e),nn=t=>On.encodingLength(t);var Le=(t,e)=>{let r=e.byteLength,n=nn(t),i=n+nn(r),o=new Uint8Array(i+r);return rn(t,o,0),rn(r,o,n),o.set(e,i),new on(t,r,e,o)},hr=t=>{let e=We(t),[r,n]=Fn(e),[i,o]=Fn(e.subarray(n)),s=e.subarray(n+o);if(s.byteLength!==i)throw new Error("Incorrect length");return new on(r,i,s,e)},J0=(t,e)=>{if(t===e)return!0;{let r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&V0(t.bytes,r.bytes)}},on=class{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}};var j0=0,sp="identity",tc=We,ap=t=>Le(j0,tc(t)),Pe={code:j0,name:sp,encode:tc,digest:ap};var gs={};Kt(gs,{sha256:()=>$t,sha512:()=>cp});var ys=({name:t,code:e,encode:r})=>new ps(t,e,r),ps=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?Le(this.code,r):r.then(n=>Le(this.code,n))}else throw Error("Unknown type, must be binary type")}};var rc=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),$t=ys({name:"sha2-256",code:18,encode:rc("SHA-256")}),cp=ys({name:"sha2-512",code:19,encode:rc("SHA-512")});var nc=(t,e)=>{let{bytes:r,version:n}=t;switch(n){case 0:return fp(r,ms(t),e||_t.encoder);default:return lp(r,ms(t),e||Ee.encoder)}};var ic=new WeakMap,ms=t=>{let e=ic.get(t);if(e==null){let r=new Map;return ic.set(t,r),r}return e},Jt=class t{constructor(e,r,n,i){this.code=r,this.version=e,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:r}=this;if(e!==Kn)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==hp)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return t.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=Le(e,r);return t.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return t.equals(this,e)}static equals(e,r){let n=r;return n&&e.code===n.code&&e.version===n.version&&J0(e.multihash,n.multihash)}toString(e){return nc(this,e)}toJSON(){return{"/":nc(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;let r=e;if(r instanceof t)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:i,multihash:o,bytes:s}=r;return new t(n,i,o,s||oc(n,i,o.bytes))}else if(r[dp]===!0){let{version:n,multihash:i,code:o}=r,s=hr(i);return t.create(n,o,s)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==Kn)throw new Error(`Version 0 CID must use dag-pb (code: ${Kn}) block encoding`);return new t(e,r,n,n.bytes)}case 1:{let i=oc(e,r,n.bytes);return new t(e,r,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return t.create(0,Kn,e)}static createV1(e,r){return t.create(1,e,r)}static decode(e){let[r,n]=t.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=t.inspectBytes(e),n=r.size-r.multihashSize,i=We(e.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");let o=i.subarray(r.multihashSize-r.digestSize),s=new on(r.multihashCode,r.digestSize,o,i);return[r.version===0?t.createV0(s):t.createV1(r.codec,s),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[l,h]=Fn(e.subarray(r));return r+=h,l},i=n(),o=Kn;if(i===18?(i=0,r=0):o=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let s=r,a=n(),c=n(),u=r+c,f=u-s;return{version:i,codec:o,multihashCode:a,digestSize:c,multihashSize:f,size:u}}static parse(e,r){let[n,i]=up(e,r),o=t.decode(i);if(o.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return ms(o).set(n,e),o}},up=(t,e)=>{switch(t[0]){case"Q":{let r=e||_t;return[_t.prefix,r.decode(`${_t.prefix}${t}`)]}case _t.prefix:{let r=e||_t;return[_t.prefix,r.decode(t)]}case Ee.prefix:{let r=e||Ee;return[Ee.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},fp=(t,e,r)=>{let{prefix:n}=r;if(n!==_t.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=e.get(n);if(i==null){let o=r.encode(t).slice(1);return e.set(n,o),o}else return i},lp=(t,e,r)=>{let{prefix:n}=r,i=e.get(n);if(i==null){let o=r.encode(t);return e.set(n,o),o}else return i},Kn=112,hp=18,oc=(t,e,r)=>{let n=nn(t),i=n+nn(e),o=new Uint8Array(i+r.byteLength);return rn(t,o,0),rn(e,o,n),o.set(r,i),o},dp=Symbol.for("@ipld/js-cid/CID");var pr={...ls,...as,...fs,...os,...ss,...es,...us,...rs,...ns,...cs},j2={...gs,...ds};function Rt(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}var pp=Symbol.for("nodejs.util.inspect.custom"),sc=Object.values(pr).map(t=>t.decoder).reduce((t,e)=>t.or(e),pr.identity.decoder),ac=114,xs=36,vs=37,Mn=class{type;multihash;privateKey;publicKey;string;constructor(e){this.type=e.type,this.multihash=e.multihash,this.privateKey=e.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}[is]=!0;toString(){return this.string==null&&(this.string=_t.encode(this.multihash.bytes).slice(1)),this.string}toCID(){return Jt.createV1(ac,this.multihash)}toBytes(){return this.multihash.bytes}toJSON(){return this.toString()}equals(e){if(e instanceof Uint8Array)return Rt(this.multihash.bytes,e);if(typeof e=="string")return un(e).equals(this);if(e?.multihash?.bytes!=null)return Rt(this.multihash.bytes,e.multihash.bytes);throw new Error("not valid Id")}[pp](){return`PeerId(${this.toString()})`}},sn=class extends Mn{type="RSA";publicKey;constructor(e){super({...e,type:"RSA"}),this.publicKey=e.publicKey}},an=class extends Mn{type="Ed25519";publicKey;constructor(e){super({...e,type:"Ed25519"}),this.publicKey=e.multihash.digest}},cn=class extends Mn{type="secp256k1";publicKey;constructor(e){super({...e,type:"secp256k1"}),this.publicKey=e.multihash.digest}};function un(t,e){if(e=e??sc,t.charAt(0)==="1"||t.charAt(0)==="Q"){let r=hr(_t.decode(`z${t}`));return t.startsWith("12D")?new an({multihash:r}):t.startsWith("16U")?new cn({multihash:r}):new sn({multihash:r})}return Vn(sc.decode(t))}function Vn(t){try{let e=hr(t);if(e.code===Pe.code){if(e.digest.length===xs)return new an({multihash:e});if(e.digest.length===vs)return new cn({multihash:e})}if(e.code===$t.code)return new sn({multihash:e})}catch{return yp(Jt.decode(t))}throw new Error("Supplied PeerID CID is invalid")}function yp(t){if(t==null||t.multihash==null||t.version==null||t.version===1&&t.code!==ac)throw new Error("Supplied PeerID CID is invalid");let e=t.multihash;if(e.code===$t.code)return new sn({multihash:t.multihash});if(e.code===Pe.code){if(e.digest.length===xs)return new an({multihash:t.multihash});if(e.digest.length===vs)return new cn({multihash:t.multihash})}throw new Error("Supplied PeerID CID is invalid")}async function cc(t,e){return t.length===xs?new an({multihash:Le(Pe.code,t),privateKey:e}):t.length===vs?new cn({multihash:Le(Pe.code,t),privateKey:e}):new sn({multihash:await $t.digest(t),publicKey:t,privateKey:e})}var lv=Symbol.for("@libp2p/connection");var dv=Symbol.for("@libp2p/content-routing");var gv=Symbol.for("@libp2p/peer-discovery");var xv=Symbol.for("@libp2p/peer-id");var bv=Symbol.for("@libp2p/peer-routing");var uc;(function(t){t.Accept="accept",t.Ignore="ignore",t.Reject="reject"})(uc||(uc={}));var Bv=Symbol.for("@libp2p/transport");var fc;(function(t){t[t.FATAL_ALL=0]="FATAL_ALL",t[t.NO_FATAL=1]="NO_FATAL"})(fc||(fc={}));var _i=class extends Error{code;props;constructor(e,r,n){super(e),this.code=r,this.name=n?.name??"CodeError",this.props=n??{}}};var bs=class extends Event{detail;constructor(e,r){super(e,r),this.detail=r?.detail}},Rv=globalThis.CustomEvent??bs;function Lr(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function Se(t=0){return globalThis.Buffer?.allocUnsafe!=null?Lr(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function hc(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}var lc=hc("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),ws=hc("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=Se(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),gp={utf8:lc,"utf-8":lc,hex:pr.base16,latin1:ws,ascii:ws,binary:ws,...pr},Ri=gp;function ut(t,e="utf8"){let r=Ri[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}var mp=Math.pow(2,7),xp=Math.pow(2,14),vp=Math.pow(2,21),Es=Math.pow(2,28),Ss=Math.pow(2,35),Bs=Math.pow(2,42),As=Math.pow(2,49),ht=128,Zt=127;function ke(t){if(t<mp)return 1;if(t<xp)return 2;if(t<vp)return 3;if(t<Es)return 4;if(t<Ss)return 5;if(t<Bs)return 6;if(t<As)return 7;if(Number.MAX_SAFE_INTEGER!=null&&t>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return 8}function bp(t,e,r=0){switch(ke(t)){case 8:e[r++]=t&255|ht,t/=128;case 7:e[r++]=t&255|ht,t/=128;case 6:e[r++]=t&255|ht,t/=128;case 5:e[r++]=t&255|ht,t/=128;case 4:e[r++]=t&255|ht,t>>>=7;case 3:e[r++]=t&255|ht,t>>>=7;case 2:e[r++]=t&255|ht,t>>>=7;case 1:{e[r++]=t&255,t>>>=7;break}default:throw new Error("unreachable")}return e}function wp(t,e,r=0){switch(ke(t)){case 8:e.set(r++,t&255|ht),t/=128;case 7:e.set(r++,t&255|ht),t/=128;case 6:e.set(r++,t&255|ht),t/=128;case 5:e.set(r++,t&255|ht),t/=128;case 4:e.set(r++,t&255|ht),t>>>=7;case 3:e.set(r++,t&255|ht),t>>>=7;case 2:e.set(r++,t&255|ht),t>>>=7;case 1:{e.set(r++,t&255),t>>>=7;break}default:throw new Error("unreachable")}return e}function Ep(t,e){let r=t[e],n=0;if(n+=r&Zt,r<ht||(r=t[e+1],n+=(r&Zt)<<7,r<ht)||(r=t[e+2],n+=(r&Zt)<<14,r<ht)||(r=t[e+3],n+=(r&Zt)<<21,r<ht)||(r=t[e+4],n+=(r&Zt)*Es,r<ht)||(r=t[e+5],n+=(r&Zt)*Ss,r<ht)||(r=t[e+6],n+=(r&Zt)*Bs,r<ht)||(r=t[e+7],n+=(r&Zt)*As,r<ht))return n;throw new RangeError("Could not decode varint")}function Sp(t,e){let r=t.get(e),n=0;if(n+=r&Zt,r<ht||(r=t.get(e+1),n+=(r&Zt)<<7,r<ht)||(r=t.get(e+2),n+=(r&Zt)<<14,r<ht)||(r=t.get(e+3),n+=(r&Zt)<<21,r<ht)||(r=t.get(e+4),n+=(r&Zt)*Es,r<ht)||(r=t.get(e+5),n+=(r&Zt)*Ss,r<ht)||(r=t.get(e+6),n+=(r&Zt)*Bs,r<ht)||(r=t.get(e+7),n+=(r&Zt)*As,r<ht))return n;throw new RangeError("Could not decode varint")}function fn(t,e,r=0){return e==null&&(e=Se(ke(t))),e instanceof Uint8Array?bp(t,e,r):wp(t,e,r)}function Pr(t,e=0){return t instanceof Uint8Array?Ep(t,e):Sp(t,e)}function Ot(t,e){if(globalThis.Buffer!=null)return Lr(globalThis.Buffer.concat(t,e));e==null&&(e=t.reduce((i,o)=>i+o.length,0));let r=Se(e),n=0;for(let i of t)r.set(i,n),n+=i.length;return Lr(r)}var Ni=class{index=0;input="";new(e){return this.index=0,this.input=e,this}readAtomically(e){let r=this.index,n=e();return n===void 0&&(this.index=r),n}parseWith(e){let r=e();if(this.index===this.input.length)return r}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(e){return this.readAtomically(()=>{let r=this.readChar();if(r===e)return r})}readSeparator(e,r,n){return this.readAtomically(()=>{if(!(r>0&&this.readGivenChar(e)===void 0))return n()})}readNumber(e,r,n,i){return this.readAtomically(()=>{let o=0,s=0,a=this.peekChar();if(a===void 0)return;let c=a==="0",u=2**(8*i)-1;for(;;){let f=this.readAtomically(()=>{let l=this.readChar();if(l===void 0)return;let h=Number.parseInt(l,e);if(!Number.isNaN(h))return h});if(f===void 0)break;if(o*=e,o+=f,o>u||(s+=1,r!==void 0&&s>r))return}if(s!==0)return!n&&c&&s>1?void 0:o})}readIPv4Addr(){return this.readAtomically(()=>{let e=new Uint8Array(4);for(let r=0;r<e.length;r++){let n=this.readSeparator(".",r,()=>this.readNumber(10,3,!1,1));if(n===void 0)return;e[r]=n}return e})}readIPv6Addr(){let e=r=>{for(let n=0;n<r.length/2;n++){let i=n*2;if(n<r.length-3){let s=this.readSeparator(":",n,()=>this.readIPv4Addr());if(s!==void 0)return r[i]=s[0],r[i+1]=s[1],r[i+2]=s[2],r[i+3]=s[3],[i+4,!0]}let o=this.readSeparator(":",n,()=>this.readNumber(16,4,!0,2));if(o===void 0)return[i,!1];r[i]=o>>8,r[i+1]=o&255}return[r.length,!1]};return this.readAtomically(()=>{let r=new Uint8Array(16),[n,i]=e(r);if(n===16)return r;if(i||this.readGivenChar(":")===void 0||this.readGivenChar(":")===void 0)return;let o=new Uint8Array(14),s=16-(n+2),[a]=e(o.subarray(0,s));return r.set(o.subarray(0,a),16-a),r})}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}};var pc=45,Bp=15,ln=new Ni;function Cs(t){if(!(t.length>Bp))return ln.new(t).parseWith(()=>ln.readIPv4Addr())}function Is(t){if(t.includes("%")&&(t=t.split("%")[0]),!(t.length>pc))return ln.new(t).parseWith(()=>ln.readIPv6Addr())}function Di(t){if(t.includes("%")&&(t=t.split("%")[0]),!(t.length>pc))return ln.new(t).parseWith(()=>ln.readIPAddr())}var Eb=parseInt("0xFFFF",16),Sb=new Uint8Array([0,0,0,0,0,0,0,0,0,0,255,255]);function yt(t,e="utf8"){let r=Ri[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Lr(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function mc(t){return!!Cs(t)}function xc(t){return!!Is(t)}function Li(t){return!!Di(t)}var vc=mc,_p=xc,Ts=function(t){let e=0;if(t=t.toString().trim(),vc(t)){let r=new Uint8Array(e+4);return t.split(/\./g).forEach(n=>{r[e++]=parseInt(n,10)&255}),r}if(_p(t)){let r=t.split(":",8),n;for(n=0;n<r.length;n++){let o=vc(r[n]),s;o&&(s=Ts(r[n]),r[n]=ut(s.slice(0,2),"base16")),s!=null&&++n<8&&r.splice(n,0,ut(s.slice(2,4),"base16"))}if(r[0]==="")for(;r.length<8;)r.unshift("0");else if(r[r.length-1]==="")for(;r.length<8;)r.push("0");else if(r.length<8){for(n=0;n<r.length&&r[n]!=="";n++);let o=[n,1];for(n=9-r.length;n>0;n--)o.push("0");r.splice.apply(r,o)}let i=new Uint8Array(e+16);for(n=0;n<r.length;n++){let o=parseInt(r[n],16);i[e++]=o>>8&255,i[e++]=o&255}return i}throw new Error("invalid ip address")},bc=function(t,e=0,r){e=~~e,r=r??t.length-e;let n=new DataView(t.buffer);if(r===4){let i=[];for(let o=0;o<r;o++)i.push(t[e+o]);return i.join(".")}if(r===16){let i=[];for(let o=0;o<r;o+=2)i.push(n.getUint16(e+o).toString(16));return i.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""};var hn={},_s={},Np=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,-1,"ip6zone"],[43,8,"ipcidr"],[53,-1,"dns",!0],[54,-1,"dns4",!0],[55,-1,"dns6",!0],[56,-1,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc-direct"],[281,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,-1,"unix",!1,!0],[421,-1,"ipfs"],[421,-1,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,-1,"garlic64"],[448,0,"tls"],[449,-1,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,-1,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,-1,"memory"]];Np.forEach(t=>{let e=Dp(...t);_s[e.code]=e,hn[e.name]=e});function Dp(t,e,r,n,i){return{code:t,size:e,name:r,resolvable:!!n,path:!!i}}function xt(t){if(typeof t=="number"){if(_s[t]!=null)return _s[t];throw new Error(`no protocol with code: ${t}`)}else if(typeof t=="string"){if(hn[t]!=null)return hn[t];throw new Error(`no protocol with name: ${t}`)}throw new Error(`invalid protocol id type: ${typeof t}`)}var uw=xt("ip4"),fw=xt("ip6"),lw=xt("ipcidr");function Ns(t,e){switch(xt(t).code){case 4:case 41:return Pp(e);case 42:return Sc(e);case 6:case 273:case 33:case 132:return Ac(e).toString();case 53:case 54:case 55:case 56:case 400:case 449:case 777:return Sc(e);case 421:return Fp(e);case 444:return Bc(e);case 445:return Bc(e);case 466:return Op(e);default:return ut(e,"base16")}}function Ds(t,e){switch(xt(t).code){case 4:return wc(e);case 41:return wc(e);case 42:return Ec(e);case 6:case 273:case 33:case 132:return Ls(parseInt(e,10));case 53:case 54:case 55:case 56:case 400:case 449:case 777:return Ec(e);case 421:return kp(e);case 444:return Kp(e);case 445:return Mp(e);case 466:return Up(e);default:return yt(e,"base16")}}var Rs=Object.values(pr).map(t=>t.decoder),Lp=function(){let t=Rs[0].or(Rs[1]);return Rs.slice(2).forEach(e=>t=t.or(e)),t}();function wc(t){if(!Li(t))throw new Error("invalid ip address");return Ts(t)}function Pp(t){let e=bc(t,0,t.length);if(e==null)throw new Error("ipBuff is required");if(!Li(e))throw new Error("invalid ip address");return e}function Ls(t){let e=new ArrayBuffer(2);return new DataView(e).setUint16(0,t),new Uint8Array(e)}function Ac(t){return new DataView(t.buffer).getUint16(t.byteOffset)}function Ec(t){let e=yt(t),r=Uint8Array.from(fn(e.length));return Ot([r,e],r.length+e.length)}function Sc(t){let e=Pr(t);if(t=t.slice(ke(e)),t.length!==e)throw new Error("inconsistent lengths");return ut(t)}function kp(t){let e;t[0]==="Q"||t[0]==="1"?e=hr(_t.decode(`z${t}`)).bytes:e=Jt.parse(t).multihash.bytes;let r=Uint8Array.from(fn(e.length));return Ot([r,e],r.length+e.length)}function Up(t){let e=Lp.decode(t),r=Uint8Array.from(fn(e.length));return Ot([r,e],r.length+e.length)}function Op(t){let e=Pr(t),r=t.slice(ke(e));if(r.length!==e)throw new Error("inconsistent lengths");return"u"+ut(r,"base64url")}function Fp(t){let e=Pr(t),r=t.slice(ke(e));if(r.length!==e)throw new Error("inconsistent lengths");return ut(r,"base58btc")}function Kp(t){let e=t.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==16)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion address.`);let r=Ee.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=Ls(n);return Ot([r,i],r.length+i.length)}function Mp(t){let e=t.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==56)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion3 address.`);let r=Ee.decode(`b${e[0]}`),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=Ls(n);return Ot([r,i],r.length+i.length)}function Bc(t){let e=t.slice(0,t.length-2),r=t.slice(t.length-2),n=ut(e,"base32"),i=Ac(r);return`${n}:${i}`}function Cc(t){t=Ps(t);let e=[],r=[],n=null,i=t.split("/").slice(1);if(i.length===1&&i[0]==="")return{bytes:new Uint8Array,string:"/",tuples:[],stringTuples:[],path:null};for(let o=0;o<i.length;o++){let s=i[o],a=xt(s);if(a.size===0){e.push([a.code]),r.push([a.code]);continue}if(o++,o>=i.length)throw Tc("invalid address: "+t);if(a.path===!0){n=Ps(i.slice(o).join("/")),e.push([a.code,Ds(a.code,n)]),r.push([a.code,n]);break}let c=Ds(a.code,i[o]);e.push([a.code,c]),r.push([a.code,Ns(a.code,c)])}return{string:Ic(r),bytes:Us(e),tuples:e,stringTuples:r,path:n}}function ks(t){let e=[],r=[],n=null,i=0;for(;i<t.length;){let o=Pr(t,i),s=ke(o),a=xt(o),c=Vp(a,t.slice(i+s));if(c===0){e.push([o]),r.push([o]),i+=s;continue}let u=t.slice(i+s,i+s+c);if(i+=c+s,i>t.length)throw Tc("Invalid address Uint8Array: "+ut(t,"base16"));e.push([o,u]);let f=Ns(o,u);if(r.push([o,f]),a.path===!0){n=f;break}}return{bytes:Uint8Array.from(t),string:Ic(r),tuples:e,stringTuples:r,path:n}}function Ic(t){let e=[];return t.map(r=>{let n=xt(r[0]);return e.push(n.name),r.length>1&&r[1]!=null&&e.push(r[1]),null}),Ps(e.join("/"))}function Us(t){return Ot(t.map(e=>{let r=xt(e[0]),n=Uint8Array.from(fn(r.code));return e.length>1&&e[1]!=null&&(n=Ot([n,e[1]])),n}))}function Vp(t,e){if(t.size>0)return t.size/8;if(t.size===0)return 0;{let r=Pr(e instanceof Uint8Array?e:Uint8Array.from(e));return r+ke(r)}}function Ps(t){return"/"+t.trim().split("/").filter(e=>e).join("/")}function Tc(t){return new Error("Error parsing address: "+t)}var qp=Symbol.for("nodejs.util.inspect.custom"),Os=Symbol.for("@multiformats/js-multiaddr/multiaddr"),zp=[xt("dns").code,xt("dns4").code,xt("dns6").code,xt("dnsaddr").code],Pi=class t{bytes;#e;#t;#r;#n;[Os]=!0;constructor(e){e==null&&(e="");let r;if(e instanceof Uint8Array)r=ks(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);r=Cc(e)}else if(Rc(e))r=ks(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=r.bytes,this.#e=r.string,this.#t=r.tuples,this.#r=r.stringTuples,this.#n=r.path}toString(){return this.#e}toJSON(){return this.toString()}toOptions(){let e,r,n,i,o="",s=xt("tcp"),a=xt("udp"),c=xt("ip4"),u=xt("ip6"),f=xt("dns6"),l=xt("ip6zone");for(let[g,d]of this.stringTuples())g===l.code&&(o=`%${d??""}`),zp.includes(g)&&(r=s.name,i=443,n=`${d??""}${o}`,e=g===f.code?6:4),(g===s.code||g===a.code)&&(r=xt(g).name,i=parseInt(d??"")),(g===c.code||g===u.code)&&(r=xt(g).name,n=`${d??""}${o}`,e=g===u.code?6:4);if(e==null||r==null||n==null||i==null)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:e,host:n,transport:r,port:i}}protos(){return this.#t.map(([e])=>Object.assign({},xt(e)))}protoCodes(){return this.#t.map(([e])=>e)}protoNames(){return this.#t.map(([e])=>xt(e).name)}tuples(){return this.#t}stringTuples(){return this.#r}encapsulate(e){return e=new t(e),new t(this.toString()+e.toString())}decapsulate(e){let r=e.toString(),n=this.toString(),i=n.lastIndexOf(r);if(i<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new t(n.slice(0,i))}decapsulateCode(e){let r=this.tuples();for(let n=r.length-1;n>=0;n--)if(r[n][0]===e)return new t(Us(r.slice(0,n)));return this}getPeerId(){try{let e=[];this.stringTuples().forEach(([n,i])=>{n===hn.p2p.code&&e.push([n,i]),n===hn["p2p-circuit"].code&&(e=[])});let r=e.pop();if(r?.[1]!=null){let n=r[1];return n[0]==="Q"||n[0]==="1"?ut(_t.decode(`z${n}`),"base58btc"):ut(Jt.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){return this.#n}equals(e){return Rt(this.bytes,e.bytes)}async resolve(e){let r=this.protos().find(o=>o.resolvable);if(r==null)return[this];let n=_c.get(r.name);if(n==null)throw new _i(`no available resolver for ${r.name}`,"ERR_NO_AVAILABLE_RESOLVER");return(await n(this,e)).map(o=>new t(o))}nodeAddress(){let e=this.toOptions();if(e.transport!=="tcp"&&e.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(e){let r=(e??this).protos();return!(r.length!==2||r[0].code!==4&&r[0].code!==41||r[1].code!==6&&r[1].code!==273)}[qp](){return`Multiaddr(${this.#e})`}};var _c=new Map;function Rc(t){return!!t?.[Os]}function dn(t){return new Pi(t)}function qn(t){let e=new globalThis.AbortController;function r(){e.abort();for(let o of t)o?.removeEventListener!=null&&o.removeEventListener("abort",r)}for(let o of t){if(o?.aborted===!0){r();break}o?.addEventListener!=null&&o.addEventListener("abort",r)}function n(){for(let o of t)o?.removeEventListener!=null&&o.removeEventListener("abort",r)}let i=e.signal;return i.clear=n,i}async function*ki(t,e={}){let r=t.getReader();try{for(;;){let n=await r.read();if(n.done)return;yield n.value}}finally{e.preventCancel!==!0&&await r.cancel(),r.releaseLock()}}var y3=Pt($n(),1),g3=Pt($u(),1);var ix=Pt(gt(),1);var Ua={};Kt(Ua,{Ed25519PrivateKey:()=>Gr,Ed25519PublicKey:()=>ri,generateKeyPair:()=>Tm,generateKeyPairFromSeed:()=>Cf,unmarshalEd25519PrivateKey:()=>Cm,unmarshalEd25519PublicKey:()=>Im});function Wu(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function sa(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function Yu(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Wu(t.outputLen),Wu(t.blockLen)}function xn(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Zu(t,e){sa(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var to=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var Qu=t=>t instanceof Uint8Array;var eo=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Ce=(t,e)=>t<<32-e|t>>>e,pg=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!pg)throw new Error("Non little-endian hardware is not supported");function aa(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Zn(t){if(typeof t=="string"&&(t=aa(t)),!Qu(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function ro(...t){let e=new Uint8Array(t.reduce((n,i)=>n+i.length,0)),r=0;return t.forEach(n=>{if(!Qu(n))throw new Error("Uint8Array expected");e.set(n,r),r+=n.length}),e}var vn=class{clone(){return this._cloneInto()}},hE={}.toString;function no(t){let e=n=>t().update(Zn(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function bn(t=32){if(to&&typeof to.getRandomValues=="function")return to.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}function yg(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;t.setUint32(e+c,s,n),t.setUint32(e+u,a,n)}var wn=class extends vn{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=eo(this.buffer)}update(e){xn(this);let{view:r,buffer:n,blockLen:i}=this;e=Zn(e);let o=e.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let c=eo(e);for(;i<=o-s;s+=i)this.process(c,s);continue}n.set(e.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){xn(this),Zu(e,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let l=s;l<i;l++)r[l]=0;yg(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=eo(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)a.setUint32(4*l,f[l],o)}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return e.length=i,e.pos=a,e.finished=o,e.destroyed=s,i%r&&e.buffer.set(n),e}};var io=BigInt(4294967295),ca=BigInt(32);function Xu(t,e=!1){return e?{h:Number(t&io),l:Number(t>>ca&io)}:{h:Number(t>>ca&io)|0,l:Number(t&io)|0}}function gg(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){let{h:o,l:s}=Xu(t[i],e);[r[i],n[i]]=[o,s]}return[r,n]}var mg=(t,e)=>BigInt(t>>>0)<<ca|BigInt(e>>>0),xg=(t,e,r)=>t>>>r,vg=(t,e,r)=>t<<32-r|e>>>r,bg=(t,e,r)=>t>>>r|e<<32-r,wg=(t,e,r)=>t<<32-r|e>>>r,Eg=(t,e,r)=>t<<64-r|e>>>r-32,Sg=(t,e,r)=>t>>>r-32|e<<64-r,Bg=(t,e)=>e,Ag=(t,e)=>t,Cg=(t,e,r)=>t<<r|e>>>32-r,Ig=(t,e,r)=>e<<r|t>>>32-r,Tg=(t,e,r)=>e<<r-32|t>>>64-r,_g=(t,e,r)=>t<<r-32|e>>>64-r;function Rg(t,e,r,n){let i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}var Ng=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),Dg=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,Lg=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),Pg=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,kg=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0),Ug=(t,e,r,n,i,o)=>e+r+n+i+o+(t/2**32|0)|0;var Og={fromBig:Xu,split:gg,toBig:mg,shrSH:xg,shrSL:vg,rotrSH:bg,rotrSL:wg,rotrBH:Eg,rotrBL:Sg,rotr32H:Bg,rotr32L:Ag,rotlSH:Cg,rotlSL:Ig,rotlBH:Tg,rotlBL:_g,add:Rg,add3L:Ng,add3H:Dg,add4L:Lg,add4H:Pg,add5H:Ug,add5L:kg},tt=Og;var[Fg,Kg]=tt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),vr=new Uint32Array(80),br=new Uint32Array(80),ua=class extends wn{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:r,Bh:n,Bl:i,Ch:o,Cl:s,Dh:a,Dl:c,Eh:u,El:f,Fh:l,Fl:h,Gh:g,Gl:d,Hh:p,Hl:y}=this;return[e,r,n,i,o,s,a,c,u,f,l,h,g,d,p,y]}set(e,r,n,i,o,s,a,c,u,f,l,h,g,d,p,y){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=o|0,this.Cl=s|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=f|0,this.Fh=l|0,this.Fl=h|0,this.Gh=g|0,this.Gl=d|0,this.Hh=p|0,this.Hl=y|0}process(e,r){for(let b=0;b<16;b++,r+=4)vr[b]=e.getUint32(r),br[b]=e.getUint32(r+=4);for(let b=16;b<80;b++){let L=vr[b-15]|0,E=br[b-15]|0,S=tt.rotrSH(L,E,1)^tt.rotrSH(L,E,8)^tt.shrSH(L,E,7),P=tt.rotrSL(L,E,1)^tt.rotrSL(L,E,8)^tt.shrSL(L,E,7),B=vr[b-2]|0,O=br[b-2]|0,K=tt.rotrSH(B,O,19)^tt.rotrBH(B,O,61)^tt.shrSH(B,O,6),U=tt.rotrSL(B,O,19)^tt.rotrBL(B,O,61)^tt.shrSL(B,O,6),V=tt.add4L(P,U,br[b-7],br[b-16]),Y=tt.add4H(V,S,K,vr[b-7],vr[b-16]);vr[b]=Y|0,br[b]=V|0}let{Ah:n,Al:i,Bh:o,Bl:s,Ch:a,Cl:c,Dh:u,Dl:f,Eh:l,El:h,Fh:g,Fl:d,Gh:p,Gl:y,Hh:m,Hl:w}=this;for(let b=0;b<80;b++){let L=tt.rotrSH(l,h,14)^tt.rotrSH(l,h,18)^tt.rotrBH(l,h,41),E=tt.rotrSL(l,h,14)^tt.rotrSL(l,h,18)^tt.rotrBL(l,h,41),S=l&g^~l&p,P=h&d^~h&y,B=tt.add5L(w,E,P,Kg[b],br[b]),O=tt.add5H(B,m,L,S,Fg[b],vr[b]),K=B|0,U=tt.rotrSH(n,i,28)^tt.rotrBH(n,i,34)^tt.rotrBH(n,i,39),V=tt.rotrSL(n,i,28)^tt.rotrBL(n,i,34)^tt.rotrBL(n,i,39),Y=n&o^n&a^o&a,et=i&s^i&c^s&c;m=p|0,w=y|0,p=g|0,y=d|0,g=l|0,d=h|0,{h:l,l:h}=tt.add(u|0,f|0,O|0,K|0),u=a|0,f=c|0,a=o|0,c=s|0,o=n|0,s=i|0;let A=tt.add3L(K,V,et);n=tt.add3H(A,O,U,Y),i=A|0}({h:n,l:i}=tt.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:o,l:s}=tt.add(this.Bh|0,this.Bl|0,o|0,s|0),{h:a,l:c}=tt.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l:f}=tt.add(this.Dh|0,this.Dl|0,u|0,f|0),{h:l,l:h}=tt.add(this.Eh|0,this.El|0,l|0,h|0),{h:g,l:d}=tt.add(this.Fh|0,this.Fl|0,g|0,d|0),{h:p,l:y}=tt.add(this.Gh|0,this.Gl|0,p|0,y|0),{h:m,l:w}=tt.add(this.Hh|0,this.Hl|0,m|0,w|0),this.set(n,i,o,s,a,c,u,f,l,h,g,d,p,y,m,w)}roundClean(){vr.fill(0),br.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};var fa=no(()=>new ua);var ao={};Kt(ao,{bitGet:()=>$g,bitLen:()=>Gg,bitMask:()=>Qn,bitSet:()=>Wg,bytesToHex:()=>Xe,bytesToNumberBE:()=>Je,bytesToNumberLE:()=>wr,concatBytes:()=>je,createHmacDrbg:()=>da,ensureBytes:()=>Tt,equalBytes:()=>zg,hexToBytes:()=>Mr,hexToNumber:()=>ha,numberToBytesBE:()=>Er,numberToBytesLE:()=>Vr,numberToHexUnpadded:()=>tf,numberToVarBytesBE:()=>qg,utf8ToBytes:()=>Hg,validateObject:()=>qe});var ju=BigInt(0),oo=BigInt(1),Mg=BigInt(2),so=t=>t instanceof Uint8Array,Vg=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Xe(t){if(!so(t))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=Vg[t[r]];return e}function tf(t){let e=t.toString(16);return e.length&1?`0${e}`:e}function ha(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function Mr(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);let e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);let r=new Uint8Array(e/2);for(let n=0;n<r.length;n++){let i=n*2,o=t.slice(i,i+2),s=Number.parseInt(o,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");r[n]=s}return r}function Je(t){return ha(Xe(t))}function wr(t){if(!so(t))throw new Error("Uint8Array expected");return ha(Xe(Uint8Array.from(t).reverse()))}function Er(t,e){return Mr(t.toString(16).padStart(e*2,"0"))}function Vr(t,e){return Er(t,e).reverse()}function qg(t){return Mr(tf(t))}function Tt(t,e,r){let n;if(typeof e=="string")try{n=Mr(e)}catch(o){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${o}`)}else if(so(e))n=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);let i=n.length;if(typeof r=="number"&&i!==r)throw new Error(`${t} expected ${r} bytes, got ${i}`);return n}function je(...t){let e=new Uint8Array(t.reduce((n,i)=>n+i.length,0)),r=0;return t.forEach(n=>{if(!so(n))throw new Error("Uint8Array expected");e.set(n,r),r+=n.length}),e}function zg(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function Hg(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Gg(t){let e;for(e=0;t>ju;t>>=oo,e+=1);return e}function $g(t,e){return t>>BigInt(e)&oo}var Wg=(t,e,r)=>t|(r?oo:ju)<<BigInt(e),Qn=t=>(Mg<<BigInt(t-1))-oo,la=t=>new Uint8Array(t),Ju=t=>Uint8Array.from(t);function da(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=la(t),i=la(t),o=0,s=()=>{n.fill(1),i.fill(0),o=0},a=(...l)=>r(i,n,...l),c=(l=la())=>{i=a(Ju([0]),l),n=a(),l.length!==0&&(i=a(Ju([1]),l),n=a())},u=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let l=0,h=[];for(;l<e;){n=a();let g=n.slice();h.push(g),l+=n.length}return je(...h)};return(l,h)=>{s(),c(l);let g;for(;!(g=h(u()));)c();return s(),g}}var Yg={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function qe(t,e,r={}){let n=(i,o,s)=>{let a=Yg[o];if(typeof a!="function")throw new Error(`Invalid validator "${o}", expected function`);let c=t[i];if(!(s&&c===void 0)&&!a(c,t))throw new Error(`Invalid param ${String(i)}=${c} (${typeof c}), expected ${o}`)};for(let[i,o]of Object.entries(e))n(i,o,!1);for(let[i,o]of Object.entries(r))n(i,o,!0);return t}var Ft=BigInt(0),St=BigInt(1),qr=BigInt(2),Zg=BigInt(3),pa=BigInt(4),ef=BigInt(5),rf=BigInt(8),Qg=BigInt(9),Xg=BigInt(16);function mt(t,e){let r=t%e;return r>=Ft?r:e+r}function Jg(t,e,r){if(r<=Ft||e<Ft)throw new Error("Expected power/modulo > 0");if(r===St)return Ft;let n=St;for(;e>Ft;)e&St&&(n=n*t%r),t=t*t%r,e>>=St;return n}function Bt(t,e,r){let n=t;for(;e-- >Ft;)n*=n,n%=r;return n}function co(t,e){if(t===Ft||e<=Ft)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=mt(t,e),n=e,i=Ft,o=St,s=St,a=Ft;for(;r!==Ft;){let u=n/r,f=n%r,l=i-s*u,h=o-a*u;n=r,r=f,i=s,o=a,s=l,a=h}if(n!==St)throw new Error("invert: does not exist");return mt(i,e)}function jg(t){let e=(t-St)/qr,r,n,i;for(r=t-St,n=0;r%qr===Ft;r/=qr,n++);for(i=qr;i<t&&Jg(i,e,t)!==t-St;i++);if(n===1){let s=(t+St)/pa;return function(c,u){let f=c.pow(u,s);if(!c.eql(c.sqr(f),u))throw new Error("Cannot find square root");return f}}let o=(r+St)/qr;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=n,f=a.pow(a.mul(a.ONE,i),r),l=a.pow(c,o),h=a.pow(c,r);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let g=1;for(let p=a.sqr(h);g<u&&!a.eql(p,a.ONE);g++)p=a.sqr(p);let d=a.pow(f,St<<BigInt(u-g-1));f=a.sqr(d),l=a.mul(l,d),h=a.mul(h,f),u=g}return l}}function tm(t){if(t%pa===Zg){let e=(t+St)/pa;return function(n,i){let o=n.pow(i,e);if(!n.eql(n.sqr(o),i))throw new Error("Cannot find square root");return o}}if(t%rf===ef){let e=(t-ef)/rf;return function(n,i){let o=n.mul(i,qr),s=n.pow(o,e),a=n.mul(i,s),c=n.mul(n.mul(a,qr),s),u=n.mul(a,n.sub(c,n.ONE));if(!n.eql(n.sqr(u),i))throw new Error("Cannot find square root");return u}}return t%Xg,jg(t)}var nf=(t,e)=>(mt(t,e)&St)===St,em=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ya(t){let e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=em.reduce((n,i)=>(n[i]="function",n),e);return qe(t,r)}function rm(t,e,r){if(r<Ft)throw new Error("Expected power > 0");if(r===Ft)return t.ONE;if(r===St)return e;let n=t.ONE,i=e;for(;r>Ft;)r&St&&(n=t.mul(n,i)),i=t.sqr(i),r>>=St;return n}function nm(t,e){let r=new Array(e.length),n=e.reduce((o,s,a)=>t.is0(s)?o:(r[a]=o,t.mul(o,s)),t.ONE),i=t.inv(n);return e.reduceRight((o,s,a)=>t.is0(s)?o:(r[a]=t.mul(o,r[a]),t.mul(o,s)),i),r}function ga(t,e){let r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function uo(t,e,r=!1,n={}){if(t<=Ft)throw new Error(`Expected Field ORDER > 0, got ${t}`);let{nBitLength:i,nByteLength:o}=ga(t,e);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");let s=tm(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:o,MASK:Qn(i),ZERO:Ft,ONE:St,create:c=>mt(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return Ft<=c&&c<t},is0:c=>c===Ft,isOdd:c=>(c&St)===St,neg:c=>mt(-c,t),eql:(c,u)=>c===u,sqr:c=>mt(c*c,t),add:(c,u)=>mt(c+u,t),sub:(c,u)=>mt(c-u,t),mul:(c,u)=>mt(c*u,t),pow:(c,u)=>rm(a,c,u),div:(c,u)=>mt(c*co(u,t),t),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>co(c,t),sqrt:n.sqrt||(c=>s(a,c)),invertBatch:c=>nm(a,c),cmov:(c,u,f)=>f?u:c,toBytes:c=>r?Vr(c,o):Er(c,o),fromBytes:c=>{if(c.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${c.length}`);return r?wr(c):Je(c)}});return Object.freeze(a)}function of(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");let r=t.sqrt(e);return t.isOdd(r)?t.neg(r):r}function sf(t){if(typeof t!="bigint")throw new Error("field order must be bigint");let e=t.toString(2).length;return Math.ceil(e/8)}function ma(t){let e=sf(t);return e+Math.ceil(e/2)}function af(t,e,r=!1){let n=t.length,i=sf(e),o=ma(e);if(n<16||n<o||n>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${n}`);let s=r?Je(t):wr(t),a=mt(s,e-St)+St;return r?Vr(a,i):Er(a,i)}var om=BigInt(0),xa=BigInt(1);function fo(t,e){let r=(i,o)=>{let s=o.negate();return i?s:o},n=i=>{let o=Math.ceil(e/i)+1,s=2**(i-1);return{windows:o,windowSize:s}};return{constTimeNegate:r,unsafeLadder(i,o){let s=t.ZERO,a=i;for(;o>om;)o&xa&&(s=s.add(a)),a=a.double(),o>>=xa;return s},precomputeWindow(i,o){let{windows:s,windowSize:a}=n(o),c=[],u=i,f=u;for(let l=0;l<s;l++){f=u,c.push(f);for(let h=1;h<a;h++)f=f.add(u),c.push(f);u=f.double()}return c},wNAF(i,o,s){let{windows:a,windowSize:c}=n(i),u=t.ZERO,f=t.BASE,l=BigInt(2**i-1),h=2**i,g=BigInt(i);for(let d=0;d<a;d++){let p=d*c,y=Number(s&l);s>>=g,y>c&&(y-=h,s+=xa);let m=p,w=p+Math.abs(y)-1,b=d%2!==0,L=y<0;y===0?f=f.add(r(b,o[m])):u=u.add(r(L,o[w]))}return{p:u,f}},wNAFCached(i,o,s,a){let c=i._WINDOW_SIZE||1,u=o.get(i);return u||(u=this.precomputeWindow(i,c),c!==1&&o.set(i,a(u))),this.wNAF(c,u,s)}}}function Xn(t){return ya(t.Fp),qe(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...ga(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}var Ie=BigInt(0),ce=BigInt(1),lo=BigInt(2),sm=BigInt(8),am={zip215:!0};function cm(t){let e=Xn(t);return qe(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function ho(t){let e=cm(t),{Fp:r,n,prehash:i,hash:o,randomBytes:s,nByteLength:a,h:c}=e,u=lo<<BigInt(a*8)-ce,f=r.create,l=e.uvRatio||((k,I)=>{try{return{isValid:!0,value:r.sqrt(k*r.inv(I))}}catch{return{isValid:!1,value:Ie}}}),h=e.adjustScalarBytes||(k=>k),g=e.domain||((k,I,z)=>{if(I.length||z)throw new Error("Contexts/pre-hash are not supported");return k}),d=k=>typeof k=="bigint"&&Ie<k,p=(k,I)=>d(k)&&d(I)&&k<I,y=k=>k===Ie||p(k,u);function m(k,I){if(p(k,I))return k;throw new Error(`Expected valid scalar < ${I}, got ${typeof k} ${k}`)}function w(k){return k===Ie?k:m(k,n)}let b=new Map;function L(k){if(!(k instanceof E))throw new Error("ExtendedPoint expected")}class E{constructor(I,z,$,Z){if(this.ex=I,this.ey=z,this.ez=$,this.et=Z,!y(I))throw new Error("x required");if(!y(z))throw new Error("y required");if(!y($))throw new Error("z required");if(!y(Z))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(I){if(I instanceof E)throw new Error("extended point not allowed");let{x:z,y:$}=I||{};if(!y(z)||!y($))throw new Error("invalid affine point");return new E(z,$,ce,f(z*$))}static normalizeZ(I){let z=r.invertBatch(I.map($=>$.ez));return I.map(($,Z)=>$.toAffine(z[Z])).map(E.fromAffine)}_setWindowSize(I){this._WINDOW_SIZE=I,b.delete(this)}assertValidity(){let{a:I,d:z}=e;if(this.is0())throw new Error("bad point: ZERO");let{ex:$,ey:Z,ez:rt,et:it}=this,pt=f($*$),ot=f(Z*Z),ct=f(rt*rt),Lt=f(ct*ct),Ct=f(pt*I),Ht=f(ct*f(Ct+ot)),Gt=f(Lt+f(z*f(pt*ot)));if(Ht!==Gt)throw new Error("bad point: equation left != right (1)");let Ut=f($*Z),Yt=f(rt*it);if(Ut!==Yt)throw new Error("bad point: equation left != right (2)")}equals(I){L(I);let{ex:z,ey:$,ez:Z}=this,{ex:rt,ey:it,ez:pt}=I,ot=f(z*pt),ct=f(rt*Z),Lt=f($*pt),Ct=f(it*Z);return ot===ct&&Lt===Ct}is0(){return this.equals(E.ZERO)}negate(){return new E(f(-this.ex),this.ey,this.ez,f(-this.et))}double(){let{a:I}=e,{ex:z,ey:$,ez:Z}=this,rt=f(z*z),it=f($*$),pt=f(lo*f(Z*Z)),ot=f(I*rt),ct=z+$,Lt=f(f(ct*ct)-rt-it),Ct=ot+it,Ht=Ct-pt,Gt=ot-it,Ut=f(Lt*Ht),Yt=f(Ct*Gt),$e=f(Lt*Gt),Nr=f(Ht*Ct);return new E(Ut,Yt,Nr,$e)}add(I){L(I);let{a:z,d:$}=e,{ex:Z,ey:rt,ez:it,et:pt}=this,{ex:ot,ey:ct,ez:Lt,et:Ct}=I;if(z===BigInt(-1)){let B0=f((rt-Z)*(ct+ot)),A0=f((rt+Z)*(ct-ot)),Zo=f(A0-B0);if(Zo===Ie)return this.double();let C0=f(it*lo*Ct),I0=f(pt*lo*Lt),T0=I0+C0,_0=A0+B0,R0=I0-C0,zh=f(T0*Zo),Hh=f(_0*R0),Gh=f(T0*R0),$h=f(Zo*_0);return new E(zh,Hh,$h,Gh)}let Ht=f(Z*ot),Gt=f(rt*ct),Ut=f(pt*$*Ct),Yt=f(it*Lt),$e=f((Z+rt)*(ot+ct)-Ht-Gt),Nr=Yt-Ut,Un=Yt+Ut,S0=f(Gt-z*Ht),Kh=f($e*Nr),Mh=f(Un*S0),Vh=f($e*S0),qh=f(Nr*Un);return new E(Kh,Mh,qh,Vh)}subtract(I){return this.add(I.negate())}wNAF(I){return B.wNAFCached(this,b,I,E.normalizeZ)}multiply(I){let{p:z,f:$}=this.wNAF(m(I,n));return E.normalizeZ([z,$])[0]}multiplyUnsafe(I){let z=w(I);return z===Ie?P:this.equals(P)||z===ce?this:this.equals(S)?this.wNAF(z).p:B.unsafeLadder(this,z)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return B.unsafeLadder(this,n).is0()}toAffine(I){let{ex:z,ey:$,ez:Z}=this,rt=this.is0();I==null&&(I=rt?sm:r.inv(Z));let it=f(z*I),pt=f($*I),ot=f(Z*I);if(rt)return{x:Ie,y:ce};if(ot!==ce)throw new Error("invZ was invalid");return{x:it,y:pt}}clearCofactor(){let{h:I}=e;return I===ce?this:this.multiplyUnsafe(I)}static fromHex(I,z=!1){let{d:$,a:Z}=e,rt=r.BYTES;I=Tt("pointHex",I,rt);let it=I.slice(),pt=I[rt-1];it[rt-1]=pt&-129;let ot=wr(it);ot===Ie||(z?m(ot,u):m(ot,r.ORDER));let ct=f(ot*ot),Lt=f(ct-ce),Ct=f($*ct-Z),{isValid:Ht,value:Gt}=l(Lt,Ct);if(!Ht)throw new Error("Point.fromHex: invalid y coordinate");let Ut=(Gt&ce)===ce,Yt=(pt&128)!==0;if(!z&&Gt===Ie&&Yt)throw new Error("Point.fromHex: x=0 and x_0=1");return Yt!==Ut&&(Gt=f(-Gt)),E.fromAffine({x:Gt,y:ot})}static fromPrivateKey(I){return U(I).point}toRawBytes(){let{x:I,y:z}=this.toAffine(),$=Vr(z,r.BYTES);return $[$.length-1]|=I&ce?128:0,$}toHex(){return Xe(this.toRawBytes())}}E.BASE=new E(e.Gx,e.Gy,ce,f(e.Gx*e.Gy)),E.ZERO=new E(Ie,ce,ce,Ie);let{BASE:S,ZERO:P}=E,B=fo(E,a*8);function O(k){return mt(k,n)}function K(k){return O(wr(k))}function U(k){let I=a;k=Tt("private key",k,I);let z=Tt("hashed private key",o(k),2*I),$=h(z.slice(0,I)),Z=z.slice(I,2*I),rt=K($),it=S.multiply(rt),pt=it.toRawBytes();return{head:$,prefix:Z,scalar:rt,point:it,pointBytes:pt}}function V(k){return U(k).pointBytes}function Y(k=new Uint8Array,...I){let z=je(...I);return K(o(g(z,Tt("context",k),!!i)))}function et(k,I,z={}){k=Tt("message",k),i&&(k=i(k));let{prefix:$,scalar:Z,pointBytes:rt}=U(I),it=Y(z.context,$,k),pt=S.multiply(it).toRawBytes(),ot=Y(z.context,pt,rt,k),ct=O(it+ot*Z);w(ct);let Lt=je(pt,Vr(ct,r.BYTES));return Tt("result",Lt,a*2)}let A=am;function R(k,I,z,$=A){let{context:Z,zip215:rt}=$,it=r.BYTES;k=Tt("signature",k,2*it),I=Tt("message",I),i&&(I=i(I));let pt=wr(k.slice(it,2*it)),ot,ct,Lt;try{ot=E.fromHex(z,rt),ct=E.fromHex(k.slice(0,it),rt),Lt=S.multiplyUnsafe(pt)}catch{return!1}if(!rt&&ot.isSmallOrder())return!1;let Ct=Y(Z,ct.toRawBytes(),ot.toRawBytes(),I);return ct.add(ot.multiplyUnsafe(Ct)).subtract(Lt).clearCofactor().equals(E.ZERO)}return S._setWindowSize(8),{CURVE:e,getPublicKey:V,sign:et,verify:R,ExtendedPoint:E,utils:{getExtendedPublicKey:U,randomPrivateKey:()=>s(r.BYTES),precompute(k=8,I=E.BASE){return I._setWindowSize(k),I.multiply(BigInt(3)),I}}}}var ba=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),cf=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),PE=BigInt(0),um=BigInt(1),va=BigInt(2),fm=BigInt(5),uf=BigInt(10),lm=BigInt(20),hm=BigInt(40),ff=BigInt(80);function dm(t){let e=ba,n=t*t%e*t%e,i=Bt(n,va,e)*n%e,o=Bt(i,um,e)*t%e,s=Bt(o,fm,e)*o%e,a=Bt(s,uf,e)*s%e,c=Bt(a,lm,e)*a%e,u=Bt(c,hm,e)*c%e,f=Bt(u,ff,e)*u%e,l=Bt(f,ff,e)*u%e,h=Bt(l,uf,e)*s%e;return{pow_p_5_8:Bt(h,va,e)*t%e,b2:n}}function pm(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function ym(t,e){let r=ba,n=mt(e*e*e,r),i=mt(n*n*e,r),o=dm(t*i).pow_p_5_8,s=mt(t*n*o,r),a=mt(e*s*s,r),c=s,u=mt(s*cf,r),f=a===t,l=a===mt(-t,r),h=a===mt(-t*cf,r);return f&&(s=c),(l||h)&&(s=u),nf(s,r)&&(s=mt(-s,r)),{isValid:f||l,value:s}}var tr=uo(ba,void 0,!0),wa={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:tr,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:fa,randomBytes:bn,adjustScalarBytes:pm,uvRatio:ym},En=ho(wa);function lf(t,e,r){if(e.length>255)throw new Error("Context is too big");return ro(aa("SigEd25519 no Ed25519 collisions"),new Uint8Array([r?1:0,e.length]),e,t)}var kE=ho({...wa,domain:lf}),UE=ho({...wa,domain:lf,prehash:fa});var gm=(tr.ORDER+BigInt(3))/BigInt(8),OE=tr.pow(va,gm),FE=tr.sqrt(tr.neg(tr.ONE)),KE=(tr.ORDER-BigInt(5))/BigInt(8),ME=BigInt(486662);var VE=of(tr,tr.neg(BigInt(486664)));var qE=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),zE=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),HE=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),GE=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");var $E=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");var Sn=32,er=64,po=32;async function hf(){let t=En.utils.randomPrivateKey(),e=En.getPublicKey(t);return{privateKey:gf(t,e),publicKey:e}}async function df(t){if(t.length!==po)throw new TypeError('"seed" must be 32 bytes in length.');if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');let e=t,r=En.getPublicKey(e);return{privateKey:gf(e,r),publicKey:r}}async function pf(t,e){let r=t.subarray(0,po);return En.sign(e,r)}async function yf(t,e,r){return En.verify(e,r,t)}function gf(t,e){let r=new Uint8Array(er);for(let n=0;n<po;n++)r[n]=t[n],r[po+n]=e[n];return r}var ne={get(t=globalThis){let e=t.crypto;if(e==null||e.subtle==null)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return e}};var Ea={alg:"A128GCM",ext:!0,k:"scm9jmO_4BJAgdwWGVulLg",key_ops:["encrypt","decrypt"],kty:"oct"};function Sa(t){let e=t?.algorithm??"AES-GCM",r=t?.keyLength??16,n=t?.nonceLength??12,i=t?.digest??"SHA-256",o=t?.saltLength??16,s=t?.iterations??32767,a=ne.get();r*=8;async function c(l,h){let g=a.getRandomValues(new Uint8Array(o)),d=a.getRandomValues(new Uint8Array(n)),p={name:e,iv:d};typeof h=="string"&&(h=yt(h));let y;if(h.length===0){y=await a.subtle.importKey("jwk",Ea,{name:"AES-GCM"},!0,["encrypt"]);try{let w={name:"PBKDF2",salt:g,iterations:s,hash:{name:i}},b=await a.subtle.importKey("raw",h,{name:"PBKDF2"},!1,["deriveKey"]);y=await a.subtle.deriveKey(w,b,{name:e,length:r},!0,["encrypt"])}catch{y=await a.subtle.importKey("jwk",Ea,{name:"AES-GCM"},!0,["encrypt"])}}else{let w={name:"PBKDF2",salt:g,iterations:s,hash:{name:i}},b=await a.subtle.importKey("raw",h,{name:"PBKDF2"},!1,["deriveKey"]);y=await a.subtle.deriveKey(w,b,{name:e,length:r},!0,["encrypt"])}let m=await a.subtle.encrypt(p,y,l);return Ot([g,p.iv,new Uint8Array(m)])}async function u(l,h){let g=l.subarray(0,o),d=l.subarray(o,o+n),p=l.subarray(o+n),y={name:e,iv:d};typeof h=="string"&&(h=yt(h));let m;if(h.length===0)try{let b={name:"PBKDF2",salt:g,iterations:s,hash:{name:i}},L=await a.subtle.importKey("raw",h,{name:"PBKDF2"},!1,["deriveKey"]);m=await a.subtle.deriveKey(b,L,{name:e,length:r},!0,["decrypt"])}catch{m=await a.subtle.importKey("jwk",Ea,{name:"AES-GCM"},!0,["decrypt"])}else{let b={name:"PBKDF2",salt:g,iterations:s,hash:{name:i}},L=await a.subtle.importKey("raw",h,{name:"PBKDF2"},!1,["deriveKey"]);m=await a.subtle.deriveKey(b,L,{name:e,length:r},!0,["decrypt"])}let w=await a.subtle.decrypt(y,m,p);return new Uint8Array(w)}return{encrypt:c,decrypt:u}}async function Bn(t,e){let n=await Sa().encrypt(t,e);return en.encode(n)}var Ba=new Float32Array([-0]),Sr=new Uint8Array(Ba.buffer);function xf(t,e,r){Ba[0]=t,e[r]=Sr[0],e[r+1]=Sr[1],e[r+2]=Sr[2],e[r+3]=Sr[3]}function vf(t,e){return Sr[0]=t[e],Sr[1]=t[e+1],Sr[2]=t[e+2],Sr[3]=t[e+3],Ba[0]}var Aa=new Float64Array([-0]),Qt=new Uint8Array(Aa.buffer);function bf(t,e,r){Aa[0]=t,e[r]=Qt[0],e[r+1]=Qt[1],e[r+2]=Qt[2],e[r+3]=Qt[3],e[r+4]=Qt[4],e[r+5]=Qt[5],e[r+6]=Qt[6],e[r+7]=Qt[7]}function wf(t,e){return Qt[0]=t[e],Qt[1]=t[e+1],Qt[2]=t[e+2],Qt[3]=t[e+3],Qt[4]=t[e+4],Qt[5]=t[e+5],Qt[6]=t[e+6],Qt[7]=t[e+7],Aa[0]}var xm=BigInt(Number.MAX_SAFE_INTEGER),vm=BigInt(Number.MIN_SAFE_INTEGER),ie=class t{lo;hi;constructor(e,r){this.lo=e|0,this.hi=r|0}toNumber(e=!1){if(!e&&this.hi>>>31>0){let r=~this.lo+1>>>0,n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296}toBigInt(e=!1){if(e)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31){let r=~this.lo+1>>>0,n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(BigInt(r)+(BigInt(n)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toString(e=!1){return this.toBigInt(e).toString()}zzEncode(){let e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this}zzDecode(){let e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this}length(){let e=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?e<16384?e<128?1:2:e<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}static fromBigInt(e){if(e===0n)return zr;if(e<xm&&e>vm)return this.fromNumber(Number(e));let r=e<0n;r&&(e=-e);let n=e>>32n,i=e-(n<<32n);return r&&(n=~n|0n,i=~i|0n,++i>Ef&&(i=0n,++n>Ef&&(n=0n))),new t(Number(i),Number(n))}static fromNumber(e){if(e===0)return zr;let r=e<0;r&&(e=-e);let n=e>>>0,i=(e-n)/4294967296>>>0;return r&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new t(n,i)}static from(e){return typeof e=="number"?t.fromNumber(e):typeof e=="bigint"?t.fromBigInt(e):typeof e=="string"?t.fromBigInt(BigInt(e)):e.low!=null||e.high!=null?new t(e.low>>>0,e.high>>>0):zr}},zr=new ie(0,0);zr.toBigInt=function(){return 0n};zr.zzEncode=zr.zzDecode=function(){return this};zr.length=function(){return 1};var Ef=4294967296n;function Sf(t){let e=0,r=0;for(let n=0;n<t.length;++n)r=t.charCodeAt(n),r<128?e+=1:r<2048?e+=2:(r&64512)===55296&&(t.charCodeAt(n+1)&64512)===56320?(++n,e+=4):e+=3;return e}function Bf(t,e,r){if(r-e<1)return"";let i,o=[],s=0,a;for(;e<r;)a=t[e++],a<128?o[s++]=a:a>191&&a<224?o[s++]=(a&31)<<6|t[e++]&63:a>239&&a<365?(a=((a&7)<<18|(t[e++]&63)<<12|(t[e++]&63)<<6|t[e++]&63)-65536,o[s++]=55296+(a>>10),o[s++]=56320+(a&1023)):o[s++]=(a&15)<<12|(t[e++]&63)<<6|t[e++]&63,s>8191&&((i??(i=[])).push(String.fromCharCode.apply(String,o)),s=0);return i!=null?(s>0&&i.push(String.fromCharCode.apply(String,o.slice(0,s))),i.join("")):String.fromCharCode.apply(String,o.slice(0,s))}function Ca(t,e,r){let n=r,i,o;for(let s=0;s<t.length;++s)i=t.charCodeAt(s),i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&((o=t.charCodeAt(s+1))&64512)===56320?(i=65536+((i&1023)<<10)+(o&1023),++s,e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128);return r-n}function Te(t,e){return RangeError(`index out of range: ${t.pos} + ${e??1} > ${t.len}`)}function yo(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}var Ia=class{buf;pos;len;_slice=Uint8Array.prototype.subarray;constructor(e){this.buf=e,this.pos=0,this.len=e.length}uint32(){let e=4294967295;if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,Te(this,10);return e}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)|0}bool(){return this.uint32()!==0}fixed32(){if(this.pos+4>this.len)throw Te(this,4);return yo(this.buf,this.pos+=4)}sfixed32(){if(this.pos+4>this.len)throw Te(this,4);return yo(this.buf,this.pos+=4)|0}float(){if(this.pos+4>this.len)throw Te(this,4);let e=vf(this.buf,this.pos);return this.pos+=4,e}double(){if(this.pos+8>this.len)throw Te(this,4);let e=wf(this.buf,this.pos);return this.pos+=8,e}bytes(){let e=this.uint32(),r=this.pos,n=this.pos+e;if(n>this.len)throw Te(this,e);return this.pos+=e,r===n?new Uint8Array(0):this.buf.subarray(r,n)}string(){let e=this.bytes();return Bf(e,0,e.length)}skip(e){if(typeof e=="number"){if(this.pos+e>this.len)throw Te(this,e);this.pos+=e}else do if(this.pos>=this.len)throw Te(this);while(this.buf[this.pos++]&128);return this}skipType(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(e=this.uint32()&7)!==4;)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error(`invalid wire type ${e} at offset ${this.pos}`)}return this}readLongVarint(){let e=new ie(0,0),r=0;if(this.len-this.pos>4){for(;r<4;++r)if(e.lo=(e.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0,e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return e;r=0}else{for(;r<3;++r){if(this.pos>=this.len)throw Te(this);if(e.lo=(e.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(this.buf[this.pos++]&127)<<r*7)>>>0,e}if(this.len-this.pos>4){for(;r<5;++r)if(e.hi=(e.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return e}else for(;r<5;++r){if(this.pos>=this.len)throw Te(this);if(e.hi=(e.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}readFixed64(){if(this.pos+8>this.len)throw Te(this,8);let e=yo(this.buf,this.pos+=4),r=yo(this.buf,this.pos+=4);return new ie(e,r)}int64(){return this.readLongVarint().toBigInt()}int64Number(){return this.readLongVarint().toNumber()}int64String(){return this.readLongVarint().toString()}uint64(){return this.readLongVarint().toBigInt(!0)}uint64Number(){return this.readLongVarint().toNumber(!0)}uint64String(){return this.readLongVarint().toString(!0)}sint64(){return this.readLongVarint().zzDecode().toBigInt()}sint64Number(){return this.readLongVarint().zzDecode().toNumber()}sint64String(){return this.readLongVarint().zzDecode().toString()}fixed64(){return this.readFixed64().toBigInt()}fixed64Number(){return this.readFixed64().toNumber()}fixed64String(){return this.readFixed64().toString()}sfixed64(){return this.readFixed64().toBigInt()}sfixed64Number(){return this.readFixed64().toNumber()}sfixed64String(){return this.readFixed64().toString()}};function Ta(t){return new Ia(t instanceof Uint8Array?t:t.subarray())}function An(t,e){let r=Ta(t);return e.decode(r)}function _a(t){let e=t??8192,r=e>>>1,n,i=e;return function(s){if(s<1||s>r)return Se(s);i+s>e&&(n=Se(e),i=0);let a=n.subarray(i,i+=s);return i&7&&(i=(i|7)+1),a}}var Hr=class{fn;len;next;val;constructor(e,r,n){this.fn=e,this.len=r,this.next=void 0,this.val=n}};function Ra(){}var Da=class{head;tail;len;next;constructor(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}},bm=_a();function wm(t){return globalThis.Buffer!=null?Se(t):bm(t)}var ti=class{len;head;tail;states;constructor(){this.len=0,this.head=new Hr(Ra,0,0),this.tail=this.head,this.states=null}_push(e,r,n){return this.tail=this.tail.next=new Hr(e,r,n),this.len+=r,this}uint32(e){return this.len+=(this.tail=this.tail.next=new La((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this}int32(e){return e<0?this._push(Jn,10,ie.fromNumber(e)):this.uint32(e)}sint32(e){return this.uint32((e<<1^e>>31)>>>0)}uint64(e){let r=ie.fromBigInt(e);return this._push(Jn,r.length(),r)}uint64Number(e){let r=ie.fromNumber(e);return this._push(Jn,r.length(),r)}uint64String(e){return this.uint64(BigInt(e))}int64(e){return this.uint64(e)}int64Number(e){return this.uint64Number(e)}int64String(e){return this.uint64String(e)}sint64(e){let r=ie.fromBigInt(e).zzEncode();return this._push(Jn,r.length(),r)}sint64Number(e){let r=ie.fromNumber(e).zzEncode();return this._push(Jn,r.length(),r)}sint64String(e){return this.sint64(BigInt(e))}bool(e){return this._push(Na,1,e?1:0)}fixed32(e){return this._push(jn,4,e>>>0)}sfixed32(e){return this.fixed32(e)}fixed64(e){let r=ie.fromBigInt(e);return this._push(jn,4,r.lo)._push(jn,4,r.hi)}fixed64Number(e){let r=ie.fromNumber(e);return this._push(jn,4,r.lo)._push(jn,4,r.hi)}fixed64String(e){return this.fixed64(BigInt(e))}sfixed64(e){return this.fixed64(e)}sfixed64Number(e){return this.fixed64Number(e)}sfixed64String(e){return this.fixed64String(e)}float(e){return this._push(xf,4,e)}double(e){return this._push(bf,8,e)}bytes(e){let r=e.length>>>0;return r===0?this._push(Na,1,0):this.uint32(r)._push(Sm,r,e)}string(e){let r=Sf(e);return r!==0?this.uint32(r)._push(Ca,r,e):this._push(Na,1,0)}fork(){return this.states=new Da(this),this.head=this.tail=new Hr(Ra,0,0),this.len=0,this}reset(){return this.states!=null?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Hr(Ra,0,0),this.len=0),this}ldelim(){let e=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n!==0&&(this.tail.next=e.next,this.tail=r,this.len+=n),this}finish(){let e=this.head.next,r=wm(this.len),n=0;for(;e!=null;)e.fn(e.val,r,n),n+=e.len,e=e.next;return r}};function Na(t,e,r){e[r]=t&255}function Em(t,e,r){for(;t>127;)e[r++]=t&127|128,t>>>=7;e[r]=t}var La=class extends Hr{next;constructor(e,r){super(Em,e,r),this.next=void 0}};function Jn(t,e,r){for(;t.hi!==0;)e[r++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=t.lo&127|128,t.lo=t.lo>>>7;e[r++]=t.lo}function jn(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function Sm(t,e,r){e.set(t,r)}globalThis.Buffer!=null&&(ti.prototype.bytes=function(t){let e=t.length>>>0;return this.uint32(e),e>0&&this._push(Bm,e,t),this},ti.prototype.string=function(t){let e=globalThis.Buffer.byteLength(t);return this.uint32(e),e>0&&this._push(Am,e,t),this});function Bm(t,e,r){e.set(t,r)}function Am(t,e,r){t.length<40?Ca(t,e,r):e.utf8Write!=null?e.utf8Write(t,r):e.set(yt(t),r)}function Pa(){return new ti}function Cn(t,e){let r=Pa();return e.encode(t,r,{lengthDelimited:!1}),r.finish()}var In;(function(t){t[t.VARINT=0]="VARINT",t[t.BIT64=1]="BIT64",t[t.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",t[t.START_GROUP=3]="START_GROUP",t[t.END_GROUP=4]="END_GROUP",t[t.BIT32=5]="BIT32"})(In||(In={}));function go(t,e,r,n){return{name:t,type:e,encode:r,decode:n}}function ei(t){function e(i){if(t[i.toString()]==null)throw new Error("Invalid enum value");return t[i]}let r=function(o,s){let a=e(o);s.int32(a)},n=function(o){let s=o.int32();return e(s)};return go("enum",In.VARINT,r,n)}function Tn(t,e){return go("message",In.LENGTH_DELIMITED,t,e)}var Nt;(function(t){t.RSA="RSA",t.Ed25519="Ed25519",t.Secp256k1="Secp256k1"})(Nt||(Nt={}));var ka;(function(t){t[t.RSA=0]="RSA",t[t.Ed25519=1]="Ed25519",t[t.Secp256k1=2]="Secp256k1"})(ka||(ka={}));(function(t){t.codec=()=>ei(ka)})(Nt||(Nt={}));var ze;(function(t){let e;t.codec=()=>(e==null&&(e=Tn((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),Nt.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={},o=n==null?r.len:r.pos+n;for(;r.pos<o;){let s=r.uint32();switch(s>>>3){case 1:i.Type=Nt.codec().decode(r);break;case 2:i.Data=r.bytes();break;default:r.skipType(s&7);break}}return i})),e),t.encode=r=>Cn(r,t.codec()),t.decode=r=>An(r,t.codec())})(ze||(ze={}));var rr;(function(t){let e;t.codec=()=>(e==null&&(e=Tn((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),Nt.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={},o=n==null?r.len:r.pos+n;for(;r.pos<o;){let s=r.uint32();switch(s>>>3){case 1:i.Type=Nt.codec().decode(r);break;case 2:i.Data=r.bytes();break;default:r.skipType(s&7);break}}return i})),e),t.encode=r=>Cn(r,t.codec()),t.decode=r=>An(r,t.codec())})(rr||(rr={}));var ri=class{_key;constructor(e){this._key=_n(e,Sn)}async verify(e,r){return yf(this._key,r,e)}marshal(){return this._key}get bytes(){return ze.encode({Type:Nt.Ed25519,Data:this.marshal()}).subarray()}equals(e){return Rt(this.bytes,e.bytes)}async hash(){let{bytes:e}=await $t.digest(this.bytes);return e}},Gr=class{_key;_publicKey;constructor(e,r){this._key=_n(e,er),this._publicKey=_n(r,Sn)}async sign(e){return pf(this._key,e)}get public(){return new ri(this._publicKey)}marshal(){return this._key}get bytes(){return rr.encode({Type:Nt.Ed25519,Data:this.marshal()}).subarray()}equals(e){return Rt(this.bytes,e.bytes)}async hash(){let{bytes:e}=await $t.digest(this.bytes);return e}async id(){let e=Pe.digest(this.public.bytes);return _t.encode(e.bytes).substring(1)}async export(e,r="libp2p-key"){if(r==="libp2p-key")return Bn(this.bytes,e);throw new X(`export format '${r}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}};function Cm(t){if(t.length>er){t=_n(t,er+Sn);let n=t.subarray(0,er),i=t.subarray(er,t.length);return new Gr(n,i)}t=_n(t,er);let e=t.subarray(0,er),r=t.subarray(Sn);return new Gr(e,r)}function Im(t){return t=_n(t,Sn),new ri(t)}async function Tm(){let{privateKey:t,publicKey:e}=await hf();return new Gr(t,e)}async function Cf(t){let{privateKey:e,publicKey:r}=await df(t);return new Gr(e,r)}function _n(t,e){if(t=Uint8Array.from(t??[]),t.length!==e)throw new X(`Key must be a Uint8Array of length ${e}, got ${t.length}`,"ERR_INVALID_KEY_TYPE");return t}var O4=Pt(kt(),1),F4=Pt(Qi(),1),If=Pt(gt(),1);function _e(t,e){let r=Uint8Array.from(t.abs().toByteArray());if(r=r[0]===0?r.subarray(1):r,e!=null){if(r.length>e)throw new Error("byte array longer than desired length");r=Ot([new Uint8Array(e-r.length),r])}return ut(r,"base64url")}function ue(t){let e=Tf(t);return new If.default.jsbn.BigInteger(ut(e,"base16"),16)}function Tf(t,e){let r=yt(t,"base64urlpad");if(e!=null){if(r.length>e)throw new Error("byte array longer than desired length");r=Ot([new Uint8Array(e-r.length),r])}return r}var _m={"P-256":256,"P-384":384,"P-521":521},Rm=Object.keys(_m),Z4=Rm.join(" / ");var Va={};Kt(Va,{MAX_KEY_SIZE:()=>si,RsaPrivateKey:()=>Rn,RsaPublicKey:()=>oi,fromJwk:()=>Vm,generateKeyPair:()=>qm,unmarshalRsaPrivateKey:()=>Km,unmarshalRsaPublicKey:()=>Mm});var ii=Pt(gt(),1);var L8=Pt(Lf(),1);function xo(t){if(isNaN(t)||t<=0)throw new X("random bytes length must be a Number bigger than 0","ERR_INVALID_LENGTH");return bn(t)}var y8=Pt(ji(),1),Ka=Pt(gt(),1);function Pf(t,e){return e.map(r=>ue(t[r]))}function kf(t){return Ka.default.pki.setRsaPrivateKey(...Pf(t,["n","e","d","p","q","dp","dq","qi"]))}function Uf(t){return Ka.default.pki.setRsaPublicKey(...Pf(t,["n","e"]))}var Wr={};Kt(Wr,{jwkToPkcs1:()=>Pm,jwkToPkix:()=>Um,pkcs1ToJwk:()=>Lm,pkixToJwk:()=>km});var x8=Pt($n(),1),v8=Pt(ji(),1);var nr=Pt(gt(),1);function Lm(t){let e=nr.default.asn1.fromDer(ut(t,"ascii")),r=nr.default.pki.privateKeyFromAsn1(e);return{kty:"RSA",n:_e(r.n),e:_e(r.e),d:_e(r.d),p:_e(r.p),q:_e(r.q),dp:_e(r.dP),dq:_e(r.dQ),qi:_e(r.qInv),alg:"RS256"}}function Pm(t){if(t.n==null||t.e==null||t.d==null||t.p==null||t.q==null||t.dp==null||t.dq==null||t.qi==null)throw new X("JWK was missing components","ERR_INVALID_PARAMETERS");let e=nr.default.pki.privateKeyToAsn1({n:ue(t.n),e:ue(t.e),d:ue(t.d),p:ue(t.p),q:ue(t.q),dP:ue(t.dp),dQ:ue(t.dq),qInv:ue(t.qi)});return yt(nr.default.asn1.toDer(e).getBytes(),"ascii")}function km(t){let e=nr.default.asn1.fromDer(ut(t,"ascii")),r=nr.default.pki.publicKeyFromAsn1(e);return{kty:"RSA",n:_e(r.n),e:_e(r.e)}}function Um(t){if(t.n==null||t.e==null)throw new X("JWK was missing components","ERR_INVALID_PARAMETERS");let e=nr.default.pki.publicKeyToAsn1({n:ue(t.n),e:ue(t.e)});return yt(nr.default.asn1.toDer(e).getBytes(),"ascii")}async function Of(t){let e=await ne.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),r=await Mf(e);return{privateKey:r[0],publicKey:r[1]}}async function Ma(t){let r=[await ne.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),await Om(t)],n=await Mf({privateKey:r[0],publicKey:r[1]});return{privateKey:n[0],publicKey:n[1]}}async function Ff(t,e){let r=await ne.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),n=await ne.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},r,Uint8Array.from(e));return new Uint8Array(n,0,n.byteLength)}async function Kf(t,e,r){let n=await ne.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return ne.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},n,e,r)}async function Mf(t){if(t.privateKey==null||t.publicKey==null)throw new X("Private and public key are required","ERR_INVALID_PARAMETERS");return Promise.all([ne.get().subtle.exportKey("jwk",t.privateKey),ne.get().subtle.exportKey("jwk",t.publicKey)])}async function Om(t){return ne.get().subtle.importKey("jwk",{kty:t.kty,n:t.n,e:t.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}function Vf(t,e,r,n){let i=e?Uf(t):kf(t),o=ut(Uint8Array.from(r),"ascii"),s=n(o,i);return yt(s,"ascii")}function qf(t,e){return Vf(t,!0,e,(r,n)=>n.encrypt(r))}function zf(t,e){return Vf(t,!1,e,(r,n)=>n.decrypt(r))}function vo(t){if(t.kty!=="RSA")throw new X("invalid key type","ERR_INVALID_KEY_TYPE");if(t.n==null)throw new X("invalid key modulus","ERR_INVALID_KEY_MODULUS");return yt(t.n,"base64url").length*8}var si=8192,oi=class{_key;constructor(e){this._key=e}async verify(e,r){return Kf(this._key,r,e)}marshal(){return Wr.jwkToPkix(this._key)}get bytes(){return ze.encode({Type:Nt.RSA,Data:this.marshal()}).subarray()}encrypt(e){return qf(this._key,e)}equals(e){return Rt(this.bytes,e.bytes)}async hash(){let{bytes:e}=await $t.digest(this.bytes);return e}},Rn=class{_key;_publicKey;constructor(e,r){this._key=e,this._publicKey=r}genSecret(){return xo(16)}async sign(e){return Ff(this._key,e)}get public(){if(this._publicKey==null)throw new X("public key not provided","ERR_PUBKEY_NOT_PROVIDED");return new oi(this._publicKey)}decrypt(e){return zf(this._key,e)}marshal(){return Wr.jwkToPkcs1(this._key)}get bytes(){return rr.encode({Type:Nt.RSA,Data:this.marshal()}).subarray()}equals(e){return Rt(this.bytes,e.bytes)}async hash(){let{bytes:e}=await $t.digest(this.bytes);return e}async id(){let e=await this.public.hash();return ut(e,"base58btc")}async export(e,r="pkcs-8"){if(r==="pkcs-8"){let n=new ii.default.util.ByteBuffer(this.marshal()),i=ii.default.asn1.fromDer(n),o=ii.default.pki.privateKeyFromAsn1(i),s={algorithm:"aes256",count:1e4,saltSize:128/8,prfAlgorithm:"sha512"};return ii.default.pki.encryptRsaPrivateKey(o,e,s)}else{if(r==="libp2p-key")return Bn(this.bytes,e);throw new X(`export format '${r}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}};async function Km(t){let e=Wr.pkcs1ToJwk(t);if(vo(e)>si)throw new X("key size is too large","ERR_KEY_SIZE_TOO_LARGE");let r=await Ma(e);return new Rn(r.privateKey,r.publicKey)}function Mm(t){let e=Wr.pkixToJwk(t);if(vo(e)>si)throw new X("key size is too large","ERR_KEY_SIZE_TOO_LARGE");return new oi(e)}async function Vm(t){if(vo(t)>si)throw new X("key size is too large","ERR_KEY_SIZE_TOO_LARGE");let e=await Ma(t);return new Rn(e.privateKey,e.publicKey)}async function qm(t){if(t>si)throw new X("key size is too large","ERR_KEY_SIZE_TOO_LARGE");let e=await Of(t);return new Rn(e.privateKey,e.publicKey)}var Wa={};Kt(Wa,{Secp256k1PrivateKey:()=>ci,Secp256k1PublicKey:()=>ai,generateKeyPair:()=>nx,unmarshalSecp256k1PrivateKey:()=>ex,unmarshalSecp256k1PublicKey:()=>rx});var zm=(t,e,r)=>t&e^~t&r,Hm=(t,e,r)=>t&e^t&r^e&r,Gm=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Br=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ar=new Uint32Array(64),qa=class extends wn{constructor(){super(64,32,8,!1),this.A=Br[0]|0,this.B=Br[1]|0,this.C=Br[2]|0,this.D=Br[3]|0,this.E=Br[4]|0,this.F=Br[5]|0,this.G=Br[6]|0,this.H=Br[7]|0}get(){let{A:e,B:r,C:n,D:i,E:o,F:s,G:a,H:c}=this;return[e,r,n,i,o,s,a,c]}set(e,r,n,i,o,s,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=c|0}process(e,r){for(let l=0;l<16;l++,r+=4)Ar[l]=e.getUint32(r,!1);for(let l=16;l<64;l++){let h=Ar[l-15],g=Ar[l-2],d=Ce(h,7)^Ce(h,18)^h>>>3,p=Ce(g,17)^Ce(g,19)^g>>>10;Ar[l]=p+Ar[l-7]+d+Ar[l-16]|0}let{A:n,B:i,C:o,D:s,E:a,F:c,G:u,H:f}=this;for(let l=0;l<64;l++){let h=Ce(a,6)^Ce(a,11)^Ce(a,25),g=f+h+zm(a,c,u)+Gm[l]+Ar[l]|0,p=(Ce(n,2)^Ce(n,13)^Ce(n,22))+Hm(n,i,o)|0;f=u,u=c,c=a,a=s+g|0,s=o,o=i,i=n,n=g+p|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,f=f+this.H|0,this.set(n,i,o,s,a,c,u,f)}roundClean(){Ar.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var Hf=no(()=>new qa);function $m(t){let e=Xn(t);qe(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:i}=e;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}var{bytesToNumberBE:Wm,hexToBytes:Ym}=ao,Yr={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){let{Err:e}=Yr;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");let r=t[1],n=t.subarray(2,r+2);if(!r||n.length!==r)throw new e("Invalid signature integer: wrong length");if(n[0]&128)throw new e("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:Wm(n),l:t.subarray(r+2)}},toSig(t){let{Err:e}=Yr,r=typeof t=="string"?Ym(t):t;if(!(r instanceof Uint8Array))throw new Error("ui8a expected");let n=r.length;if(n<2||r[0]!=48)throw new e("Invalid signature tag");if(r[1]!==n-2)throw new e("Invalid signature: incorrect length");let{d:i,l:o}=Yr._parseInt(r.subarray(2)),{d:s,l:a}=Yr._parseInt(o);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s}},hexFromSig(t){let e=u=>Number.parseInt(u[0],16)&8?"00"+u:u,r=u=>{let f=u.toString(16);return f.length&1?`0${f}`:f},n=e(r(t.s)),i=e(r(t.r)),o=n.length/2,s=i.length/2,a=r(o),c=r(s);return`30${r(s+o+4)}02${c}${i}02${a}${n}`}},ir=BigInt(0),xe=BigInt(1),q8=BigInt(2),Gf=BigInt(3),z8=BigInt(4);function Zm(t){let e=$m(t),{Fp:r}=e,n=e.toBytes||((d,p,y)=>{let m=p.toAffine();return je(Uint8Array.from([4]),r.toBytes(m.x),r.toBytes(m.y))}),i=e.fromBytes||(d=>{let p=d.subarray(1),y=r.fromBytes(p.subarray(0,r.BYTES)),m=r.fromBytes(p.subarray(r.BYTES,2*r.BYTES));return{x:y,y:m}});function o(d){let{a:p,b:y}=e,m=r.sqr(d),w=r.mul(m,d);return r.add(r.add(w,r.mul(d,p)),y)}if(!r.eql(r.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function s(d){return typeof d=="bigint"&&ir<d&&d<e.n}function a(d){if(!s(d))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(d){let{allowedPrivateKeyLengths:p,nByteLength:y,wrapPrivateKey:m,n:w}=e;if(p&&typeof d!="bigint"){if(d instanceof Uint8Array&&(d=Xe(d)),typeof d!="string"||!p.includes(d.length))throw new Error("Invalid key");d=d.padStart(y*2,"0")}let b;try{b=typeof d=="bigint"?d:Je(Tt("private key",d,y))}catch{throw new Error(`private key must be ${y} bytes, hex or bigint, not ${typeof d}`)}return m&&(b=mt(b,w)),a(b),b}let u=new Map;function f(d){if(!(d instanceof l))throw new Error("ProjectivePoint expected")}class l{constructor(p,y,m){if(this.px=p,this.py=y,this.pz=m,p==null||!r.isValid(p))throw new Error("x required");if(y==null||!r.isValid(y))throw new Error("y required");if(m==null||!r.isValid(m))throw new Error("z required")}static fromAffine(p){let{x:y,y:m}=p||{};if(!p||!r.isValid(y)||!r.isValid(m))throw new Error("invalid affine point");if(p instanceof l)throw new Error("projective point not allowed");let w=b=>r.eql(b,r.ZERO);return w(y)&&w(m)?l.ZERO:new l(y,m,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(p){let y=r.invertBatch(p.map(m=>m.pz));return p.map((m,w)=>m.toAffine(y[w])).map(l.fromAffine)}static fromHex(p){let y=l.fromAffine(i(Tt("pointHex",p)));return y.assertValidity(),y}static fromPrivateKey(p){return l.BASE.multiply(c(p))}_setWindowSize(p){this._WINDOW_SIZE=p,u.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:p,y}=this.toAffine();if(!r.isValid(p)||!r.isValid(y))throw new Error("bad point: x or y not FE");let m=r.sqr(y),w=o(p);if(!r.eql(m,w))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:p}=this.toAffine();if(r.isOdd)return!r.isOdd(p);throw new Error("Field doesn't support isOdd")}equals(p){f(p);let{px:y,py:m,pz:w}=this,{px:b,py:L,pz:E}=p,S=r.eql(r.mul(y,E),r.mul(b,w)),P=r.eql(r.mul(m,E),r.mul(L,w));return S&&P}negate(){return new l(this.px,r.neg(this.py),this.pz)}double(){let{a:p,b:y}=e,m=r.mul(y,Gf),{px:w,py:b,pz:L}=this,E=r.ZERO,S=r.ZERO,P=r.ZERO,B=r.mul(w,w),O=r.mul(b,b),K=r.mul(L,L),U=r.mul(w,b);return U=r.add(U,U),P=r.mul(w,L),P=r.add(P,P),E=r.mul(p,P),S=r.mul(m,K),S=r.add(E,S),E=r.sub(O,S),S=r.add(O,S),S=r.mul(E,S),E=r.mul(U,E),P=r.mul(m,P),K=r.mul(p,K),U=r.sub(B,K),U=r.mul(p,U),U=r.add(U,P),P=r.add(B,B),B=r.add(P,B),B=r.add(B,K),B=r.mul(B,U),S=r.add(S,B),K=r.mul(b,L),K=r.add(K,K),B=r.mul(K,U),E=r.sub(E,B),P=r.mul(K,O),P=r.add(P,P),P=r.add(P,P),new l(E,S,P)}add(p){f(p);let{px:y,py:m,pz:w}=this,{px:b,py:L,pz:E}=p,S=r.ZERO,P=r.ZERO,B=r.ZERO,O=e.a,K=r.mul(e.b,Gf),U=r.mul(y,b),V=r.mul(m,L),Y=r.mul(w,E),et=r.add(y,m),A=r.add(b,L);et=r.mul(et,A),A=r.add(U,V),et=r.sub(et,A),A=r.add(y,w);let R=r.add(b,E);return A=r.mul(A,R),R=r.add(U,Y),A=r.sub(A,R),R=r.add(m,w),S=r.add(L,E),R=r.mul(R,S),S=r.add(V,Y),R=r.sub(R,S),B=r.mul(O,A),S=r.mul(K,Y),B=r.add(S,B),S=r.sub(V,B),B=r.add(V,B),P=r.mul(S,B),V=r.add(U,U),V=r.add(V,U),Y=r.mul(O,Y),A=r.mul(K,A),V=r.add(V,Y),Y=r.sub(U,Y),Y=r.mul(O,Y),A=r.add(A,Y),U=r.mul(V,A),P=r.add(P,U),U=r.mul(R,A),S=r.mul(et,S),S=r.sub(S,U),U=r.mul(et,V),B=r.mul(R,B),B=r.add(B,U),new l(S,P,B)}subtract(p){return this.add(p.negate())}is0(){return this.equals(l.ZERO)}wNAF(p){return g.wNAFCached(this,u,p,y=>{let m=r.invertBatch(y.map(w=>w.pz));return y.map((w,b)=>w.toAffine(m[b])).map(l.fromAffine)})}multiplyUnsafe(p){let y=l.ZERO;if(p===ir)return y;if(a(p),p===xe)return this;let{endo:m}=e;if(!m)return g.unsafeLadder(this,p);let{k1neg:w,k1:b,k2neg:L,k2:E}=m.splitScalar(p),S=y,P=y,B=this;for(;b>ir||E>ir;)b&xe&&(S=S.add(B)),E&xe&&(P=P.add(B)),B=B.double(),b>>=xe,E>>=xe;return w&&(S=S.negate()),L&&(P=P.negate()),P=new l(r.mul(P.px,m.beta),P.py,P.pz),S.add(P)}multiply(p){a(p);let y=p,m,w,{endo:b}=e;if(b){let{k1neg:L,k1:E,k2neg:S,k2:P}=b.splitScalar(y),{p:B,f:O}=this.wNAF(E),{p:K,f:U}=this.wNAF(P);B=g.constTimeNegate(L,B),K=g.constTimeNegate(S,K),K=new l(r.mul(K.px,b.beta),K.py,K.pz),m=B.add(K),w=O.add(U)}else{let{p:L,f:E}=this.wNAF(y);m=L,w=E}return l.normalizeZ([m,w])[0]}multiplyAndAddUnsafe(p,y,m){let w=l.BASE,b=(E,S)=>S===ir||S===xe||!E.equals(w)?E.multiplyUnsafe(S):E.multiply(S),L=b(this,y).add(b(p,m));return L.is0()?void 0:L}toAffine(p){let{px:y,py:m,pz:w}=this,b=this.is0();p==null&&(p=b?r.ONE:r.inv(w));let L=r.mul(y,p),E=r.mul(m,p),S=r.mul(w,p);if(b)return{x:r.ZERO,y:r.ZERO};if(!r.eql(S,r.ONE))throw new Error("invZ was invalid");return{x:L,y:E}}isTorsionFree(){let{h:p,isTorsionFree:y}=e;if(p===xe)return!0;if(y)return y(l,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:p,clearCofactor:y}=e;return p===xe?this:y?y(l,this):this.multiplyUnsafe(e.h)}toRawBytes(p=!0){return this.assertValidity(),n(l,this,p)}toHex(p=!0){return Xe(this.toRawBytes(p))}}l.BASE=new l(e.Gx,e.Gy,r.ONE),l.ZERO=new l(r.ZERO,r.ONE,r.ZERO);let h=e.nBitLength,g=fo(l,e.endo?Math.ceil(h/2):h);return{CURVE:e,ProjectivePoint:l,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:s}}function Qm(t){let e=Xn(t);return qe(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function $f(t){let e=Qm(t),{Fp:r,n}=e,i=r.BYTES+1,o=2*r.BYTES+1;function s(A){return ir<A&&A<r.ORDER}function a(A){return mt(A,n)}function c(A){return co(A,n)}let{ProjectivePoint:u,normPrivateKeyToScalar:f,weierstrassEquation:l,isWithinCurveOrder:h}=Zm({...e,toBytes(A,R,N){let k=R.toAffine(),I=r.toBytes(k.x),z=je;return N?z(Uint8Array.from([R.hasEvenY()?2:3]),I):z(Uint8Array.from([4]),I,r.toBytes(k.y))},fromBytes(A){let R=A.length,N=A[0],k=A.subarray(1);if(R===i&&(N===2||N===3)){let I=Je(k);if(!s(I))throw new Error("Point is not on curve");let z=l(I),$=r.sqrt(z),Z=($&xe)===xe;return(N&1)===1!==Z&&($=r.neg($)),{x:I,y:$}}else if(R===o&&N===4){let I=r.fromBytes(k.subarray(0,r.BYTES)),z=r.fromBytes(k.subarray(r.BYTES,2*r.BYTES));return{x:I,y:z}}else throw new Error(`Point of length ${R} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}}),g=A=>Xe(Er(A,e.nByteLength));function d(A){let R=n>>xe;return A>R}function p(A){return d(A)?a(-A):A}let y=(A,R,N)=>Je(A.slice(R,N));class m{constructor(R,N,k){this.r=R,this.s=N,this.recovery=k,this.assertValidity()}static fromCompact(R){let N=e.nByteLength;return R=Tt("compactSignature",R,N*2),new m(y(R,0,N),y(R,N,2*N))}static fromDER(R){let{r:N,s:k}=Yr.toSig(Tt("DER",R));return new m(N,k)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(R){return new m(this.r,this.s,R)}recoverPublicKey(R){let{r:N,s:k,recovery:I}=this,z=P(Tt("msgHash",R));if(I==null||![0,1,2,3].includes(I))throw new Error("recovery id invalid");let $=I===2||I===3?N+e.n:N;if($>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let Z=I&1?"03":"02",rt=u.fromHex(Z+g($)),it=c($),pt=a(-z*it),ot=a(k*it),ct=u.BASE.multiplyAndAddUnsafe(rt,pt,ot);if(!ct)throw new Error("point at infinify");return ct.assertValidity(),ct}hasHighS(){return d(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Mr(this.toDERHex())}toDERHex(){return Yr.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Mr(this.toCompactHex())}toCompactHex(){return g(this.r)+g(this.s)}}let w={isValidPrivateKey(A){try{return f(A),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{let A=ma(e.n);return af(e.randomBytes(A),e.n)},precompute(A=8,R=u.BASE){return R._setWindowSize(A),R.multiply(BigInt(3)),R}};function b(A,R=!0){return u.fromPrivateKey(A).toRawBytes(R)}function L(A){let R=A instanceof Uint8Array,N=typeof A=="string",k=(R||N)&&A.length;return R?k===i||k===o:N?k===2*i||k===2*o:A instanceof u}function E(A,R,N=!0){if(L(A))throw new Error("first arg must be private key");if(!L(R))throw new Error("second arg must be public key");return u.fromHex(R).multiply(f(A)).toRawBytes(N)}let S=e.bits2int||function(A){let R=Je(A),N=A.length*8-e.nBitLength;return N>0?R>>BigInt(N):R},P=e.bits2int_modN||function(A){return a(S(A))},B=Qn(e.nBitLength);function O(A){if(typeof A!="bigint")throw new Error("bigint expected");if(!(ir<=A&&A<B))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Er(A,e.nByteLength)}function K(A,R,N=U){if(["recovered","canonical"].some(Ct=>Ct in N))throw new Error("sign() legacy options not supported");let{hash:k,randomBytes:I}=e,{lowS:z,prehash:$,extraEntropy:Z}=N;z==null&&(z=!0),A=Tt("msgHash",A),$&&(A=Tt("prehashed msgHash",k(A)));let rt=P(A),it=f(R),pt=[O(it),O(rt)];if(Z!=null){let Ct=Z===!0?I(r.BYTES):Z;pt.push(Tt("extraEntropy",Ct))}let ot=je(...pt),ct=rt;function Lt(Ct){let Ht=S(Ct);if(!h(Ht))return;let Gt=c(Ht),Ut=u.BASE.multiply(Ht).toAffine(),Yt=a(Ut.x);if(Yt===ir)return;let $e=a(Gt*a(ct+Yt*it));if($e===ir)return;let Nr=(Ut.x===Yt?0:2)|Number(Ut.y&xe),Un=$e;return z&&d($e)&&(Un=p($e),Nr^=1),new m(Yt,Un,Nr)}return{seed:ot,k2sig:Lt}}let U={lowS:e.lowS,prehash:!1},V={lowS:e.lowS,prehash:!1};function Y(A,R,N=U){let{seed:k,k2sig:I}=K(A,R,N),z=e;return da(z.hash.outputLen,z.nByteLength,z.hmac)(k,I)}u.BASE._setWindowSize(8);function et(A,R,N,k=V){let I=A;if(R=Tt("msgHash",R),N=Tt("publicKey",N),"strict"in k)throw new Error("options.strict was renamed to lowS");let{lowS:z,prehash:$}=k,Z,rt;try{if(typeof I=="string"||I instanceof Uint8Array)try{Z=m.fromDER(I)}catch(Ut){if(!(Ut instanceof Yr.Err))throw Ut;Z=m.fromCompact(I)}else if(typeof I=="object"&&typeof I.r=="bigint"&&typeof I.s=="bigint"){let{r:Ut,s:Yt}=I;Z=new m(Ut,Yt)}else throw new Error("PARSE");rt=u.fromHex(N)}catch(Ut){if(Ut.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(z&&Z.hasHighS())return!1;$&&(R=e.hash(R));let{r:it,s:pt}=Z,ot=P(R),ct=c(pt),Lt=a(ot*ct),Ct=a(it*ct),Ht=u.BASE.multiplyAndAddUnsafe(rt,Lt,Ct)?.toAffine();return Ht?a(Ht.x)===it:!1}return{CURVE:e,getPublicKey:b,getSharedSecret:E,sign:Y,verify:et,ProjectivePoint:u,Signature:m,utils:w}}var bo=class extends vn{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,Yu(e);let n=Zn(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?e.create().update(n).digest():n);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=e.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(e){return xn(this),this.iHash.update(e),this}digestInto(e){xn(this),sa(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=o,e.blockLen=s,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},za=(t,e,r)=>new bo(t,e).update(r).digest();za.create=(t,e)=>new bo(t,e);function Xm(t){return{hash:t,hmac:(e,...r)=>za(t,e,ro(...r)),randomBytes:bn}}function Wf(t,e){let r=n=>$f({...t,...Xm(n)});return Object.freeze({...r(e),create:r})}var Qf=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Yf=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Jm=BigInt(1),Ha=BigInt(2),Zf=(t,e)=>(t+e/Ha)/e;function jm(t){let e=Qf,r=BigInt(3),n=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),c=BigInt(88),u=t*t*t%e,f=u*u*t%e,l=Bt(f,r,e)*f%e,h=Bt(l,r,e)*f%e,g=Bt(h,Ha,e)*u%e,d=Bt(g,i,e)*g%e,p=Bt(d,o,e)*d%e,y=Bt(p,a,e)*p%e,m=Bt(y,c,e)*y%e,w=Bt(m,a,e)*p%e,b=Bt(w,r,e)*f%e,L=Bt(b,s,e)*d%e,E=Bt(L,n,e)*u%e,S=Bt(E,Ha,e);if(!Ga.eql(Ga.sqr(S),t))throw new Error("Cannot find square root");return S}var Ga=uo(Qf,void 0,void 0,{sqrt:jm}),or=Wf({a:BigInt(0),b:BigInt(7),Fp:Ga,n:Yf,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{let e=Yf,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Jm*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=BigInt("0x100000000000000000000000000000000"),a=Zf(o*t,e),c=Zf(-n*t,e),u=mt(t-a*r-c*i,e),f=mt(-a*n-c*o,e),l=u>s,h=f>s;if(l&&(u=e-u),h&&(f=e-f),u>s||f>s)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:l,k1:u,k2neg:h,k2:f}}}},Hf),e3=BigInt(0);var r3=or.ProjectivePoint;function Xf(){return or.utils.randomPrivateKey()}async function Jf(t,e){let{digest:r}=await $t.digest(e);try{return or.sign(r,t).toDERRawBytes()}catch(n){throw new X(String(n),"ERR_INVALID_INPUT")}}async function jf(t,e,r){try{let{digest:n}=await $t.digest(r);return or.verify(e,n,t)}catch(n){throw new X(String(n),"ERR_INVALID_INPUT")}}function tl(t){return or.ProjectivePoint.fromHex(t).toRawBytes(!0)}function el(t){try{or.getPublicKey(t,!0)}catch(e){throw new X(String(e),"ERR_INVALID_PRIVATE_KEY")}}function $a(t){try{or.ProjectivePoint.fromHex(t)}catch(e){throw new X(String(e),"ERR_INVALID_PUBLIC_KEY")}}function rl(t){try{return or.getPublicKey(t,!0)}catch(e){throw new X(String(e),"ERR_INVALID_PRIVATE_KEY")}}var ai=class{_key;constructor(e){$a(e),this._key=e}async verify(e,r){return jf(this._key,r,e)}marshal(){return tl(this._key)}get bytes(){return ze.encode({Type:Nt.Secp256k1,Data:this.marshal()}).subarray()}equals(e){return Rt(this.bytes,e.bytes)}async hash(){let{bytes:e}=await $t.digest(this.bytes);return e}},ci=class{_key;_publicKey;constructor(e,r){this._key=e,this._publicKey=r??rl(e),el(this._key),$a(this._publicKey)}async sign(e){return Jf(this._key,e)}get public(){return new ai(this._publicKey)}marshal(){return this._key}get bytes(){return rr.encode({Type:Nt.Secp256k1,Data:this.marshal()}).subarray()}equals(e){return Rt(this.bytes,e.bytes)}async hash(){let{bytes:e}=await $t.digest(this.bytes);return e}async id(){let e=await this.public.hash();return ut(e,"base58btc")}async export(e,r="libp2p-key"){if(r==="libp2p-key")return Bn(this.bytes,e);throw new X(`export format '${r}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}};function ex(t){return new ci(t)}function rx(t){return new ai(t)}async function nx(){let t=Xf();return new ci(t)}var wo={rsa:Va,ed25519:Ua,secp256k1:Wa};function ox(t){let e=Object.keys(wo).join(" / ");return new X(`invalid or unsupported key type ${t}. Must be ${e}`,"ERR_UNSUPPORTED_KEY_TYPE")}function Ya(t){let e=ze.decode(t),r=e.Data??new Uint8Array;switch(e.Type){case Nt.RSA:return wo.rsa.unmarshalRsaPublicKey(r);case Nt.Ed25519:return wo.ed25519.unmarshalEd25519PublicKey(r);case Nt.Secp256k1:return wo.secp256k1.unmarshalSecp256k1PublicKey(r);default:throw ox(e.Type??"unknown")}}var Vx=Pt(Eo(),1);var ol=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,r)=>(r&=63,r<36?e+=r.toString(36):r<62?e+=(r-26).toString(36).toUpperCase():r>62?e+="-":e+="_",e),"");var sr="/",sl=new TextEncoder().encode(sr),So=sl[0],Za=class t{_buf;constructor(e,r){if(typeof e=="string")this._buf=yt(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(r==null&&(r=!0),r&&this.clean(),this._buf.byteLength===0||this._buf[0]!==So)throw new Error("Invalid key")}toString(e="utf8"){return ut(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new t(e.join(sr))}static random(){return new t(ol().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new t(e):typeof e.uint8Array=="function"?new t(e.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=sl),this._buf[0]!==So){let e=new Uint8Array(this._buf.byteLength+1);e.fill(So,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===So;)this._buf=this._buf.subarray(0,-1)}less(e){let r=this.list(),n=e.list();for(let i=0;i<r.length;i++){if(n.length<i+1)return!1;let o=r[i],s=n[i];if(o<s)return!0;if(o>s)return!1}return r.length<n.length}reverse(){return t.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(sr).slice(1)}type(){return ax(this.baseNamespace())}name(){return cx(this.baseNamespace())}instance(e){return new t(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(sr)||(e+=sr),e+=this.type(),new t(e)}parent(){let e=this.list();return e.length===1?new t(sr):new t(e.slice(0,-1).join(sr))}child(e){return this.toString()===sr?e:e.toString()===sr?this:new t(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return t.withNamespaces([...this.namespaces(),...ux(e.map(r=>r.namespaces()))])}};function ax(t){let e=t.split(":");return e.length<2?"":e.slice(0,-1).join(":")}function cx(t){let e=t.split(":");return e[e.length-1]}function ux(t){return[].concat(...t)}var qx=Pt(Xa(),1);var al="ERR_IPNS_EXPIRED_RECORD",Bo="ERR_UNRECOGNIZED_VALIDITY";var ar="ERR_SIGNATURE_VERIFICATION",cl="ERR_UNRECOGNIZED_FORMAT";var Ja="ERR_UNDEFINED_PARAMETER",ul="ERR_INVALID_RECORD_DATA",fl="ERR_INVALID_VALUE",ll="ERR_INVALID_EMBEDDED_KEY";var hl="ERR_RECORD_TOO_LARGE";var ve;(function(t){let e;(function(i){i.EOL="EOL"})(e=t.ValidityType||(t.ValidityType={}));let r;(function(i){i[i.EOL=0]="EOL"})(r||(r={})),function(i){i.codec=()=>ei(r)}(e=t.ValidityType||(t.ValidityType={}));let n;t.codec=()=>(n==null&&(n=Tn((i,o,s={})=>{s.lengthDelimited!==!1&&o.fork(),i.value!=null&&(o.uint32(10),o.bytes(i.value)),i.signatureV1!=null&&(o.uint32(18),o.bytes(i.signatureV1)),i.validityType!=null&&(o.uint32(24),t.ValidityType.codec().encode(i.validityType,o)),i.validity!=null&&(o.uint32(34),o.bytes(i.validity)),i.sequence!=null&&(o.uint32(40),o.uint64(i.sequence)),i.ttl!=null&&(o.uint32(48),o.uint64(i.ttl)),i.pubKey!=null&&(o.uint32(58),o.bytes(i.pubKey)),i.signatureV2!=null&&(o.uint32(66),o.bytes(i.signatureV2)),i.data!=null&&(o.uint32(74),o.bytes(i.data)),s.lengthDelimited!==!1&&o.ldelim()},(i,o)=>{let s={},a=o==null?i.len:i.pos+o;for(;i.pos<a;){let c=i.uint32();switch(c>>>3){case 1:s.value=i.bytes();break;case 2:s.signatureV1=i.bytes();break;case 3:s.validityType=t.ValidityType.codec().decode(i);break;case 4:s.validity=i.bytes();break;case 5:s.sequence=i.uint64();break;case 6:s.ttl=i.uint64();break;case 7:s.pubKey=i.bytes();break;case 8:s.signatureV2=i.bytes();break;case 9:s.data=i.bytes();break;default:i.skipType(c&7);break}}return s})),n),t.encode=i=>Cn(i,t.codec()),t.decode=i=>An(i,t.codec())})(ve||(ve={}));var fx=["string","number","bigint","symbol"],lx=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function dl(t){if(t===null)return"null";if(t===void 0)return"undefined";if(t===!0||t===!1)return"boolean";let e=typeof t;if(fx.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(t))return"Array";if(hx(t))return"Buffer";let r=dx(t);return r||"Object"}function hx(t){return t&&t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer.call(null,t)}function dx(t){let e=Object.prototype.toString.call(t).slice(8,-1);if(lx.includes(e))return e}var T=class{constructor(e,r,n){this.major=e,this.majorEncoded=e<<5,this.name=r,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}};T.uint=new T(0,"uint",!0);T.negint=new T(1,"negint",!0);T.bytes=new T(2,"bytes",!0);T.string=new T(3,"string",!0);T.array=new T(4,"array",!1);T.map=new T(5,"map",!1);T.tag=new T(6,"tag",!1);T.float=new T(7,"float",!0);T.false=new T(7,"false",!0);T.true=new T(7,"true",!0);T.null=new T(7,"null",!0);T.undefined=new T(7,"undefined",!0);T.break=new T(7,"break",!0);var H=class{constructor(e,r,n){this.type=e,this.value=r,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};var Nn=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",px=new TextDecoder,yx=new TextEncoder;function Ao(t){return Nn&&globalThis.Buffer.isBuffer(t)}function ml(t){return t instanceof Uint8Array?Ao(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t:Uint8Array.from(t)}var xl=Nn?(t,e,r)=>r-e>64?globalThis.Buffer.from(t.subarray(e,r)).toString("utf8"):yl(t,e,r):(t,e,r)=>r-e>64?px.decode(t.subarray(e,r)):yl(t,e,r),vl=Nn?t=>t.length>64?globalThis.Buffer.from(t):pl(t):t=>t.length>64?yx.encode(t):pl(t);var Dn=Nn?(t,e,r)=>Ao(t)?new Uint8Array(t.subarray(e,r)):t.slice(e,r):(t,e,r)=>t.slice(e,r),bl=Nn?(t,e)=>(t=t.map(r=>r instanceof Uint8Array?r:globalThis.Buffer.from(r)),ml(globalThis.Buffer.concat(t,e))):(t,e)=>{let r=new Uint8Array(e),n=0;for(let i of t)n+i.length>r.length&&(i=i.subarray(0,r.length-n)),r.set(i,n),n+=i.length;return r},wl=Nn?t=>globalThis.Buffer.allocUnsafe(t):t=>new Uint8Array(t);function El(t,e){if(Ao(t)&&Ao(e))return t.compare(e);for(let r=0;r<t.length;r++)if(t[r]!==e[r])return t[r]<e[r]?-1:1;return 0}function pl(t){let e=[],r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e}function yl(t,e,r){let n=[];for(;e<r;){let i=t[e],o=null,s=i>239?4:i>223?3:i>191?2:1;if(e+s<=r){let a,c,u,f;switch(s){case 1:i<128&&(o=i);break;case 2:a=t[e+1],(a&192)===128&&(f=(i&31)<<6|a&63,f>127&&(o=f));break;case 3:a=t[e+1],c=t[e+2],(a&192)===128&&(c&192)===128&&(f=(i&15)<<12|(a&63)<<6|c&63,f>2047&&(f<55296||f>57343)&&(o=f));break;case 4:a=t[e+1],c=t[e+2],u=t[e+3],(a&192)===128&&(c&192)===128&&(u&192)===128&&(f=(i&15)<<18|(a&63)<<12|(c&63)<<6|u&63,f>65535&&f<1114112&&(o=f))}}o===null?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),e+=s}return gx(n)}var gl=4096;function gx(t){let e=t.length;if(e<=gl)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=gl));return r}var mx=256,Co=class{constructor(e=mx){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let r=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){let i=r.length-(this.maxCursor-this.cursor)-1;r.set(e,i)}else{if(r){let i=r.length-(this.maxCursor-this.cursor)-1;i<r.length&&(this.chunks[this.chunks.length-1]=r.subarray(0,i),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(r=wl(this.chunkSize),this.chunks.push(r),this.maxCursor+=r.length,this._initReuseChunk===null&&(this._initReuseChunk=r),r.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let r;if(this.chunks.length===1){let n=this.chunks[0];e&&this.cursor>n.length/2?(r=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):r=Dn(n,0,this.cursor)}else r=bl(this.chunks,this.cursor);return e&&this.reset(),r}};var Q="CBOR decode error:",t0="CBOR encode error:",ui=[];ui[23]=1;ui[24]=2;ui[25]=3;ui[26]=5;ui[27]=9;function cr(t,e,r){if(t.length-e<r)throw new Error(`${Q} not enough data for type`)}var zt=[24,256,65536,4294967296,BigInt("18446744073709551616")];function fe(t,e,r){cr(t,e,1);let n=t[e];if(r.strict===!0&&n<zt[0])throw new Error(`${Q} integer encoded in more bytes than necessary (strict decode)`);return n}function le(t,e,r){cr(t,e,2);let n=t[e]<<8|t[e+1];if(r.strict===!0&&n<zt[1])throw new Error(`${Q} integer encoded in more bytes than necessary (strict decode)`);return n}function he(t,e,r){cr(t,e,4);let n=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];if(r.strict===!0&&n<zt[2])throw new Error(`${Q} integer encoded in more bytes than necessary (strict decode)`);return n}function de(t,e,r){cr(t,e,8);let n=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3],i=t[e+4]*16777216+(t[e+5]<<16)+(t[e+6]<<8)+t[e+7],o=(BigInt(n)<<BigInt(32))+BigInt(i);if(r.strict===!0&&o<zt[3])throw new Error(`${Q} integer encoded in more bytes than necessary (strict decode)`);if(o<=Number.MAX_SAFE_INTEGER)return Number(o);if(r.allowBigInt===!0)return o;throw new Error(`${Q} integers outside of the safe integer range are not supported`)}function Sl(t,e,r,n){return new H(T.uint,fe(t,e+1,n),2)}function Bl(t,e,r,n){return new H(T.uint,le(t,e+1,n),3)}function Al(t,e,r,n){return new H(T.uint,he(t,e+1,n),5)}function Cl(t,e,r,n){return new H(T.uint,de(t,e+1,n),9)}function be(t,e){return Wt(t,0,e.value)}function Wt(t,e,r){if(r<zt[0]){let n=Number(r);t.push([e|n])}else if(r<zt[1]){let n=Number(r);t.push([e|24,n])}else if(r<zt[2]){let n=Number(r);t.push([e|25,n>>>8,n&255])}else if(r<zt[3]){let n=Number(r);t.push([e|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{let n=BigInt(r);if(n<zt[4]){let i=[e|27,0,0,0,0,0,0,0],o=Number(n&BigInt(4294967295)),s=Number(n>>BigInt(32)&BigInt(4294967295));i[8]=o&255,o=o>>8,i[7]=o&255,o=o>>8,i[6]=o&255,o=o>>8,i[5]=o&255,i[4]=s&255,s=s>>8,i[3]=s&255,s=s>>8,i[2]=s&255,s=s>>8,i[1]=s&255,t.push(i)}else throw new Error(`${Q} encountered BigInt larger than allowable range`)}}be.encodedSize=function(e){return Wt.encodedSize(e.value)};Wt.encodedSize=function(e){return e<zt[0]?1:e<zt[1]?2:e<zt[2]?3:e<zt[3]?5:9};be.compareTokens=function(e,r){return e.value<r.value?-1:e.value>r.value?1:0};function Il(t,e,r,n){return new H(T.negint,-1-fe(t,e+1,n),2)}function Tl(t,e,r,n){return new H(T.negint,-1-le(t,e+1,n),3)}function _l(t,e,r,n){return new H(T.negint,-1-he(t,e+1,n),5)}var e0=BigInt(-1),Rl=BigInt(1);function Nl(t,e,r,n){let i=de(t,e+1,n);if(typeof i!="bigint"){let o=-1-i;if(o>=Number.MIN_SAFE_INTEGER)return new H(T.negint,o,9)}if(n.allowBigInt!==!0)throw new Error(`${Q} integers outside of the safe integer range are not supported`);return new H(T.negint,e0-BigInt(i),9)}function Io(t,e){let r=e.value,n=typeof r=="bigint"?r*e0-Rl:r*-1-1;Wt(t,e.type.majorEncoded,n)}Io.encodedSize=function(e){let r=e.value,n=typeof r=="bigint"?r*e0-Rl:r*-1-1;return n<zt[0]?1:n<zt[1]?2:n<zt[2]?3:n<zt[3]?5:9};Io.compareTokens=function(e,r){return e.value<r.value?1:e.value>r.value?-1:0};function fi(t,e,r,n){cr(t,e,r+n);let i=Dn(t,e+r,e+r+n);return new H(T.bytes,i,r+n)}function Dl(t,e,r,n){return fi(t,e,1,r)}function Ll(t,e,r,n){return fi(t,e,2,fe(t,e+1,n))}function Pl(t,e,r,n){return fi(t,e,3,le(t,e+1,n))}function kl(t,e,r,n){return fi(t,e,5,he(t,e+1,n))}function Ul(t,e,r,n){let i=de(t,e+1,n);if(typeof i=="bigint")throw new Error(`${Q} 64-bit integer bytes lengths not supported`);return fi(t,e,9,i)}function To(t){return t.encodedBytes===void 0&&(t.encodedBytes=t.type===T.string?vl(t.value):t.value),t.encodedBytes}function Ln(t,e){let r=To(e);Wt(t,e.type.majorEncoded,r.length),t.push(r)}Ln.encodedSize=function(e){let r=To(e);return Wt.encodedSize(r.length)+r.length};Ln.compareTokens=function(e,r){return vx(To(e),To(r))};function vx(t,e){return t.length<e.length?-1:t.length>e.length?1:El(t,e)}function li(t,e,r,n,i){let o=r+n;cr(t,e,o);let s=new H(T.string,xl(t,e+r,e+o),o);return i.retainStringBytes===!0&&(s.byteValue=Dn(t,e+r,e+o)),s}function Ol(t,e,r,n){return li(t,e,1,r,n)}function Fl(t,e,r,n){return li(t,e,2,fe(t,e+1,n),n)}function Kl(t,e,r,n){return li(t,e,3,le(t,e+1,n),n)}function Ml(t,e,r,n){return li(t,e,5,he(t,e+1,n),n)}function Vl(t,e,r,n){let i=de(t,e+1,n);if(typeof i=="bigint")throw new Error(`${Q} 64-bit integer string lengths not supported`);return li(t,e,9,i,n)}var ql=Ln;function Pn(t,e,r,n){return new H(T.array,n,r)}function zl(t,e,r,n){return Pn(t,e,1,r)}function Hl(t,e,r,n){return Pn(t,e,2,fe(t,e+1,n))}function Gl(t,e,r,n){return Pn(t,e,3,le(t,e+1,n))}function $l(t,e,r,n){return Pn(t,e,5,he(t,e+1,n))}function Wl(t,e,r,n){let i=de(t,e+1,n);if(typeof i=="bigint")throw new Error(`${Q} 64-bit integer array lengths not supported`);return Pn(t,e,9,i)}function Yl(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${Q} indefinite length items not allowed`);return Pn(t,e,1,1/0)}function _o(t,e){Wt(t,T.array.majorEncoded,e.value)}_o.compareTokens=be.compareTokens;_o.encodedSize=function(e){return Wt.encodedSize(e.value)};function kn(t,e,r,n){return new H(T.map,n,r)}function Zl(t,e,r,n){return kn(t,e,1,r)}function Ql(t,e,r,n){return kn(t,e,2,fe(t,e+1,n))}function Xl(t,e,r,n){return kn(t,e,3,le(t,e+1,n))}function Jl(t,e,r,n){return kn(t,e,5,he(t,e+1,n))}function jl(t,e,r,n){let i=de(t,e+1,n);if(typeof i=="bigint")throw new Error(`${Q} 64-bit integer map lengths not supported`);return kn(t,e,9,i)}function th(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${Q} indefinite length items not allowed`);return kn(t,e,1,1/0)}function Ro(t,e){Wt(t,T.map.majorEncoded,e.value)}Ro.compareTokens=be.compareTokens;Ro.encodedSize=function(e){return Wt.encodedSize(e.value)};function eh(t,e,r,n){return new H(T.tag,r,1)}function rh(t,e,r,n){return new H(T.tag,fe(t,e+1,n),2)}function nh(t,e,r,n){return new H(T.tag,le(t,e+1,n),3)}function ih(t,e,r,n){return new H(T.tag,he(t,e+1,n),5)}function oh(t,e,r,n){return new H(T.tag,de(t,e+1,n),9)}function No(t,e){Wt(t,T.tag.majorEncoded,e.value)}No.compareTokens=be.compareTokens;No.encodedSize=function(e){return Wt.encodedSize(e.value)};var Ax=20,Cx=21,Ix=22,Tx=23;function sh(t,e,r,n){if(n.allowUndefined===!1)throw new Error(`${Q} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new H(T.null,null,1):new H(T.undefined,void 0,1)}function ah(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${Q} indefinite length items not allowed`);return new H(T.break,void 0,1)}function r0(t,e,r){if(r){if(r.allowNaN===!1&&Number.isNaN(t))throw new Error(`${Q} NaN values are not supported`);if(r.allowInfinity===!1&&(t===1/0||t===-1/0))throw new Error(`${Q} Infinity values are not supported`)}return new H(T.float,t,e)}function ch(t,e,r,n){return r0(n0(t,e+1),3,n)}function uh(t,e,r,n){return r0(i0(t,e+1),5,n)}function fh(t,e,r,n){return r0(ph(t,e+1),9,n)}function Do(t,e,r){let n=e.value;if(n===!1)t.push([T.float.majorEncoded|Ax]);else if(n===!0)t.push([T.float.majorEncoded|Cx]);else if(n===null)t.push([T.float.majorEncoded|Ix]);else if(n===void 0)t.push([T.float.majorEncoded|Tx]);else{let i,o=!1;(!r||r.float64!==!0)&&(hh(n),i=n0(Re,1),n===i||Number.isNaN(n)?(Re[0]=249,t.push(Re.slice(0,3)),o=!0):(dh(n),i=i0(Re,1),n===i&&(Re[0]=250,t.push(Re.slice(0,5)),o=!0))),o||(_x(n),i=ph(Re,1),Re[0]=251,t.push(Re.slice(0,9)))}}Do.encodedSize=function(e,r){let n=e.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!r||r.float64!==!0){hh(n);let i=n0(Re,1);if(n===i||Number.isNaN(n))return 3;if(dh(n),i=i0(Re,1),n===i)return 5}return 9};var lh=new ArrayBuffer(9),we=new DataView(lh,1),Re=new Uint8Array(lh,0);function hh(t){if(t===1/0)we.setUint16(0,31744,!1);else if(t===-1/0)we.setUint16(0,64512,!1);else if(Number.isNaN(t))we.setUint16(0,32256,!1);else{we.setFloat32(0,t);let e=we.getUint32(0),r=(e&2139095040)>>23,n=e&8388607;if(r===255)we.setUint16(0,31744,!1);else if(r===0)we.setUint16(0,(t&2147483648)>>16|n>>13,!1);else{let i=r-127;i<-24?we.setUint16(0,0):i<-14?we.setUint16(0,(e&2147483648)>>16|1<<24+i,!1):we.setUint16(0,(e&2147483648)>>16|i+15<<10|n>>13,!1)}}}function n0(t,e){if(t.length-e<2)throw new Error(`${Q} not enough data for float16`);let r=(t[e]<<8)+t[e+1];if(r===31744)return 1/0;if(r===64512)return-1/0;if(r===32256)return NaN;let n=r>>10&31,i=r&1023,o;return n===0?o=i*2**-24:n!==31?o=(i+1024)*2**(n-25):o=i===0?1/0:NaN,r&32768?-o:o}function dh(t){we.setFloat32(0,t,!1)}function i0(t,e){if(t.length-e<4)throw new Error(`${Q} not enough data for float32`);let r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,4).getFloat32(0,!1)}function _x(t){we.setFloat64(0,t,!1)}function ph(t,e){if(t.length-e<8)throw new Error(`${Q} not enough data for float64`);let r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,8).getFloat64(0,!1)}Do.compareTokens=be.compareTokens;function ft(t,e,r){throw new Error(`${Q} encountered invalid minor (${r}) for major ${t[e]>>>5}`)}function Lo(t){return()=>{throw new Error(`${Q} ${t}`)}}var F=[];for(let t=0;t<=23;t++)F[t]=ft;F[24]=Sl;F[25]=Bl;F[26]=Al;F[27]=Cl;F[28]=ft;F[29]=ft;F[30]=ft;F[31]=ft;for(let t=32;t<=55;t++)F[t]=ft;F[56]=Il;F[57]=Tl;F[58]=_l;F[59]=Nl;F[60]=ft;F[61]=ft;F[62]=ft;F[63]=ft;for(let t=64;t<=87;t++)F[t]=Dl;F[88]=Ll;F[89]=Pl;F[90]=kl;F[91]=Ul;F[92]=ft;F[93]=ft;F[94]=ft;F[95]=Lo("indefinite length bytes/strings are not supported");for(let t=96;t<=119;t++)F[t]=Ol;F[120]=Fl;F[121]=Kl;F[122]=Ml;F[123]=Vl;F[124]=ft;F[125]=ft;F[126]=ft;F[127]=Lo("indefinite length bytes/strings are not supported");for(let t=128;t<=151;t++)F[t]=zl;F[152]=Hl;F[153]=Gl;F[154]=$l;F[155]=Wl;F[156]=ft;F[157]=ft;F[158]=ft;F[159]=Yl;for(let t=160;t<=183;t++)F[t]=Zl;F[184]=Ql;F[185]=Xl;F[186]=Jl;F[187]=jl;F[188]=ft;F[189]=ft;F[190]=ft;F[191]=th;for(let t=192;t<=215;t++)F[t]=eh;F[216]=rh;F[217]=nh;F[218]=ih;F[219]=oh;F[220]=ft;F[221]=ft;F[222]=ft;F[223]=ft;for(let t=224;t<=243;t++)F[t]=Lo("simple values are not supported");F[244]=ft;F[245]=ft;F[246]=ft;F[247]=sh;F[248]=Lo("simple values are not supported");F[249]=ch;F[250]=uh;F[251]=fh;F[252]=ft;F[253]=ft;F[254]=ft;F[255]=ah;var Ne=[];for(let t=0;t<24;t++)Ne[t]=new H(T.uint,t,1);for(let t=-1;t>=-24;t--)Ne[31-t]=new H(T.negint,t,1);Ne[64]=new H(T.bytes,new Uint8Array(0),1);Ne[96]=new H(T.string,"",1);Ne[128]=new H(T.array,0,1);Ne[160]=new H(T.map,0,1);Ne[244]=new H(T.false,!1,1);Ne[245]=new H(T.true,!0,1);Ne[246]=new H(T.null,null,1);function Nx(){let t=[];return t[T.uint.major]=be,t[T.negint.major]=Io,t[T.bytes.major]=Ln,t[T.string.major]=ql,t[T.array.major]=_o,t[T.map.major]=Ro,t[T.tag.major]=No,t[T.float.major]=Do,t}var BS=Nx(),AS=new Co,Po=class t{constructor(e,r){this.obj=e,this.parent=r}includes(e){let r=this;do if(r.obj===e)return!0;while(r=r.parent);return!1}static createCheck(e,r){if(e&&e.includes(r))throw new Error(`${t0} object contains circular references`);return new t(r,e)}},Cr={null:new H(T.null,null),undefined:new H(T.undefined,void 0),true:new H(T.true,!0),false:new H(T.false,!1),emptyArray:new H(T.array,0),emptyMap:new H(T.map,0)},Ir={number(t,e,r,n){return!Number.isInteger(t)||!Number.isSafeInteger(t)?new H(T.float,t):t>=0?new H(T.uint,t):new H(T.negint,t)},bigint(t,e,r,n){return t>=BigInt(0)?new H(T.uint,t):new H(T.negint,t)},Uint8Array(t,e,r,n){return new H(T.bytes,t)},string(t,e,r,n){return new H(T.string,t)},boolean(t,e,r,n){return t?Cr.true:Cr.false},null(t,e,r,n){return Cr.null},undefined(t,e,r,n){return Cr.undefined},ArrayBuffer(t,e,r,n){return new H(T.bytes,new Uint8Array(t))},DataView(t,e,r,n){return new H(T.bytes,new Uint8Array(t.buffer,t.byteOffset,t.byteLength))},Array(t,e,r,n){if(!t.length)return r.addBreakTokens===!0?[Cr.emptyArray,new H(T.break)]:Cr.emptyArray;n=Po.createCheck(n,t);let i=[],o=0;for(let s of t)i[o++]=o0(s,r,n);return r.addBreakTokens?[new H(T.array,t.length),i,new H(T.break)]:[new H(T.array,t.length),i]},Object(t,e,r,n){let i=e!=="Object",o=i?t.keys():Object.keys(t),s=i?t.size:o.length;if(!s)return r.addBreakTokens===!0?[Cr.emptyMap,new H(T.break)]:Cr.emptyMap;n=Po.createCheck(n,t);let a=[],c=0;for(let u of o)a[c++]=[o0(u,r,n),o0(i?t.get(u):t[u],r,n)];return Dx(a,r),r.addBreakTokens?[new H(T.map,s),a,new H(T.break)]:[new H(T.map,s),a]}};Ir.Map=Ir.Object;Ir.Buffer=Ir.Uint8Array;for(let t of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))Ir[`${t}Array`]=Ir.DataView;function o0(t,e={},r){let n=dl(t),i=e&&e.typeEncoders&&e.typeEncoders[n]||Ir[n];if(typeof i=="function"){let s=i(t,n,e,r);if(s!=null)return s}let o=Ir[n];if(!o)throw new Error(`${t0} unsupported type: ${n}`);return o(t,n,e,r)}function Dx(t,e){e.mapSorter&&t.sort(e.mapSorter)}var Lx={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},s0=class{constructor(e,r={}){this._pos=0,this.data=e,this.options=r}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){let e=this.data[this._pos],r=Ne[e];if(r===void 0){let n=F[e];if(!n)throw new Error(`${Q} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);let i=e&31;r=n(this.data,this._pos,i,this.options)}return this._pos+=r.encodedLength,r}},hi=Symbol.for("DONE"),ko=Symbol.for("BREAK");function Px(t,e,r){let n=[];for(let i=0;i<t.value;i++){let o=di(e,r);if(o===ko){if(t.value===1/0)break;throw new Error(`${Q} got unexpected break to lengthed array`)}if(o===hi)throw new Error(`${Q} found array but not enough entries (got ${i}, expected ${t.value})`);n[i]=o}return n}function kx(t,e,r){let n=r.useMaps===!0,i=n?void 0:{},o=n?new Map:void 0;for(let s=0;s<t.value;s++){let a=di(e,r);if(a===ko){if(t.value===1/0)break;throw new Error(`${Q} got unexpected break to lengthed map`)}if(a===hi)throw new Error(`${Q} found map but not enough entries (got ${s} [no key], expected ${t.value})`);if(n!==!0&&typeof a!="string")throw new Error(`${Q} non-string keys not supported (got ${typeof a})`);if(r.rejectDuplicateMapKeys===!0&&(n&&o.has(a)||!n&&a in i))throw new Error(`${Q} found repeat map key "${a}"`);let c=di(e,r);if(c===hi)throw new Error(`${Q} found map but not enough entries (got ${s} [no value], expected ${t.value})`);n?o.set(a,c):i[a]=c}return n?o:i}function di(t,e){if(t.done())return hi;let r=t.next();if(r.type===T.break)return ko;if(r.type.terminal)return r.value;if(r.type===T.array)return Px(r,t,e);if(r.type===T.map)return kx(r,t,e);if(r.type===T.tag){if(e.tags&&typeof e.tags[r.value]=="function"){let n=di(t,e);return e.tags[r.value](n)}throw new Error(`${Q} tag not supported (${r.value})`)}throw new Error("unsupported")}function yh(t,e){if(!(t instanceof Uint8Array))throw new Error(`${Q} data to decode must be a Uint8Array`);e=Object.assign({},Lx,e);let r=e.tokenizer||new s0(t,e),n=di(r,e);if(n===hi)throw new Error(`${Q} did not find any content to decode`);if(n===ko)throw new Error(`${Q} got unexpected break`);return[n,t.subarray(r.pos())]}function a0(t,e){let[r,n]=yh(t,e);if(n.length>0)throw new Error(`${Q} too many terminals, data makes no sense`);return r}var oe=Pt(Eo(),1);var gh=Pt(Xa(),1);var c0=lr("ipns:utils"),mh=yt("/ipns/"),Fx=114;function Kx(t){let e=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d+)Z"),r=String(t).trim().match(e);if(r==null)throw new Error("Invalid format");let n=parseInt(r[1],10),i=parseInt(r[2],10)-1,o=parseInt(r[3],10),s=parseInt(r[4],10),a=parseInt(r[5],10),c=parseInt(r[6],10),u=parseInt(r[7].padEnd(6,"0").slice(0,3),10);return new Date(Date.UTC(n,i,o,s,a,c,u))}var u0=async(t,e)=>{if(e==null||t==null){let n=new Error("one or more of the provided parameters are not defined");throw c0.error(n),(0,oe.default)(n,Ja)}let r;if(e.pubKey!=null){try{r=Ya(e.pubKey)}catch(i){throw c0.error(i),i}if(!(await cc(e.pubKey)).equals(t))throw(0,oe.default)(new Error("Embedded public key did not match PeerID"),ll)}else t.publicKey!=null&&(r=Ya(t.publicKey));if(r!=null)return r;throw(0,oe.default)(new Error("no public key is available"),Ja)};var f0=t=>{let e=yt("ipns-signature:");return Ot([e,t])},pi=t=>"signatureV1"in t?ve.encode({value:yt(t.value),signatureV1:t.signatureV1,validityType:t.validityType,validity:yt(t.validity.toString()),sequence:t.sequence,ttl:t.ttl,pubKey:t.pubKey,signatureV2:t.signatureV2,data:t.data}):ve.encode({pubKey:t.pubKey,signatureV2:t.signatureV2,data:t.data});function Tr(t){let e=ve.decode(t);if(e.sequence!=null&&(e.sequence=BigInt(e.sequence)),e.ttl!=null&&(e.ttl=BigInt(e.ttl)),e.signatureV2==null||e.data==null)throw(0,oe.default)(new Error("missing data or signatureV2"),ar);let r=xh(e.data),n=vh(r.Value),i;try{i=gh.default.fromDate(Kx(ut(r.Validity)))}catch{throw c0.error("unrecognized validity format (not an rfc3339 format)"),(0,oe.default)(new Error("unrecognized validity format (not an rfc3339 format)"),cl)}if(e.value!=null&&e.signatureV1!=null)return Mx(e),{value:n,validityType:ve.ValidityType.EOL,validity:i,sequence:r.Sequence,ttl:r.TTL,pubKey:e.pubKey,signatureV1:e.signatureV1,signatureV2:e.signatureV2,data:e.data};if(e.signatureV2!=null)return{value:n,validityType:ve.ValidityType.EOL,validity:i,sequence:r.Sequence,ttl:r.TTL,pubKey:e.pubKey,signatureV2:e.signatureV2,data:e.data};throw new Error("invalid record: does not include signatureV1 or signatureV2")}var l0=t=>Ot([mh,t.toBytes()]),h0=t=>Vn(t.slice(mh.length));var xh=t=>{let e=a0(t);if(e.ValidityType===0)e.ValidityType=ve.ValidityType.EOL;else throw(0,oe.default)(new Error("Unknown validity type"),Bo);return Number.isInteger(e.Sequence)&&(e.Sequence=BigInt(e.Sequence)),Number.isInteger(e.TTL)&&(e.TTL=BigInt(e.TTL)),e},vh=t=>{if(t!=null){if(W0(t))return`/ipns/${t.toCID().toString(Ii)}`;if(t instanceof Uint8Array){let n=ut(t);n.startsWith("/")&&(t=n)}let e=t.toString().trim();if(e.startsWith("/")&&e.length>1)return e;let r=Jt.asCID(t);if(r!=null)return r.code===Fx?`/ipns/${r.toString(Ii)}`:`/ipfs/${r.toV1().toString()}`;try{return t instanceof Uint8Array?`/ipfs/${Jt.decode(t).toV1().toString()}`:`/ipfs/${Jt.parse(e).toV1().toString()}`}catch{}}throw(0,oe.default)(new Error("Value must be a valid content path starting with /"),fl)},Mx=t=>{if(t.data==null)throw(0,oe.default)(new Error("Record data is missing"),ul);let e=xh(t.data);if(!Rt(e.Value,t.value??new Uint8Array(0)))throw(0,oe.default)(new Error('Field "value" did not match between protobuf and CBOR'),ar);if(!Rt(e.Validity,t.validity??new Uint8Array(0)))throw(0,oe.default)(new Error('Field "validity" did not match between protobuf and CBOR'),ar);if(e.ValidityType!==t.validityType)throw(0,oe.default)(new Error('Field "validityType" did not match between protobuf and CBOR'),ar);if(e.Sequence!==t.sequence)throw(0,oe.default)(new Error('Field "sequence" did not match between protobuf and CBOR'),ar);if(e.TTL!==t.ttl)throw(0,oe.default)(new Error('Field "ttl" did not match between protobuf and CBOR'),ar)};var s6=lr("ipns"),a6=Pe.code,zx="/ipns/",c6=zx.length;var yi=Pt(Eo(),1);var Uo=lr("ipns:validator"),Hx=1024*10,Gx=async(t,e)=>{let r=Tr(e),n;try{let i=f0(r.data);n=await t.verify(i,r.signatureV2)}catch{n=!1}if(!n)throw Uo.error("record signature verification failed"),(0,yi.default)(new Error("record signature verification failed"),ar);if(r.validityType===ve.ValidityType.EOL){if(r.validity.toDate().getTime()<Date.now())throw Uo.error("record has expired"),(0,yi.default)(new Error("record has expired"),al)}else if(r.validityType!=null)throw Uo.error("unrecognized validity type"),(0,yi.default)(new Error("unrecognized validity type"),Bo);Uo("ipns record for %b is valid",r.value)};async function bh(t,e){if(e.byteLength>Hx)throw(0,yi.default)(new Error("record too large"),hl);let r=h0(t),n=Tr(e),i=await u0(r,n);await Gx(i,e)}async function*gi(t){let e=/\r?\n/,r=new TextDecoder("utf8"),n="";for await(let i of t){typeof i=="string"&&(i=new TextEncoder().encode(i)),n+=r.decode(i,{stream:!0});let o=n.split(e);n=o.pop()??"";for(let s=0;s<o.length;s++)yield JSON.parse(o[s])}n+=r.decode(),n!==""&&(yield JSON.parse(n))}function He(){let t={};return t.promise=new Promise((e,r)=>{t.resolve=e,t.reject=r}),t}var p0=Pt(Eh(),1);var xi=class extends Error{constructor(e){super(e),this.name="TimeoutError"}},y0=class extends Error{constructor(e){super(),this.name="AbortError",this.message=e}},Sh=t=>globalThis.DOMException===void 0?new y0(t):new DOMException(t),Bh=t=>{let e=t.reason===void 0?Sh("This operation was aborted."):t.reason;return e instanceof Error?e:Sh(e)};function g0(t,e,r,n){let i,o=new Promise((s,a)=>{if(typeof e!="number"||Math.sign(e)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${e}\``);if(e===Number.POSITIVE_INFINITY){s(t);return}if(n={customTimers:{setTimeout,clearTimeout},...n},n.signal){let{signal:c}=n;c.aborted&&a(Bh(c)),c.addEventListener("abort",()=>{a(Bh(c))})}i=n.customTimers.setTimeout.call(void 0,()=>{if(typeof r=="function"){try{s(r())}catch(f){a(f)}return}let c=typeof r=="string"?r:`Promise timed out after ${e} milliseconds`,u=r instanceof Error?r:new xi(c);typeof t.cancel=="function"&&t.cancel(),a(u)},e),(async()=>{try{s(await t)}catch(c){a(c)}finally{n.customTimers.clearTimeout.call(void 0,i)}})()});return o.clear=()=>{clearTimeout(i),i=void 0},o}function m0(t,e,r){let n=0,i=t.length;for(;i>0;){let o=Math.trunc(i/2),s=n+o;r(t[s],e)<=0?(n=++s,i-=o+1):i=o}return n}var Qr=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},ur,x0=class{constructor(){ur.set(this,[])}enqueue(e,r){r={priority:0,...r};let n={priority:r.priority,run:e};if(this.size&&Qr(this,ur,"f")[this.size-1].priority>=r.priority){Qr(this,ur,"f").push(n);return}let i=m0(Qr(this,ur,"f"),n,(o,s)=>s.priority-o.priority);Qr(this,ur,"f").splice(i,0,n)}dequeue(){let e=Qr(this,ur,"f").shift();return e?.run}filter(e){return Qr(this,ur,"f").filter(r=>r.priority===e.priority).map(r=>r.run)}get size(){return Qr(this,ur,"f").length}};ur=new WeakMap;var Ah=x0;var At=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},G=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Dt,bi,wi,Rr,zo,Ei,Fo,De,vi,pe,Ko,ye,Si,_r,Mo,Ch,Ih,Rh,Th,_h,Vo,v0,b0,Ho,Nh,qo,Go=class extends Error{},w0=class extends p0.default{constructor(e){var r,n,i,o;if(super(),Dt.add(this),bi.set(this,void 0),wi.set(this,void 0),Rr.set(this,0),zo.set(this,void 0),Ei.set(this,void 0),Fo.set(this,0),De.set(this,void 0),vi.set(this,void 0),pe.set(this,void 0),Ko.set(this,void 0),ye.set(this,0),Si.set(this,void 0),_r.set(this,void 0),Mo.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:Ah,...e},!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(n=(r=e.intervalCap)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(o=(i=e.interval)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""}\` (${typeof e.interval})`);At(this,bi,e.carryoverConcurrencyCount,"f"),At(this,wi,e.intervalCap===Number.POSITIVE_INFINITY||e.interval===0,"f"),At(this,zo,e.intervalCap,"f"),At(this,Ei,e.interval,"f"),At(this,pe,new e.queueClass,"f"),At(this,Ko,e.queueClass,"f"),this.concurrency=e.concurrency,this.timeout=e.timeout,At(this,Mo,e.throwOnTimeout===!0,"f"),At(this,_r,e.autoStart===!1,"f")}get concurrency(){return G(this,Si,"f")}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);At(this,Si,e,"f"),G(this,Dt,"m",Ho).call(this)}async add(e,r={}){return r={timeout:this.timeout,throwOnTimeout:G(this,Mo,"f"),...r},new Promise((n,i)=>{G(this,pe,"f").enqueue(async()=>{var o,s,a;At(this,ye,(s=G(this,ye,"f"),s++,s),"f"),At(this,Rr,(a=G(this,Rr,"f"),a++,a),"f");try{if(!((o=r.signal)===null||o===void 0)&&o.aborted)throw new Go("The task was aborted.");let c=e({signal:r.signal});r.timeout&&(c=g0(Promise.resolve(c),r.timeout)),r.signal&&(c=Promise.race([c,G(this,Dt,"m",Nh).call(this,r.signal)]));let u=await c;n(u),this.emit("completed",u)}catch(c){if(c instanceof xi&&!r.throwOnTimeout){n();return}i(c),this.emit("error",c)}finally{G(this,Dt,"m",Rh).call(this)}},r),this.emit("add"),G(this,Dt,"m",Vo).call(this)})}async addAll(e,r){return Promise.all(e.map(async n=>this.add(n,r)))}start(){return G(this,_r,"f")?(At(this,_r,!1,"f"),G(this,Dt,"m",Ho).call(this),this):this}pause(){At(this,_r,!0,"f")}clear(){At(this,pe,new(G(this,Ko,"f")),"f")}async onEmpty(){G(this,pe,"f").size!==0&&await G(this,Dt,"m",qo).call(this,"empty")}async onSizeLessThan(e){G(this,pe,"f").size<e||await G(this,Dt,"m",qo).call(this,"next",()=>G(this,pe,"f").size<e)}async onIdle(){G(this,ye,"f")===0&&G(this,pe,"f").size===0||await G(this,Dt,"m",qo).call(this,"idle")}get size(){return G(this,pe,"f").size}sizeBy(e){return G(this,pe,"f").filter(e).length}get pending(){return G(this,ye,"f")}get isPaused(){return G(this,_r,"f")}};bi=new WeakMap,wi=new WeakMap,Rr=new WeakMap,zo=new WeakMap,Ei=new WeakMap,Fo=new WeakMap,De=new WeakMap,vi=new WeakMap,pe=new WeakMap,Ko=new WeakMap,ye=new WeakMap,Si=new WeakMap,_r=new WeakMap,Mo=new WeakMap,Dt=new WeakSet,Ch=function(){return G(this,wi,"f")||G(this,Rr,"f")<G(this,zo,"f")},Ih=function(){return G(this,ye,"f")<G(this,Si,"f")},Rh=function(){var e;At(this,ye,(e=G(this,ye,"f"),e--,e),"f"),G(this,Dt,"m",Vo).call(this),this.emit("next")},Th=function(){G(this,Dt,"m",b0).call(this),G(this,Dt,"m",v0).call(this),At(this,vi,void 0,"f")},_h=function(){let e=Date.now();if(G(this,De,"f")===void 0){let r=G(this,Fo,"f")-e;if(r<0)At(this,Rr,G(this,bi,"f")?G(this,ye,"f"):0,"f");else return G(this,vi,"f")===void 0&&At(this,vi,setTimeout(()=>{G(this,Dt,"m",Th).call(this)},r),"f"),!0}return!1},Vo=function(){if(G(this,pe,"f").size===0)return G(this,De,"f")&&clearInterval(G(this,De,"f")),At(this,De,void 0,"f"),this.emit("empty"),G(this,ye,"f")===0&&this.emit("idle"),!1;if(!G(this,_r,"f")){let e=!G(this,Dt,"a",_h);if(G(this,Dt,"a",Ch)&&G(this,Dt,"a",Ih)){let r=G(this,pe,"f").dequeue();return r?(this.emit("active"),r(),e&&G(this,Dt,"m",v0).call(this),!0):!1}}return!1},v0=function(){G(this,wi,"f")||G(this,De,"f")!==void 0||(At(this,De,setInterval(()=>{G(this,Dt,"m",b0).call(this)},G(this,Ei,"f")),"f"),At(this,Fo,Date.now()+G(this,Ei,"f"),"f"))},b0=function(){G(this,Rr,"f")===0&&G(this,ye,"f")===0&&G(this,De,"f")&&(clearInterval(G(this,De,"f")),At(this,De,void 0,"f")),At(this,Rr,G(this,bi,"f")?G(this,ye,"f"):0,"f"),G(this,Dt,"m",Ho).call(this)},Ho=function(){for(;G(this,Dt,"m",Vo).call(this););},Nh=async function(e){return new Promise((r,n)=>{e.addEventListener("abort",()=>{n(new Go("The task was aborted."))},{once:!0})})},qo=async function(e,r){return new Promise(n=>{let i=()=>{r&&!r()||(this.off(e,i),n())};this.on(e,i)})};var Dh=w0;function Yx(t){return t[Symbol.asyncIterator]!=null}function Zx(t){if(Yx(t))return(async()=>{for await(let e of t)return e})();for(let e of t)return e}var Lh=Zx;function Qx(t){let[e,r]=t[Symbol.asyncIterator]!=null?[t[Symbol.asyncIterator](),Symbol.asyncIterator]:[t[Symbol.iterator](),Symbol.iterator],n=[];return{peek:()=>e.next(),push:i=>{n.push(i)},next:()=>n.length>0?{done:!1,value:n.shift()}:e.next(),[r](){return this}}}var Ph=Qx;function Xx(t){return t[Symbol.asyncIterator]!=null}function Jx(t,e){if(Xx(t))return async function*(){for await(let a of t)yield e(a)}();let r=Ph(t),{value:n,done:i}=r.next();if(i===!0)return function*(){}();let o=e(n);if(typeof o.then=="function")return async function*(){yield await o;for await(let a of r)yield e(a)}();let s=e;return function*(){yield o;for(let a of r)yield s(a)}()}var kh=Jx;var E0=yt("/ipns/");function Uh(t){return Rt(t.subarray(0,E0.byteLength),E0)}var Oh=t=>Vn(t.slice(E0.length)),$o=class{client;constructor(e){this.client=e}async*findProviders(e,r={}){yield*kh(this.client.getProviders(e,r),n=>({id:n.ID,multiaddrs:n.Addrs??[],protocols:[]}))}async provide(){}async put(e,r,n){if(!Uh(e))return;let i=Oh(e),o=Tr(r);await this.client.putIPNS(i,o,n)}async get(e,r){if(!Uh(e))throw new X("Not found","ERR_NOT_FOUND");let n=Oh(e);try{let i=await this.client.getIPNS(n,r);return pi(i)}catch(i){throw i.code==="ERR_BAD_RESPONSE"?new X("Not found","ERR_NOT_FOUND"):i}}},Wo=class{client;constructor(e){this.client=e}async findPeer(e,r={}){let n=await Lh(this.client.getPeers(e,r));if(n!=null)return{id:n.ID,multiaddrs:n.Addrs,protocols:[]};throw new X("Not found","ERR_NOT_FOUND")}async*getClosestPeers(e,r={}){}};var Ge=lr("delegated-routing-v1-http-api-client"),Fh={concurrentRequests:4,timeout:3e4},Yo=class{started;httpQueue;shutDownController;clientUrl;timeout;contentRouting;peerRouting;constructor(e,r={}){this.started=!1,this.shutDownController=new AbortController,L0(1/0,this.shutDownController.signal),this.httpQueue=new Dh({concurrency:r.concurrentRequests??Fh.concurrentRequests}),this.clientUrl=e instanceof URL?e:new URL(e),this.timeout=r.timeout??Fh.timeout,this.contentRouting=new $o(this),this.peerRouting=new Wo(this)}get[D0](){return this.contentRouting}get[P0](){return this.peerRouting}isStarted(){return this.started}start(){this.started=!0}stop(){this.httpQueue.clear(),this.shutDownController.abort(),this.started=!1}async*getProviders(e,r={}){Ge("getProviders starts: %c",e);let n=qn([this.shutDownController.signal,r.signal,AbortSignal.timeout(this.timeout)]),i=He(),o=He();this.httpQueue.add(async()=>(i.resolve(),o.promise));try{await i.promise;let s=`${this.clientUrl}routing/v1/providers/${e.toString()}`,c=await fetch(s,{headers:{Accept:"application/x-ndjson"},signal:n});if(c.body==null)throw new X("Routing response had no body","ERR_BAD_RESPONSE");if(c.headers.get("Content-Type")==="application/json"){let f=await c.json();for(let l of f.Providers){let h=this.#e(l);h!=null&&(yield h)}}else for await(let f of gi(ki(c.body))){let l=this.#e(f);l!=null&&(yield l)}}catch(s){Ge.error("getProviders errored:",s)}finally{n.clear(),o.resolve(),Ge("getProviders finished: %c",e)}}async*getPeers(e,r={}){Ge("getPeers starts: %c",e);let n=qn([this.shutDownController.signal,r.signal,AbortSignal.timeout(this.timeout)]),i=He(),o=He();this.httpQueue.add(async()=>(i.resolve(),o.promise));try{await i.promise;let s=`${this.clientUrl}routing/v1/peers/${e.toCID().toString()}`,c=await fetch(s,{headers:{Accept:"application/x-ndjson"},signal:n});if(c.body==null)throw new X("Routing response had no body","ERR_BAD_RESPONSE");if(c.headers.get("Content-Type")==="application/json"){let f=await c.json();for(let l of f.Peers){let h=this.#t(e,l);h!=null&&(yield h)}}else for await(let f of gi(ki(c.body))){let l=this.#t(e,f);l!=null&&(yield l)}}catch(s){Ge.error("getPeers errored:",s)}finally{n.clear(),o.resolve(),Ge("getPeers finished: %c",e)}}async getIPNS(e,r={}){Ge("getIPNS starts: %c",e);let n=qn([this.shutDownController.signal,r.signal,AbortSignal.timeout(this.timeout)]),i=He(),o=He();this.httpQueue.add(async()=>(i.resolve(),o.promise));try{await i.promise;let s=`${this.clientUrl}routing/v1/ipns/${e.toCID().toString()}`,c=await fetch(s,{headers:{Accept:"application/vnd.ipfs.ipns-record"},signal:n});if(c.body==null)throw new X("GET ipns response had no body","ERR_BAD_RESPONSE");let u=new Uint8Array(await c.arrayBuffer());return await bh(l0(e),u),Tr(u)}finally{n.clear(),o.resolve(),Ge("getIPNS finished: %c",e)}}async putIPNS(e,r,n={}){Ge("getIPNS starts: %c",e);let i=qn([this.shutDownController.signal,n.signal,AbortSignal.timeout(this.timeout)]),o=He(),s=He();this.httpQueue.add(async()=>(o.resolve(),s.promise));try{await o.promise;let a=pi(r),c=`${this.clientUrl}routing/v1/ipns/${e.toCID().toString()}`;if((await fetch(c,{method:"PUT",headers:{"Content-Type":"application/vnd.ipfs.ipns-record"},body:a,signal:i})).status!==200)throw new X("PUT ipns response had status other than 200","ERR_BAD_RESPONSE")}finally{i.clear(),s.resolve(),Ge("getIPNS finished: %c",e)}}#e(e){if(e.Schema==="peer")return e.ID=un(e.ID),e.Addrs=e.Addrs.map(dn),e.Protocols=e.Protocols??[],e;if(e.Schema==="bitswap")return{Schema:"peer",ID:un(e.ID),Addrs:e.Addrs.map(dn),Protocols:e.Protocol!=null?[e.Protocol]:[]};if(e.ID!=null&&Array.isArray(e.Addrs))return{Schema:"peer",ID:un(e.ID),Addrs:e.Addrs.map(dn),Protocols:Array.isArray(e.Protocols)?e.Protocols:[]}}#t(e,r){if(r.Schema==="peer"&&(r.ID=un(r.ID),r.Addrs=r.Addrs.map(dn),e.equals(r.ID)))return r}};function jx(t,e={}){return new Yo(new URL(t),e)}return Jh(t2);})();
/*! Bundled license information:

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/edwards.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/ed25519.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
return HeliaDelegatedRoutingV1HttpApiClient}));
