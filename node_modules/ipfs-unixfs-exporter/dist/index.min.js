(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.IpfsUnixfsExporter = factory()}(typeof self !== 'undefined' ? self : this, function () {
"use strict";var IpfsUnixfsExporter=(()=>{var Zs=Object.create;var Pt=Object.defineProperty;var Ys=Object.getOwnPropertyDescriptor;var ea=Object.getOwnPropertyNames;var ta=Object.getPrototypeOf,ra=Object.prototype.hasOwnProperty;var M=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Q=(t,e)=>{for(var r in e)Pt(t,r,{get:e[r],enumerable:!0})},Pn=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of ea(e))!ra.call(t,i)&&i!==r&&Pt(t,i,{get:()=>e[i],enumerable:!(n=Ys(e,i))||n.enumerable});return t};var O=(t,e,r)=>(r=t!=null?Zs(ta(t)):{},Pn(e||!t||!t.__esModule?Pt(r,"default",{value:t,enumerable:!0}):r,t)),na=t=>Pn(Pt({},"__esModule",{value:!0}),t);var ee=M((Ku,Cn)=>{"use strict";function Dn(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function ia(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return Dn(t,r)}catch{r.message=t.message,r.stack=t.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(t)),Dn(new i,r)}}Cn.exports=ia});var fo=M((Wl,uo)=>{"use strict";uo.exports=Uc;function Uc(t,e){for(var r=new Array(arguments.length-1),n=0,i=2,o=!0;i<arguments.length;)r[n++]=arguments[i++];return new Promise(function(u,a){r[n]=function(l){if(o)if(o=!1,l)a(l);else{for(var p=new Array(arguments.length-1),E=0;E<p.length;)p[E++]=arguments[E];u.apply(null,p)}};try{t.apply(e||null,r)}catch(f){o&&(o=!1,a(f))}})}});var mo=M(po=>{"use strict";var Wt=po;Wt.length=function(e){var r=e.length;if(!r)return 0;for(var n=0;--r%4>1&&e.charAt(r)==="=";)++n;return Math.ceil(e.length*3)/4-n};var Ke=new Array(64),ho=new Array(123);for(se=0;se<64;)ho[Ke[se]=se<26?se+65:se<52?se+71:se<62?se-4:se-59|43]=se++;var se;Wt.encode=function(e,r,n){for(var i=null,o=[],s=0,u=0,a;r<n;){var f=e[r++];switch(u){case 0:o[s++]=Ke[f>>2],a=(f&3)<<4,u=1;break;case 1:o[s++]=Ke[a|f>>4],a=(f&15)<<2,u=2;break;case 2:o[s++]=Ke[a|f>>6],o[s++]=Ke[f&63],u=0;break}s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),s=0)}return u&&(o[s++]=Ke[a],o[s++]=61,u===1&&(o[s++]=61)),i?(s&&i.push(String.fromCharCode.apply(String,o.slice(0,s))),i.join("")):String.fromCharCode.apply(String,o.slice(0,s))};var lo="invalid encoding";Wt.decode=function(e,r,n){for(var i=n,o=0,s,u=0;u<e.length;){var a=e.charCodeAt(u++);if(a===61&&o>1)break;if((a=ho[a])===void 0)throw Error(lo);switch(o){case 0:s=a,o=1;break;case 1:r[n++]=s<<2|(a&48)>>4,s=a,o=2;break;case 2:r[n++]=(s&15)<<4|(a&60)>>2,s=a,o=3;break;case 3:r[n++]=(s&3)<<6|a,o=0;break}}if(o===1)throw Error(lo);return n-i};Wt.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}});var go=M((Jl,yo)=>{"use strict";yo.exports=Xt;function Xt(){this._listeners={}}Xt.prototype.on=function(e,r,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:r,ctx:n||this}),this};Xt.prototype.off=function(e,r){if(e===void 0)this._listeners={};else if(r===void 0)this._listeners[e]=[];else for(var n=this._listeners[e],i=0;i<n.length;)n[i].fn===r?n.splice(i,1):++i;return this};Xt.prototype.emit=function(e){var r=this._listeners[e];if(r){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<r.length;)r[i].fn.apply(r[i++].ctx,n)}return this}});var ko=M((Kl,Eo)=>{"use strict";Eo.exports=wo(wo);function wo(t){return typeof Float32Array<"u"?function(){var e=new Float32Array([-0]),r=new Uint8Array(e.buffer),n=r[3]===128;function i(a,f,l){e[0]=a,f[l]=r[0],f[l+1]=r[1],f[l+2]=r[2],f[l+3]=r[3]}function o(a,f,l){e[0]=a,f[l]=r[3],f[l+1]=r[2],f[l+2]=r[1],f[l+3]=r[0]}t.writeFloatLE=n?i:o,t.writeFloatBE=n?o:i;function s(a,f){return r[0]=a[f],r[1]=a[f+1],r[2]=a[f+2],r[3]=a[f+3],e[0]}function u(a,f){return r[3]=a[f],r[2]=a[f+1],r[1]=a[f+2],r[0]=a[f+3],e[0]}t.readFloatLE=n?s:u,t.readFloatBE=n?u:s}():function(){function e(n,i,o,s){var u=i<0?1:0;if(u&&(i=-i),i===0)n(1/i>0?0:2147483648,o,s);else if(isNaN(i))n(2143289344,o,s);else if(i>34028234663852886e22)n((u<<31|2139095040)>>>0,o,s);else if(i<11754943508222875e-54)n((u<<31|Math.round(i/1401298464324817e-60))>>>0,o,s);else{var a=Math.floor(Math.log(i)/Math.LN2),f=Math.round(i*Math.pow(2,-a)*8388608)&8388607;n((u<<31|a+127<<23|f)>>>0,o,s)}}t.writeFloatLE=e.bind(null,xo),t.writeFloatBE=e.bind(null,bo);function r(n,i,o){var s=n(i,o),u=(s>>31)*2+1,a=s>>>23&255,f=s&8388607;return a===255?f?NaN:u*(1/0):a===0?u*1401298464324817e-60*f:u*Math.pow(2,a-150)*(f+8388608)}t.readFloatLE=r.bind(null,_o),t.readFloatBE=r.bind(null,vo)}(),typeof Float64Array<"u"?function(){var e=new Float64Array([-0]),r=new Uint8Array(e.buffer),n=r[7]===128;function i(a,f,l){e[0]=a,f[l]=r[0],f[l+1]=r[1],f[l+2]=r[2],f[l+3]=r[3],f[l+4]=r[4],f[l+5]=r[5],f[l+6]=r[6],f[l+7]=r[7]}function o(a,f,l){e[0]=a,f[l]=r[7],f[l+1]=r[6],f[l+2]=r[5],f[l+3]=r[4],f[l+4]=r[3],f[l+5]=r[2],f[l+6]=r[1],f[l+7]=r[0]}t.writeDoubleLE=n?i:o,t.writeDoubleBE=n?o:i;function s(a,f){return r[0]=a[f],r[1]=a[f+1],r[2]=a[f+2],r[3]=a[f+3],r[4]=a[f+4],r[5]=a[f+5],r[6]=a[f+6],r[7]=a[f+7],e[0]}function u(a,f){return r[7]=a[f],r[6]=a[f+1],r[5]=a[f+2],r[4]=a[f+3],r[3]=a[f+4],r[2]=a[f+5],r[1]=a[f+6],r[0]=a[f+7],e[0]}t.readDoubleLE=n?s:u,t.readDoubleBE=n?u:s}():function(){function e(n,i,o,s,u,a){var f=s<0?1:0;if(f&&(s=-s),s===0)n(0,u,a+i),n(1/s>0?0:2147483648,u,a+o);else if(isNaN(s))n(0,u,a+i),n(2146959360,u,a+o);else if(s>17976931348623157e292)n(0,u,a+i),n((f<<31|2146435072)>>>0,u,a+o);else{var l;if(s<22250738585072014e-324)l=s/5e-324,n(l>>>0,u,a+i),n((f<<31|l/4294967296)>>>0,u,a+o);else{var p=Math.floor(Math.log(s)/Math.LN2);p===1024&&(p=1023),l=s*Math.pow(2,-p),n(l*4503599627370496>>>0,u,a+i),n((f<<31|p+1023<<20|l*1048576&1048575)>>>0,u,a+o)}}}t.writeDoubleLE=e.bind(null,xo,0,4),t.writeDoubleBE=e.bind(null,bo,4,0);function r(n,i,o,s,u){var a=n(s,u+i),f=n(s,u+o),l=(f>>31)*2+1,p=f>>>20&2047,E=4294967296*(f&1048575)+a;return p===2047?E?NaN:l*(1/0):p===0?l*5e-324*E:l*Math.pow(2,p-1075)*(E+4503599627370496)}t.readDoubleLE=r.bind(null,_o,0,4),t.readDoubleBE=r.bind(null,vo,4,0)}(),t}function xo(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function bo(t,e,r){e[r]=t>>>24,e[r+1]=t>>>16&255,e[r+2]=t>>>8&255,e[r+3]=t&255}function _o(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function vo(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}});var Ao=M((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}});var To=M(Bo=>{"use strict";var Hr=Bo;Hr.length=function(e){for(var r=0,n=0,i=0;i<e.length;++i)n=e.charCodeAt(i),n<128?r+=1:n<2048?r+=2:(n&64512)===55296&&(e.charCodeAt(i+1)&64512)===56320?(++i,r+=4):r+=3;return r};Hr.read=function(e,r,n){var i=n-r;if(i<1)return"";for(var o=null,s=[],u=0,a;r<n;)a=e[r++],a<128?s[u++]=a:a>191&&a<224?s[u++]=(a&31)<<6|e[r++]&63:a>239&&a<365?(a=((a&7)<<18|(e[r++]&63)<<12|(e[r++]&63)<<6|e[r++]&63)-65536,s[u++]=55296+(a>>10),s[u++]=56320+(a&1023)):s[u++]=(a&15)<<12|(e[r++]&63)<<6|e[r++]&63,u>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),u=0);return o?(u&&o.push(String.fromCharCode.apply(String,s.slice(0,u))),o.join("")):String.fromCharCode.apply(String,s.slice(0,u))};Hr.write=function(e,r,n){for(var i=n,o,s,u=0;u<e.length;++u)o=e.charCodeAt(u),o<128?r[n++]=o:o<2048?(r[n++]=o>>6|192,r[n++]=o&63|128):(o&64512)===55296&&((s=e.charCodeAt(u+1))&64512)===56320?(o=65536+((o&1023)<<10)+(s&1023),++u,r[n++]=o>>18|240,r[n++]=o>>12&63|128,r[n++]=o>>6&63|128,r[n++]=o&63|128):(r[n++]=o>>12|224,r[n++]=o>>6&63|128,r[n++]=o&63|128);return n-i}});var Io=M((Yl,So)=>{"use strict";So.exports=Lc;function Lc(t,e,r){var n=r||8192,i=n>>>1,o=null,s=n;return function(a){if(a<1||a>i)return t(a);s+a>n&&(o=t(n),s=0);var f=e.call(o,s,s+=a);return s&7&&(s=(s|7)+1),f}}});var Po=M((eh,No)=>{"use strict";No.exports=$;var dt=Pe();function $(t,e){this.lo=t>>>0,this.hi=e>>>0}var Ne=$.zero=new $(0,0);Ne.toNumber=function(){return 0};Ne.zzEncode=Ne.zzDecode=function(){return this};Ne.length=function(){return 1};var zc=$.zeroHash="\0\0\0\0\0\0\0\0";$.fromNumber=function(e){if(e===0)return Ne;var r=e<0;r&&(e=-e);var n=e>>>0,i=(e-n)/4294967296>>>0;return r&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new $(n,i)};$.from=function(e){if(typeof e=="number")return $.fromNumber(e);if(dt.isString(e))if(dt.Long)e=dt.Long.fromString(e);else return $.fromNumber(parseInt(e,10));return e.low||e.high?new $(e.low>>>0,e.high>>>0):Ne};$.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var r=~this.lo+1>>>0,n=~this.hi>>>0;return r||(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296};$.prototype.toLong=function(e){return dt.Long?new dt.Long(this.lo|0,this.hi|0,!!e):{low:this.lo|0,high:this.hi|0,unsigned:!!e}};var Ee=String.prototype.charCodeAt;$.fromHash=function(e){return e===zc?Ne:new $((Ee.call(e,0)|Ee.call(e,1)<<8|Ee.call(e,2)<<16|Ee.call(e,3)<<24)>>>0,(Ee.call(e,4)|Ee.call(e,5)<<8|Ee.call(e,6)<<16|Ee.call(e,7)<<24)>>>0)};$.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};$.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};$.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};$.prototype.length=function(){var e=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?e<16384?e<128?1:2:e<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}});var Pe=M(Vr=>{"use strict";var A=Vr;A.asPromise=fo();A.base64=mo();A.EventEmitter=go();A.float=ko();A.inquire=Ao();A.utf8=To();A.pool=Io();A.LongBits=Po();A.isNode=!!(typeof globalThis<"u"&&globalThis&&globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node);A.global=A.isNode&&globalThis||typeof window<"u"&&window||typeof self<"u"&&self||Vr;A.emptyArray=Object.freeze?Object.freeze([]):[];A.emptyObject=Object.freeze?Object.freeze({}):{};A.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};A.isString=function(e){return typeof e=="string"||e instanceof String};A.isObject=function(e){return e&&typeof e=="object"};A.isset=A.isSet=function(e,r){var n=e[r];return n!=null&&e.hasOwnProperty(r)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};A.Buffer=function(){try{var t=A.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch{return null}}();A._Buffer_from=null;A._Buffer_allocUnsafe=null;A.newBuffer=function(e){return typeof e=="number"?A.Buffer?A._Buffer_allocUnsafe(e):new A.Array(e):A.Buffer?A._Buffer_from(e):typeof Uint8Array>"u"?e:new Uint8Array(e)};A.Array=typeof Uint8Array<"u"?Uint8Array:Array;A.Long=A.global.dcodeIO&&A.global.dcodeIO.Long||A.global.Long||A.inquire("long");A.key2Re=/^true|false|0|1$/;A.key32Re=/^-?(?:0|[1-9][0-9]*)$/;A.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;A.longToHash=function(e){return e?A.LongBits.from(e).toHash():A.LongBits.zeroHash};A.longFromHash=function(e,r){var n=A.LongBits.fromHash(e);return A.Long?A.Long.fromBits(n.lo,n.hi,r):n.toNumber(!!r)};function Do(t,e,r){for(var n=Object.keys(e),i=0;i<n.length;++i)(t[n[i]]===void 0||!r)&&(t[n[i]]=e[n[i]]);return t}A.merge=Do;A.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)};function Co(t){function e(r,n){if(!(this instanceof e))return new e(r,n);Object.defineProperty(this,"message",{get:function(){return r}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&Do(this,n)}return e.prototype=Object.create(Error.prototype,{constructor:{value:e,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return t},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),e}A.newError=Co;A.ProtocolError=Co("ProtocolError");A.oneOfGetter=function(e){for(var r={},n=0;n<e.length;++n)r[e[n]]=1;return function(){for(var i=Object.keys(this),o=i.length-1;o>-1;--o)if(r[i[o]]===1&&this[i[o]]!==void 0&&this[i[o]]!==null)return i[o]}};A.oneOfSetter=function(e){return function(r){for(var n=0;n<e.length;++n)e[n]!==r&&delete this[e[n]]}};A.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};A._configure=function(){var t=A.Buffer;if(!t){A._Buffer_from=A._Buffer_allocUnsafe=null;return}A._Buffer_from=t.from!==Uint8Array.from&&t.from||function(r,n){return new t(r,n)},A._Buffer_allocUnsafe=t.allocUnsafe||function(r){return new t(r)}}});var qr=M((rh,Oo)=>{"use strict";Oo.exports=z;var ae=Pe(),Gr,zo=ae.LongBits,Fc=ae.utf8;function ce(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function z(t){this.buf=t,this.pos=0,this.len=t.length}var Uo=typeof Uint8Array<"u"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new z(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new z(e);throw Error("illegal buffer")},Fo=function(){return ae.Buffer?function(r){return(z.create=function(i){return ae.Buffer.isBuffer(i)?new Gr(i):Uo(i)})(r)}:Uo};z.create=Fo();z.prototype._slice=ae.Array.prototype.subarray||ae.Array.prototype.slice;z.prototype.uint32=function(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,ce(this,10);return e}}();z.prototype.int32=function(){return this.uint32()|0};z.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(e&1)|0};function jr(){var t=new zo(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw ce(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,t}if(this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw ce(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}z.prototype.bool=function(){return this.uint32()!==0};function Jt(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}z.prototype.fixed32=function(){if(this.pos+4>this.len)throw ce(this,4);return Jt(this.buf,this.pos+=4)};z.prototype.sfixed32=function(){if(this.pos+4>this.len)throw ce(this,4);return Jt(this.buf,this.pos+=4)|0};function Lo(){if(this.pos+8>this.len)throw ce(this,8);return new zo(Jt(this.buf,this.pos+=4),Jt(this.buf,this.pos+=4))}z.prototype.float=function(){if(this.pos+4>this.len)throw ce(this,4);var e=ae.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};z.prototype.double=function(){if(this.pos+8>this.len)throw ce(this,4);var e=ae.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};z.prototype.bytes=function(){var e=this.uint32(),r=this.pos,n=this.pos+e;if(n>this.len)throw ce(this,e);if(this.pos+=e,Array.isArray(this.buf))return this.buf.slice(r,n);if(r===n){var i=ae.Buffer;return i?i.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,r,n)};z.prototype.string=function(){var e=this.bytes();return Fc.read(e,0,e.length)};z.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw ce(this,e);this.pos+=e}else do if(this.pos>=this.len)throw ce(this);while(this.buf[this.pos++]&128);return this};z.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!==4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this};z._configure=function(t){Gr=t,z.create=Fo(),Gr._configure();var e=ae.Long?"toLong":"toNumber";ae.merge(z.prototype,{int64:function(){return jr.call(this)[e](!1)},uint64:function(){return jr.call(this)[e](!0)},sint64:function(){return jr.call(this).zzDecode()[e](!1)},fixed64:function(){return Lo.call(this)[e](!0)},sfixed64:function(){return Lo.call(this)[e](!1)}})}});var Ho=M((nh,$o)=>{"use strict";$o.exports=De;var Ro=qr();(De.prototype=Object.create(Ro.prototype)).constructor=De;var Mo=Pe();function De(t){Ro.call(this,t)}De._configure=function(){Mo.Buffer&&(De.prototype._slice=Mo.Buffer.prototype.slice)};De.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};De._configure()});var Yr=M((ih,qo)=>{"use strict";qo.exports=P;var ne=Pe(),Qr,Kt=ne.LongBits,Vo=ne.base64,jo=ne.utf8;function pt(t,e,r){this.fn=t,this.len=e,this.next=void 0,this.val=r}function Xr(){}function Oc(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function P(){this.len=0,this.head=new pt(Xr,0,0),this.tail=this.head,this.states=null}var Go=function(){return ne.Buffer?function(){return(P.create=function(){return new Qr})()}:function(){return new P}};P.create=Go();P.alloc=function(e){return new ne.Array(e)};ne.Array!==Array&&(P.alloc=ne.pool(P.alloc,ne.Array.prototype.subarray));P.prototype._push=function(e,r,n){return this.tail=this.tail.next=new pt(e,r,n),this.len+=r,this};function Jr(t,e,r){e[r]=t&255}function Mc(t,e,r){for(;t>127;)e[r++]=t&127|128,t>>>=7;e[r]=t}function Kr(t,e){this.len=t,this.next=void 0,this.val=e}Kr.prototype=Object.create(pt.prototype);Kr.prototype.fn=Mc;P.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new Kr((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};P.prototype.int32=function(e){return e<0?this._push(Zr,10,Kt.fromNumber(e)):this.uint32(e)};P.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)};function Zr(t,e,r){for(;t.hi;)e[r++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=t.lo&127|128,t.lo=t.lo>>>7;e[r++]=t.lo}P.prototype.uint64=function(e){var r=Kt.from(e);return this._push(Zr,r.length(),r)};P.prototype.int64=P.prototype.uint64;P.prototype.sint64=function(e){var r=Kt.from(e).zzEncode();return this._push(Zr,r.length(),r)};P.prototype.bool=function(e){return this._push(Jr,1,e?1:0)};function Wr(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}P.prototype.fixed32=function(e){return this._push(Wr,4,e>>>0)};P.prototype.sfixed32=P.prototype.fixed32;P.prototype.fixed64=function(e){var r=Kt.from(e);return this._push(Wr,4,r.lo)._push(Wr,4,r.hi)};P.prototype.sfixed64=P.prototype.fixed64;P.prototype.float=function(e){return this._push(ne.float.writeFloatLE,4,e)};P.prototype.double=function(e){return this._push(ne.float.writeDoubleLE,8,e)};var Rc=ne.Array.prototype.set?function(e,r,n){r.set(e,n)}:function(e,r,n){for(var i=0;i<e.length;++i)r[n+i]=e[i]};P.prototype.bytes=function(e){var r=e.length>>>0;if(!r)return this._push(Jr,1,0);if(ne.isString(e)){var n=P.alloc(r=Vo.length(e));Vo.decode(e,n,0),e=n}return this.uint32(r)._push(Rc,r,e)};P.prototype.string=function(e){var r=jo.length(e);return r?this.uint32(r)._push(jo.write,r,e):this._push(Jr,1,0)};P.prototype.fork=function(){return this.states=new Oc(this),this.head=this.tail=new pt(Xr,0,0),this.len=0,this};P.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new pt(Xr,0,0),this.len=0),this};P.prototype.ldelim=function(){var e=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=r,this.len+=n),this};P.prototype.finish=function(){for(var e=this.head.next,r=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,r,n),n+=e.len,e=e.next;return r};P._configure=function(t){Qr=t,P.create=Go(),Qr._configure()}});var Xo=M((oh,Wo)=>{"use strict";Wo.exports=de;var Qo=Yr();(de.prototype=Object.create(Qo.prototype)).constructor=de;var ke=Pe();function de(){Qo.call(this)}de._configure=function(){de.alloc=ke._Buffer_allocUnsafe,de.writeBytesBuffer=ke.Buffer&&ke.Buffer.prototype instanceof Uint8Array&&ke.Buffer.prototype.set.name==="set"?function(e,r,n){r.set(e,n)}:function(e,r,n){if(e.copy)e.copy(r,n,0,e.length);else for(var i=0;i<e.length;)r[n++]=e[i++]}};de.prototype.bytes=function(e){ke.isString(e)&&(e=ke._Buffer_from(e,"base64"));var r=e.length>>>0;return this.uint32(r),r&&this._push(de.writeBytesBuffer,r,e),this};function $c(t,e,r){t.length<40?ke.utf8.write(t,e,r):e.utf8Write?e.utf8Write(t,r):e.write(t,r)}de.prototype.string=function(e){var r=ke.Buffer.byteLength(e);return this.uint32(r),r&&this._push($c,r,e),this};de._configure()});var os=M((wt,er)=>{(function(t,e){"use strict";var r={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function n(c){if(!Array.isArray(c)&&!ArrayBuffer.isView(c))return!1;for(var h=0;h<c.length;h++)if(!Number.isInteger(c[h])||c[h]<0||c[h]>255)return!1;return!0}function i(c,h){return(c&65535)*h+(((c>>>16)*h&65535)<<16)}function o(c,h){return c<<h|c>>>32-h}function s(c){return c^=c>>>16,c=i(c,2246822507),c^=c>>>13,c=i(c,3266489909),c^=c>>>16,c}function u(c,h){c=[c[0]>>>16,c[0]&65535,c[1]>>>16,c[1]&65535],h=[h[0]>>>16,h[0]&65535,h[1]>>>16,h[1]&65535];var m=[0,0,0,0];return m[3]+=c[3]+h[3],m[2]+=m[3]>>>16,m[3]&=65535,m[2]+=c[2]+h[2],m[1]+=m[2]>>>16,m[2]&=65535,m[1]+=c[1]+h[1],m[0]+=m[1]>>>16,m[1]&=65535,m[0]+=c[0]+h[0],m[0]&=65535,[m[0]<<16|m[1],m[2]<<16|m[3]]}function a(c,h){c=[c[0]>>>16,c[0]&65535,c[1]>>>16,c[1]&65535],h=[h[0]>>>16,h[0]&65535,h[1]>>>16,h[1]&65535];var m=[0,0,0,0];return m[3]+=c[3]*h[3],m[2]+=m[3]>>>16,m[3]&=65535,m[2]+=c[2]*h[3],m[1]+=m[2]>>>16,m[2]&=65535,m[2]+=c[3]*h[2],m[1]+=m[2]>>>16,m[2]&=65535,m[1]+=c[1]*h[3],m[0]+=m[1]>>>16,m[1]&=65535,m[1]+=c[2]*h[2],m[0]+=m[1]>>>16,m[1]&=65535,m[1]+=c[3]*h[1],m[0]+=m[1]>>>16,m[1]&=65535,m[0]+=c[0]*h[3]+c[1]*h[2]+c[2]*h[1]+c[3]*h[0],m[0]&=65535,[m[0]<<16|m[1],m[2]<<16|m[3]]}function f(c,h){return h%=64,h===32?[c[1],c[0]]:h<32?[c[0]<<h|c[1]>>>32-h,c[1]<<h|c[0]>>>32-h]:(h-=32,[c[1]<<h|c[0]>>>32-h,c[0]<<h|c[1]>>>32-h])}function l(c,h){return h%=64,h===0?c:h<32?[c[0]<<h|c[1]>>>32-h,c[1]<<h]:[c[1]<<h-32,0]}function p(c,h){return[c[0]^h[0],c[1]^h[1]]}function E(c){return c=p(c,[0,c[0]>>>1]),c=a(c,[4283543511,3981806797]),c=p(c,[0,c[0]>>>1]),c=a(c,[3301882366,444984403]),c=p(c,[0,c[0]>>>1]),c}r.x86.hash32=function(c,h){if(r.inputValidation&&!n(c))return e;h=h||0;for(var m=c.length%4,S=c.length-m,y=h,w=0,x=3432918353,v=461845907,B=0;B<S;B=B+4)w=c[B]|c[B+1]<<8|c[B+2]<<16|c[B+3]<<24,w=i(w,x),w=o(w,15),w=i(w,v),y^=w,y=o(y,13),y=i(y,5)+3864292196;switch(w=0,m){case 3:w^=c[B+2]<<16;case 2:w^=c[B+1]<<8;case 1:w^=c[B],w=i(w,x),w=o(w,15),w=i(w,v),y^=w}return y^=c.length,y=s(y),y>>>0},r.x86.hash128=function(c,h){if(r.inputValidation&&!n(c))return e;h=h||0;for(var m=c.length%16,S=c.length-m,y=h,w=h,x=h,v=h,B=0,I=0,_=0,C=0,me=597399067,St=2869860233,It=951274213,Nt=2716044179,N=0;N<S;N=N+16)B=c[N]|c[N+1]<<8|c[N+2]<<16|c[N+3]<<24,I=c[N+4]|c[N+5]<<8|c[N+6]<<16|c[N+7]<<24,_=c[N+8]|c[N+9]<<8|c[N+10]<<16|c[N+11]<<24,C=c[N+12]|c[N+13]<<8|c[N+14]<<16|c[N+15]<<24,B=i(B,me),B=o(B,15),B=i(B,St),y^=B,y=o(y,19),y+=w,y=i(y,5)+1444728091,I=i(I,St),I=o(I,16),I=i(I,It),w^=I,w=o(w,17),w+=x,w=i(w,5)+197830471,_=i(_,It),_=o(_,17),_=i(_,Nt),x^=_,x=o(x,15),x+=v,x=i(x,5)+2530024501,C=i(C,Nt),C=o(C,18),C=i(C,me),v^=C,v=o(v,13),v+=y,v=i(v,5)+850148119;switch(B=0,I=0,_=0,C=0,m){case 15:C^=c[N+14]<<16;case 14:C^=c[N+13]<<8;case 13:C^=c[N+12],C=i(C,Nt),C=o(C,18),C=i(C,me),v^=C;case 12:_^=c[N+11]<<24;case 11:_^=c[N+10]<<16;case 10:_^=c[N+9]<<8;case 9:_^=c[N+8],_=i(_,It),_=o(_,17),_=i(_,Nt),x^=_;case 8:I^=c[N+7]<<24;case 7:I^=c[N+6]<<16;case 6:I^=c[N+5]<<8;case 5:I^=c[N+4],I=i(I,St),I=o(I,16),I=i(I,It),w^=I;case 4:B^=c[N+3]<<24;case 3:B^=c[N+2]<<16;case 2:B^=c[N+1]<<8;case 1:B^=c[N],B=i(B,me),B=o(B,15),B=i(B,St),y^=B}return y^=c.length,w^=c.length,x^=c.length,v^=c.length,y+=w,y+=x,y+=v,w+=y,x+=y,v+=y,y=s(y),w=s(w),x=s(x),v=s(v),y+=w,y+=x,y+=v,w+=y,x+=y,v+=y,("00000000"+(y>>>0).toString(16)).slice(-8)+("00000000"+(w>>>0).toString(16)).slice(-8)+("00000000"+(x>>>0).toString(16)).slice(-8)+("00000000"+(v>>>0).toString(16)).slice(-8)},r.x64.hash128=function(c,h){if(r.inputValidation&&!n(c))return e;h=h||0;for(var m=c.length%16,S=c.length-m,y=[0,h],w=[0,h],x=[0,0],v=[0,0],B=[2277735313,289559509],I=[1291169091,658871167],_=0;_<S;_=_+16)x=[c[_+4]|c[_+5]<<8|c[_+6]<<16|c[_+7]<<24,c[_]|c[_+1]<<8|c[_+2]<<16|c[_+3]<<24],v=[c[_+12]|c[_+13]<<8|c[_+14]<<16|c[_+15]<<24,c[_+8]|c[_+9]<<8|c[_+10]<<16|c[_+11]<<24],x=a(x,B),x=f(x,31),x=a(x,I),y=p(y,x),y=f(y,27),y=u(y,w),y=u(a(y,[0,5]),[0,1390208809]),v=a(v,I),v=f(v,33),v=a(v,B),w=p(w,v),w=f(w,31),w=u(w,y),w=u(a(w,[0,5]),[0,944331445]);switch(x=[0,0],v=[0,0],m){case 15:v=p(v,l([0,c[_+14]],48));case 14:v=p(v,l([0,c[_+13]],40));case 13:v=p(v,l([0,c[_+12]],32));case 12:v=p(v,l([0,c[_+11]],24));case 11:v=p(v,l([0,c[_+10]],16));case 10:v=p(v,l([0,c[_+9]],8));case 9:v=p(v,[0,c[_+8]]),v=a(v,I),v=f(v,33),v=a(v,B),w=p(w,v);case 8:x=p(x,l([0,c[_+7]],56));case 7:x=p(x,l([0,c[_+6]],48));case 6:x=p(x,l([0,c[_+5]],40));case 5:x=p(x,l([0,c[_+4]],32));case 4:x=p(x,l([0,c[_+3]],24));case 3:x=p(x,l([0,c[_+2]],16));case 2:x=p(x,l([0,c[_+1]],8));case 1:x=p(x,[0,c[_]]),x=a(x,B),x=f(x,31),x=a(x,I),y=p(y,x)}return y=p(y,[0,c.length]),w=p(w,[0,c.length]),y=u(y,w),w=u(w,y),y=E(y),w=E(w),y=u(y,w),w=u(w,y),("00000000"+(y[0]>>>0).toString(16)).slice(-8)+("00000000"+(y[1]>>>0).toString(16)).slice(-8)+("00000000"+(w[0]>>>0).toString(16)).slice(-8)+("00000000"+(w[1]>>>0).toString(16)).slice(-8)},typeof wt<"u"?(typeof er<"u"&&er.exports&&(wt=er.exports=r),wt.murmurHash3=r):typeof define=="function"&&define.amd?define([],function(){return r}):(r._murmurHash3=t.murmurHash3,r.noConflict=function(){return t.murmurHash3=r._murmurHash3,r._murmurHash3=e,r.noConflict=e,r},t.murmurHash3=r)})(wt)});var as=M((Ih,ss)=>{ss.exports=os()});var ls=M((zh,fs)=>{"use strict";fs.exports=class{constructor(){this._bitArrays=[],this._data=[],this._length=0,this._changedLength=!1,this._changedData=!1}set(e,r){let n=this._internalPositionFor(e,!1);if(r===void 0)n!==-1&&(this._unsetInternalPos(n),this._unsetBit(e),this._changedLength=!0,this._changedData=!0);else{let i=!1;n===-1?(n=this._data.length,this._setBit(e),this._changedData=!0):i=!0,this._setInternalPos(n,e,r,i),this._changedLength=!0}}unset(e){this.set(e,void 0)}get(e){this._sortData();let r=this._internalPositionFor(e,!0);if(r!==-1)return this._data[r][1]}push(e){return this.set(this.length,e),this.length}get length(){if(this._sortData(),this._changedLength){let e=this._data[this._data.length-1];this._length=e?e[0]+1:0,this._changedLength=!1}return this._length}forEach(e){let r=0;for(;r<this.length;)e(this.get(r),r,this),r++}map(e){let r=0,n=new Array(this.length);for(;r<this.length;)n[r]=e(this.get(r),r,this),r++;return n}reduce(e,r){let n=0,i=r;for(;n<this.length;){let o=this.get(n);i=e(i,o,n),n++}return i}find(e){let r=0,n,i;for(;r<this.length&&!n;)i=this.get(r),n=e(i),r++;return n?i:void 0}_internalPositionFor(e,r){let n=this._bytePosFor(e,r);if(n>=this._bitArrays.length)return-1;let i=this._bitArrays[n],o=e-n*7;if(!((i&1<<o)>0))return-1;let u=this._bitArrays.slice(0,n).reduce(Qc,0),a=~(4294967295<<o+1),f=us(i&a);return u+f-1}_bytePosFor(e,r){let n=Math.floor(e/7),i=n+1;for(;!r&&this._bitArrays.length<i;)this._bitArrays.push(0);return n}_setBit(e){let r=this._bytePosFor(e,!1);this._bitArrays[r]|=1<<e-r*7}_unsetBit(e){let r=this._bytePosFor(e,!1);this._bitArrays[r]&=~(1<<e-r*7)}_setInternalPos(e,r,n,i){let o=this._data,s=[r,n];if(i)this._sortData(),o[e]=s;else{if(o.length)if(o[o.length-1][0]>=r)o.push(s);else if(o[0][0]<=r)o.unshift(s);else{let u=Math.round(o.length/2);this._data=o.slice(0,u).concat(s).concat(o.slice(u))}else this._data.push(s);this._changedData=!0,this._changedLength=!0}}_unsetInternalPos(e){this._data.splice(e,1)}_sortData(){this._changedData&&this._data.sort(Wc),this._changedData=!1}bitField(){let e=[],r=8,n=0,i=0,o,s=this._bitArrays.slice();for(;s.length||n;){n===0&&(o=s.shift(),n=7);let a=Math.min(n,r),f=~(255<<a),l=o&f;i|=l<<8-r,o=o>>>a,n-=a,r-=a,(!r||!n&&!s.length)&&(e.push(i),i=0,r=8)}for(var u=e.length-1;u>0&&e[u]===0;u--)e.pop();return e}compactArray(){return this._sortData(),this._data.map(Xc)}};function Qc(t,e){return t+us(e)}function us(t){let e=t;return e=e-(e>>1&1431655765),e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>24}function Wc(t,e){return t[0]-e[0]}function Xc(t){return t[1]}});var Ds=M((Qd,_n)=>{"use strict";var Ou=Object.prototype.hasOwnProperty,q="~";function bt(){}Object.create&&(bt.prototype=Object.create(null),new bt().__proto__||(q=!1));function Mu(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function Ps(t,e,r,n,i){if(typeof r!="function")throw new TypeError("The listener must be a function");var o=new Mu(r,n||t,i),s=q?q+e:e;return t._events[s]?t._events[s].fn?t._events[s]=[t._events[s],o]:t._events[s].push(o):(t._events[s]=o,t._eventsCount++),t}function cr(t,e){--t._eventsCount===0?t._events=new bt:delete t._events[e]}function V(){this._events=new bt,this._eventsCount=0}V.prototype.eventNames=function(){var e=[],r,n;if(this._eventsCount===0)return e;for(n in r=this._events)Ou.call(r,n)&&e.push(q?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(r)):e};V.prototype.listeners=function(e){var r=q?q+e:e,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,s=new Array(o);i<o;i++)s[i]=n[i].fn;return s};V.prototype.listenerCount=function(e){var r=q?q+e:e,n=this._events[r];return n?n.fn?1:n.length:0};V.prototype.emit=function(e,r,n,i,o,s){var u=q?q+e:e;if(!this._events[u])return!1;var a=this._events[u],f=arguments.length,l,p;if(a.fn){switch(a.once&&this.removeListener(e,a.fn,void 0,!0),f){case 1:return a.fn.call(a.context),!0;case 2:return a.fn.call(a.context,r),!0;case 3:return a.fn.call(a.context,r,n),!0;case 4:return a.fn.call(a.context,r,n,i),!0;case 5:return a.fn.call(a.context,r,n,i,o),!0;case 6:return a.fn.call(a.context,r,n,i,o,s),!0}for(p=1,l=new Array(f-1);p<f;p++)l[p-1]=arguments[p];a.fn.apply(a.context,l)}else{var E=a.length,c;for(p=0;p<E;p++)switch(a[p].once&&this.removeListener(e,a[p].fn,void 0,!0),f){case 1:a[p].fn.call(a[p].context);break;case 2:a[p].fn.call(a[p].context,r);break;case 3:a[p].fn.call(a[p].context,r,n);break;case 4:a[p].fn.call(a[p].context,r,n,i);break;default:if(!l)for(c=1,l=new Array(f-1);c<f;c++)l[c-1]=arguments[c];a[p].fn.apply(a[p].context,l)}}return!0};V.prototype.on=function(e,r,n){return Ps(this,e,r,n,!1)};V.prototype.once=function(e,r,n){return Ps(this,e,r,n,!0)};V.prototype.removeListener=function(e,r,n,i){var o=q?q+e:e;if(!this._events[o])return this;if(!r)return cr(this,o),this;var s=this._events[o];if(s.fn)s.fn===r&&(!i||s.once)&&(!n||s.context===n)&&cr(this,o);else{for(var u=0,a=[],f=s.length;u<f;u++)(s[u].fn!==r||i&&!s[u].once||n&&s[u].context!==n)&&a.push(s[u]);a.length?this._events[o]=a.length===1?a[0]:a:cr(this,o)}return this};V.prototype.removeAllListeners=function(e){var r;return e?(r=q?q+e:e,this._events[r]&&cr(this,r)):(this._events=new bt,this._eventsCount=0),this};V.prototype.off=V.prototype.removeListener;V.prototype.addListener=V.prototype.on;V.prefixed=q;V.EventEmitter=V;typeof _n<"u"&&(_n.exports=V)});var Xu={};Q(Xu,{exporter:()=>Ks,recursive:()=>Wu,walkPath:()=>Js});var wr=O(ee(),1);function oa(t){return t[Symbol.asyncIterator]!=null}function sa(t){if(oa(t))return(async()=>{let r;for await(let n of t)r=n;return r})();let e;for(let r of t)e=r;return e}var Un=sa;var Br={};Q(Br,{base32:()=>Re,base32hex:()=>wa,base32hexpad:()=>ba,base32hexpadupper:()=>_a,base32hexupper:()=>xa,base32pad:()=>ya,base32padupper:()=>ga,base32upper:()=>ma,base32z:()=>va});function aa(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var o=t.charAt(i),s=o.charCodeAt(0);if(r[s]!==255)throw new TypeError(o+" is ambiguous");r[s]=i}var u=t.length,a=t.charAt(0),f=Math.log(u)/Math.log(256),l=Math.log(256)/Math.log(u);function p(h){if(h instanceof Uint8Array||(ArrayBuffer.isView(h)?h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength):Array.isArray(h)&&(h=Uint8Array.from(h))),!(h instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(h.length===0)return"";for(var m=0,S=0,y=0,w=h.length;y!==w&&h[y]===0;)y++,m++;for(var x=(w-y)*l+1>>>0,v=new Uint8Array(x);y!==w;){for(var B=h[y],I=0,_=x-1;(B!==0||I<S)&&_!==-1;_--,I++)B+=256*v[_]>>>0,v[_]=B%u>>>0,B=B/u>>>0;if(B!==0)throw new Error("Non-zero carry");S=I,y++}for(var C=x-S;C!==x&&v[C]===0;)C++;for(var me=a.repeat(m);C<x;++C)me+=t.charAt(v[C]);return me}function E(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return new Uint8Array;var m=0;if(h[m]!==" "){for(var S=0,y=0;h[m]===a;)S++,m++;for(var w=(h.length-m)*f+1>>>0,x=new Uint8Array(w);h[m];){var v=r[h.charCodeAt(m)];if(v===255)return;for(var B=0,I=w-1;(v!==0||B<y)&&I!==-1;I--,B++)v+=u*x[I]>>>0,x[I]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");y=B,m++}if(h[m]!==" "){for(var _=w-y;_!==w&&x[_]===0;)_++;for(var C=new Uint8Array(S+(w-_)),me=S;_!==w;)C[me++]=x[_++];return C}}}function c(h){var m=E(h);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:p,decodeUnsafe:E,decode:c}}var ca=aa,ua=ca,Ln=ua;var Oe={};Q(Oe,{coerce:()=>le,empty:()=>zn,equals:()=>xr,fromHex:()=>la,fromString:()=>br,isBinary:()=>ha,toHex:()=>fa,toString:()=>_r});var zn=new Uint8Array(0),fa=t=>t.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),""),la=t=>{let e=t.match(/../g);return e?new Uint8Array(e.map(r=>parseInt(r,16))):zn},xr=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},le=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},ha=t=>t instanceof ArrayBuffer||ArrayBuffer.isView(t),br=t=>new TextEncoder().encode(t),_r=t=>new TextDecoder().decode(t);var vr=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Er=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Fn(this,e)}},kr=class{constructor(e){this.decoders=e}or(e){return Fn(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},Fn=(t,e)=>new kr({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),Ar=class{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new vr(e,r,n),this.decoder=new Er(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Me=({name:t,prefix:e,encode:r,decode:n})=>new Ar(t,e,r,n),xe=({prefix:t,name:e,alphabet:r})=>{let{encode:n,decode:i}=Ln(r,e);return Me({prefix:t,name:e,encode:n,decode:o=>le(i(o))})},da=(t,e,r,n)=>{let i={};for(let l=0;l<e.length;++l)i[e[l]]=l;let o=t.length;for(;t[o-1]==="=";)--o;let s=new Uint8Array(o*r/8|0),u=0,a=0,f=0;for(let l=0;l<o;++l){let p=i[t[l]];if(p===void 0)throw new SyntaxError(`Non-${n} character`);a=a<<r|p,u+=r,u>=8&&(u-=8,s[f++]=255&a>>u)}if(u>=r||255&a<<8-u)throw new SyntaxError("Unexpected end of data");return s},pa=(t,e,r)=>{let n=e[e.length-1]==="=",i=(1<<r)-1,o="",s=0,u=0;for(let a=0;a<t.length;++a)for(u=u<<8|t[a],s+=8;s>r;)s-=r,o+=e[i&u>>s];if(s&&(o+=e[i&u<<r-s]),n)for(;o.length*r&7;)o+="=";return o},L=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Me({prefix:e,name:t,encode(i){return pa(i,n,r)},decode(i){return da(i,n,r,t)}});var Re=L({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ma=L({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ya=L({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ga=L({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),wa=L({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),xa=L({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),ba=L({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),_a=L({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),va=L({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Tr={};Q(Tr,{base58btc:()=>he,base58flickr:()=>Ea});var he=xe({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Ea=xe({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var ka=Rn,On=128,Aa=127,Ba=~Aa,Ta=Math.pow(2,31);function Rn(t,e,r){e=e||[],r=r||0;for(var n=r;t>=Ta;)e[r++]=t&255|On,t/=128;for(;t&Ba;)e[r++]=t&255|On,t>>>=7;return e[r]=t|0,Rn.bytes=r-n+1,e}var Sa=Sr,Ia=128,Mn=127;function Sr(t,n){var r=0,n=n||0,i=0,o=n,s,u=t.length;do{if(o>=u)throw Sr.bytes=0,new RangeError("Could not decode varint");s=t[o++],r+=i<28?(s&Mn)<<i:(s&Mn)*Math.pow(2,i),i+=7}while(s>=Ia);return Sr.bytes=o-n,r}var Na=Math.pow(2,7),Pa=Math.pow(2,14),Da=Math.pow(2,21),Ca=Math.pow(2,28),Ua=Math.pow(2,35),La=Math.pow(2,42),za=Math.pow(2,49),Fa=Math.pow(2,56),Oa=Math.pow(2,63),Ma=function(t){return t<Na?1:t<Pa?2:t<Da?3:t<Ca?4:t<Ua?5:t<La?6:t<za?7:t<Fa?8:t<Oa?9:10},Ra={encode:ka,decode:Sa,encodingLength:Ma},$a=Ra,it=$a;var ot=(t,e=0)=>[it.decode(t,e),it.decode.bytes],$e=(t,e,r=0)=>(it.encode(t,e,r),e),He=t=>it.encodingLength(t);var Te=(t,e)=>{let r=e.byteLength,n=He(t),i=n+He(r),o=new Uint8Array(i+r);return $e(t,o,0),$e(r,o,n),o.set(e,i),new Ve(t,r,e,o)},Ct=t=>{let e=le(t),[r,n]=ot(e),[i,o]=ot(e.subarray(n)),s=e.subarray(n+o);if(s.byteLength!==i)throw new Error("Incorrect length");return new Ve(r,i,s,e)},$n=(t,e)=>{if(t===e)return!0;{let r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&xr(t.bytes,r.bytes)}},Ve=class{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}};var Hn=(t,e)=>{let{bytes:r,version:n}=t;switch(n){case 0:return Va(r,Ir(t),e||he.encoder);default:return ja(r,Ir(t),e||Re.encoder)}};var Vn=new WeakMap,Ir=t=>{let e=Vn.get(t);if(e==null){let r=new Map;return Vn.set(t,r),r}return e},j=class t{constructor(e,r,n,i){this.code=r,this.version=e,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:r}=this;if(e!==st)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==Ga)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return t.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=Te(e,r);return t.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return t.equals(this,e)}static equals(e,r){let n=r;return n&&e.code===n.code&&e.version===n.version&&$n(e.multihash,n.multihash)}toString(e){return Hn(this,e)}toJSON(){return{"/":Hn(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;let r=e;if(r instanceof t)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:i,multihash:o,bytes:s}=r;return new t(n,i,o,s||jn(n,i,o.bytes))}else if(r[qa]===!0){let{version:n,multihash:i,code:o}=r,s=Ct(i);return t.create(n,o,s)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==st)throw new Error(`Version 0 CID must use dag-pb (code: ${st}) block encoding`);return new t(e,r,n,n.bytes)}case 1:{let i=jn(e,r,n.bytes);return new t(e,r,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return t.create(0,st,e)}static createV1(e,r){return t.create(1,e,r)}static decode(e){let[r,n]=t.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=t.inspectBytes(e),n=r.size-r.multihashSize,i=le(e.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");let o=i.subarray(r.multihashSize-r.digestSize),s=new Ve(r.multihashCode,r.digestSize,o,i);return[r.version===0?t.createV0(s):t.createV1(r.codec,s),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[p,E]=ot(e.subarray(r));return r+=E,p},i=n(),o=st;if(i===18?(i=0,r=0):o=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let s=r,u=n(),a=n(),f=r+a,l=f-s;return{version:i,codec:o,multihashCode:u,digestSize:a,multihashSize:l,size:f}}static parse(e,r){let[n,i]=Ha(e,r),o=t.decode(i);if(o.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Ir(o).set(n,e),o}},Ha=(t,e)=>{switch(t[0]){case"Q":{let r=e||he;return[he.prefix,r.decode(`${he.prefix}${t}`)]}case he.prefix:{let r=e||he;return[he.prefix,r.decode(t)]}case Re.prefix:{let r=e||Re;return[Re.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},Va=(t,e,r)=>{let{prefix:n}=r;if(n!==he.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=e.get(n);if(i==null){let o=r.encode(t).slice(1);return e.set(n,o),o}else return i},ja=(t,e,r)=>{let{prefix:n}=r,i=e.get(n);if(i==null){let o=r.encode(t);return e.set(n,o),o}else return i},st=112,Ga=18,jn=(t,e,r)=>{let n=He(t),i=n+He(e),o=new Uint8Array(i+r.byteLength);return $e(t,o,0),$e(e,o,n),o.set(r,i),o},qa=Symbol.for("@ipld/js-cid/CID");var Qa=["string","number","bigint","symbol"],Wa=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function Gn(t){if(t===null)return"null";if(t===void 0)return"undefined";if(t===!0||t===!1)return"boolean";let e=typeof t;if(Qa.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(t))return"Array";if(Xa(t))return"Buffer";let r=Ja(t);return r||"Object"}function Xa(t){return t&&t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer.call(null,t)}function Ja(t){let e=Object.prototype.toString.call(t).slice(8,-1);if(Wa.includes(e))return e}var d=class{constructor(e,r,n){this.major=e,this.majorEncoded=e<<5,this.name=r,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}};d.uint=new d(0,"uint",!0);d.negint=new d(1,"negint",!0);d.bytes=new d(2,"bytes",!0);d.string=new d(3,"string",!0);d.array=new d(4,"array",!1);d.map=new d(5,"map",!1);d.tag=new d(6,"tag",!1);d.float=new d(7,"float",!0);d.false=new d(7,"false",!0);d.true=new d(7,"true",!0);d.null=new d(7,"null",!0);d.undefined=new d(7,"undefined",!0);d.break=new d(7,"break",!0);var b=class{constructor(e,r,n){this.type=e,this.value=r,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};var Ge=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",Ka=new TextDecoder,Za=new TextEncoder;function Ut(t){return Ge&&globalThis.Buffer.isBuffer(t)}function Xn(t){return t instanceof Uint8Array?Ut(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t:Uint8Array.from(t)}var Jn=Ge?(t,e,r)=>r-e>64?globalThis.Buffer.from(t.subarray(e,r)).toString("utf8"):Qn(t,e,r):(t,e,r)=>r-e>64?Ka.decode(t.subarray(e,r)):Qn(t,e,r),Kn=Ge?t=>t.length>64?globalThis.Buffer.from(t):qn(t):t=>t.length>64?Za.encode(t):qn(t);var qe=Ge?(t,e,r)=>Ut(t)?new Uint8Array(t.subarray(e,r)):t.slice(e,r):(t,e,r)=>t.slice(e,r),Zn=Ge?(t,e)=>(t=t.map(r=>r instanceof Uint8Array?r:globalThis.Buffer.from(r)),Xn(globalThis.Buffer.concat(t,e))):(t,e)=>{let r=new Uint8Array(e),n=0;for(let i of t)n+i.length>r.length&&(i=i.subarray(0,r.length-n)),r.set(i,n),n+=i.length;return r},Yn=Ge?t=>globalThis.Buffer.allocUnsafe(t):t=>new Uint8Array(t);function ei(t,e){if(Ut(t)&&Ut(e))return t.compare(e);for(let r=0;r<t.length;r++)if(t[r]!==e[r])return t[r]<e[r]?-1:1;return 0}function qn(t){let e=[],r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e}function Qn(t,e,r){let n=[];for(;e<r;){let i=t[e],o=null,s=i>239?4:i>223?3:i>191?2:1;if(e+s<=r){let u,a,f,l;switch(s){case 1:i<128&&(o=i);break;case 2:u=t[e+1],(u&192)===128&&(l=(i&31)<<6|u&63,l>127&&(o=l));break;case 3:u=t[e+1],a=t[e+2],(u&192)===128&&(a&192)===128&&(l=(i&15)<<12|(u&63)<<6|a&63,l>2047&&(l<55296||l>57343)&&(o=l));break;case 4:u=t[e+1],a=t[e+2],f=t[e+3],(u&192)===128&&(a&192)===128&&(f&192)===128&&(l=(i&15)<<18|(u&63)<<12|(a&63)<<6|f&63,l>65535&&l<1114112&&(o=l))}}o===null?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),e+=s}return Ya(n)}var Wn=4096;function Ya(t){let e=t.length;if(e<=Wn)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=Wn));return r}var ec=256,Lt=class{constructor(e=ec){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let r=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){let i=r.length-(this.maxCursor-this.cursor)-1;r.set(e,i)}else{if(r){let i=r.length-(this.maxCursor-this.cursor)-1;i<r.length&&(this.chunks[this.chunks.length-1]=r.subarray(0,i),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(r=Yn(this.chunkSize),this.chunks.push(r),this.maxCursor+=r.length,this._initReuseChunk===null&&(this._initReuseChunk=r),r.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let r;if(this.chunks.length===1){let n=this.chunks[0];e&&this.cursor>n.length/2?(r=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):r=qe(n,0,this.cursor)}else r=Zn(this.chunks,this.cursor);return e&&this.reset(),r}};var T="CBOR decode error:",Nr="CBOR encode error:",at=[];at[23]=1;at[24]=2;at[25]=3;at[26]=5;at[27]=9;function ye(t,e,r){if(t.length-e<r)throw new Error(`${T} not enough data for type`)}var R=[24,256,65536,4294967296,BigInt("18446744073709551616")];function W(t,e,r){ye(t,e,1);let n=t[e];if(r.strict===!0&&n<R[0])throw new Error(`${T} integer encoded in more bytes than necessary (strict decode)`);return n}function X(t,e,r){ye(t,e,2);let n=t[e]<<8|t[e+1];if(r.strict===!0&&n<R[1])throw new Error(`${T} integer encoded in more bytes than necessary (strict decode)`);return n}function J(t,e,r){ye(t,e,4);let n=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];if(r.strict===!0&&n<R[2])throw new Error(`${T} integer encoded in more bytes than necessary (strict decode)`);return n}function K(t,e,r){ye(t,e,8);let n=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3],i=t[e+4]*16777216+(t[e+5]<<16)+(t[e+6]<<8)+t[e+7],o=(BigInt(n)<<BigInt(32))+BigInt(i);if(r.strict===!0&&o<R[3])throw new Error(`${T} integer encoded in more bytes than necessary (strict decode)`);if(o<=Number.MAX_SAFE_INTEGER)return Number(o);if(r.allowBigInt===!0)return o;throw new Error(`${T} integers outside of the safe integer range are not supported`)}function ti(t,e,r,n){return new b(d.uint,W(t,e+1,n),2)}function ri(t,e,r,n){return new b(d.uint,X(t,e+1,n),3)}function ni(t,e,r,n){return new b(d.uint,J(t,e+1,n),5)}function ii(t,e,r,n){return new b(d.uint,K(t,e+1,n),9)}function te(t,e){return H(t,0,e.value)}function H(t,e,r){if(r<R[0]){let n=Number(r);t.push([e|n])}else if(r<R[1]){let n=Number(r);t.push([e|24,n])}else if(r<R[2]){let n=Number(r);t.push([e|25,n>>>8,n&255])}else if(r<R[3]){let n=Number(r);t.push([e|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{let n=BigInt(r);if(n<R[4]){let i=[e|27,0,0,0,0,0,0,0],o=Number(n&BigInt(4294967295)),s=Number(n>>BigInt(32)&BigInt(4294967295));i[8]=o&255,o=o>>8,i[7]=o&255,o=o>>8,i[6]=o&255,o=o>>8,i[5]=o&255,i[4]=s&255,s=s>>8,i[3]=s&255,s=s>>8,i[2]=s&255,s=s>>8,i[1]=s&255,t.push(i)}else throw new Error(`${T} encountered BigInt larger than allowable range`)}}te.encodedSize=function(e){return H.encodedSize(e.value)};H.encodedSize=function(e){return e<R[0]?1:e<R[1]?2:e<R[2]?3:e<R[3]?5:9};te.compareTokens=function(e,r){return e.value<r.value?-1:e.value>r.value?1:0};function oi(t,e,r,n){return new b(d.negint,-1-W(t,e+1,n),2)}function si(t,e,r,n){return new b(d.negint,-1-X(t,e+1,n),3)}function ai(t,e,r,n){return new b(d.negint,-1-J(t,e+1,n),5)}var Pr=BigInt(-1),ci=BigInt(1);function ui(t,e,r,n){let i=K(t,e+1,n);if(typeof i!="bigint"){let o=-1-i;if(o>=Number.MIN_SAFE_INTEGER)return new b(d.negint,o,9)}if(n.allowBigInt!==!0)throw new Error(`${T} integers outside of the safe integer range are not supported`);return new b(d.negint,Pr-BigInt(i),9)}function zt(t,e){let r=e.value,n=typeof r=="bigint"?r*Pr-ci:r*-1-1;H(t,e.type.majorEncoded,n)}zt.encodedSize=function(e){let r=e.value,n=typeof r=="bigint"?r*Pr-ci:r*-1-1;return n<R[0]?1:n<R[1]?2:n<R[2]?3:n<R[3]?5:9};zt.compareTokens=function(e,r){return e.value<r.value?1:e.value>r.value?-1:0};function ct(t,e,r,n){ye(t,e,r+n);let i=qe(t,e+r,e+r+n);return new b(d.bytes,i,r+n)}function fi(t,e,r,n){return ct(t,e,1,r)}function li(t,e,r,n){return ct(t,e,2,W(t,e+1,n))}function hi(t,e,r,n){return ct(t,e,3,X(t,e+1,n))}function di(t,e,r,n){return ct(t,e,5,J(t,e+1,n))}function pi(t,e,r,n){let i=K(t,e+1,n);if(typeof i=="bigint")throw new Error(`${T} 64-bit integer bytes lengths not supported`);return ct(t,e,9,i)}function Ft(t){return t.encodedBytes===void 0&&(t.encodedBytes=t.type===d.string?Kn(t.value):t.value),t.encodedBytes}function Qe(t,e){let r=Ft(e);H(t,e.type.majorEncoded,r.length),t.push(r)}Qe.encodedSize=function(e){let r=Ft(e);return H.encodedSize(r.length)+r.length};Qe.compareTokens=function(e,r){return rc(Ft(e),Ft(r))};function rc(t,e){return t.length<e.length?-1:t.length>e.length?1:ei(t,e)}function ut(t,e,r,n,i){let o=r+n;ye(t,e,o);let s=new b(d.string,Jn(t,e+r,e+o),o);return i.retainStringBytes===!0&&(s.byteValue=qe(t,e+r,e+o)),s}function mi(t,e,r,n){return ut(t,e,1,r,n)}function yi(t,e,r,n){return ut(t,e,2,W(t,e+1,n),n)}function gi(t,e,r,n){return ut(t,e,3,X(t,e+1,n),n)}function wi(t,e,r,n){return ut(t,e,5,J(t,e+1,n),n)}function xi(t,e,r,n){let i=K(t,e+1,n);if(typeof i=="bigint")throw new Error(`${T} 64-bit integer string lengths not supported`);return ut(t,e,9,i,n)}var bi=Qe;function We(t,e,r,n){return new b(d.array,n,r)}function _i(t,e,r,n){return We(t,e,1,r)}function vi(t,e,r,n){return We(t,e,2,W(t,e+1,n))}function Ei(t,e,r,n){return We(t,e,3,X(t,e+1,n))}function ki(t,e,r,n){return We(t,e,5,J(t,e+1,n))}function Ai(t,e,r,n){let i=K(t,e+1,n);if(typeof i=="bigint")throw new Error(`${T} 64-bit integer array lengths not supported`);return We(t,e,9,i)}function Bi(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${T} indefinite length items not allowed`);return We(t,e,1,1/0)}function Ot(t,e){H(t,d.array.majorEncoded,e.value)}Ot.compareTokens=te.compareTokens;Ot.encodedSize=function(e){return H.encodedSize(e.value)};function Xe(t,e,r,n){return new b(d.map,n,r)}function Ti(t,e,r,n){return Xe(t,e,1,r)}function Si(t,e,r,n){return Xe(t,e,2,W(t,e+1,n))}function Ii(t,e,r,n){return Xe(t,e,3,X(t,e+1,n))}function Ni(t,e,r,n){return Xe(t,e,5,J(t,e+1,n))}function Pi(t,e,r,n){let i=K(t,e+1,n);if(typeof i=="bigint")throw new Error(`${T} 64-bit integer map lengths not supported`);return Xe(t,e,9,i)}function Di(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${T} indefinite length items not allowed`);return Xe(t,e,1,1/0)}function Mt(t,e){H(t,d.map.majorEncoded,e.value)}Mt.compareTokens=te.compareTokens;Mt.encodedSize=function(e){return H.encodedSize(e.value)};function Ci(t,e,r,n){return new b(d.tag,r,1)}function Ui(t,e,r,n){return new b(d.tag,W(t,e+1,n),2)}function Li(t,e,r,n){return new b(d.tag,X(t,e+1,n),3)}function zi(t,e,r,n){return new b(d.tag,J(t,e+1,n),5)}function Fi(t,e,r,n){return new b(d.tag,K(t,e+1,n),9)}function Rt(t,e){H(t,d.tag.majorEncoded,e.value)}Rt.compareTokens=te.compareTokens;Rt.encodedSize=function(e){return H.encodedSize(e.value)};var cc=20,uc=21,fc=22,lc=23;function Oi(t,e,r,n){if(n.allowUndefined===!1)throw new Error(`${T} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new b(d.null,null,1):new b(d.undefined,void 0,1)}function Mi(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${T} indefinite length items not allowed`);return new b(d.break,void 0,1)}function Dr(t,e,r){if(r){if(r.allowNaN===!1&&Number.isNaN(t))throw new Error(`${T} NaN values are not supported`);if(r.allowInfinity===!1&&(t===1/0||t===-1/0))throw new Error(`${T} Infinity values are not supported`)}return new b(d.float,t,e)}function Ri(t,e,r,n){return Dr(Cr(t,e+1),3,n)}function $i(t,e,r,n){return Dr(Ur(t,e+1),5,n)}function Hi(t,e,r,n){return Dr(qi(t,e+1),9,n)}function $t(t,e,r){let n=e.value;if(n===!1)t.push([d.float.majorEncoded|cc]);else if(n===!0)t.push([d.float.majorEncoded|uc]);else if(n===null)t.push([d.float.majorEncoded|fc]);else if(n===void 0)t.push([d.float.majorEncoded|lc]);else{let i,o=!1;(!r||r.float64!==!0)&&(ji(n),i=Cr(ie,1),n===i||Number.isNaN(n)?(ie[0]=249,t.push(ie.slice(0,3)),o=!0):(Gi(n),i=Ur(ie,1),n===i&&(ie[0]=250,t.push(ie.slice(0,5)),o=!0))),o||(hc(n),i=qi(ie,1),ie[0]=251,t.push(ie.slice(0,9)))}}$t.encodedSize=function(e,r){let n=e.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!r||r.float64!==!0){ji(n);let i=Cr(ie,1);if(n===i||Number.isNaN(n))return 3;if(Gi(n),i=Ur(ie,1),n===i)return 5}return 9};var Vi=new ArrayBuffer(9),re=new DataView(Vi,1),ie=new Uint8Array(Vi,0);function ji(t){if(t===1/0)re.setUint16(0,31744,!1);else if(t===-1/0)re.setUint16(0,64512,!1);else if(Number.isNaN(t))re.setUint16(0,32256,!1);else{re.setFloat32(0,t);let e=re.getUint32(0),r=(e&2139095040)>>23,n=e&8388607;if(r===255)re.setUint16(0,31744,!1);else if(r===0)re.setUint16(0,(t&2147483648)>>16|n>>13,!1);else{let i=r-127;i<-24?re.setUint16(0,0):i<-14?re.setUint16(0,(e&2147483648)>>16|1<<24+i,!1):re.setUint16(0,(e&2147483648)>>16|i+15<<10|n>>13,!1)}}}function Cr(t,e){if(t.length-e<2)throw new Error(`${T} not enough data for float16`);let r=(t[e]<<8)+t[e+1];if(r===31744)return 1/0;if(r===64512)return-1/0;if(r===32256)return NaN;let n=r>>10&31,i=r&1023,o;return n===0?o=i*2**-24:n!==31?o=(i+1024)*2**(n-25):o=i===0?1/0:NaN,r&32768?-o:o}function Gi(t){re.setFloat32(0,t,!1)}function Ur(t,e){if(t.length-e<4)throw new Error(`${T} not enough data for float32`);let r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,4).getFloat32(0,!1)}function hc(t){re.setFloat64(0,t,!1)}function qi(t,e){if(t.length-e<8)throw new Error(`${T} not enough data for float64`);let r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,8).getFloat64(0,!1)}$t.compareTokens=te.compareTokens;function D(t,e,r){throw new Error(`${T} encountered invalid minor (${r}) for major ${t[e]>>>5}`)}function Ht(t){return()=>{throw new Error(`${T} ${t}`)}}var g=[];for(let t=0;t<=23;t++)g[t]=D;g[24]=ti;g[25]=ri;g[26]=ni;g[27]=ii;g[28]=D;g[29]=D;g[30]=D;g[31]=D;for(let t=32;t<=55;t++)g[t]=D;g[56]=oi;g[57]=si;g[58]=ai;g[59]=ui;g[60]=D;g[61]=D;g[62]=D;g[63]=D;for(let t=64;t<=87;t++)g[t]=fi;g[88]=li;g[89]=hi;g[90]=di;g[91]=pi;g[92]=D;g[93]=D;g[94]=D;g[95]=Ht("indefinite length bytes/strings are not supported");for(let t=96;t<=119;t++)g[t]=mi;g[120]=yi;g[121]=gi;g[122]=wi;g[123]=xi;g[124]=D;g[125]=D;g[126]=D;g[127]=Ht("indefinite length bytes/strings are not supported");for(let t=128;t<=151;t++)g[t]=_i;g[152]=vi;g[153]=Ei;g[154]=ki;g[155]=Ai;g[156]=D;g[157]=D;g[158]=D;g[159]=Bi;for(let t=160;t<=183;t++)g[t]=Ti;g[184]=Si;g[185]=Ii;g[186]=Ni;g[187]=Pi;g[188]=D;g[189]=D;g[190]=D;g[191]=Di;for(let t=192;t<=215;t++)g[t]=Ci;g[216]=Ui;g[217]=Li;g[218]=zi;g[219]=Fi;g[220]=D;g[221]=D;g[222]=D;g[223]=D;for(let t=224;t<=243;t++)g[t]=Ht("simple values are not supported");g[244]=D;g[245]=D;g[246]=D;g[247]=Oi;g[248]=Ht("simple values are not supported");g[249]=Ri;g[250]=$i;g[251]=Hi;g[252]=D;g[253]=D;g[254]=D;g[255]=Mi;var oe=[];for(let t=0;t<24;t++)oe[t]=new b(d.uint,t,1);for(let t=-1;t>=-24;t--)oe[31-t]=new b(d.negint,t,1);oe[64]=new b(d.bytes,new Uint8Array(0),1);oe[96]=new b(d.string,"",1);oe[128]=new b(d.array,0,1);oe[160]=new b(d.map,0,1);oe[244]=new b(d.false,!1,1);oe[245]=new b(d.true,!0,1);oe[246]=new b(d.null,null,1);function pc(){let t=[];return t[d.uint.major]=te,t[d.negint.major]=zt,t[d.bytes.major]=Qe,t[d.string.major]=bi,t[d.array.major]=Ot,t[d.map.major]=Mt,t[d.tag.major]=Rt,t[d.float.major]=$t,t}var ol=pc(),sl=new Lt,Vt=class t{constructor(e,r){this.obj=e,this.parent=r}includes(e){let r=this;do if(r.obj===e)return!0;while(r=r.parent);return!1}static createCheck(e,r){if(e&&e.includes(r))throw new Error(`${Nr} object contains circular references`);return new t(r,e)}},be={null:new b(d.null,null),undefined:new b(d.undefined,void 0),true:new b(d.true,!0),false:new b(d.false,!1),emptyArray:new b(d.array,0),emptyMap:new b(d.map,0)},_e={number(t,e,r,n){return!Number.isInteger(t)||!Number.isSafeInteger(t)?new b(d.float,t):t>=0?new b(d.uint,t):new b(d.negint,t)},bigint(t,e,r,n){return t>=BigInt(0)?new b(d.uint,t):new b(d.negint,t)},Uint8Array(t,e,r,n){return new b(d.bytes,t)},string(t,e,r,n){return new b(d.string,t)},boolean(t,e,r,n){return t?be.true:be.false},null(t,e,r,n){return be.null},undefined(t,e,r,n){return be.undefined},ArrayBuffer(t,e,r,n){return new b(d.bytes,new Uint8Array(t))},DataView(t,e,r,n){return new b(d.bytes,new Uint8Array(t.buffer,t.byteOffset,t.byteLength))},Array(t,e,r,n){if(!t.length)return r.addBreakTokens===!0?[be.emptyArray,new b(d.break)]:be.emptyArray;n=Vt.createCheck(n,t);let i=[],o=0;for(let s of t)i[o++]=Lr(s,r,n);return r.addBreakTokens?[new b(d.array,t.length),i,new b(d.break)]:[new b(d.array,t.length),i]},Object(t,e,r,n){let i=e!=="Object",o=i?t.keys():Object.keys(t),s=i?t.size:o.length;if(!s)return r.addBreakTokens===!0?[be.emptyMap,new b(d.break)]:be.emptyMap;n=Vt.createCheck(n,t);let u=[],a=0;for(let f of o)u[a++]=[Lr(f,r,n),Lr(i?t.get(f):t[f],r,n)];return mc(u,r),r.addBreakTokens?[new b(d.map,s),u,new b(d.break)]:[new b(d.map,s),u]}};_e.Map=_e.Object;_e.Buffer=_e.Uint8Array;for(let t of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))_e[`${t}Array`]=_e.DataView;function Lr(t,e={},r){let n=Gn(t),i=e&&e.typeEncoders&&e.typeEncoders[n]||_e[n];if(typeof i=="function"){let s=i(t,n,e,r);if(s!=null)return s}let o=_e[n];if(!o)throw new Error(`${Nr} unsupported type: ${n}`);return o(t,n,e,r)}function mc(t,e){e.mapSorter&&t.sort(e.mapSorter)}var yc={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},zr=class{constructor(e,r={}){this._pos=0,this.data=e,this.options=r}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){let e=this.data[this._pos],r=oe[e];if(r===void 0){let n=g[e];if(!n)throw new Error(`${T} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);let i=e&31;r=n(this.data,this._pos,i,this.options)}return this._pos+=r.encodedLength,r}},ft=Symbol.for("DONE"),jt=Symbol.for("BREAK");function gc(t,e,r){let n=[];for(let i=0;i<t.value;i++){let o=lt(e,r);if(o===jt){if(t.value===1/0)break;throw new Error(`${T} got unexpected break to lengthed array`)}if(o===ft)throw new Error(`${T} found array but not enough entries (got ${i}, expected ${t.value})`);n[i]=o}return n}function wc(t,e,r){let n=r.useMaps===!0,i=n?void 0:{},o=n?new Map:void 0;for(let s=0;s<t.value;s++){let u=lt(e,r);if(u===jt){if(t.value===1/0)break;throw new Error(`${T} got unexpected break to lengthed map`)}if(u===ft)throw new Error(`${T} found map but not enough entries (got ${s} [no key], expected ${t.value})`);if(n!==!0&&typeof u!="string")throw new Error(`${T} non-string keys not supported (got ${typeof u})`);if(r.rejectDuplicateMapKeys===!0&&(n&&o.has(u)||!n&&u in i))throw new Error(`${T} found repeat map key "${u}"`);let a=lt(e,r);if(a===ft)throw new Error(`${T} found map but not enough entries (got ${s} [no value], expected ${t.value})`);n?o.set(u,a):i[u]=a}return n?o:i}function lt(t,e){if(t.done())return ft;let r=t.next();if(r.type===d.break)return jt;if(r.type.terminal)return r.value;if(r.type===d.array)return gc(r,t,e);if(r.type===d.map)return wc(r,t,e);if(r.type===d.tag){if(e.tags&&typeof e.tags[r.value]=="function"){let n=lt(t,e);return e.tags[r.value](n)}throw new Error(`${T} tag not supported (${r.value})`)}throw new Error("unsupported")}function Qi(t,e){if(!(t instanceof Uint8Array))throw new Error(`${T} data to decode must be a Uint8Array`);e=Object.assign({},yc,e);let r=e.tokenizer||new zr(t,e),n=lt(r,e);if(n===ft)throw new Error(`${T} did not find any content to decode`);if(n===jt)throw new Error(`${T} got unexpected break`);return[n,t.subarray(r.pos())]}function Fr(t,e){let[r,n]=Qi(t,e);if(n.length>0)throw new Error(`${T} too many terminals, data makes no sense`);return r}var _c=42;function vc(t){if(t[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return j.decode(t.subarray(1))}var Wi={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};Wi.tags[_c]=vc;var Xi=113;var Ji=t=>Fr(t,Wi);var Ec=new TextDecoder;function Or(t,e){let r=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(e>=t.length)throw new Error("protobuf: unexpected end of data");let i=t[e++];if(r+=n<28?(i&127)<<n:(i&127)*2**n,i<128)break}return[r,e]}function Gt(t,e){let r;[r,e]=Or(t,e);let n=e+r;if(r<0||n<0)throw new Error("protobuf: invalid length");if(n>t.length)throw new Error("protobuf: unexpected end of data");return[t.subarray(e,n),n]}function Zi(t,e){let r;return[r,e]=Or(t,e),[r&7,r>>3,e]}function kc(t){let e={},r=t.length,n=0;for(;n<r;){let i,o;if([i,o,n]=Zi(t,n),o===1){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Hash`);if(e.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,n]=Gt(t,n)}else if(o===2){if(e.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Name`);if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let s;[s,n]=Gt(t,n),e.Name=Ec.decode(s)}else if(o===3){if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(i!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Tsize`);[e.Tsize,n]=Or(t,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${o}`)}if(n>r)throw new Error("protobuf: (PBLink) unexpected end of data");return e}function Yi(t){let e=t.length,r=0,n,i=!1,o;for(;r<e;){let u,a;if([u,a,r]=Zi(t,r),u!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${u}`);if(a===1){if(o)throw new Error("protobuf: (PBNode) duplicate Data section");[o,r]=Gt(t,r),n&&(i=!0)}else if(a===2){if(i)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let f;[f,r]=Gt(t,r),n.push(kc(f))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${a}`)}if(r>e)throw new Error("protobuf: (PBNode) unexpected end of data");let s={};return o&&(s.Data=o),s.Links=n||[],s}var gl=new TextEncoder,wl=2**32,xl=2**31;var vl=new TextEncoder;var qt=112;function ve(t){let e=Yi(t),r={};return e.Data&&(r.Data=e.Data),e.Links&&(r.Links=e.Links.map(n=>{let i={};try{i.Hash=j.decode(n.Hash)}catch{}if(!i.Hash)throw new Error("Invalid Hash field found in link, expected CID");return n.Name!==void 0&&(i.Name=n.Name),n.Tsize!==void 0&&(i.Tsize=n.Tsize),i})),r}var Qs=O(ee(),1);var Qt=85;var $r={};Q($r,{identity:()=>Rr});var to=0,Ac="identity",ro=le,Bc=t=>Te(to,ro(t)),Rr={code:to,name:Ac,encode:ro,digest:Bc};var no=O(ee(),1);var Tc=async(t,e,r,n,i,o,s,u)=>{let a=await s.get(t,u),f=Ji(a),l=f,p=r;for(;n.length>0;){let E=n[0];if(E in l){n.shift(),p=`${p}/${E}`;let c=j.asCID(l[E]);if(c!=null)return{entry:{type:"object",name:e,path:r,cid:t,node:a,depth:o,size:BigInt(a.length),content:async function*(){yield f}},next:{cid:c,name:E,path:p,toResolve:n}};l=l[E]}else throw(0,no.default)(new Error(`No property named ${E} found in cbor node ${t}`),"ERR_NO_PROP")}return{entry:{type:"object",name:e,path:r,cid:t,node:a,depth:o,size:BigInt(a.length),content:async function*(){yield f}}}},io=Tc;var oo=O(ee(),1);var G=class extends Event{constructor(e,r){super(e),this.detail=r}};function Sc(t,e,r,n){let i=BigInt(t.length),o=BigInt(e+i);return r>=o||n<e?new Uint8Array(0):(n>=e&&n<o&&(t=t.subarray(0,Number(n-e))),r>=e&&r<o&&(t=t.subarray(Number(r-e))),t)}var Ie=Sc;var ht=O(ee(),1),Ic=(t,e=0,r=t)=>{let n=BigInt(t),i=BigInt(e??0),o=BigInt(r);if(o!==n&&(o=i+o),o>n&&(o=n),i<0n)throw(0,ht.default)(new Error("Offset must be greater than or equal to 0"),"ERR_INVALID_PARAMS");if(i>n)throw(0,ht.default)(new Error("Offset must be less than the file size"),"ERR_INVALID_PARAMS");if(o<0n)throw(0,ht.default)(new Error("Length must be greater than or equal to 0"),"ERR_INVALID_PARAMS");if(o>n)throw(0,ht.default)(new Error("Length must be less than the file size"),"ERR_INVALID_PARAMS");return{start:i,end:o}},Je=Ic;var Nc=t=>{async function*e(r={}){let{start:n,end:i}=Je(t.length,r.offset,r.length),o=Ie(t,0n,n,i);r.onProgress?.(new G("unixfs:exporter:progress:identity",{bytesRead:BigInt(o.byteLength),totalBytes:i-n,fileSize:BigInt(t.byteLength)})),yield o}return e},Pc=async(t,e,r,n,i,o,s,u)=>{if(n.length>0)throw(0,oo.default)(new Error(`No link named ${r} found in raw node ${t}`),"ERR_NOT_FOUND");let a=Ct(t.multihash.bytes);return{entry:{type:"identity",name:e,path:r,cid:t,content:Nc(a.digest),depth:o,size:BigInt(a.digest.length),node:a.digest}}},so=Pc;var ao=O(ee(),1);var Dc=t=>{async function*e(r={}){let{start:n,end:i}=Je(t.length,r.offset,r.length),o=Ie(t,0n,n,i);r.onProgress?.(new G("unixfs:exporter:progress:raw",{bytesRead:BigInt(o.byteLength),totalBytes:i-n,fileSize:BigInt(t.byteLength)})),yield o}return e},Cc=async(t,e,r,n,i,o,s,u)=>{if(n.length>0)throw(0,ao.default)(new Error(`No link named ${r} found in raw node ${t}`),"ERR_NOT_FOUND");let a=await s.get(t,u);return{entry:{type:"raw",name:e,path:r,cid:t,content:Dc(a),depth:o,size:BigInt(a.length),node:a}}},co=Cc;var Tt=O(ee(),1);var sn=O(ee(),1);var en=O(qr(),1),Jo=O(Ho(),1),Ko=O(Pe(),1),tn=O(Yr(),1),Zo=O(Xo(),1);function Hc(){Ko.default._configure(),en.default._configure(Jo.default),tn.default._configure(Zo.default)}Hc();var Yo=["uint64","int64","sint64","fixed64","sfixed64"];function Vc(t){for(let e of Yo){if(t[e]==null)continue;let r=t[e];t[e]=function(){return BigInt(r.call(this).toString())}}return t}function rn(t){return Vc(new en.default(t))}function jc(t){for(let e of Yo){if(t[e]==null)continue;let r=t[e];t[e]=function(n){return r.call(this,n.toString())}}return t}function nn(){return jc(tn.default.create())}function mt(t,e){let r=rn(t instanceof Uint8Array?t:t.subarray());return e.decode(r)}function yt(t,e){let r=nn();return e.encode(t,r,{lengthDelimited:!1}),r.finish()}var Ze;(function(t){t[t.VARINT=0]="VARINT",t[t.BIT64=1]="BIT64",t[t.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",t[t.START_GROUP=3]="START_GROUP",t[t.END_GROUP=4]="END_GROUP",t[t.BIT32=5]="BIT32"})(Ze||(Ze={}));function Zt(t,e,r,n){return{name:t,type:e,encode:r,decode:n}}function on(t){function e(i){if(t[i.toString()]==null)throw new Error("Invalid enum value");return t[i]}let r=function(o,s){let u=e(o);s.int32(u)},n=function(o){let s=o.int32();return e(s)};return Zt("enum",Ze.VARINT,r,n)}function gt(t,e){return Zt("message",Ze.LENGTH_DELIMITED,t,e)}var ue;(function(t){let e;(function(i){i.Raw="Raw",i.Directory="Directory",i.File="File",i.Metadata="Metadata",i.Symlink="Symlink",i.HAMTShard="HAMTShard"})(e=t.DataType||(t.DataType={}));let r;(function(i){i[i.Raw=0]="Raw",i[i.Directory=1]="Directory",i[i.File=2]="File",i[i.Metadata=3]="Metadata",i[i.Symlink=4]="Symlink",i[i.HAMTShard=5]="HAMTShard"})(r||(r={})),function(i){i.codec=()=>on(r)}(e=t.DataType||(t.DataType={}));let n;t.codec=()=>(n==null&&(n=gt((i,o,s={})=>{if(s.lengthDelimited!==!1&&o.fork(),i.Type!=null&&(o.uint32(8),t.DataType.codec().encode(i.Type,o)),i.Data!=null&&(o.uint32(18),o.bytes(i.Data)),i.filesize!=null&&(o.uint32(24),o.uint64(i.filesize)),i.blocksizes!=null)for(let u of i.blocksizes)o.uint32(32),o.uint64(u);i.hashType!=null&&(o.uint32(40),o.uint64(i.hashType)),i.fanout!=null&&(o.uint32(48),o.uint64(i.fanout)),i.mode!=null&&(o.uint32(56),o.uint32(i.mode)),i.mtime!=null&&(o.uint32(66),Yt.codec().encode(i.mtime,o)),s.lengthDelimited!==!1&&o.ldelim()},(i,o)=>{let s={blocksizes:[]},u=o==null?i.len:i.pos+o;for(;i.pos<u;){let a=i.uint32();switch(a>>>3){case 1:s.Type=t.DataType.codec().decode(i);break;case 2:s.Data=i.bytes();break;case 3:s.filesize=i.uint64();break;case 4:s.blocksizes.push(i.uint64());break;case 5:s.hashType=i.uint64();break;case 6:s.fanout=i.uint64();break;case 7:s.mode=i.uint32();break;case 8:s.mtime=Yt.codec().decode(i,i.uint32());break;default:i.skipType(a&7);break}}return s})),n),t.encode=i=>yt(i,t.codec()),t.decode=i=>mt(i,t.codec())})(ue||(ue={}));var Yt;(function(t){let e;t.codec=()=>(e==null&&(e=gt((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.Seconds!=null&&(n.uint32(8),n.int64(r.Seconds)),r.FractionalNanoseconds!=null&&(n.uint32(21),n.fixed32(r.FractionalNanoseconds)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={},o=n==null?r.len:r.pos+n;for(;r.pos<o;){let s=r.uint32();switch(s>>>3){case 1:i.Seconds=r.int64();break;case 2:i.FractionalNanoseconds=r.fixed32();break;default:r.skipType(s&7);break}}return i})),e),t.encode=r=>yt(r,t.codec()),t.decode=r=>mt(r,t.codec())})(Yt||(Yt={}));var es;(function(t){let e;t.codec=()=>(e==null&&(e=gt((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.MimeType!=null&&(n.uint32(10),n.string(r.MimeType)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={},o=n==null?r.len:r.pos+n;for(;r.pos<o;){let s=r.uint32();switch(s>>>3){case 1:i.MimeType=r.string();break;default:r.skipType(s&7);break}}return i})),e),t.encode=r=>yt(r,t.codec()),t.decode=r=>mt(r,t.codec())})(es||(es={}));var ts={Raw:"raw",Directory:"directory",File:"file",Metadata:"metadata",Symlink:"symlink",HAMTShard:"hamt-sharded-directory"},Gc=["directory","hamt-sharded-directory"],rs=parseInt("0644",8),ns=parseInt("0755",8),pe=class t{static unmarshal(e){let r=ue.decode(e),n=new t({type:ts[r.Type!=null?r.Type.toString():"File"],data:r.Data,blockSizes:r.blocksizes,mode:r.mode,mtime:r.mtime!=null?{secs:r.mtime.Seconds??0n,nsecs:r.mtime.FractionalNanoseconds}:void 0,fanout:r.fanout});return n._originalMode=r.mode??0,n}type;data;blockSizes;hashType;fanout;mtime;_mode;_originalMode;constructor(e={type:"file"}){let{type:r,data:n,blockSizes:i,hashType:o,fanout:s,mtime:u,mode:a}=e;if(r!=null&&!Object.values(ts).includes(r))throw(0,sn.default)(new Error("Type: "+r+" is not valid"),"ERR_INVALID_TYPE");this.type=r??"file",this.data=n,this.hashType=o,this.fanout=s,this.blockSizes=i??[],this._originalMode=0,this.mode=a,this.mtime=u}set mode(e){e==null?this._mode=this.isDirectory()?ns:rs:this._mode=e&4095}get mode(){return this._mode}isDirectory(){return Gc.includes(this.type)}addBlockSize(e){this.blockSizes.push(e)}removeBlockSize(e){this.blockSizes.splice(e,1)}fileSize(){if(this.isDirectory())return 0n;let e=0n;return this.blockSizes.forEach(r=>{e+=r}),this.data!=null&&(e+=BigInt(this.data.length)),e}marshal(){let e;switch(this.type){case"raw":e=ue.DataType.Raw;break;case"directory":e=ue.DataType.Directory;break;case"file":e=ue.DataType.File;break;case"metadata":e=ue.DataType.Metadata;break;case"symlink":e=ue.DataType.Symlink;break;case"hamt-sharded-directory":e=ue.DataType.HAMTShard;break;default:throw(0,sn.default)(new Error(`Type: ${e} is not valid`),"ERR_INVALID_TYPE")}let r=this.data;(this.data==null||this.data.length===0)&&(r=void 0);let n;this.mode!=null&&(n=this._originalMode&4294963200|(this.mode??0),n===rs&&!this.isDirectory()&&(n=void 0),n===ns&&this.isDirectory()&&(n=void 0));let i;return this.mtime!=null&&(i={Seconds:this.mtime.secs,FractionalNanoseconds:this.mtime.nsecs}),ue.encode({Type:e,Data:r,filesize:this.isDirectory()?void 0:this.fileSize(),blocksizes:this.blockSizes,hashType:this.hashType,fanout:this.fanout,mode:n,mtime:i})}};var Ce=({name:t,code:e,encode:r})=>new an(t,e,r),an=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?Te(this.code,r):r.then(n=>Te(this.code,n))}else throw Error("Unknown type, must be binary type")}};var tr=O(as(),1);function qc(t){let e=new Array(4);for(let r=0;r<4;r++)e[r]=t&255,t=t>>8;return new Uint8Array(e)}var Dh=Ce({name:"murmur3-32",code:35,encode:t=>qc(tr.default.x86.hash32(t))}),cs=Ce({name:"murmur3-128",code:34,encode:t=>Oe.fromHex(tr.default.x64.hash128(t))}),Ch=Ce({name:"murmur3-x64-64",code:34,encode:t=>Oe.fromHex(tr.default.x64.hash128(t)).subarray(0,8)});var xt=O(ee(),1);var ws=O(ls(),1);function Ye(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}var cn={};Q(cn,{base10:()=>Jc});var Jc=xe({prefix:"9",name:"base10",alphabet:"0123456789"});var un={};Q(un,{base16:()=>Kc,base16upper:()=>Zc});var Kc=L({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Zc=L({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var fn={};Q(fn,{base2:()=>Yc});var Yc=L({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var ln={};Q(ln,{base256emoji:()=>iu});var hs=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),eu=hs.reduce((t,e,r)=>(t[r]=e,t),[]),tu=hs.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function ru(t){return t.reduce((e,r)=>(e+=eu[r],e),"")}function nu(t){let e=[];for(let r of t){let n=tu[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}var iu=Me({prefix:"\u{1F680}",name:"base256emoji",encode:ru,decode:nu});var hn={};Q(hn,{base36:()=>ou,base36upper:()=>su});var ou=xe({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),su=xe({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var dn={};Q(dn,{base64:()=>au,base64pad:()=>cu,base64url:()=>uu,base64urlpad:()=>fu});var au=L({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),cu=L({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),uu=L({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),fu=L({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var pn={};Q(pn,{base8:()=>lu});var lu=L({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var mn={};Q(mn,{identity:()=>hu});var hu=Me({prefix:"\0",name:"identity",encode:t=>_r(t),decode:t=>br(t)});var Qh=new TextEncoder,Wh=new TextDecoder;var yn={};Q(yn,{sha256:()=>pu,sha512:()=>mu});var ds=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),pu=Ce({name:"sha2-256",code:18,encode:ds("SHA-256")}),mu=Ce({name:"sha2-512",code:19,encode:ds("SHA-512")});var gn={...mn,...fn,...pn,...cn,...un,...Br,...hn,...Tr,...dn,...ln},Kh={...yn,...$r};function rr(t=0){return globalThis.Buffer?.allocUnsafe!=null?Ye(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function ms(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}var ps=ms("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),wn=ms("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=rr(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),yu={utf8:ps,"utf-8":ps,hex:gn.base16,latin1:wn,ascii:wn,binary:wn,...gn},ys=yu;function gs(t,e="utf8"){let r=ys[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Ye(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}var Ue=class t{constructor(e,r,n=0){this._options=e,this._popCount=0,this._parent=r,this._posAtParent=n,this._children=new ws.default,this.key=null}async put(e,r){let n=await this._findNewBucketAndPos(e);await n.bucket._putAt(n,e,r)}async get(e){let r=await this._findChild(e);if(r!=null)return r.value}async del(e){let r=await this._findPlace(e),n=r.bucket._at(r.pos);n!=null&&n.key===e&&r.bucket._delAt(r.pos)}leafCount(){return this._children.compactArray().reduce((r,n)=>n instanceof t?r+n.leafCount():r+1,0)}childrenCount(){return this._children.length}onlyChild(){return this._children.get(0)}*eachLeafSeries(){let e=this._children.compactArray();for(let r of e)r instanceof t?yield*r.eachLeafSeries():yield r}serialize(e,r){let n=[];return r(this._children.reduce((i,o,s)=>(o!=null&&(o instanceof t?i.push(o.serialize(e,r)):i.push(e(o,s))),i),n))}async asyncTransform(e,r){return await xs(this,e,r)}toJSON(){return this.serialize(wu,xu)}prettyPrint(){return JSON.stringify(this.toJSON(),null,"  ")}tableSize(){return Math.pow(2,this._options.bits)}async _findChild(e){let r=await this._findPlace(e),n=r.bucket._at(r.pos);if(!(n instanceof t)&&n!=null&&n.key===e)return n}async _findPlace(e){let r=this._options.hash(typeof e=="string"?gs(e):e),n=await r.take(this._options.bits),i=this._children.get(n);return i instanceof t?await i._findPlace(r):{bucket:this,pos:n,hash:r,existingChild:i}}async _findNewBucketAndPos(e){let r=await this._findPlace(e);if(r.existingChild!=null&&r.existingChild.key!==e){let n=new t(this._options,r.bucket,r.pos);r.bucket._putObjectAt(r.pos,n);let i=await n._findPlace(r.existingChild.hash);return i.bucket._putAt(i,r.existingChild.key,r.existingChild.value),await n._findNewBucketAndPos(r.hash)}return r}_putAt(e,r,n){this._putObjectAt(e.pos,{key:r,value:n,hash:e.hash})}_putObjectAt(e,r){this._children.get(e)==null&&this._popCount++,this._children.set(e,r)}_delAt(e){if(e===-1)throw new Error("Invalid position");this._children.get(e)!=null&&this._popCount--,this._children.unset(e),this._level()}_level(){if(this._parent!=null&&this._popCount<=1)if(this._popCount===1){let e=this._children.find(gu);if(e!=null&&!(e instanceof t)){let r=e.hash;r.untake(this._options.bits);let n={pos:this._posAtParent,hash:r,bucket:this._parent};this._parent._putAt(n,e.key,e.value)}}else this._parent._delAt(this._posAtParent)}_at(e){return this._children.get(e)}};function gu(t){return!!t}function wu(t,e){return t.key}function xu(t){return t}async function xs(t,e,r){let n=[];for(let i of t._children.compactArray())if(i instanceof Ue)await xs(i,e,r);else{let o=await e(i);n.push({bitField:t._children.bitField(),children:o})}return await r(n)}var bu=[255,254,252,248,240,224,192,128],_u=[1,3,7,15,31,63,127,255],nr=class{constructor(e){this._value=e,this._currentBytePos=e.length-1,this._currentBitPos=7}availableBits(){return this._currentBitPos+1+this._currentBytePos*8}totalBits(){return this._value.length*8}take(e){let r=e,n=0;for(;r>0&&this._haveBits();){let i=this._value[this._currentBytePos],o=this._currentBitPos+1,s=Math.min(o,r),u=vu(i,o-s,s);n=(n<<s)+u,r-=s,this._currentBitPos-=s,this._currentBitPos<0&&(this._currentBitPos=7,this._currentBytePos--)}return n}untake(e){for(this._currentBitPos+=e;this._currentBitPos>7;)this._currentBitPos-=8,this._currentBytePos+=1}_haveBits(){return this._currentBytePos>=0}};function vu(t,e,r){let n=Eu(e,r);return(t&n)>>>e}function Eu(t,e){return bu[t]&_u[Math.min(e+t-1,7)]}function bs(t,e){e==null&&(e=t.reduce((i,o)=>i+o.length,0));let r=rr(e),n=0;for(let i of t)r.set(i,n),n+=i.length;return Ye(r)}function _s(t){function e(r){return r instanceof ir?r:new ir(r,t)}return e}var ir=class{constructor(e,r){if(!(e instanceof Uint8Array))throw new Error("can only hash Uint8Arrays");this._value=e,this._hashFn=r,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}async take(e){let r=e;for(;this._availableBits<r;)await this._produceMoreBits();let n=0;for(;r>0;){let i=this._buffers[this._currentBufferIndex],o=Math.min(i.availableBits(),r),s=i.take(o);n=(n<<o)+s,r-=o,this._availableBits-=o,i.availableBits()===0&&this._currentBufferIndex++}return n}untake(e){let r=e;for(;r>0;){let n=this._buffers[this._currentBufferIndex],i=Math.min(n.totalBits()-n.availableBits(),r);n.untake(i),r-=i,this._availableBits+=i,this._currentBufferIndex>0&&n.totalBits()===n.availableBits()&&(this._depth--,this._currentBufferIndex--)}}async _produceMoreBits(){this._depth++;let e=this._depth>0?bs([this._value,Uint8Array.from([this._depth])]):this._value,r=await this._hashFn(e),n=new nr(r);this._buffers.push(n),this._availableBits+=n.availableBits()}};function vs(t){if(t==null||t.hashFn==null)throw new Error("please define an options.hashFn");let e={bits:t.bits??8,hash:_s(t.hashFn)};return new Ue(e)}var ku=async function(t){return(await cs.encode(t)).slice(0,8).reverse()},Au=async(t,e,r)=>{let n=(e.tableSize()-1).toString(16).length;await Promise.all(t.map(async i=>{if(i.Name==null)throw new Error("Unexpected Link without a Name");if(i.Name.length===n){let o=parseInt(i.Name,16);e._putObjectAt(o,new Ue({hash:r._options.hash,bits:r._options.bits},e,o));return}await r.put(i.Name.substring(2),!0)}))},Es=(t,e)=>t.toString(16).toUpperCase().padStart(e,"0").substring(0,e),Bu=t=>{let e=t.bucket,r=[];for(;e._parent!=null;)r.push(e),e=e._parent;return r.push(e),r.reverse()},ks=async(t,e,r,n,i)=>{if(n==null){if(t.Data==null)throw(0,xt.default)(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");let p;try{p=pe.unmarshal(t.Data)}catch(c){throw(0,xt.default)(c,"ERR_NOT_UNIXFS")}if(p.type!=="hamt-sharded-directory")throw(0,xt.default)(new Error("not a HAMT"),"ERR_NOT_UNIXFS");if(p.fanout==null)throw(0,xt.default)(new Error("missing fanout"),"ERR_NOT_UNIXFS");let E=vs({hashFn:ku,bits:Math.log2(Number(p.fanout))});n={rootBucket:E,hamtDepth:1,lastBucket:E}}let o=(n.lastBucket.tableSize()-1).toString(16).length;await Au(t.Links,n.lastBucket,n.rootBucket);let s=await n.rootBucket._findNewBucketAndPos(e),u=Es(s.pos,o),a=Bu(s);a.length>n.hamtDepth&&(n.lastBucket=a[n.hamtDepth],u=Es(n.lastBucket._posAtParent,o));let f=t.Links.find(p=>{if(p.Name==null)return!1;let E=p.Name.substring(0,o),c=p.Name.substring(o);return!(E!==u||c!==""&&c!==e)});if(f==null)return;if(f.Name!=null&&f.Name.substring(o)===e)return f.Hash;n.hamtDepth++;let l=await r.get(f.Hash,i);return t=ve(l),ks(t,e,r,n,i)},As=ks;function Tu(t){let[e,r]=t[Symbol.asyncIterator]!=null?[t[Symbol.asyncIterator](),Symbol.asyncIterator]:[t[Symbol.iterator](),Symbol.iterator],n=[];return{peek:()=>e.next(),push:i=>{n.push(i)},next:()=>n.length>0?{done:!1,value:n.shift()}:e.next(),[r](){return this}}}var or=Tu;function Su(t){return t[Symbol.asyncIterator]!=null}function Iu(t,e){if(Su(t))return async function*(){for await(let u of t)await e(u)&&(yield u)}();let r=or(t),{value:n,done:i}=r.next();if(i===!0)return function*(){}();let o=e(n);if(typeof o.then=="function")return async function*(){await o&&(yield n);for await(let u of r)await e(u)&&(yield u)}();let s=e;return function*(){o===!0&&(yield n);for(let u of r)s(u)&&(yield u)}()}var Bs=Iu;function Nu(t){return t[Symbol.asyncIterator]!=null}function Pu(t,e){if(Nu(t))return async function*(){for await(let u of t)yield e(u)}();let r=or(t),{value:n,done:i}=r.next();if(i===!0)return function*(){}();let o=e(n);if(typeof o.then=="function")return async function*(){yield await o;for await(let u of r)yield e(u)}();let s=e;return function*(){yield o;for(let u of r)yield s(u)}()}var et=Pu;function ge(){let t={};return t.promise=new Promise((e,r)=>{t.resolve=e,t.reject=r}),t}var sr=globalThis.CustomEvent??Event;async function*Le(t,e={}){let r=e.concurrency??1/0;r<1&&(r=1/0);let n=e.ordered==null?!1:e.ordered,i=new EventTarget,o=[],s=ge(),u=ge(),a=!1,f,l=!1;i.addEventListener("task-complete",()=>{u.resolve()}),Promise.resolve().then(async()=>{try{for await(let h of t){if(o.length===r&&(s=ge(),await s.promise),l)break;let m={done:!1};o.push(m),h().then(S=>{m.done=!0,m.ok=!0,m.value=S,i.dispatchEvent(new sr("task-complete"))},S=>{m.done=!0,m.err=S,i.dispatchEvent(new sr("task-complete"))})}a=!0,i.dispatchEvent(new sr("task-complete"))}catch(h){f=h,i.dispatchEvent(new sr("task-complete"))}});function p(){return n?o[0]?.done:!!o.find(h=>h.done)}function*E(){for(;o.length>0&&o[0].done;){let h=o[0];if(o.shift(),h.ok)yield h.value;else throw l=!0,s.resolve(),h.err;s.resolve()}}function*c(){for(;p();)for(let h=0;h<o.length;h++)if(o[h].done){let m=o[h];if(o.splice(h,1),h--,m.ok)yield m.value;else throw l=!0,s.resolve(),m.err;s.resolve()}}for(;;){if(p()||(u=ge(),await u.promise),f!=null)throw f;if(n?yield*E():yield*c(),a&&o.length===0)break}}var ar=class{buffer;mask;top;btm;next;constructor(e){if(!(e>0)||e-1&e)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return this.buffer[this.btm]===void 0}},tt=class{size;hwm;head;tail;constructor(e={}){this.hwm=e.splitLimit??16,this.head=new ar(this.hwm),this.tail=this.head,this.size=0}calculateSize(e){return e?.byteLength!=null?e.byteLength:1}push(e){if(e?.value!=null&&(this.size+=this.calculateSize(e.value)),!this.head.push(e)){let r=this.head;this.head=r.next=new ar(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next!=null){let r=this.tail.next;this.tail.next=null,this.tail=r,e=this.tail.shift()}return e?.value!=null&&(this.size-=this.calculateSize(e.value)),e}isEmpty(){return this.head.isEmpty()}};var xn=class extends Error{type;code;constructor(e,r){super(e??"The operation was aborted"),this.type="aborted",this.code=r??"ABORT_ERR"}};function rt(t={}){return Du(r=>{let n=r.shift();if(n==null)return{done:!0};if(n.error!=null)throw n.error;return{done:n.done===!0,value:n.value}},t)}function Du(t,e){e=e??{};let r=e.onEnd,n=new tt,i,o,s,u=ge(),a=async()=>{try{return n.isEmpty()?s?{done:!0}:await new Promise((S,y)=>{o=w=>{o=null,n.push(w);try{S(t(n))}catch(x){y(x)}return i}}):t(n)}finally{n.isEmpty()&&queueMicrotask(()=>{u.resolve(),u=ge()})}},f=S=>o!=null?o(S):(n.push(S),i),l=S=>(n=new tt,o!=null?o({error:S}):(n.push({error:S}),i)),p=S=>{if(s)return i;if(e?.objectMode!==!0&&S?.byteLength==null)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return f({done:!1,value:S})},E=S=>s?i:(s=!0,S!=null?l(S):f({done:!0})),c=()=>(n=new tt,E(),{done:!0}),h=S=>(E(S),{done:!0});if(i={[Symbol.asyncIterator](){return this},next:a,return:c,throw:h,push:p,end:E,get readableLength(){return n.size},onEmpty:async S=>{let y=S?.signal;if(y?.throwIfAborted(),n.isEmpty())return;let w,x;y!=null&&(w=new Promise((v,B)=>{x=()=>{B(new xn)},y.addEventListener("abort",x)}));try{await Promise.race([u.promise,w])}finally{x!=null&&y!=null&&y?.removeEventListener("abort",x)}}},r==null)return i;let m=i;return i={[Symbol.asyncIterator](){return this},next(){return m.next()},throw(S){return m.throw(S),r!=null&&(r(S),r=void 0),{done:!0}},return(){return m.return(),r!=null&&(r(),r=void 0),{done:!0}},push:p,end(S){return m.end(S),r!=null&&(r(S),r=void 0),i},get readableLength(){return m.readableLength}},i}function Cu(t){return t[Symbol.asyncIterator]!=null}function Uu(...t){let e=[];for(let r of t)Cu(r)||e.push(r);return e.length===t.length?function*(){for(let r of e)yield*r}():async function*(){let r=rt({objectMode:!0});Promise.resolve().then(async()=>{try{await Promise.all(t.map(async n=>{for await(let i of n)r.push(i)})),r.end()}catch(n){r.end(n)}}),yield*r}()}var Ts=Uu;function nt(t,...e){if(t==null)throw new Error("Empty pipeline");if(bn(t)){let n=t;t=()=>n.source}else if(Is(t)||Ss(t)){let n=t;t=()=>n}let r=[t,...e];if(r.length>1&&bn(r[r.length-1])&&(r[r.length-1]=r[r.length-1].sink),r.length>2)for(let n=1;n<r.length-1;n++)bn(r[n])&&(r[n]=zu(r[n]));return Lu(...r)}var Lu=(...t)=>{let e;for(;t.length>0;)e=t.shift()(e);return e},Ss=t=>t?.[Symbol.asyncIterator]!=null,Is=t=>t?.[Symbol.iterator]!=null,bn=t=>t==null?!1:t.sink!=null&&t.source!=null,zu=t=>e=>{let r=t.sink(e);if(r?.then!=null){let n=rt({objectMode:!0});r.then(()=>{n.end()},s=>{n.end(s)});let i,o=t.source;if(Ss(o))i=async function*(){yield*o,n.end()};else if(Is(o))i=function*(){yield*o,n.end()};else throw new Error("Unknown duplex source type - must be Iterable or AsyncIterable");return Ts(n,i())}return t.source};var Fu=(t,e,r,n,i,o,s)=>{async function*u(a={}){let f=a.offset??0,l=a.length??e.Links.length,p=e.Links.slice(f,l);a.onProgress?.(new G("unixfs:exporter:walk:directory",{cid:t})),yield*nt(p,E=>et(E,c=>async()=>{let h=c.Name??"",m=`${n}/${h}`;return(await i(c.Hash,h,m,[],o+1,s,a)).entry}),E=>Le(E,{ordered:!0}),E=>Bs(E,c=>c!=null))}return u},Ns=Fu;var Fe=O(ee(),1);var vn=O(Ds(),1);var _t=class extends Error{constructor(e){super(e),this.name="TimeoutError"}},En=class extends Error{constructor(e){super(),this.name="AbortError",this.message=e}},Cs=t=>globalThis.DOMException===void 0?new En(t):new DOMException(t),Us=t=>{let e=t.reason===void 0?Cs("This operation was aborted."):t.reason;return e instanceof Error?e:Cs(e)};function kn(t,e,r,n){let i,o=new Promise((s,u)=>{if(typeof e!="number"||Math.sign(e)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${e}\``);if(e===Number.POSITIVE_INFINITY){s(t);return}if(n={customTimers:{setTimeout,clearTimeout},...n},n.signal){let{signal:a}=n;a.aborted&&u(Us(a)),a.addEventListener("abort",()=>{u(Us(a))})}i=n.customTimers.setTimeout.call(void 0,()=>{if(typeof r=="function"){try{s(r())}catch(l){u(l)}return}let a=typeof r=="string"?r:`Promise timed out after ${e} milliseconds`,f=r instanceof Error?r:new _t(a);typeof t.cancel=="function"&&t.cancel(),u(f)},e),(async()=>{try{s(await t)}catch(a){u(a)}finally{n.customTimers.clearTimeout.call(void 0,i)}})()});return o.clear=()=>{clearTimeout(i),i=void 0},o}function An(t,e,r){let n=0,i=t.length;for(;i>0;){let o=Math.trunc(i/2),s=n+o;r(t[s],e)<=0?(n=++s,i-=o+1):i=o}return n}var ze=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},we,Bn=class{constructor(){we.set(this,[])}enqueue(e,r){r={priority:0,...r};let n={priority:r.priority,run:e};if(this.size&&ze(this,we,"f")[this.size-1].priority>=r.priority){ze(this,we,"f").push(n);return}let i=An(ze(this,we,"f"),n,(o,s)=>s.priority-o.priority);ze(this,we,"f").splice(i,0,n)}dequeue(){let e=ze(this,we,"f").shift();return e?.run}filter(e){return ze(this,we,"f").filter(r=>r.priority===e.priority).map(r=>r.run)}get size(){return ze(this,we,"f").length}};we=new WeakMap;var Ls=Bn;var U=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},k=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},F,Et,kt,Be,pr,At,ur,fe,vt,Z,fr,Y,Bt,Ae,lr,zs,Fs,Rs,Os,Ms,hr,Tn,Sn,mr,$s,dr,yr=class extends Error{},In=class extends vn.default{constructor(e){var r,n,i,o;if(super(),F.add(this),Et.set(this,void 0),kt.set(this,void 0),Be.set(this,0),pr.set(this,void 0),At.set(this,void 0),ur.set(this,0),fe.set(this,void 0),vt.set(this,void 0),Z.set(this,void 0),fr.set(this,void 0),Y.set(this,0),Bt.set(this,void 0),Ae.set(this,void 0),lr.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:Ls,...e},!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(n=(r=e.intervalCap)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(o=(i=e.interval)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""}\` (${typeof e.interval})`);U(this,Et,e.carryoverConcurrencyCount,"f"),U(this,kt,e.intervalCap===Number.POSITIVE_INFINITY||e.interval===0,"f"),U(this,pr,e.intervalCap,"f"),U(this,At,e.interval,"f"),U(this,Z,new e.queueClass,"f"),U(this,fr,e.queueClass,"f"),this.concurrency=e.concurrency,this.timeout=e.timeout,U(this,lr,e.throwOnTimeout===!0,"f"),U(this,Ae,e.autoStart===!1,"f")}get concurrency(){return k(this,Bt,"f")}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);U(this,Bt,e,"f"),k(this,F,"m",mr).call(this)}async add(e,r={}){return r={timeout:this.timeout,throwOnTimeout:k(this,lr,"f"),...r},new Promise((n,i)=>{k(this,Z,"f").enqueue(async()=>{var o,s,u;U(this,Y,(s=k(this,Y,"f"),s++,s),"f"),U(this,Be,(u=k(this,Be,"f"),u++,u),"f");try{if(!((o=r.signal)===null||o===void 0)&&o.aborted)throw new yr("The task was aborted.");let a=e({signal:r.signal});r.timeout&&(a=kn(Promise.resolve(a),r.timeout)),r.signal&&(a=Promise.race([a,k(this,F,"m",$s).call(this,r.signal)]));let f=await a;n(f),this.emit("completed",f)}catch(a){if(a instanceof _t&&!r.throwOnTimeout){n();return}i(a),this.emit("error",a)}finally{k(this,F,"m",Rs).call(this)}},r),this.emit("add"),k(this,F,"m",hr).call(this)})}async addAll(e,r){return Promise.all(e.map(async n=>this.add(n,r)))}start(){return k(this,Ae,"f")?(U(this,Ae,!1,"f"),k(this,F,"m",mr).call(this),this):this}pause(){U(this,Ae,!0,"f")}clear(){U(this,Z,new(k(this,fr,"f")),"f")}async onEmpty(){k(this,Z,"f").size!==0&&await k(this,F,"m",dr).call(this,"empty")}async onSizeLessThan(e){k(this,Z,"f").size<e||await k(this,F,"m",dr).call(this,"next",()=>k(this,Z,"f").size<e)}async onIdle(){k(this,Y,"f")===0&&k(this,Z,"f").size===0||await k(this,F,"m",dr).call(this,"idle")}get size(){return k(this,Z,"f").size}sizeBy(e){return k(this,Z,"f").filter(e).length}get pending(){return k(this,Y,"f")}get isPaused(){return k(this,Ae,"f")}};Et=new WeakMap,kt=new WeakMap,Be=new WeakMap,pr=new WeakMap,At=new WeakMap,ur=new WeakMap,fe=new WeakMap,vt=new WeakMap,Z=new WeakMap,fr=new WeakMap,Y=new WeakMap,Bt=new WeakMap,Ae=new WeakMap,lr=new WeakMap,F=new WeakSet,zs=function(){return k(this,kt,"f")||k(this,Be,"f")<k(this,pr,"f")},Fs=function(){return k(this,Y,"f")<k(this,Bt,"f")},Rs=function(){var e;U(this,Y,(e=k(this,Y,"f"),e--,e),"f"),k(this,F,"m",hr).call(this),this.emit("next")},Os=function(){k(this,F,"m",Sn).call(this),k(this,F,"m",Tn).call(this),U(this,vt,void 0,"f")},Ms=function(){let e=Date.now();if(k(this,fe,"f")===void 0){let r=k(this,ur,"f")-e;if(r<0)U(this,Be,k(this,Et,"f")?k(this,Y,"f"):0,"f");else return k(this,vt,"f")===void 0&&U(this,vt,setTimeout(()=>{k(this,F,"m",Os).call(this)},r),"f"),!0}return!1},hr=function(){if(k(this,Z,"f").size===0)return k(this,fe,"f")&&clearInterval(k(this,fe,"f")),U(this,fe,void 0,"f"),this.emit("empty"),k(this,Y,"f")===0&&this.emit("idle"),!1;if(!k(this,Ae,"f")){let e=!k(this,F,"a",Ms);if(k(this,F,"a",zs)&&k(this,F,"a",Fs)){let r=k(this,Z,"f").dequeue();return r?(this.emit("active"),r(),e&&k(this,F,"m",Tn).call(this),!0):!1}}return!1},Tn=function(){k(this,kt,"f")||k(this,fe,"f")!==void 0||(U(this,fe,setInterval(()=>{k(this,F,"m",Sn).call(this)},k(this,At,"f")),"f"),U(this,ur,Date.now()+k(this,At,"f"),"f"))},Sn=function(){k(this,Be,"f")===0&&k(this,Y,"f")===0&&k(this,fe,"f")&&(clearInterval(k(this,fe,"f")),U(this,fe,void 0,"f")),U(this,Be,k(this,Et,"f")?k(this,Y,"f"):0,"f"),k(this,F,"m",mr).call(this)},mr=function(){for(;k(this,F,"m",hr).call(this););},$s=async function(e){return new Promise((r,n)=>{e.addEventListener("abort",()=>{n(new yr("The task was aborted."))},{once:!0})})},dr=async function(e,r){return new Promise(n=>{let i=()=>{r&&!r()||(this.off(e,i),n())};this.on(e,i)})};var Hs=In;async function Vs(t,e,r,n,i,o,s){if(e instanceof Uint8Array){let f=Ie(e,n,i,o);r.push(f);return}if(e.Data==null)throw(0,Fe.default)(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");let u;try{u=pe.unmarshal(e.Data)}catch(f){throw(0,Fe.default)(f,"ERR_NOT_UNIXFS")}if(u.data!=null){let f=u.data,l=Ie(f,n,i,o);r.push(l),n+=BigInt(l.byteLength)}let a=[];if(e.Links.length!==u.blockSizes.length)throw(0,Fe.default)(new Error("Inconsistent block sizes and dag links"),"ERR_NOT_UNIXFS");for(let f=0;f<e.Links.length;f++){let l=e.Links[f],p=n,E=p+u.blockSizes[f];if((i>=p&&i<E||o>=p&&o<=E||i<p&&o>E)&&a.push({link:l,blockStart:n}),n=E,n>o)break}await nt(a,f=>et(f,l=>async()=>{let p=await t.get(l.link.Hash,s);return{...l,block:p}}),f=>Le(f,{ordered:!0}),async f=>{for await(let{link:l,block:p,blockStart:E}of f){let c;switch(l.Hash.code){case qt:c=ve(p);break;case Qt:c=p;break;default:r.end((0,Fe.default)(new Error(`Unsupported codec: ${l.Hash.code}`),"ERR_NOT_UNIXFS"));return}let h=new Hs({concurrency:1});h.on("error",m=>{r.end(m)}),h.add(async()=>{s.onProgress?.(new G("unixfs:exporter:walk:file",{cid:l.Hash})),await Vs(t,c,r,E,i,o,s)}),await h.onIdle()}}),n>=o&&r.end()}var Ru=(t,e,r,n,i,o,s)=>{async function*u(a={}){let f=r.fileSize();if(f===void 0)throw new Error("File was a directory");let{start:l,end:p}=Je(f,a.offset,a.length);if(p===0n)return;let E=0n,c=p-l,h=rt();a.onProgress?.(new G("unixfs:exporter:walk:file",{cid:t})),Vs(s,e,h,0n,l,p,a).catch(m=>{h.end(m)});for await(let m of h)if(m!=null){if(E+=BigInt(m.byteLength),E>c)throw h.end(),(0,Fe.default)(new Error("Read too many bytes - the file size reported by the UnixFS data in the root node may be incorrect"),"ERR_OVER_READ");E===c&&h.end(),a.onProgress?.(new G("unixfs:exporter:progress:unixfs:file",{bytesRead:E,totalBytes:c,fileSize:f})),yield m}if(E<c)throw(0,Fe.default)(new Error("Traversed entire DAG but did not read enough bytes"),"ERR_UNDER_READ")}return u},Nn=Ru;var gr=O(ee(),1);var $u=(t,e,r,n,i,o,s)=>{function u(a={}){return a.onProgress?.(new G("unixfs:exporter:walk:hamt-sharded-directory",{cid:t})),js(e,n,i,o,s,a)}return u};async function*js(t,e,r,n,i,o){let s=t.Links;if(t.Data==null)throw(0,gr.default)(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");let u;try{u=pe.unmarshal(t.Data)}catch(l){throw(0,gr.default)(l,"ERR_NOT_UNIXFS")}if(u.fanout==null)throw(0,gr.default)(new Error("missing fanout"),"ERR_NOT_UNIXFS");let a=(u.fanout-1n).toString(16).length,f=nt(s,l=>et(l,p=>async()=>{let E=p.Name!=null?p.Name.substring(a):null;if(E!=null&&E!==""){let c=await r(p.Hash,E,`${e}/${E}`,[],n+1,i,o);return{entries:c.entry==null?[]:[c.entry]}}else{let c=await i.get(p.Hash,o);return t=ve(c),o.onProgress?.(new G("unixfs:exporter:walk:hamt-sharded-directory",{cid:p.Hash})),{entries:js(t,e,r,n,i,o)}}}),l=>Le(l,{ordered:!0}));for await(let{entries:l}of f)yield*l}var Gs=$u;var Hu=(t,e)=>t.Links.find(n=>n.Name===e)?.Hash,Vu={raw:Nn,file:Nn,directory:Ns,"hamt-sharded-directory":Gs,metadata:(t,e,r,n,i,o,s)=>()=>[],symlink:(t,e,r,n,i,o,s)=>()=>[]},ju=async(t,e,r,n,i,o,s,u)=>{let a=await s.get(t,u),f=ve(a),l,p;if(e==null&&(e=t.toString()),f.Data==null)throw(0,Tt.default)(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");try{l=pe.unmarshal(f.Data)}catch(c){throw(0,Tt.default)(c,"ERR_NOT_UNIXFS")}if(r==null&&(r=e),n.length>0){let c;if(l?.type==="hamt-sharded-directory"?c=await As(f,n[0],s):c=Hu(f,n[0]),c==null)throw(0,Tt.default)(new Error("file does not exist"),"ERR_NOT_FOUND");let h=n.shift(),m=`${r}/${h}`;p={cid:c,toResolve:n,name:h??"",path:m}}let E=Vu[l.type](t,f,l,r,i,o,s);if(E==null)throw(0,Tt.default)(new Error("could not find content exporter"),"ERR_NOT_FOUND");return l.isDirectory()?{entry:{type:"directory",name:e,path:r,cid:t,content:E,unixfs:l,depth:o,node:f,size:l.fileSize()},next:p}:{entry:{type:"file",name:e,path:r,cid:t,content:E,unixfs:l,depth:o,node:f,size:l.fileSize()},next:p}},qs=ju;var Gu={[qt]:qs,[Qt]:co,[Xi]:io,[Rr.code]:so},Ws=async(t,e,r,n,i,o,s)=>{let u=Gu[t.code];if(u==null)throw(0,Qs.default)(new Error(`No resolver for code ${t.code}`),"ERR_NO_RESOLVER");return u(t,e,r,n,Ws,i,o,s)},Xs=Ws;var qu=(t="")=>(t.trim().match(/([^\\^/]|\\\/)+/g)??[]).filter(Boolean),Qu=t=>{if(t instanceof Uint8Array)return{cid:j.decode(t),toResolve:[]};let e=j.asCID(t);if(e!=null)return{cid:e,toResolve:[]};if(typeof t=="string"){t.indexOf("/ipfs/")===0&&(t=t.substring(6));let r=qu(t);return{cid:j.parse(r[0]),toResolve:r.slice(1)}}throw(0,wr.default)(new Error(`Unknown path type ${t}`),"ERR_BAD_PATH")};async function*Js(t,e,r={}){let{cid:n,toResolve:i}=Qu(t),o=n.toString(),s=o,u=i.length;for(;;){let a=await Xs(n,o,s,i,u,e,r);if(a.entry==null&&a.next==null)throw(0,wr.default)(new Error(`Could not resolve ${t}`),"ERR_NOT_FOUND");if(a.entry!=null&&(yield a.entry),a.next==null)return;i=a.next.toResolve,n=a.next.cid,o=a.next.name,s=a.next.path}}async function Ks(t,e,r={}){let n=await Un(Js(t,e,r));if(n==null)throw(0,wr.default)(new Error(`Could not resolve ${t}`),"ERR_NOT_FOUND");return n}async function*Wu(t,e,r={}){let n=await Ks(t,e,r);if(n==null)return;if(yield n,n.type==="directory")for await(let o of i(n,r))yield o;async function*i(o,s){for await(let u of o.content(s))yield u,!(u instanceof Uint8Array)&&u.type==="directory"&&(yield*i(u,s))}}return na(Xu);})();
return IpfsUnixfsExporter}));
